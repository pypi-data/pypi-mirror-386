    name: Publish Python package to PyPI

    on:
      workflow_dispatch:
      release:
        types: [published]

    jobs:
      pypi-publish:
        name: Upload release to PyPI
        runs-on: ubuntu-latest
        environment:
          name: pypi
          url: https://pypi.org/project/qolsys-controller/ 
        permissions:
          id-token: write # Required for PyPI Trusted Publishers
        steps:
          - uses: actions/checkout@v4
          - name: Set up Python
            uses: actions/setup-python@v5
            with:
              python-version: "3.12"
          - name: Install build dependencies
            run: python -m pip install build
          - name: Build package
            run: python -m build
          - name: Publish package to PyPI
            uses: pypa/gh-action-pypi-publish@release/v1