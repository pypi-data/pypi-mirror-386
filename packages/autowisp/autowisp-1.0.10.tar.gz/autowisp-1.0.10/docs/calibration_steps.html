

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Image Calibration &mdash; AutoWISP  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/unlimited_width.css?v=eea1f72d" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            AutoWISP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#run-the-tests-optional">Run the Tests (optional)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_data.html">Example Usage: Processing the test data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Create-a-temporary-directory-to-work-in-(remember-to-delete-it-at-the-end),-enter-it,-and-get-its-path">Create a temporary directory to work in (remember to delete it at the end), enter it, and get its path</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Download-the-test-data">Download the test data</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-the-calibration-for-the-zero-frames">Perform the calibration for the zero frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Create-a-master-bias-by-stacking-the-calibrated-zero-frames">Create a master bias by stacking the calibrated zero frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-the-calibration-for-the-dark-frames">Perform the calibration for the dark frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Create-a-master-dark-by-stacking-the-calibrated-dark-images">Create a master dark by stacking the calibrated dark images</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-calibration-for-flat-frames">Perform calibration for flat frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Build-a-master-flat-out-of-the-individual-calibrated-flat-frames">Build a master flat out of the individual calibrated flat frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-calibration-for-object-frames">Perform calibration for object frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Find-stars-in-the-calibrated-object-frames">Find stars in the calibrated object frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-astrometry-on-DR-files">Perform astrometry on DR files</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-PSF/PRF-fitting">Perform PSF/PRF fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-aperture-photometry">Perform aperture photometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Run-fit-source-extracted-PSF-map">Run fit source extracted PSF map</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-magnitude-fitting">Perform magnitude fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Create-light-curves">Create light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-EPD-on-light-curves">Perform EPD on light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Generate-EPD-statistics-file-for-light-curves">Generate EPD statistics file for light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Perform-TFA-on-light-curves">Perform TFA on light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Generate-TFA-statistics-file-for-light-curves">Generate TFA statistics file for light curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_data.html#Extract-brightness-vs-time-from-lightcurves">Extract brightness vs time from lightcurves</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="processing_steps.html">Pipeline Steps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#split-raw-frames-by-type">Split Raw Frames by Type:</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#image-calibration">1. Image Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#find-stars">2. Find Stars</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#astrometry">3. Astrometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#prf-psf-fitting">4. PRF/PSF Fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#aperture-photometry">5. Aperture Photometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#fit-psf-map-to-extracted-stars">6. Fit PSF Map to Extracted Stars</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#magnitude-fitting">7. Magnitude fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#creating-lightcurves">8. Creating Lightcurves</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#external-parameter-decorrelation-epd">9. External Parameter Decorrelation (EPD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing_steps.html#trend-filtering-algorithm-tfa">10. Trend Filtering Algorithm (TFA)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wisp_options.html">Configuration Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation/autowisp.html">autowisp package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="implementation/autowisp.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="implementation/autowisp.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="implementation/autowisp.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AutoWISP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">1. Image Calibration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/calibration_steps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="image-calibration">
<h1>1. Image Calibration<a class="headerlink" href="#image-calibration" title="Link to this heading"></a></h1>
<p><strong>Commands:</strong> <code class="docutils literal notranslate"><span class="pre">wisp-calibrate</span></code>, <code class="docutils literal notranslate"><span class="pre">wisp-stack-to-master</span></code>,
<code class="docutils literal notranslate"><span class="pre">wisp-stack-to-master-flat</span></code></p>
<section id="important-parameters">
<h2>Important Parameters<a class="headerlink" href="#important-parameters" title="Link to this heading"></a></h2>
<p>The most important parameters to set for the calibration are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="wisp_options.html#cmdoption-arg-exposure-start-utc"><code class="xref std std-option docutils literal notranslate"><span class="pre">exposure-start-utc</span></code></a> or <a class="reference internal" href="wisp_options.html#cmdoption-arg-exposure-start-jd"><code class="xref std std-option docutils literal notranslate"><span class="pre">exposure-start-jd</span></code></a></p></li>
<li><p><a class="reference internal" href="wisp_options.html#cmdoption-arg-exposure-seconds"><code class="xref std std-option docutils literal notranslate"><span class="pre">exposure-seconds</span></code></a></p></li>
<li><p><a class="reference internal" href="wisp_options.html#cmdoption-arg-saturation-threshold"><code class="xref std std-option docutils literal notranslate"><span class="pre">saturation-threshold</span></code></a></p></li>
<li><p><a class="reference internal" href="wisp_options.html#cmdoption-arg-fnum"><code class="xref std std-option docutils literal notranslate"><span class="pre">fnum</span></code></a></p></li>
<li><p><a class="reference internal" href="wisp_options.html#cmdoption-arg-image-area"><code class="xref std std-option docutils literal notranslate"><span class="pre">image-area</span></code></a>: If your camera generates images with overscan or
other areas that are not part of the image.</p></li>
<li><p><code class="xref std std-option docutils literal notranslate"><span class="pre">split-channels</span></code> or <a class="reference internal" href="wisp_options.html#cmdoption-arg-raw-hdu"><code class="xref std std-option docutils literal notranslate"><span class="pre">raw-hdu</span></code></a>: If using a color
detector</p></li>
<li><p><a class="reference internal" href="wisp_options.html#cmdoption-arg-gain"><code class="xref std std-option docutils literal notranslate"><span class="pre">gain</span></code></a>: If known. Used for accurate error estimates.</p></li>
</ul>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>Before raw images are used, they need to be calibrated. The sequence of steps
is:</p>
<blockquote>
<div><dl class="simple">
<dt>calibrate the raw bias images</dt><dd><p>Accomplished using <code class="docutils literal notranslate"><span class="pre">wisp-calibrate</span></code> command with no master files
specified with raw bias images as input.</p>
</dd>
<dt>generate master bias image</dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">wisp-stack-to-master</span></code> command with the calibrated bias images as
input.</p>
</dd>
<dt>calibrate raw dark images using the master bias</dt><dd><p><code class="docutils literal notranslate"><span class="pre">wisp-calibrate</span></code> with the <a class="reference internal" href="wisp_options.html#cmdoption-arg-master-bias"><code class="xref std std-option docutils literal notranslate"><span class="pre">master-bias</span></code></a> option set to the
master bias file generated in the step above.</p>
</dd>
<dt>generate master dark image</dt><dd><p>Just like generating master bias but using the calibrated dark images.</p>
</dd>
<dt>calibrate the raw flat images</dt><dd><p><code class="docutils literal notranslate"><span class="pre">wisp-calibrate</span></code> with the <a class="reference internal" href="wisp_options.html#cmdoption-arg-master-bias"><code class="xref std std-option docutils literal notranslate"><span class="pre">master-bias</span></code></a> option set to the
master bias file and the <a class="reference internal" href="wisp_options.html#cmdoption-arg-master-dark"><code class="xref std std-option docutils literal notranslate"><span class="pre">master-dark</span></code></a> option set to the master
dark.</p>
</dd>
<dt>generate master flat image(s)</dt><dd><p><code class="docutils literal notranslate"><span class="pre">wisp-stack-to-master-flat</span></code> command. This is different from how master
bias and dark are created, because AutoWISP is designed to allow using
sky flats, which may be affected by clouds, or the sky is not perfectly
uniformly bright.</p>
</dd>
<dt>calibrate raw object images</dt><dd><p><code class="docutils literal notranslate"><span class="pre">wisp-calibrate</span></code> with <a class="reference internal" href="wisp_options.html#cmdoption-arg-master-bias"><code class="xref std std-option docutils literal notranslate"><span class="pre">master-bias</span></code></a>,
<a class="reference internal" href="wisp_options.html#cmdoption-arg-master-dark"><code class="xref std std-option docutils literal notranslate"><span class="pre">master-dark</span></code></a>, and <a class="reference internal" href="wisp_options.html#cmdoption-arg-master-flat"><code class="xref std std-option docutils literal notranslate"><span class="pre">master-flat</span></code></a> all specified.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="no-calibration-data">
<h2>No Calibration Data?<a class="headerlink" href="#no-calibration-data" title="Link to this heading"></a></h2>
<p>In case calibration data is not available, only the last of these steps needs to
be performed, with no masters specified (see below). Even though in this case
the pixels values will not be corrected for any of the effects described above,
this step is still needed. It will add change the data format (float point
instead of integer), add required information in the headher, split the
different colors if using a color camera etc.</p>
</section>
<section id="overscan-corrections">
<h2>Overscan Corrections<a class="headerlink" href="#overscan-corrections" title="Link to this heading"></a></h2>
<p>In many instances, the imaging device provides extra areas that attempt to
measure bias level and dark current, e.g. by continuing to read pixels past the
physical number of pixels in the device, thus measuring the bias or by having an
area of pixels which are somehow shielded from light, thus measuring the dark
level in real time. Such corrections can be supierior to the master frames in
that they measure the instantaneous bias and dark level, which may vary over
time due to for example the temperature of the detector varying. However, bias
level and dark current in particular can vary from pixel to pixel, which is not
captured by these real-time areas. Hence, the best strategy is a combination of
both, and is different for different detectors.</p>
<p>AutoWISP allows (but does not require) such areas to be used to estimate
some smooth function of image position to subtract from each raw image, and then
the masters are applied to the result. This works mathematically, because the
masters will also have their values corrected for the bias and dark measured by
these areas from the individual frames that were used to construct them. In this
scheme, the master frames are used only to capture the pixel to pixel
differences in bias and dark current. We refer to these areas as “overscan”,
although that term really means only one type of such area.</p>
<p>Overscan area(s) can be specified using the <a class="reference internal" href="wisp_options.html#cmdoption-arg-overscans"><code class="xref std std-option docutils literal notranslate"><span class="pre">overscans</span></code></a> option of the
<code class="docutils literal notranslate"><span class="pre">wisp-calibrate</span></code> command.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Kaloyan Penev.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>