test_case_id: "artifact_inline_bytes_success_001"
description: "Tests that an inline file (FileWithBytes) is correctly received and processed by the agent."
tags: ["all", "common"]
skip_intermediate_events: true

gateway_input:
  target_agent_name: "TestAgent"
  user_identity: "inline_bytes_user@test.com"
  external_context:
    a2a_session_id: "inline_bytes_session_001"
  a2a_parts:
    - type: "text"
      text: "Summarize this file for me."
    - type: "file"
      name: "report.txt"
      mime_type: "text/plain"
      # "Hello, inline world!" base64 encoded
      bytes_base64: "SGVsbG8sIGlubGluZSB3b3JsZCE="

llm_interactions:
  - expected_request:
      prompt_contains_artifact_summary_for:
        - filename: "report.txt"
          version: 0
    static_response:
      choices:
        - message:
            role: "assistant"
            content: "The file 'report.txt' contains a greeting."

expected_artifacts:
  - filename: "report.txt"
    version: 0
    mime_type: "text/plain"
    content_base64_exact: "SGVsbG8sIGlubGluZSB3b3JsZCE="

expected_gateway_output:
  - type: "final_response"
    content_parts:
      - type: "text"
        text_contains: "The file 'report.txt' contains a greeting."
