{% load wagtailcore_tags wagtailimages_tags %}

<section class="podcast-spotify 
    podcast-spotify--{{ value.layout_tipo }}
    podcast-spotify--{{ value.espacamento_secao }}"
    style="
        {% if value.imagem_fundo %}
            background-image: url('{% image value.imagem_fundo fill-1920x800 %}');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        {% endif %}
        background-color: {{ value.cor_fundo }};
    ">
    
    <div class="container">
        <div class="row align-items-center">
            
            {% if value.layout_tipo == 'texto-topo' %}
                <!-- Layout: Texto no topo -->
                <div class="col-12 mb-5">
                    <div class="podcast-spotify__content">
                        <!-- Título -->
                        {% if value.titulo %}
                            <h2 class="podcast-spotify__titulo mb-4" 
                                style="color: {{ value.cor_titulo }}; font-weight: bold; font-size: 2.5rem; line-height: 1.2;">
                                {{ value.titulo }}
                            </h2>
                        {% endif %}
                        
                        <!-- Descrição -->
                        {% if value.descricao %}
                            <div class="podcast-spotify__descricao mb-4" 
                                 style="color: {{ value.cor_descricao }}; font-size: 1.1rem; line-height: 1.6;">
                                {{ value.descricao }}
                            </div>
                        {% endif %}
                        
                        <!-- Botão -->
                        {% if value.mostrar_botao and value.texto_botao %}
                            <div class="podcast-spotify__botao">
                                <a href="{% if value.link_botao %}{{ value.link_botao }}{% elif value.pagina_interna_botao %}{% pageurl value.pagina_interna_botao %}{% else %}#{% endif %}"
                                   class="btn btn-podcast"
                                   {% if value.abrir_nova_aba_botao %}target="_blank" rel="noopener"{% endif %}
                                   style="
                                       {% if value.tipo_botao == 'preenchido' %}
                                           background-color: {{ value.cor_fundo_botao }};
                                           color: {{ value.cor_texto_botao }};
                                           border: 2px solid {{ value.cor_fundo_botao }};
                                       {% elif value.tipo_botao == 'outline' %}
                                           background-color: transparent;
                                           color: {{ value.cor_texto_botao }};
                                           border: 2px solid {{ value.cor_borda_botao }};
                                       {% else %}
                                           background-color: transparent;
                                           color: {{ value.cor_texto_botao }};
                                           border: none;
                                       {% endif %}
                                       --hover-bg: {{ value.cor_hover_fundo_botao }};
                                   "
                                   onmouseover="this.style.backgroundColor=this.style.getPropertyValue('--hover-bg');"
                                   onmouseout="
                                       {% if value.tipo_botao == 'preenchido' %}
                                           this.style.backgroundColor='{{ value.cor_fundo_botao }}';
                                       {% else %}
                                           this.style.backgroundColor='transparent';
                                       {% endif %}
                                   ">
                                    {{ value.texto_botao }}
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-12">
                    <!-- Player Spotify -->
                    <div class="podcast-spotify__player">
                        {% if value.spotify_titulo %}
                            <h3 class="podcast-spotify__player-titulo mb-3" 
                                style="color: {{ value.cor_titulo_spotify }};">
                                {{ value.spotify_titulo }}
                            </h3>
                        {% endif %}
                        
                        <div class="spotify-embed" 
                             style="
                                 border-radius: {{ value.border_radius_player }};
                                 overflow: hidden;
                                 {% if value.sombra_player %}
                                     box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                                 {% endif %}
                             ">
                            {{ value.spotify_embed_code|safe }}
                        </div>
                    </div>
                </div>
                
            {% else %}
                <!-- Layouts: Lado a lado -->
                
                {% if value.layout_tipo == 'texto-esquerda' %}
                    <!-- Texto à esquerda -->
                    <div class="col-12 col-lg-6 order-1">
                {% else %}
                    <!-- Texto à direita -->
                    <div class="col-12 col-lg-6 order-2 order-lg-2">
                {% endif %}
                        <div class="podcast-spotify__content">
                            <!-- Título -->
                            {% if value.titulo %}
                                <h2 class="podcast-spotify__titulo mb-4" 
                                    style="color: {{ value.cor_titulo }}; font-weight: bold; font-size: 2.5rem; line-height: 1.2;">
                                    {{ value.titulo }}
                                </h2>
                            {% endif %}
                            
                            <!-- Descrição -->
                            {% if value.descricao %}
                                <div class="podcast-spotify__descricao mb-4" 
                                     style="color: {{ value.cor_descricao }}; font-size: 1.1rem; line-height: 1.6;">
                                    {{ value.descricao }}
                                </div>
                            {% endif %}
                            
                            <!-- Botão -->
                            {% if value.mostrar_botao and value.texto_botao %}
                                <div class="podcast-spotify__botao">
                                    <a href="{% if value.link_botao %}{{ value.link_botao }}{% elif value.pagina_interna_botao %}{% pageurl value.pagina_interna_botao %}{% else %}#{% endif %}"
                                       class="btn btn-podcast"
                                       {% if value.abrir_nova_aba_botao %}target="_blank" rel="noopener"{% endif %}
                                       style="
                                           {% if value.tipo_botao == 'preenchido' %}
                                               background-color: {{ value.cor_fundo_botao }};
                                               color: {{ value.cor_texto_botao }};
                                               border: 2px solid {{ value.cor_fundo_botao }};
                                           {% elif value.tipo_botao == 'outline' %}
                                               background-color: transparent;
                                               color: {{ value.cor_texto_botao }};
                                               border: 2px solid {{ value.cor_borda_botao }};
                                           {% else %}
                                               background-color: transparent;
                                               color: {{ value.cor_texto_botao }};
                                               border: none;
                                           {% endif %}
                                           --hover-bg: {{ value.cor_hover_fundo_botao }};
                                       "
                                       onmouseover="this.style.backgroundColor=this.style.getPropertyValue('--hover-bg');"
                                       onmouseout="
                                           {% if value.tipo_botao == 'preenchido' %}
                                               this.style.backgroundColor='{{ value.cor_fundo_botao }}';
                                           {% else %}
                                               this.style.backgroundColor='transparent';
                                           {% endif %}
                                       ">
                                        {{ value.texto_botao }}
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    {% if value.layout_tipo == 'texto-esquerda' %}
                        <!-- Player à direita -->
                        <div class="col-12 col-lg-6 order-2">
                    {% else %}
                        <!-- Player à esquerda -->
                        <div class="col-12 col-lg-6 order-1 order-lg-1">
                    {% endif %}
                        <div class="podcast-spotify__player">
                            {% if value.spotify_titulo %}
                                <h3 class="podcast-spotify__player-titulo mb-3" 
                                    style="color: {{ value.cor_titulo_spotify }};">
                                    {{ value.spotify_titulo }}
                                </h3>
                            {% endif %}
                            
                            <div class="spotify-embed" 
                                 style="
                                     border-radius: {{ value.border_radius_player }};
                                     overflow: hidden;
                                     {% if value.sombra_player %}
                                         box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                                     {% endif %}
                                 ">
                                {{ value.spotify_embed_code|safe }}
                            </div>
                        </div>
                    </div>
                    
            {% endif %}
            
        </div>
    </div>
</section>

<style>
.podcast-spotify {
    position: relative;
    overflow: hidden;
}

.podcast-spotify--pequeno { padding: 2rem 0; }
.podcast-spotify--medio { padding: 4rem 0; }
.podcast-spotify--grande { padding: 6rem 0; }
.podcast-spotify--extra-grande { padding: 8rem 0; }

.podcast-spotify__content {
    position: relative;
    z-index: 2;
}

.podcast-spotify__titulo {
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.btn-podcast {
    padding: 0.75rem 2rem;
    font-weight: bold;
    border-radius: 50px;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.btn-podcast:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    text-decoration: none;
}

.spotify-embed iframe {
    width: 100% !important;
    border-radius: inherit;
}

.podcast-spotify__player {
    position: relative;
}

/* Responsividade */
@media (max-width: 768px) {
    .podcast-spotify__titulo {
        font-size: 2rem !important;
        margin-bottom: 1.5rem !important;
    }
    
    .podcast-spotify__descricao {
        font-size: 1rem !important;
        margin-bottom: 2rem !important;
    }
    
    .podcast-spotify {
        padding: 3rem 0 !important;
    }
    
    .spotify-embed {
        margin-top: 2rem;
    }
}
</style>