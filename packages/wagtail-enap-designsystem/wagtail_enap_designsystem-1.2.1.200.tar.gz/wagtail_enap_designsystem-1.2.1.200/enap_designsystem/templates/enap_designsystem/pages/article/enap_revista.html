<!-- templates/enap_designsystem/pages/article/enap_revista.html -->
{% extends "enap_designsystem/base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}
{% load static %}

{%block govnavbar %}
    <div style="background-color: #071E41;">
        <div class="menu">
            <div class="logo">
                <img style="width: 51px; height: 18px;" src="{% static 'enap_designsystem/icons/logo-white.png' %}" alt="Passar pro lado esquerdo" alt="Logo GovBR" height="40">
            </div>
            <a href="https://www.gov.br/secom/pt-br/acesso-a-informacao/comunicabr">Comunica BR</a>
            <div class="separator"></div>
            <a href="https://www.gov.br/acessoainformacao/pt-br">Acesso à informação</a>
            <div class="separator"></div>
            <a href="https://www.gov.br/pt-br/participacao-social/">Participe</a>
            <div class="separator"></div>
            <a href="https://www4.planalto.gov.br/legislacao/">Legislação</a>
            <div class="separator"></div>
            <a href="https://www.gov.br/pt-br/orgaos-do-governo">Órgãos do Governo</a>
        </div>
    </div>
{% endblock %}

{% block navbar %}
    {% if page.navbar %}
        {% include "enap_designsystem/blocks/navbar/navbar_block.html" with navbar=page.navbar %}
    {% endif %}
{% endblock %}



{% block content %}
<div class="page-wrapper" {% if page.background_style %}style="{{ page.background_style }}"{% endif %}>
{# Imagem destacada via StreamField #}
{% if page.featured_image %}
    {% for block in page.featured_image %}
        {% if block.block_type == "image" and block.value.image %}
		{% if block.value.caption %}
                    <div class="flex-creditos">
                        <i class="fa-solid fa-camera"></i>
                        <div class="caption">{{ block.value.caption }}</div>
                    </div>
                {% endif %}
            {% image block.value.image original as img %}
            <div class="featured-image-revista-container content-constrained">
                <img class="featured-image-revista-revista" src="{{ img.url }}" alt="{{ block.value.caption|default:page.title }}">
            </div>
        {% endif %}
    {% endfor %}
{% endif %}
<article class="enap-noticia-two">

	<h1>{{ page.title }}</h1>

	{# Subtítulo #}
	{% if page.subtitulo %}
		<div class="content-constrained">
			<h2 class="noticia-subtitulo">{{ page.subtitulo }}</h2>
		</div>
	{% endif %}

	<div class="wrapper-compartilhar">
	{# Informações de publicação #}
	<div class="noticia-meta content-constrained">
		{% if page.author_display %}
			<p><strong>Por:</strong> {{ page.author_display }}</p>
		{% elif page.author %}
			<p><strong>Por:</strong> {{ page.author.get_full_name|default:page.author.username }}</p>
		{% endif %}
		{% if page.date_display %}
			<p><strong>Publicado em:</strong> {{ page.date_display|date:"d \d\e F \d\e Y" }}</p>
		{% endif %}
		{% if page.edicao_numero %}
			<p><strong>Edição:</strong> {{ page.edicao_numero }}</p>
		{% endif %}
		{% if page.categoria_revista %}
			<p><strong>Categoria:</strong> {{ page.get_categoria_revista_display }}</p>
		{% endif %}
	</div>

	<div class="compartilhar">
		<h3>Compartilhe:</h3>
		<div class="social-buttons">
			<a href="https://api.whatsapp.com/send?text={{ page.title|urlencode }} - {{ request.build_absolute_uri }}" target="_blank" class="social-btn whatsapp" title="Compartilhar no WhatsApp">
				<i class="fab fa-whatsapp"></i>
			</a>
			<a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="social-btn facebook" title="Compartilhar no Facebook">
				<i class="fab fa-facebook-f"></i>
			</a>
			<a href="https://twitter.com/intent/tweet?text={{ page.title|urlencode }}&url={{ request.build_absolute_uri }}" target="_blank" class="social-btn twitter" title="Compartilhar no Twitter">
				<i class="fab fa-twitter"></i>
			</a>
			<a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" target="_blank" class="social-btn linkedin" title="Compartilhar no LinkedIn">
				<i class="fab fa-linkedin-in"></i>
			</a>
		</div>
	</div>
	</div>


	{# Conteúdo do corpo da revista - renderiza o ArticleGridBlock #}
	<div class="noticia-body">
		{% for block in page.body %}
			{% if block.block_type == 'article_grid' %}
				{% include_block block %}
			{% endif %}
		{% endfor %}
	</div>

</article>
</div>
<style>
	/* ========================================
	   IMAGENS RESPONSIVAS - 90VW MAX
	======================================== */

	/* Créditos da imagem */
	.flex-creditos {
		display: flex;
		gap: 0.5rem;
		align-items: center;
		justify-content: left;
		margin-bottom: 0.5rem;
		font-size: 0.85rem;
		color: #666;
	}

	.featured-image-revista-container{
		max-height: 300px;
		overflow: hidden;
	}

	.caption {
		font-style: italic;
		color: #666;
		margin: 0;
	}

	.caption p {
		margin-top: 0px;
	}

	/* ========================================
	   IMAGENS PRINCIPAIS - RESPONSIVAS
	======================================== */

	/* Imagem Externa */
	.imagem-externa {
		margin: 2rem auto;
		text-align: center;
		max-width: 90vw;
	}

	.featured-image-revista-revista{
		height: 300px;
	}

	.noticia-imagem-principal {
		width: 100%;
		max-width: min(1142px, 90vw);
		height: auto;
		border-radius: 8px;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		transition: transform 0.3s ease;
		display: block;
		margin: 0 auto;
	}

	.noticia-imagem-principal:hover {
		transform: scale(1.02);
	}

	.enap-noticia .noticia-body img {
		min-height: 400px;
		margin: 0;
		margin-bottom: 10px;
	}


	/* ========================================
	   IMAGENS NO STREAMFIELD BODY
	======================================== */

	/* Todas as imagens no corpo da notícia */
	.enap-noticia .noticia-body img {
		max-width: min(1142px, 90vw) !important;
		width: 100% !important;
		height: auto !important;
		display: block !important;
		border-radius: 8px;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
	}

	/* Para blocos de imagem específicos do Wagtail */
	.enap-noticia .rich-text img,
	.enap-noticia [data-block-type="image"] img {
		max-width: min(1142px, 90vw) !important;
		width: 100% !important;
		height: auto !important;
		margin: 2rem auto !important;
		display: block !important;
		border-radius: 8px;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
	}

	/* ========================================
	   RESPONSIVIDADE PARA IMAGENS
	======================================== */

	/* Tablets */
	@media (max-width: 768px) {

		.noticia-imagem-principal,
		.featured-image-revista img,
		.enap-noticia .noticia-body img,
		.enap-noticia .rich-text img,
		.enap-noticia [data-block-type="image"] img {
			max-width: 95vw !important;
		}

		.flex-creditos {
			justify-content: flex-start;
		}

		.featured-image-revista-revista{
				height: 140px;
				width: 100%;
				max-width: 100%;
		}
	}

	/* Mobile */
	@media (max-width: 480px) {
		.imagem-externa,
		.featured-image-revista {
			max-width: 87vw;
			margin: 1rem auto;
		}

		.noticia-imagem-principal,
		.featured-image-revista img,
		.enap-noticia .noticia-body img,
		.enap-noticia .rich-text img,
		.enap-noticia [data-block-type="image"] img {
			max-width: 87vw !important;
			border-radius: 4px;
		}

		.featured-image-revista-container{
			padding-top: 100px;
		}

		.flex-creditos {
			font-size: 0.8rem;
			margin-bottom: 0.3rem;
		}
	}

	/* ========================================
	   MELHORIAS DE ACESSIBILIDADE
	======================================== */

	/* Redução de movimento */
	@media (prefers-reduced-motion: reduce) {
		.noticia-imagem-principal {
			transition: none;
		}

		.noticia-imagem-principal:hover {
			transform: none;
		}
	}
</style>
{% endblock %}

{% block footer %}
{% include "enap_designsystem/includes/footer.html" %}
{% endblock %}