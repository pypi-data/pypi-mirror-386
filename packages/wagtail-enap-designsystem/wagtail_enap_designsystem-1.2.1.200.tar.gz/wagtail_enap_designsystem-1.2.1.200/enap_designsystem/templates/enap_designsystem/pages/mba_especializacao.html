{% extends "enap_designsystem/base.html" %}
{% load static %}
{% load wagtailcore_tags wagtailimages_tags %}


{% block metadata %}
    {% comment %} <meta name="viewport" content="width=device-width, initial-scale=1.0"> {% endcomment %}
{% endblock %}


{% block title %}
	<title>{{ page.title }}</title>
{% endblock %}

{%block govnavbar %}
    <div style="background-color: #071E41;">
        <div class="menu">
            <div class="logo">
                <img style="width: 51px; height: 18px;" src="{% static 'enap_designsystem/icons/logo-white.png' %}" alt="Passar pro lado esquerdo" alt="Logo GovBR" height="40">
            </div>
            <a href="https://www.gov.br/secom/pt-br/acesso-a-informacao/comunicabr">Comunica BR</a>
            <div class="separator"></div>
            <a href="https://www.gov.br/acessoainformacao/pt-br">Acesso à informação</a>
            <div class="separator"></div>
            <a href="https://www.gov.br/pt-br/participacao-social/">Participe</a>
            <div class="separator"></div>
            <a href="https://www4.planalto.gov.br/legislacao/">Legislação</a>
            <div class="separator"></div>
            <a href="https://www.gov.br/pt-br/orgaos-do-governo">Órgãos do Governo</a>
        </div>
    </div>
{% endblock %}


{% block navbar %}
    {% if page.navbar %}
        {% include "enap_designsystem/blocks/navbar/navbar_block.html" with navbar=page.navbar %}
    {% else %}
        <p style="color: red;">DEBUG: Nenhuma Navbar foi definida.</p>
    {% endif %}
{% endblock %}


{% block content %}

<section class="banner-hero">
    <div>
        {% for block in page.banner %}
            <div class="block">
                {{ block }}  {# Renderiza cada bloco do StreamField diretamente #}
            </div>
        {% empty %}

        {% endfor %}
    </div>
</section>

<section>
    {% for block in page.introducao %}
    {% include_block block %}
{% endfor %}        
</section>

<section>
    {% for block in page.beneficios %}
        {% include_block block %}
    {% endfor %}
</section>

<section>
    <div>
        {% for block in page.preview_dos_cursos %}
        {{ block }}  {# Renderiza cada bloco no StreamField 'teste_preview' #}
    {% empty %}

    {% endfor %}
    </div>
</div>
</section>

<section>
    {% for block in page.depoimentos %}
        {% include_block block %}
    {% endfor %}
</section>

<!-- Cards noticias -->
<section class="section-noticias">
    {% for block in page.noticia %}
        {% if block.block_type == "noticia" %}
            {{ block }}  {# Renderiza o bloco de carrossel de notícias #}
        {% else %}

        {% endif %}
    {% empty %}

    {% endfor %}
</section >

<section>
    {% for block in page.cards %}
        <div>
            {{ block }}
        </div>
    {% empty %}
        <!-- Opcional: mensagem se não houver conteúdo -->
    {% endfor %}
</section>

<div class="main">
    {% include_block page.body %}
</div>

{% endblock %}

{% block footer %}
    {% include "enap_designsystem/includes/footer.html" %}
{% endblock %}


{% block styleinline %}
    {% comment %} STYLE INLINE AQUI {% endcomment %}
    <style>
    </style>
{% endblock %}


{% block stylecss %}
    {% comment %} ARQUIVOS CSS AQUI {% endcomment %}
    {% comment %} 
        Evite deixar arquivos aqui, utilize eles no enap_designsystem/base.html
        na área de {% if debug %} de DESENVOLVIMENTO
    {% endcomment %}
    
{% endblock %}


{% block scriptinline %}
    {% comment %} SCRIPT INLINE AQUI {% endcomment %}
    <script>
        function clearInput() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchInput').focus();
            toggleClearButton();
        }
    
        function toggleClearButton() {
            const input = document.getElementById('searchInput');
            const clearButton = document.getElementById('clearButton');
            clearButton.style.display = input.value ? 'block' : 'none';
        }
    
        // Função para verificar se é dispositivo móvel
        function isMobile() {
            return window.innerWidth <= 768; // Defina o breakpoint apropriado para seu site
        }
    
        // Quando o documento carrega, torna o search container visível apenas no desktop
        document.addEventListener('DOMContentLoaded', function() {
            const searchContainer = document.querySelector('.search-container');
            
            if (!isMobile()) {
                // Versão desktop - sempre visível
                searchContainer.classList.add('visible');
                searchContainer.classList.add('show');
            }
        });
    
        // Durante o scroll, comportamento responsivo
        window.addEventListener('scroll', function() {
            const searchContainer = document.querySelector('.search-container');
            const scrollPosition = window.scrollY;
            
            if (isMobile()) {
                // Versão mobile - só visível após scroll
                if (scrollPosition > 200) {
                    searchContainer.classList.add('show');
                } else {
                    searchContainer.classList.remove('show');
                }
            } else {
                // Versão desktop - sempre visível
                searchContainer.classList.add('visible');
                searchContainer.classList.add('show');
            }
        });
    
        // Recalcular quando a janela for redimensionada
        window.addEventListener('resize', function() {
            const searchContainer = document.querySelector('.search-container');
            
            if (!isMobile()) {
                // Versão desktop - sempre visível
                searchContainer.classList.add('visible');
                searchContainer.classList.add('show');
            } else {
                // Versão mobile - verificar posição de scroll
                const scrollPosition = window.scrollY;
                if (scrollPosition <= 200) {
                    searchContainer.classList.remove('show');
                }
            }
        });
    </script>
{% endblock %}


{% block scriptjs %}
    {% comment %} ARQUIVOS JS AQUI {% endcomment %}
{% endblock %}