<!-- templates/blocks/article_grid_block.html -->
{% load wagtailcore_tags %}

<section class="article-layout {{ value.vertical_spacing }}{% if value.background_color %} custom-bg{% endif %}"
         {% if value.background_color %}style="background-color: {{ value.background_color }};"{% endif %}
         data-accent-color="{{ value.accent_color }}"
         data-layout-type="{{ value.layout_type }}">
    
    {% if value.add_container %}
    <div class="">
    {% endif %}
        
        {% if value.layout_type == 'revista' %}
            <!-- Layout Revista: Duas Colunas -->
            <div class="row g-4 align-items-start">
                <!-- Coluna Esquerda -->
                <div class="col-md-6">
                    <div class="article-column">
                        {% if value.coluna_esquerda %}
                            {% for block in value.coluna_esquerda %}
                                <div class="article-block mb-4">
                                    {% include_block block %}
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-placeholder">
                                <i class="fas fa-plus-circle"></i>
                                <span>Adicione conteúdo na coluna esquerda</span>
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Coluna Direita -->
                <div class="col-md-6">
                    <div class="article-column">
                        {% if value.coluna_direita %}
                            {% for block in value.coluna_direita %}
                                <div class="article-block mb-4">
                                    {% include_block block %}
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-placeholder">
                                <i class="fas fa-plus-circle"></i>
                                <span>Adicione conteúdo na coluna direita</span>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
        {% else %}
            <!-- Layout Normal: Uma Coluna -->
            <div class="article-single-column">
                {% if value.conteudo %}
                    {% for block in value.conteudo %}
                        <div class="article-block mb-4">
                            {% include_block block %}
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-placeholder">
                        <i class="fas fa-plus-circle"></i>
                        <span>Adicione conteúdo à notícia</span>
                    </div>
                {% endif %}
            </div>
            
        {% endif %}
        
    {% if value.add_container %}
    </div>
    {% endif %}
</section>

<!-- CSS com cores ENAP -->
<style>
/* Variáveis CSS para cores ENAP */
:root {
    --enap-green-90: #024248;
    --enap-green-60: #007D7A;
    --enap-green-40: #30BFBC;
    --enap-green-20: #AFF0ED;
    --enap-green-10: #D6F9F8;
    --gnova-purple: #AD6BFC;
    --gnova-purple-light: #B396FC;
}

/* Estilos base */
.article-layout {
    position: relative;
}

.article-layout.custom-bg {
    padding: 2rem;
    border-radius: 0.5rem;
}

/* Colunas */
.article-column {
    height: 100%;
}

.article-block:last-child {
    margin-bottom: 0 !important;
}

/* Placeholder vazio */
.empty-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    min-height: 150px;
    background-color: var(--enap-green-10);
    border: 2px dashed var(--enap-green-40);
    border-radius: 0.5rem;
    color: var(--enap-green-90);
    text-align: center;
    transition: all 0.3s ease;
}

.empty-placeholder:hover {
    background-color: var(--enap-green-20);
    border-color: var(--enap-green-60);
}

.empty-placeholder i {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

/* Cores de destaque */
.article-layout[data-accent-color="enap-green"] {
    border-left: 4px solid var(--enap-green-90);
}

.article-layout[data-accent-color="enap-link"] {
    border-left: 4px solid var(--enap-green-60);
}

.article-layout[data-accent-color="gnova-purple"] {
    border-left: 4px solid var(--gnova-purple);
}

/* Estilo especial para quotes */
.article-layout .quote-block {
    background: linear-gradient(135deg, var(--enap-green-90) 0%, var(--gnova-purple) 100%);
    color: white;
    padding: 2rem;
    border-radius: 0.5rem;
    margin: 0;
}

/* Layout revista tem estilo especial */
.article-layout[data-layout-type="revista"] {
    background: linear-gradient(to right, transparent 50%, rgba(173, 107, 252, 0.03) 50%);
}

/* Responsividade */
@media (max-width: 768px) {
    .article-layout.custom-bg {
        padding: 1rem;
    }
    
    .article-layout .row {
        margin: 0;
        flex-direction: column;
    }
    
    .article-layout [class*="col-"] {
        padding-left: 0;
        padding-right: 0;
        margin-bottom: 2rem;
    }
    
    .article-layout [class*="col-"]:last-child {
        margin-bottom: 0;
    }
}

/* Hover nos blocos */
.article-block {
    transition: transform 0.2s ease;
}

.article-block:hover {
    transform: translateY(-2px);
}

/* Links com cor ENAP */
.article-layout .richtext-block a {
    color: var(--enap-green-60);
    text-decoration: none;
    border-bottom: 1px solid rgba(0, 125, 122, 0.3);
}

.article-layout .richtext-block a:hover {
    color: var(--enap-green-90);
    border-bottom-color: var(--enap-green-90);
}
</style>