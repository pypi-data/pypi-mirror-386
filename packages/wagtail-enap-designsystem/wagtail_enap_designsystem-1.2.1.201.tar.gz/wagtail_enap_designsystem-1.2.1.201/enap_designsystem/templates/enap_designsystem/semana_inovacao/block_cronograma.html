<!-- templates/enap_designsystem/semana_inovacao/block_cronograma.html -->
{% load wagtailimages_tags %}

{% if value.imagem_fundo %}
    {% image value.imagem_fundo original as bg_image %}
{% endif %}

<section class="cronograma-secao" 
        {% if bg_image %}
        style="background-image: url('{{ bg_image.url }}'); background-color: {{ value.cor_fundo }};"
        {% else %}
        style="background-color: {{ value.cor_fundo }};"
        {% endif %}>

    <div class="cronograma-container">
        <!-- Título -->
        {% if value.titulo %}
        <div class="cronograma-titulo-container">
            {% if value.imagem_ladotexto %}
                {% image value.imagem_ladotexto original as titulo_image %}
                <img src="{{ titulo_image.url }}" 
                     alt="{{ titulo_image.title }}" 
                     class="cronograma-titulo-imagem">
            {% endif %}
            <h2 class="cronograma-titulo" style="color: {{ value.cor_titulo }};">
                {{ value.titulo }}
            </h2>
        </div>
        {% endif %}
        
        <!-- Timeline -->
        <div class="cronograma-timeline">
            {% for step_block in value.steps %}
                {% if step_block.block_type == 'step' %}
                    <div class="cronograma-step">
                        <!-- Círculo com Data -->
                        <div class="step-circulo" style="background-color: {{ step_block.value.cor_circulo }};">
                            <div class="step-data" style="color: {{ step_block.value.cor_data }};">
                                {{ step_block.value.data }}
                            </div>
                        </div>
                        
                        <!-- Descrição Mobile (aparece só no mobile) -->
                        <div class="step-descricao-mobile" style="color: {{ step_block.value.cor_descricao }};">
                            {{ step_block.value.descricao }}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- Descrições abaixo da timeline (só aparece no desktop) -->
        <div class="cronograma-descricoes">
            {% for step_block in value.steps %}
                {% if step_block.block_type == 'step' %}
                    <div class="step-descricao-item">
                        <div class="step-descricao" style="color: {{ step_block.value.cor_descricao }};">
                            {{ step_block.value.descricao }}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</section>