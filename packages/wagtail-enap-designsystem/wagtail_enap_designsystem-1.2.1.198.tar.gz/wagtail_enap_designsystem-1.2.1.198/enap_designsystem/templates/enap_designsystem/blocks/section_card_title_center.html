{% load static %}
{% load static wagtailcore_tags %}
{% block content %}
<style>
    .service-card {
        border-left: 4px solid var(--section-highlight-color, #024248);
    }

    .service-icon i {
        color: var(--section-highlight-color, #024248);
    }

    .service-link {
        color: var(--section-highlight-color, #024248);
    }
</style>

<section id="section-{{ id }}" class="section section-card-title-center" style="--section-highlight-color: {{ value.highlight_color|default:'#024248' }};">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title" data-highlight="{{ value.highlight_text }}">
                {{ value.title }}
            </h2>
            <div class="section-description">
                {{ value.subtitle|safe }}
            </div>
        </div>
        
        <div class="services-grid">
            <!-- Cards dinâmicos -->
            {% for card in value.cards %}
            <div class="service-card">
                <div class="service-icon">
                    <i class="{{ card.icon_class|default:'fa-solid fa-star' }}"></i>
                </div>
                
                <h3 class="service-title">{{ card.title|default:"Título do Card" }}</h3>
                
                <div class="service-description">
                    {{ card.description|safe }}
                </div>
                
                {% if self.show_button %}
                <a href="{{ card.link_url|default:'#' }}" target="_blank" class="service-link">
                    {{ card.link_text|default:"Acessar" }}
                    <i class="fa-solid fa-circle-chevron-right"></i>
                </a>
            {% endif %}
            </div>
            {% empty %}
                <!-- Fallback cards (quando não há dados) -->
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fa-solid fa-book"></i>
                    </div>
                    <h3 class="service-title">Título do Card 1</h3>
                    <div class="service-description">
                        <p>Descrição do card 1. Este texto é apenas para demonstração.</p>
                    </div>
                    <a href="#" target="_blank" class="service-link">
                        Acessar
                        <i class="fa-solid fa-circle-chevron-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fa-solid fa-graduation-cap"></i>
                    </div>
                    <h3 class="service-title">Título do Card 2</h3>
                    <div class="service-description">
                        <p>Descrição do card 2. Este texto é apenas para demonstração.</p>
                    </div>
                    <a href="#" target="_blank" class="service-link">
                        Acessar
                        <i class="fa-solid fa-circle-chevron-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fa-solid fa-users"></i>
                    </div>
                    <h3 class="service-title">Título do Card 3</h3>
                    <div class="service-description">
                        <p>Descrição do card 3. Este texto é apenas para demonstração.</p>
                    </div>
                    <a href="#" target="_blank" class="service-link">
                        Acessar
                        <i class="fa-solid fa-circle-chevron-right"></i>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<script>
// Carregar o Font Awesome se não estiver carregado
document.addEventListener('DOMContentLoaded', function() {
  const hasFontAwesome = (
    document.querySelector('link[href*="font-awesome"]') !== null || 
    document.querySelector('link[href*="fontawesome"]') !== null
  );
  
  if (!hasFontAwesome) {
    console.log('Font Awesome não detectado. Adicionando...');
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
    document.head.appendChild(link);
  }
  
  // Script para aplicar destaque ao texto do título
  const titles = document.querySelectorAll('.section-title[data-highlight]');
  
  titles.forEach(function(title) {
    const highlight = title.getAttribute('data-highlight');
    
    if (highlight && highlight.trim() !== '') {
      const titleText = title.innerHTML;
      const highlightedText = titleText.replace(
        new RegExp(highlight, 'g'), 
        '<span class="gradient-text">' + highlight + '</span>'
      );
      title.innerHTML = highlightedText;
    }
  });
});
</script>
{% endblock %}