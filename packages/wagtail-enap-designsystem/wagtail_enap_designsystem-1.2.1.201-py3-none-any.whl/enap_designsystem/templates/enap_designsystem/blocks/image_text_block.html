<!-- templates/enap_designsystem/blocks/image_text_block.html -->
{% load wagtailimages_tags wagtailcore_tags %}

<section class="image-text-block {{ value.background_color }} {{ value.vertical_spacing }}">
    {% if value.add_container %}
    <div class="">
    {% endif %}
        <div class="row align-items-center">
            <!-- Coluna da Imagem -->
            <div class="image-column mb-3 mb-md-0" data-proportion="{{ value.layout_proportion }}" data-position="{{ value.image_position }}">
                <div class="image-wrapper">
                    {% if value.image %}
                        {% image value.image fill-800x600 class="img-fluid-two rounded shadow-sm" alt=value.image_alt %}
                    {% else %}
                        <div class="placeholder-image d-flex align-items-center justify-content-center bg-light rounded" style="min-height: 300px;">
                            <span class="text-muted">
                                <i class="fas fa-image fa-3x"></i>
                                <br>
                                <small>Selecione uma imagem</small>
                            </span>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Coluna do Texto -->
            <div class="text-column" data-proportion="{{ value.layout_proportion }}" data-position="{{ value.image_position }}">
                <div class="text-content">
                    {% if value.title %}
                        <h2 class="text-title mb-3">{{ value.title }}</h2>
                    {% endif %}
                    
                    {% if value.text %}
                        <div class="text-body">
                            {{ value.text|richtext }}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    {% if value.add_container %}
    </div>
    {% endif %}
</section>

<!-- CSS para ImageTextBlock -->
<style>
/* Variáveis CSS para cores */
:root {
    --enap-green-90: #024248;
    --enap-green-60: #007D7A;
    --enap-green-40: #30BFBC;
    --enap-green-20: #AFF0ED;
    --enap-green-10: #D6F9F8;
    --gnova-purple: #AD6BFC;
    --gnova-purple-light: #B396FC;
}

/* Estilos específicos do ImageTextBlock */
.image-text-block {
    position: relative;
}

/* Classes base para colunas */
.image-column,
.text-column {
    padding: 0 15px;
}

/* Proporções 30-70 */
.image-column[data-proportion="30-70"] {
    width: 100%;
    max-width: 30%;
}

.img-fluid-two rounded shadow-sm{
  min-height: 400px;
}

.text-column[data-proportion="30-70"] {
    width: 100%;
    max-width: 70%;
}

/* Proporções 40-60 */
.image-column[data-proportion="40-60"] {
    width: 100%;
    max-width: 40%;
}

.text-column[data-proportion="40-60"] {
    width: 100%;
    max-width: 60%;
}

/* Proporções 50-50 */
.image-column[data-proportion="50-50"] {
    width: 100%;
    max-width: 50%;
}

.text-column[data-proportion="50-50"] {
    width: 100%;
    max-width: 50%;
}

/* Proporções 60-40 */
.image-column[data-proportion="60-40"] {
    width: 100%;
    max-width: 60%;
}

.text-column[data-proportion="60-40"] {
    width: 100%;
    max-width: 40%;
}

/* Proporções 70-30 */
.image-column[data-proportion="70-30"] {
    width: 100%;
    max-width: 70%;
}

.text-column[data-proportion="70-30"] {
    width: 100%;
    max-width: 30%;
}

/* Posicionamento - imagem à direita */
.image-column[data-position="right"] {
    order: 2;
}

.text-column[data-position="right"] {
    order: 1;
}

.image-text-block .image-wrapper {
    position: relative;
    overflow: hidden;
}

.image-text-block .image-wrapper img {
    transition: transform 0.3s ease;
    width: 100%;
    height: auto;
    min-height: 320px;
}

.image-text-block .image-wrapper:hover img {
    transform: scale(1.02);
}

.image-text-block .text-content {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.image-text-block .text-title {
    color: var(--enap-green-90);
    font-weight: 600;
    line-height: 1.3;
}

.image-text-block .text-body {
    color: #333;
    line-height: 1.6;
}

.image-text-block .text-body p:last-child {
    margin-bottom: 0;
}

/* Estilos do placeholder */
.placeholder-image {
    border: 2px dashed #dee2e6;
    color: #6c757d;
    text-align: center;
    min-height: 200px;
}

/* Responsividade */
@media (max-width: 768px) {
    .image-text-block .row {
        margin: 0;
    }
    
    .image-text-block [class*="col-"] {
        padding-left: 15px;
        padding-right: 15px;
    }
    
    .image-text-block .text-content {
        margin-top: 1rem;
    }

    .image-text-block .image-wrapper:hover img {
        transform: none;
    }

    /* Proporções 30-70 */
.image-column[data-proportion="30-70"] {
    width: 100%;
    max-width: 100%;
    padding: 0;
}

.text-column[data-proportion="30-70"] {
    width: 100%;
    max-width: 100%;
    padding: 0;
}
}

/* Variações de fundo */
.image-text-block.bg-light {
    background-color: var(--enap-green-10);
    padding: 2rem;
    border-radius: 0.5rem;
}

.image-text-block.bg-secondary {
    background-color: var(--enap-green-90);
    color: white;
    padding: 2rem;
    border-radius: 0.5rem;
}

.image-text-block.bg-secondary .text-title {
    color: white;
}

.image-text-block.bg-secondary .text-body {
    color: rgba(255, 255, 255, 0.9);
}

.image-text-block.bg-primary-light {
    background-color: var(--enap-green-20);
    padding: 2rem;
    border-radius: 0.5rem;
}

/* Melhorias de acessibilidade */
@media (prefers-reduced-motion: reduce) {
    .image-text-block .image-wrapper img {
        transition: none;
    }
    
    .image-text-block .image-wrapper:hover img {
        transform: none;
    }
}

/* Links no texto */
.image-text-block .text-body a {
    color: var(--enap-green-60);
    text-decoration: none;
    border-bottom: 1px solid rgba(0, 125, 122, 0.3);
    transition: all 0.3s ease;
}

.image-text-block .text-body a:hover {
    color: var(--enap-green-90);
    border-bottom-color: var(--enap-green-90);
}

.image-text-block.bg-secondary .text-body a {
    color: var(--enap-green-20);
    border-bottom-color: rgba(175, 240, 237, 0.5);
}

.image-text-block.bg-secondary .text-body a:hover {
    color: white;
    border-bottom-color: white;
}
</style>