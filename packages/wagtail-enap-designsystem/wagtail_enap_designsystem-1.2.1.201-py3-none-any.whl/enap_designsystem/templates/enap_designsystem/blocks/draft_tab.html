{% load wagtailcore_tags %}

<div class="tab-component tab-{{ page.tab.style }}" id="tab-component-{{ id }}">
    <div class="tab">
        {% for tab_item in page.tab.tab_items.all %}
            <button class="tablinks {% if forloop.first %}active{% endif %}" 
                    onclick="openTab(event, 'tab-content-{{ id }}-{{ forloop.counter0 }}')">
                {{ tab_item.title }}
            </button>
        {% endfor %}
    </div>
    
    {% for tab_item in page.tab.tab_items.all %}
        <div id="tab-content-{{ id }}-{{ forloop.counter0 }}" 
             class="tabcontent" 
             {% if forloop.first %}style="display: block;"{% endif %}>
            <h3>{{ tab_item.title }}</h3>
            <div>{{ tab_item.content|richtext }}</div>
        </div>
    {% endfor %}
</div>
    
    <style>
        /* Estilos comuns para todos os tabs */
        .tab {
            overflow: hidden;
            display: flex;
            position: relative;
        }
        
        .tablinks {
            background-color: inherit;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 10px;
            transition: 0.3s;
            font-size: 16px;
            color: #007D7A;
            position: relative; 
            z-index: 1;
        }
        
        .tabcontent {
            display: none;
            padding: 40px 12px;
            background-color: white;
            position: relative;
        }
        
        /* Estilo 1: Com borda e linha inferior */
        .tab-style1 .tablinks {
            border-radius: 6px 6px 0 0;
        }
        
        .tab-style1 .tablinks:hover {
            color: #025257;
            border-left: 1px solid #C8D1E0;
            border-top: 1px solid #C8D1E0;
            border-right: 1px solid #C8D1E0;
        }
        
        .tab-style1 .tablinks.active {
            color: #025257;
            background-color: white; 
            border-bottom: 2px solid white;
            border-left: 1px solid #C8D1E0;
            border-top: 1px solid #C8D1E0;
            border-right: 1px solid #C8D1E0;
            z-index: 2;
        }
        
        .tab-style1 .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px; 
            background-color: #C8D1E0;
            z-index: 1; 
        }
        
        /* Estilo 2: Fundo verde quando ativo */
        .tab-style2 .tablinks {
            border-radius: 6px;
        }
        
        .tab-style2 .tablinks:hover {
            color: #025257;
        }
        
        .tab-style2 .tablinks.active {
            color: white;
            background-color: #025257; 
        }
        
        /* Estilo 3: Fundo verde quando ativo, sem bordas */
        .tab-style3 .tablinks {
            border-radius: 6px;
        }
        
        .tab-style3 .tablinks:hover {
            color: #025257;
        }
        
        .tab-style3 .tablinks.active {
            color: white;
            background-color: #025257; 
        }
    </style>
    
    <script>
        function openTab(evt, tabContentId) {
            // Encontre o componente específico para operar apenas nele
            var tabComponent = evt.currentTarget.closest('.tab-component');
            
            // Pegar todos os tab contents deste componente específico
            var tabcontent = tabComponent.getElementsByClassName("tabcontent");
            for (var i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            
            // Pegar todos os botões de tab deste componente específico
            var tablinks = tabComponent.getElementsByClassName("tablinks");
            for (var i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            
            // Mostrar o tab content atual e adicionar a classe active ao botão
            document.getElementById(tabContentId).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>
</div>