
{% load wagtailcore_tags coderedcms_tags %}
{% load static %}

{% if page.footer %}
<div class="footer">
    <div class="padding-3rem">
        <div class="container-medium">
            
            <div style="width: 100%; display: flex; flex-direction: column; gap: 75px;">
                <div class="wrapper-logo-footer">
                    {% if page.footer.social %}
                        {% for social_block in page.footer.social %}
                            {% include_block social_block %}
                        {% endfor %}
                    {% endif %}
                    </div>
                    
                    <div class="grid-3">
                    {% if page.footer.links %}
                        {% for block in page.footer.links %}
                            {% include_block block %}
                        {% endfor %}
                    {% endif %}
                    </div>
            </div>
            
        </div>
    
    </div>
    
    <div class="rodape">
    
        <div class="wrapper-links-rodape">
            <a class="link-rodape" href="/acessibilidade/">Acessibilidade</a>
            
            <div class="line-link"></div>
            
            <a class="link-rodape" href="/institucional/termo-de-uso-e-aviso-de-privacidade-enap/">Termos de uso e aviso de privacidade</a>
        
            <div class="line-link"></div>
        
            <a href="#" class="link-rodape" data-action="open-cookie-preferences" class="cookie-preferences-link">Alterar preferências de cookies</a>

            <div class="line-link"></div>

            <a href="mailto:comunicacao@enap.gov.br" class="link-rodape">
                Deixe seu feedback
            </a>
        </div>
    
        <div class="line-footer"></div>
        <p class="p-footer">© 2025 Criado e desenvolvido por Enap</p>
    
    </div>
</div>
<script>
    // Implementação com data-attributes (mais robusta)
document.addEventListener('DOMContentLoaded', function() {
    // Event delegation para links de cookies
    document.addEventListener('click', function(e) {
        if (e.target.dataset.action === 'open-cookie-preferences') {
            e.preventDefault();
            openCookiePreferences();
        }
    });
    
    // Função para abrir preferências
    window.openCookiePreferences = function() {
        console.log('Abrindo preferências de cookies...');
        
        const modal = document.getElementById('cookieModal');
        if (!modal) {
            console.error('Modal não encontrado!');
            return;
        }
        
        modal.classList.add('show');
        loadCurrentPreferences();
        document.body.classList.add('modal-open');
    };
    
    // Função para carregar preferências atuais
    window.loadCurrentPreferences = function() {
        const existingConsent = localStorage.getItem('cookie-consent');
        
        if (existingConsent) {
            try {
                const preferences = JSON.parse(existingConsent);
                
                ['functional', 'analytics', 'marketing'].forEach(type => {
                    const checkbox = document.getElementById(type + 'Cookies');
                    if (checkbox) {
                        checkbox.checked = preferences[type] || false;
                        updateToggleStatus(type);
                    }
                });
            } catch (e) {
                console.error('Erro ao carregar preferências:', e);
            }
        }
    };
    
    // Resto do seu código existente...
    showCookieBannerIfNeeded();
});
</script>
{% comment %} 
<footer>
    {% get_footers as footers %}
    {% for footer in footers %}
    <div {% if footer.custom_id %}id="{{footer.custom_id}}"{% endif %} {% if footer.custom_css_class %}class="{{footer.custom_css_class}}"{% endif %}>
        {% for item in footer.content %}
        {% include_block item with settings=settings %}
        {% endfor %}
    </div>
    {% endfor %}
</footer> {% endcomment %}
{% endif %}




            