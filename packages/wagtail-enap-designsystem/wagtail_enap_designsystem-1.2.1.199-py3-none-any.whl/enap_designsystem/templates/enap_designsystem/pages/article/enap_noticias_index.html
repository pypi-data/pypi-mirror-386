{% extends "enap_designsystem/base.html" %}
{% load wagtailcore_tags math_tags %}

{% block content %}
	<section class="noticias-index">
		<h1>Notícias</h1>
		<p>{{ total_articles }} notícias encontradas</p>
		{% for article in articles %}
			<article>
				<h2><a href="{{ article.url }}">{{ article.title }}</a></h2>

				{% if article|classname == "ENAPNoticiaImportada" %}
					<p class="origem">(Importada do Joomla)</p>
					<div class="preview">{{ article.descricao_html|safe }}</div>
				{% else %}
					<p class="origem">(Nova notícia)</p>
					{% if article.body %}
						<div class="preview">{{ article.body|richtext }}</div>
					{% endif %}
				{% endif %}
			</article>
		{% empty %}
			<p>Nenhuma notícia encontrada.</p>
		{% endfor %}

		<nav class="pagination">
			{% for num, start_value in page_range %}
				{% if num == page.number %}
					<strong>{{ num }}</strong>
				{% else %}
					<a href="?start={{ start_value }}">{{ num }}</a>
				{% endif %}
			{% endfor %}
		</nav>
	</section>
{% endblock %}
