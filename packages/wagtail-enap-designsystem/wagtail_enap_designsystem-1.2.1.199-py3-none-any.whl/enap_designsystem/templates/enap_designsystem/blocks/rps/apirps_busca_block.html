<!-- enap_designsystem/blocks/rps/apirps_busca_block.html -->
{% load wagtailcore_tags wagtailimages_tags %}
{% load static %}

<section class="home-filter pt-30 pb-100">
  <div class="container">
    <div class="filter">
      <div class="header_title d-flex-column">
        {% if bloco_rps.title %}
          <h2 class="mt-3 pb-2">{{ bloco_rps.title }}</h2>
        {% endif %}
        {% if bloco_rps.description %}
          <p>{{ bloco_rps.description }}</p>
        {% endif %}
      </div>
      <form action="https://revista.enap.gov.br/index.php/RSP/search/search" method="get" target="_blank">
        <div class="row mt-3">
          <div class="col-lg-4 col-sm-4">
            <label for="filterWords">Filtrar por palavra:</label>
            <input type="text" class="form-control" name="query" id="filterWords" placeholder="Digite a palavra">
          </div>
          <div class="col-lg-3 col-sm-4">
            <label for="filterTempo">Filtrar por período:</label>
            <div id="filterTempo" class="form-control">
                <select name="dateFromYear" id="filterdateFromYear">
                <option class="option" value="">Início</option>
                {% for ano in anos %}
                    <option value="{{ ano }}">{{ ano }}</option>
                {% endfor %}
                </select>

                <select name="dateToYear" id="filterdateToYear">
                <option class="option" value="">Fim</option>
                {% for ano in anos %}
                    <option value="{{ ano }}">{{ ano }}</option>
                {% endfor %}
                </select>
            </div>
          </div>
          <div class="col-lg-3 col-sm-4">
            <label for="filterAuthor">Filtrar por autor:</label>
            <input type="text" class="form-control" name="authors" id="filterAuthor" placeholder="Digite o autor">
          </div>
          <div class="rps-botao col-lg-2 mt-sm-3">
            <button type="submit" class="btn btn-button">Filtrar</button>
          </div>
        </div>
      </form>
    </div>

    {% if edicoes %}
      <div class="list-home mt-5">
        <h4>Edições anteriores:</h4>
        <div class="row mt-5">
          {% for item in edicoes|slice:":12" %}
            <div class="col-lg-3 col-sm-4 mb-4">
              <div class="imagen-hover">
                <div class="imagen">
                  <div class="ahover">
                    {% if item.coverImageUrl.pt_BR %}
                      <img class="img-fluid" src="{{ item.coverImageUrl.pt_BR }}" alt="{{ item.coverImageUrl.pt_BR }}">
                    {% else %}
                      <img class="img-fluid" src="{% static 'media_files/images/capa-rsp.png' %}" alt="{{ item.identification }}">
                    {% endif %}
                  </div>
                  <div class="hover">
                    <h5>{{ item.identification }}</h5>
                    <div class="links">
                      {% if item.galleys %}
                        {% for file in item.galleys %}
                          <a class="btn-link" href="{{ file.urlPublished }}" target="_blank">Baixar pdf</a>
                        {% endfor %}
                      {% endif %}
                      <a class="btn-link" href="{{ item.publishedUrl }}" target="_blank">Detalhes</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="info">
                <h5 style="color: black;">{{ item.datePublished|date:"F \\d\\e Y" }}</h5>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
  </div>
</section>

<style>
h4{
    color: #555;
}

.pt-30 {
    padding-top: 30px;
}

.pb-100 {
    padding-bottom: 100px;
}

.home-filter .filter {
    border-bottom: 1px solid #ccc;
    padding-bottom: 60px;
}

.d-flex-column {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.home-filter .filter form .row {
    padding-right: 20px;
    padding-left: 20px;
}

.home-filter .filter form .row .rps-botao {
    display: flex;
    align-items: flex-end;
}

.btn-button {
    text-align: center;
    background: #007D7A;
    font-size: 20px;
    height: 45px;
    padding: 6px 40px;
    color: #fff;
    font-weight: 500;
    border-radius: 30px;
}

.btn-link{
    background: #007D7A;
    text-decoration: none;
}

.home-filter .list-home .imagen-hover .imagen {
  position: relative;
}
.home-filter .list-home .imagen-hover .imagen .ahover img {
  width: 100%;
  object-fit: cover;
  max-height: 310px;
  min-height: 310px;
}
.home-filter .list-home .imagen-hover .imagen .hover {
  height: 100%;
  position: absolute;
  top: 0;
  display: none;
  overflow: hidden;
  padding: 20px;
}
.home-filter .list-home .imagen-hover .imagen:hover .hover {
  background: linear-gradient(0deg, rgba(56, 58, 70, 0.9), rgba(56, 58, 70, 0.9));
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-evenly;
  position: absolute;
  right: 0;
  left: 0;
}
.home-filter .list-home .imagen-hover .imagen:hover .hover h5 {
  font-size: 16px;
  font-weight: 600;
  color: #ffffff;
  text-align: center;
}
.home-filter .list-home .imagen-hover .imagen:hover .hover .links {
  display: flex;
  flex-direction: column;
}
.home-filter .list-home .imagen-hover .imagen:hover .hover .links .btn-link {
  text-align: center;
  padding: 10px 30px;
  color: #fff;
  font-weight: 500;
  border-radius: 30px;
  margin-bottom: 10px;
}
.home-filter .list-home .info {
  text-align: center;
  margin-top: 15px;
  margin-bottom: 30px;
}
.home-filter .list-home .info h5 {
  font-size: 16px;
  font-weight: 500;
}
.home-filter .list-home .btn-url {
  display: flex;
  justify-content: center;
}

input {
    border-radius: 3.5px;
    height: 45px;
    border: 1px solid #979797;
}

#filterTempo {
    border-radius: 3.5px;
    height: 45px;
    border: 1px solid #979797;
    display: flex;
    justify-content: space-around;
}

#filterTempo select {
    border-radius: 3.5px;
    font-style: italic;
    height: 30px;
    border: 1px solid #979797;
    width: 50%;
    margin: 0 5px;
}
.option {
    width: 30%;
    background-color: #f5f5f5;
    padding: 15px;
    border-radius: 5px;
    text-align: center;
}

.btn-button:hover, .btn-link:hover, .btn-button:focus, .btn-link:focus {
    background: #006969;
    color: #fff;
}

.btn-button:active, .btn-link:active {
    background: #025257;
    color: #fff;
}

@media (min-width: 576px) {
    .col-sm-4 {
        -ms-flex: 0 0 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
    }
    .mt-sm-3, .my-sm-3 {
        margin-top: 1rem !important;
    }
}

@media (min-width: 992px) {
    .col-lg-4 {
        -ms-flex: 0 0 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
    }
    .col-lg-3 {
        -ms-flex: 0 0 25%;
        flex: 0 0 25%;
        max-width: 25%;
    }
    .col-lg-2 {
        -ms-flex: 0 0 16.666667%;
        flex: 0 0 16.666667%;
        max-width: 16.666667%;
    }
}
</style>