<div class="enap-card-index-block">
    {% if capsulas_relacionadas %}
        <div class="cards-grid">
            {% for capsula in capsulas_relacionadas %}
                <div class="capsula-card">
                    <div class="capsula-icon">
                        <span class="icon-book">
                            <svg viewBox="0 0 24 24" width="40" height="40" fill="#008080">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"></path>
                            </svg>
                        </span>
                    </div>
                    
                    <h3 class="capsula-title">{{ capsula.title }}</h3>
                    
                    <div class="capsula-description">
                        {% if capsula.specific.resumo_card %}
                            {{ capsula.specific.resumo_card }}
                        {% else %}
                            {{ capsula.specific.o_que_e_resumo|striptags|truncatewords:30 }}
                        {% endif %}
                    </div>
                    
                    <div class="capsula-tags">
                        {% if capsula.specific.tipos_deficiencia %}
                            {% for tipo in capsula.specific.tipos_deficiencia %}
                                <span class="tag tag-tipo-deficiencia">
                                    <span class="tag-icon">
                                        <!-- Ícone baseado no tipo -->
                                        {% if tipo == 'visual' %}
                                            <svg viewBox="0 0 24 24" width="16" height="16"><circle cx="12" cy="12" r="10" stroke="#008080" fill="none" stroke-width="2"/></svg>
                                        {% endif %}
                                    </span>
                                    {{ tipo|title }}
                                </span>
                            {% endfor %}
                        {% endif %}
                        
                        {% if capsula.specific.tipos_recurso %}
                            {% for tipo in capsula.specific.tipos_recurso %}
                                <span class="tag tag-tipo-recurso">{{ tipo|title }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>
                    
                    <div class="capsula-priority">
                        <span class="priority-icon {% if capsula.specific.prioridade == 'obrigatorio' %}priority-mandatory{% else %}priority-recommended{% endif %}">
                            <svg viewBox="0 0 24 24" width="16" height="16"><circle cx="12" cy="12" r="10" fill="{% if capsula.specific.prioridade == 'obrigatorio' %}#ff5555{% else %}#008080{% endif %}"/></svg>
                        </span>
                        <span class="priority-text">{{ capsula.specific.get_prioridade_display }}</span>
                    </div>
                    
                    <a href="{{ capsula.url }}" class="capsula-access-button">
                        Acessar Cápsula
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Nenhum conteúdo disponível</p>
    {% endif %}
</div>

<style>
    .enap-card-index-block .cards-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin: 20px 0;
    }
    
    @media (max-width: 992px) {
        .enap-card-index-block .cards-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
    
    @media (max-width: 576px) {
        .enap-card-index-block .cards-grid {
            grid-template-columns: 1fr;
        }
    }
    
    .capsula-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 20px;
        display: flex;
        flex-direction: column;
        height: 100%;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .capsula-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    }
    
    .capsula-icon {
        color: #008080;
        margin-bottom: 15px;
    }
    
    .capsula-title {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: #333;
        font-weight: 600;
    }
    
    .capsula-description {
        color: #666;
        margin-bottom: 15px;
        flex-grow: 1;
        font-size: 0.9rem;
        line-height: 1.5;
    }
    
    .capsula-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 15px;
    }
    
    .tag {
        display: inline-flex;
        align-items: center;
        background-color: #f0f0f0;
        color: #555;
        font-size: 0.75rem;
        padding: 3px 8px;
        border-radius: 12px;
    }
    
    .tag-icon {
        margin-right: 4px;
        display: inline-flex;
    }
    
    .capsula-priority {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
    }
    
    .priority-icon {
        margin-right: 5px;
    }
    
    .priority-mandatory {
        color: #ff5555;
    }
    
    .priority-recommended {
        color: #008080;
    }
    
    .priority-text {
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    .capsula-access-button {
        background-color: #005555;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        font-weight: 600;
        text-align: center;
        text-decoration: none;
        transition: background-color 0.2s;
        display: block;
    }
    
    .capsula-access-button:hover {
        background-color: #003333;
        text-decoration: none;
    }
</style>