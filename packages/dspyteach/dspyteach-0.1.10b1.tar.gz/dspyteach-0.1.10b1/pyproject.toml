# path: pyproject.toml
[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "dspyteach"
version = "0.1.10b1"
description = "CLI utility that summarizes single files into teaching briefs using DSPy, with optional MLflow tracking"
authors = [{ name = "DSPy File Maintainers" }]
readme = "README.md"
# MLflow requires Python >=3.10. Keep <=3.11 cap to match current CI base images; remove if you add 3.12 CI.
requires-python = ">=3.10,<3.12"
dependencies = [
    "dspy>=2.6",
    "pytest>=8.4.2",
    "python-dotenv>=1.0",
]
keywords = ["dspy", "teaching", "summaries", "cli", "mlflow", "tracking"]
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Operating System :: OS Independent",
    "Topic :: Software Development :: Code Generators",
]

[project.optional-dependencies]
# Install with: `uv sync --extra mlflow` (or `pip install .[mlflow]`).
mlflow = [
    # Pin to current major stream; adjust upper bound if breaking changes in 4.x are acceptable.
    "mlflow>=3.3,<4",
]

[project.scripts]
dspyteach = "dspy_file.analyze_file_cli:main"

[tool.setuptools.packages.find]
include = ["dspy_file", "dspy_file.*"]

[tool.setuptools.package-data]
"dspy_file" = ["prompts/*.md"]

# uv index example for TestPyPI; keep if you publish snapshots there.
[[tool.uv.index]]
name = "testpypi"
url = "https://test.pypi.org/simple/"
publish-url = "https://test.pypi.org/legacy/"
explicit = true
