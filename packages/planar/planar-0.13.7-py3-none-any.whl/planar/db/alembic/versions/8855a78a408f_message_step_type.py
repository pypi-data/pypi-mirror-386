"""Add MESSAGE to step_type enum

Revision ID: 8855a78a408f
Revises: 3476068c153c
Create Date: 2025-09-16 16:19:25.917861

"""

from typing import Sequence, Union

from alembic import op

# revision identifiers, used by Alembic.
revision: str = "8855a78a408f"
down_revision: Union[str, None] = "3476068c153c"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    if op.get_context().dialect.name != "sqlite":
        op.execute("ALTER TYPE steptype ADD VALUE 'MESSAGE'")


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    # Rolling this back would require updating any MESSAGE `WorkflowStep` rows to a different
    # step type or deleting them before running a migration to drop the MESSAGE value.
    pass
    # ### end Alembic commands ###
