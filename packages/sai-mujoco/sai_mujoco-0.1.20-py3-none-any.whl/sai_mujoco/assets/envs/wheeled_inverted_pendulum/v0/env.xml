<mujoco model="inverted pendulum with wheels">
    <compiler inertiafromgeom="true" />
    <asset>
        <texture name="grid" type="2d" builtin="checker" width="512" height="512" rgb1=".1 .2 .3"
            rgb2=".2 .3 .4" />
        <material name="grid" texture="grid" texrepeat="1 1" texuniform="true" reflectance=".2" />
    </asset>
    <default>
        <joint armature="1" damping="1" limited="true" />
        <geom conaffinity="1" condim="3" contype="1" friction="1 0.05 0.01" rgba="0.7 0.7 0 1" />
        <motor ctrlrange="-3 3" />
    </default>
    <option gravity="0 0 -9.81" integrator="RK4" timestep="0.0168" />
    <size nstack="3000" />
    <worldbody>
        <!-- Ground plane -->
        <geom type="plane" size="2 2 0.01" material="grid" />

        <!-- Lights -->
        <light name="top_light" pos="0 0 5" dir="0 0 -1" diffuse="1 1 1" specular="0.5 0.5 0.5"
            ambient="0.01 0.01 0.01" cutoff="180" />

        <!-- Main body (acts as a shared frame for both wheels and the pendulum) -->
        <body name="Body" pos="0 0 0.15">
            <!-- Slider Joint for Horizontal Movement -->
            <joint axis="1 0 0" limited="true" name="horizontal_position" pos="0 0 0" range="-2 2"
                type="slide" />
            <geom name="axle" type="cylinder" pos="0 0 0" size="0.025 0.2" axisangle="1 0 0 90"
                rgba="0.3 0.3 0.7 1" conaffinity="0" />

            <!-- Wheels -->
            <body name="Wheels" pos="0 0 0">
                <joint name="wheel_joint" type="hinge" pos="0 0 0" axis="0 1 0" range="-inf inf" />

                <body name="right_wheel" pos="0 0.2 0">
                    <geom name="right_wheel_cylinder" type="cylinder" pos="0 0 0" size="0.155 0.051"
                        axisangle="1 0 0 90" rgba="0.3 0.3 0.7 1" />

                    <geom name="right_spoke1" type="capsule" fromto="0 0.05 0 0 0.05 0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="right_spoke2" type="capsule" fromto="0 0.05 0 0 0.05 -0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="right_spoke3" type="capsule" fromto="0 0.05 0 -0.14 0.05 0"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="right_spoke4" type="capsule" fromto="0 0.05 0 0.14 0.05 0"
                        size="0.005" rgba="0 0 0 1" />

                    <geom name="right_spoke5" type="capsule" fromto="0 -0.05 0 0 -0.05 0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="right_spoke6" type="capsule" fromto="0 -0.05 0 0 -0.05 -0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="right_spoke7" type="capsule" fromto="0 -0.05 0 -0.14 -0.05 0"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="right_spoke8" type="capsule" fromto="0 -0.05 0 0.14 -0.05 0"
                        size="0.005" rgba="0 0 0 1" />
                </body>

                <body name="left_wheel" pos="0 -0.2 0">
                    <geom name="left_wheel_cylinder" type="cylinder" pos="0 0 0" size="0.155 0.051"
                        axisangle="1 0 0 90" rgba="0.3 0.3 0.7 1" />

                    <geom name="left_spoke1" type="capsule" fromto="0 0.05 0 0 0.05 0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="left_spoke2" type="capsule" fromto="0 0.05 0 0 0.05 -0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="left_spoke3" type="capsule" fromto="0 0.05 0 -0.14 0.05 0"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="left_spoke4" type="capsule" fromto="0 0.05 0 0.14 0.05 0"
                        size="0.005" rgba="0 0 0 1" />

                    <geom name="left_spoke5" type="capsule" fromto="0 -0.05 0 0 -0.05 0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="left_spoke6" type="capsule" fromto="0 -0.05 0 0 -0.05 -0.14"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="left_spoke7" type="capsule" fromto="0 -0.05 0 -0.14 -0.05 0"
                        size="0.005" rgba="0 0 0 1" />
                    <geom name="left_spoke8" type="capsule" fromto="0 -0.05 0 0.14 -0.05 0"
                        size="0.005" rgba="0 0 0 1" />
                </body>

            </body>

            <!-- Pendulum body attached to the axle -->
            <body name="pendulum" pos="0 0 0">
                <joint axis="0 1 0" name="pendulum_hinge" pos="0 0 0" range="-90 90" type="hinge" />
                <geom fromto="0 0 0 0 0 0.6" name="pendulum_geom" rgba="0 0.7 0.7 1" size="0.025"
                    type="capsule" conaffinity="0" mass="2" />
            </body>
        </body>
    </worldbody>

    <!-- Motor controlling both wheel joints -->
    <actuator>
        <motor name="wheel_motor" joint="wheel_joint" gear="100" ctrllimited="true" ctrlrange="-3 3" />
    </actuator>
</mujoco>