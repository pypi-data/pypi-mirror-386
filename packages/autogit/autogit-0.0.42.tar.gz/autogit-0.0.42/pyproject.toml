[project]
name = "autogit"
authors = [
    {name = "Albertas Gimbutas", email = "albertasgim@gmail.com"},
]
description = "autogit is a command line tool for updating multiple GitLab or GitHub repositories with a single command."
readme = "README.md"
requires-python = ">= 3.12"
classifiers = [
    "Development Status :: 3 - Alpha",
    "License :: OSI Approved :: GNU Affero General Public License v3",
    "Natural Language :: English",
    "Operating System :: OS Independent",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dynamic = ["version"]
dependencies = [
    "GitPython >= 3.1.29",
    "httpx >= 0.23.1",
    "rich >= 4.0.0",
]

[project.urls]
homepage = "https://github.com/albertas/autogit"

[project.scripts]
autogit = "autogit.cli:main"

[project.optional-dependencies]
test = [
    "hatch",
    "ruff",
    "mypy",
    "pip-audit",
    "deadcode",
    "pytest",
    "pytest-asyncio",
    "pytest-cov",
]

[tool.pytest.ini_options]
addopts = "--cov=. --no-cov-on-fail --cov-fail-under=50.0"
asyncio_mode = "auto"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build]
include = ["**/*.py"]
exclude = ["tests/**"]

[tool.hatch.version]
path = "autogit/__init__.py"

[tool.ruff]  # https://docs.astral.sh/ruff/settings/
line-length = 99

[tool.ruff.lint.flake8-quotes]
inline-quotes = "single"

[tool.ruff.format]
quote-style = "single"
docstring-code-format = true

[tool.ruff.lint]
select = ["ALL"]
ignore = [
    "T201",    # Do not remove print() statements
    "D203",    # one blank line before class
    "D213",    # multi line summary second line
    "COM812",  # missing trailing comma
    "ISC001",  # single line implicit string concatenation
    "ANN001",
    "ANN002",
    "ANN003",
    "ANN201",
    "ANN202",
    "ANN204",
    "ARG001",
    "ASYNC110",
    "ASYNC220",
    "BLE001",
    "D100",
    "D101",
    "D102",
    "D103",
    "D104",
    "D105",
    "D107",
    "D205",
    "D401",
    "E501",
    "ERA001",
    "EXE002",
    "FBT001",
    "FBT002",
    "FIX002",
    "FURB116",
    "INP001",
    "PGH003",
    "PLR2004",
    "PTH100",
    "PTH110",
    "PTH113",
    "PTH118",
    "PTH123",
    "PLR0913",
    "S105",
    "S108",
    "S311",
    "S603",
    "SLF001",
    "TD002",
    "TD003",
    "TD005",
    "TRY004",
    "YTT204",
]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["S101", "D"] # allow assert and no docs in tests

[tool.mypy]
exclude = ["build", "dist", ".venv"]
python_version = "3.12"
strict = true
pretty = true
color_output = true
show_error_codes = true
warn_return_any = true
warn_unused_configs = true
disable_error_code = "attr-defined,no-any-return,no-untyped-call,no-untyped-def,type-arg,unused-ignore"

[tool.deadcode]
ignore_names = [
    "main",
]
exclude = ["tests"]
