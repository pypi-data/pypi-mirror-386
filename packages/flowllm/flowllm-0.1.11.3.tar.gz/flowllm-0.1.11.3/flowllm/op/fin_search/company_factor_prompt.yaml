merge_meta_prompt: |
  # 角色与任务
  你是金融研究员，需要合并多个业务板块的 Meta 信息列表，进行去重和冲突解决。

  # 输入
  ## 所有业务板块的 Meta 信息列表
  {meta_lists}

  # 任务要求
  1. **合并**：将所有 Meta 信息汇总到一个列表
  2. **去重**：删除完全重复的信息
  3. **同义合并**：识别表述不同但含义相同的信息，合并为一条
  4. **冲突解决**：若存在相互矛盾的信息，保留时间更近或更权威的版本
  5. **保持简洁**：每条 Meta 信息≤20字，客观、具体
  6. **排序**：按重要性排序，优先级：政策 > 行业变化 > 公司数据 > 上下游

  # 输出格式
  ### 思考
  简要说明合并、去重、解冲突的过程

  ### 合并后的 Meta 信息列表
  ```json
  ["Meta信息1", "Meta信息2", ...]
  ```

merge_graphs_prompt: |
  # 角色与任务
  你是金融研究员，需要融合多个业务板块的因子传导图，构建公司整体估值的金融因子逻辑图。

  # 输入
  ## 公司名称
  {name}

  ## 合并的 Meta 信息列表
  {meta_list}

  ## 所有业务板块的因子传导图
  {segment_graphs}

  # 任务要求
  1. **基础结构（必须保留）**：
     - 最终收敛点：`A[{name} 估值变化]`
     - 各业务板块因子：`An[公司名 板块名 估值变化]`（如 A1、A2、A3...）
     - 板块到公司的指向：`An[公司名 板块名 估值变化] --> A[{name} 估值变化]`
     - 这些因子和连接是最基础的金融因子逻辑图骨架，必须完整保留
     - 注意：估值变化为中性表述，正向或负向影响由读者根据因子传导路径自行判断
  
  2. **分析视角原则**：
     - 未盈利公司：重点关注营收增长、市场份额变化等规模指标
     - 已盈利公司：重点关注利润率、成本控制、盈利能力等效率指标
     - 估值分析：需考虑市场利率环境、宏观因子对估值的影响
  
  3. **因子提取**：从各板块图中提取起始因子和中间因子
  
  4. **起始因子约束**：
     - 最多9个起始点
     - 起始点必须是完整的 Meta 信息，直接从 Meta 列表中选取，尽可能包含核心数字
     - 起始点必须是客观事件/政策/新闻/数据等不可扩展的客观点
     - 不可使用主观判断或趋势性描述作为起始点
  
  5. **去重合并**：
     - 相同因子直接合并（如多个板块都有"AI需求增加"，只保留一个）
  
  6. **路径构建**：
     - 越是起始因子，越是具体；越往后越抽象，逐层传导
     - 中间因子可以相对泛化，聚合多个具体事件的影响
     - 中间因子分类参考：
       * 上游：原材料、设备、成本
       * 自身：产能、技术、效率
       * 下游：需求、订单、景气度
       * 政策：监管、补贴、关税
       * 公司：财报、公告、规划
     - 各因子最终指向对应的板块因子 `An[公司名 板块名 估值变化]`
     - 板块因子再指向公司总因子 `A[{name} 估值变化]`
     - 每条路径最多6个因子（包括起始点和终点 `A[{name} 估值变化]`）
     - 优先保留影响范围大的因子
    
  7. **逻辑清晰**：
     - 因果关系明确
     - 禁止循环依赖
     - 除了起始因子外，其他因子命名简洁（≤10字）
     - 中间因子保持客观描述，不预设正负方向

  # Mermaid 规范
  - 格式：`graph LR;`（Left-Right，从左到右展示因果关系）
  - 公司总收敛点：`A[{name} 估值变化]`（位于右侧）
  - 板块因子：`A1[公司名 板块1 估值变化]`、`A2[公司名 板块2 估值变化]` 等（位于中间）
  - 起始因子：位于左侧
  - **所有因子必须使用格式**：`X[内容]`，其中：
    - X 是单个字符（如 B、C、D 等）或 An 形式（如 A1、A2、B1、C1 等）
    - 内容必须是中文描述
    - 例如：`B[AI需求增加]`、`C[政策支持]`、`D1[云服务收入变化]`
  - 示例：
   ```mermaid
   graph LR;
   C[云计算补贴政策出台] --> C1[企业上云成本降低]
   B1[AI算力需求激增] --> D1[云服务收入变化]
   C1[企业上云成本降低] --> D1[云服务收入变化]
   D1[云服务收入变化] --> A1[阿里巴巴 云计算 估值变化]
   E[与饿了么合并完成] --> E1[本地生活订单量变化]
   E1[本地生活订单量变化] --> A2[阿里巴巴 本地生活 估值变化]
   E1[本地生活订单量变化] --> E2[电商用户活跃度变化]
   E2[电商用户活跃度变化] --> A3[阿里巴巴 电商 估值变化]
   A1[阿里巴巴 云计算 估值变化] --> A[阿里巴巴 估值变化]
   A2[阿里巴巴 本地生活 估值变化] --> A[阿里巴巴 估值变化]
   A3[阿里巴巴 电商 估值变化] --> A[阿里巴巴 估值变化]
   ```

  # 输出格式
  ### 思考
  1. 识别的业务板块及对应因子（A1、A2、A3...）
  2. 从各板块提取的核心因子
  3. 合并和归类的逻辑
  4. 最终选择的传导路径及理由

  ### 融合后的金融因子逻辑图
  ```mermaid
  graph LR;
  ...
  ```
