jobs:
  step-1:
    steps:
      - name: Set env vars
        run: |
          echo GOLD_FILE=gold/foo.exo > $KURISTO_ENV

      - name: Add env vars
        run: |
          echo "TOL=1e-6" >> $KURISTO_ENV
          echo "NORM=L2" >> $KURISTO_ENV

      - name: Print env var
        run: |
          echo GOLD_FILE="$GOLD_FILE"
          echo TOL="$TOL"
          echo NORM="$NORM"

  step-with-path:
    steps:
      - name: Add PATH
        run: |
          echo "$PWD" >> $KURISTO_PATH

  step-with-env:
    env:
      ENV_VAR_JOB: "Job env var"
    steps:
      - name: Run with env vars
        id: step_env_var
        env:
          ENV_VAR1: 42
        run: |
          echo $ENV_VAR1

      - name: Check-1
        uses: checks/regex
        with:
          input: ${{ steps.step_env_var.output }}
          pattern: "42"

      - name: Show job env var
        id: job_env_var
        run: |
          echo $ENV_VAR_JOB

      - name: Check-2
        uses: checks/regex
        with:
          input: ${{ steps.job_env_var.output }}
          pattern: "Job env var"
