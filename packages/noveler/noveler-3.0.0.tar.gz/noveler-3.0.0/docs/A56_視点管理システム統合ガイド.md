# A56_視点管理システム統合ガイド

視点管理システムが執筆ワークフローに完全統合されました。このガイドでは、統合された視点管理システムの使用方法を説明します。

## 🎯 概要

視点管理システムは以下の機能を提供します：

- **視点情報の設定・管理**: エピソードごとの詳細な視点設定
- **プロット作成時の視点統合**: 章別プロット作成時に視点管理テンプレートを使用
- **品質チェック時の視点表示**: 品質チェック実行時に視点情報を自動表示
- **視点連動型品質評価**: 視点タイプに応じた動的な品質基準調整

## 📋 統合された機能一覧

### 1. 視点管理CLIコマンド

```bash
# 視点情報を設定
novel viewpoint set 5 --character "律" --type single_introspective --complexity medium --focus "心理描写"

# 視点情報一覧を表示
novel viewpoint list
novel viewpoint list --chapter 2

# 特定エピソードの視点情報を確認
novel viewpoint check 5

# 視点管理用テンプレートを生成
novel viewpoint template chapter --number 2
novel viewpoint template episode --number 5

# 視点情報の整合性をチェック
novel viewpoint validate
novel viewpoint validate --chapter 2
```

### 2. プロット作成時の視点設定統合

```bash
# 視点管理設定を含めて章別プロットを作成
novel plot chapter 2 --with-viewpoint
```

このコマンドは：
- 章別プロットテンプレート_視点管理拡張.yamlを使用
- 各エピソードに詳細な視点管理設定を含める
- 身体交換・記憶共有等の特殊状況に対応

### 3. 品質チェック時の視点情報表示

```bash
novel check 5
```

品質チェック実行時に自動的に表示される情報：
```
🎭 視点情報 (エピソード 005)
==================================================
📌 視点キャラクター: 律
📌 視点タイプ: 律→カノンBody
📌 複雑度: 高
📌 特殊条件: 身体交換、感覚の違い、動作感覚の変化
📌 語りの焦点: カノンの身体での律の体験
🔍 視点情報に基づいて品質評価を調整します
==================================================
```

## 🔄 統合ワークフロー

### 基本的な執筆フロー

1. **プロット作成**
   ```bash
   novel plot chapter 2 --with-viewpoint
   ```
   → 視点管理設定付きプロットが作成される

2. **視点情報詳細設定**（必要に応じて）
   ```bash
   novel viewpoint set 5 --character "律" --type body_swap --complexity high
   ```

3. **執筆開始**
   ```bash
   novel write 5
   ```

4. **品質チェック**
   ```bash
   novel check 5
   ```
   → 視点情報が自動表示され、視点に応じた品質評価が実行される

### 複雑な視点作品（身体交換・記憶共有等）

```bash
# 身体交換エピソードの設定例
novel viewpoint set 6 \
  --character "律" \
  --type body_swap \
  --complexity high \
  --conditions "身体交換" "感覚の違い" "動作感覚の変化" \
  --focus "カノンの身体での律の体験"

# 記憶共有エピソードの設定例
novel viewpoint set 8 \
  --character "律＆カノン" \
  --type multiple_perspective \
  --complexity high \
  --conditions "記憶共有47%" "記憶干渉" \
  --focus "共有記憶による相互理解"
```

## 📊 視点タイプ別設定ガイド

### single_introspective（単一視点・内省型）
- **適用**: 心理描写中心のエピソード
- **特徴**: 内面描写を重視、会話比率の基準を緩和
- **例**: `novel viewpoint set 3 -c "律" -t single_introspective --focus "心理描写"`

### single_interactive（単一視点・交流型）
- **適用**: 会話・交流中心のエピソード
- **特徴**: 標準的な品質基準を適用
- **例**: `novel viewpoint set 4 -c "律" -t single_interactive --focus "キャラクター間交流"`

### body_swap（身体交換）
- **適用**: 身体交換・意識転送シーン
- **特徴**: 視点明確さを重視、内面描写も重視
- **例**: `novel viewpoint set 6 -c "律" -t body_swap --conditions "身体交換"`

### multiple_perspective（複数視点）
- **適用**: マルチ視点、視点切り替えシーン
- **特徴**: 視点明確さを最重視
- **例**: `novel viewpoint set 9 -c "複数" -t multiple_perspective --conditions "視点切り替え"`

## 🛠️ テンプレート活用

### 章別プロット作成時の視点管理

`novel plot chapter 2 --with-viewpoint` を実行すると：

```yaml
episode_breakdown:
  "005":
    title: "第5話 タイトル"

    # 詳細視点管理
    viewpoint_details:
      consciousness: "律"
      body: "律"
      memory_access: "律の記憶のみ"
      narrative_focus: "技術への興味と慎重さ"

      caution_points:
        - "技術者視点での詳細描写"
        - "慎重さと好奇心のバランス"

    # 品質チェック項目（視点管理）
    viewpoint_quality_check:
      enabled: true
      check_items:
        - "視点の一貫性"
        - "キャラクターらしさの維持"
```

### 身体交換用テンプレート例

```yaml
    viewpoint_details:
      consciousness: "律"
      body: "カノン"
      viewpoint_label: "律→カノンBody"

      body_swap_details:
        swap_type: "完全"
        adaptation_level: "20%"
        sensory_differences: "身長差、体型差、声の違い"
        movement_differences: "動作感覚の違い"
        voice_changes: "カノンの声での発言"
```

## 🔍 品質チェック連動

### 視点情報に基づく品質調整

視点管理システムは品質チェック時に以下の調整を自動実行：

1. **内省型視点**
   - 会話比率の基準を緩和（重み: 0.5）
   - 内面描写深度を重視（重み: 1.5）

2. **身体交換視点**
   - 会話比率の基準を緩和（重み: 0.7）
   - 内面描写深度を重視（重み: 1.3）
   - 視点明確さを重視（重み: 1.5）

3. **複数視点**
   - 視点明確さを最重視（重み: 1.5）
   - 会話比率の基準を緩和（重み: 0.7）

### 品質評価メッセージ例

```
視点情報に基づいて以下を調整:
• 会話比率: 60.0→80.0 （単一視点・内省型のため基準緩和）
• 内面描写深度: 70.0→35.0 （単一視点・内省型のため重要度調整）
```

## 📈 統合の利点

### 1. ワークフロー効率化
- プロット作成から品質チェックまで一貫した視点管理
- 手動設定の手間を大幅削減
- テンプレートによる標準化

### 2. 品質向上
- 視点タイプに応じた適切な品質基準
- 身体交換等の複雑な視点での整合性確保
- 読者の混乱を防ぐ視点明確化

### 3. 作品の一貫性
- 全エピソードの視点情報を統一管理
- キャラクターらしさの維持
- 視点切り替えの適切な処理

## ⚠️ 注意事項とベストプラクティス

### 注意事項

1. **プロット作成の優先**
   - 視点情報設定前に基本プロットを作成
   - 章別プロット作成時に `--with-viewpoint` を使用推奨

2. **複雑な視点の慎重な管理**
   - 身体交換・記憶共有は高複雑度として設定
   - 特殊条件を詳細に記載

3. **品質チェックの活用**
   - 視点情報が表示されることで適切な評価を確認
   - 調整されたスコアの意味を理解

### ベストプラクティス

1. **段階的な視点設定**
   ```bash
   # 1. 基本プロット作成
   novel plot chapter 2 --with-viewpoint

   # 2. 詳細視点設定（必要に応じて）
   novel viewpoint set 6 -c "律" -t body_swap --complexity high

   # 3. 整合性チェック
   novel viewpoint validate --chapter 2
   ```

2. **視点情報の定期確認**
   ```bash
   novel viewpoint list --chapter 2
   ```

3. **テンプレート活用**
   - 章別プロットテンプレート_視点管理拡張.yamlを参考
   - ゼロデイ・ボディパーティ_視点管理例.yamlで実例を確認

## 🔗 関連ガイド

- **[A50_AI協創執筆ガイド.md](A50_AI協創執筆ガイド.md)**: AI活用時の視点管理
- **[A30_執筆ワークフロー.md](A30_執筆ワークフロー.md)**: 基本的な執筆手法
- **[B10_品質管理システムガイド.md](B10_品質管理システムガイド.md)**: 品質チェック詳細

## 📝 まとめ

視点管理システムの統合により：

1. **統合されたワークフロー**: プロット作成から品質チェックまで一貫した視点管理
2. **自動化された品質調整**: 視点タイプに応じた動的な品質基準
3. **複雑な視点の適切な管理**: 身体交換・記憶共有等の高度な表現技法をサポート

これにより、複雑な視点を持つ作品でも効率的かつ高品質な執筆が可能になりました。
