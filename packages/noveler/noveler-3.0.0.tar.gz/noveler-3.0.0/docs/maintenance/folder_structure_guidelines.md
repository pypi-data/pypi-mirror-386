# フォルダ整理方針（2025-10-02）

本ドキュメントでは、クロスプラットフォーム対応後のフォルダ整理方針を整理する。既存の運用やスクリプトへの影響を避けつつ、段階的にディレクトリ構成を改善することを目的とする。

## 1. MCP 関連ファイル

- codex.mcp.json（リポジトリ直下）と C:¥Users¥bamboocity¥.claude.json は従来どおり実運用ファイルとして保持する。
- 追加で config/mcp/ を作成し、テンプレートや派生設定（例: config/mcp/codex.template.json）を保存する。
- 設定更新は既存スクリプト（in/setup_mcp_configs → scripts/setup/update_mcp_configs.py）を利用し、テンプレート参照を併用する。

## 2. bin ディレクトリ

- in/ 直下のスクリプト構成は変更しない。
- OS ごとの補足情報を in/README.md（必要ならサブディレクトリの README）に追記し、利用者に PATH 設定や呼び出し方法を明示する。

## 3. レポート・バックアップ

- 既存の ackups/, logs/, eports/ はそのまま維持する。
- 新たな成果物を格納する際は ar/<用途> を優先的に用い、移行する場合は Makefile や CI スクリプトの参照先変更をあわせて実施する。

## 4. キャッシュ類

- 直ちに移動せず、.cache/<tool> にまとめたい対象を洗い出して一覧化する。
- Ruff・VSCode・Hypothesis など各ツールの設定変更手順を整理し、準備が整ったものから順次 .cache/ へ移行する。

## 5. アーカイブ系

- 20-outputs, 20-test など過去リリース専用フォルダは参照状況を確認したうえで rchive/b20/ へ移す計画を立てる。
- 実際に移動するときは、関連ドキュメントやスクリプトのパス更新を必ず同時に行う。

## 6. 資料ディレクトリ

- docs/, specs/, models/, 	emplates/ の役割を README やガイドラインで明文化する。
- 必要に応じて docs/domain/ と docs/tooling/ などサブディレクトリを追加し、ファイル移動は最小限に留める。

## 7. 運用上の注意

- ディレクトリの移動が発生する場合は、依存スクリプト・ドキュメント・CI 設定の影響範囲を事前に洗い出す。
- 移行手順は各フェーズごとに issue / runbook 化し、作業前にレビューを受ける。
- OneDrive 同期やクロスプラットフォーム実行時の挙動が変わらないか最小構成で検証する。

## 8. Python カスタマイゼーションファイル (ルート配置)

以下のファイルは **Pythonインタプリタの自動ロード機構** により、
プロジェクトルートに配置する必要があります:

- `sitecustomize.py`: siteモジュールの自動ロード対象
- `usercustomize.py`: ユーザーレベルのランタイムカスタマイゼーション
- `bootstrap_stdio.py`: MCPサーバーのstdoutプロトコル保護

これらのファイルを移動すると、テストハーネスやMCPサーバーの
起動に影響するため、移動しないでください。
