#!/usr/bin/env bash
# File: bin/test-failed
# Purpose: Re-run last failed tests first (fail-fast). Forwards extra args.
set -euo pipefail
SCRIPT_DIR="$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
ROOT_DIR="$( cd -- "${SCRIPT_DIR}/.." &> /dev/null && pwd )"
cd "${ROOT_DIR}"
exec python3 scripts/run_pytest.py --last-failed -x "$@"
