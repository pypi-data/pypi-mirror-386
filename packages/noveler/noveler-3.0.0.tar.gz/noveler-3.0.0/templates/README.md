# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€novelerã‚·ã‚¹ãƒ†ãƒ ã§ä½¿ç”¨ã™ã‚‹å„ç¨®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¯ å®Ÿéš›ã«ä½¿ç”¨ä¸­ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### æ®µéšå®Ÿè¡Œç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆ19ã‚¹ãƒ†ãƒƒãƒ—åŸ·ç­†ã‚·ã‚¹ãƒ†ãƒ  / Schema v2ï¼‰
- `write_step00_scope_definition.yaml` â€“ STEP0: ã‚¹ã‚³ãƒ¼ãƒ—å®šç¾©
- `write_step01_chapter_purpose.yaml` â€“ STEP1: ç« ã®ç›®çš„ç·š
- `write_step02_section_goals.yaml` â€“ STEP2: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç›®æ¨™
- `write_step03_theme_uniqueness.yaml` â€“ STEP3: ãƒ†ãƒ¼ãƒç‹¬è‡ªæ€§æ¤œè¨¼
- `write_step04_section_balance.yaml` â€“ STEP4: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ©ãƒ³ã‚¹è¨­è¨ˆ
- `write_step05_scene_beats.yaml` â€“ STEP5: ã‚·ãƒ¼ãƒ³/ãƒ“ãƒ¼ãƒˆè¨­è¨ˆ
- `write_step06_logic_verification.yaml` â€“ STEP6: è«–ç†æ¤œè¨¼
- `write_step07_character_detail.yaml` â€“ STEP7: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°åŒ–
- `write_step08_dialogue_design.yaml` â€“ STEP8: å¯¾è©±è¨­è¨ˆ
- `write_step09_emotion_curve.yaml` â€“ STEP9: æ„Ÿæƒ…ã‚«ãƒ¼ãƒ–è¨­è¨ˆ
- `write_step10_atmosphere_worldview.yaml` â€“ STEP10: é›°å›²æ°—ãƒ»ä¸–ç•Œè¦³æ¼”å‡º
- `write_step11_foreshadow_placement.yaml` â€“ STEP11: ä¼ç·šé…ç½®
- `write_step12_first_draft.yaml` â€“ STEP12: åˆç¨¿åŸ·ç­†
- `write_step13_style_adjustment.yaml` â€“ STEP13: æ–‡ä½“èª¿æ•´
- `write_step14_description_enhancement.yaml` â€“ STEP14: æå†™å¼·åŒ–
- `write_step15_readability_optimization.yaml` â€“ STEP15: èª­ã¿ã‚„ã™ã•æœ€é©åŒ–
- `write_step16_quality_check.yaml` â€“ STEP16: å“è³ªãƒã‚§ãƒƒã‚¯
- `write_step17_reader_experience.yaml` â€“ STEP17: èª­è€…ä½“é¨“æœ€é©åŒ–
- `write_step18_final_preparation.yaml` â€“ STEP18: æœ€çµ‚ç¢ºèªãƒ»å…¬é–‹æº–å‚™

**ä½¿ç”¨ã‚·ã‚¹ãƒ†ãƒ :** ProgressiveWriteManager / ProgressiveTaskManagerï¼ˆæ®µéšå®Ÿè¡Œåˆ¶å¾¡ï¼‰

### ãƒ—ãƒ­ãƒƒãƒˆç”Ÿæˆç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- `ç« åˆ¥ãƒ—ãƒ­ãƒƒãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ.yaml` - ç« åˆ¥è©³ç´°ãƒ—ãƒ­ãƒƒãƒˆä½œæˆç”¨
- `è©±åˆ¥ãƒ—ãƒ­ãƒƒãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ.yaml` - è©±åˆ¥è©³ç´°ãƒ—ãƒ­ãƒƒãƒˆä½œæˆç”¨
- `chapter_plot.yaml` - ç« ãƒ—ãƒ­ãƒƒãƒˆç”Ÿæˆç”¨ï¼ˆç°¡æ˜“ç‰ˆï¼‰

**ä½¿ç”¨ã‚·ã‚¹ãƒ†ãƒ :** YamlTemplateRepository, PlotCreationOrchestrator

### å“è³ªãƒã‚§ãƒƒã‚¯ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- `check_step01_typo_check.yaml` ã€œ `check_step12_final_quality_approval.yaml`
  - 12æ®µéšå“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆSchema v2 / ProgressiveCheckManager å°‚ç”¨ï¼‰
  - ãƒ«ãƒ¼ãƒˆå¿…é ˆã‚­ãƒ¼: `metadata`, `llm_config`, `prompt`, `inputs`, `constraints`, `tasks`, `artifacts`, `acceptance_criteria`, `next`, `variables`, `control_settings`, `check_criteria`
- `comprehensive.yaml` - ç·åˆå“è³ªãƒã‚§ãƒƒã‚¯
  - LangGraph ç‰ˆã§ã¯ `control_settings` ã«åŠ ãˆã¦ `available_tools` ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®šç¾©ã—ã€å„ãƒ„ãƒ¼ãƒ«ã® `tool_id`, `min_severity`, `requires_user_confirmation`, `fallback_tool_id` ã‚’è¨˜è¿°ã™ã‚‹ã€‚
  - æŠœç²‹ã‚’ LLM ã«æ¸¡ã™å ´åˆã¯ `manuscript_excerpt` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã€`excerpt_hash` / `source_key` / `range_checksum` ã‚’å¤‰æ•°ã¨ã—ã¦å®£è¨€ã™ã‚‹ã€‚
- `consistency_analysis.yaml` - ä¸€è²«æ€§åˆ†æ
- `creative_focus.yaml` - å‰µä½œæ€§é‡è¦–ãƒã‚§ãƒƒã‚¯
- `debug.yaml` - ãƒ‡ãƒãƒƒã‚°ç”¨ãƒã‚§ãƒƒã‚¯
- `emotional_depth_analyzer.yaml` - æ„Ÿæƒ…æ·±åº¦åˆ†æ
- `quick.yaml` - ã‚¯ã‚¤ãƒƒã‚¯ãƒã‚§ãƒƒã‚¯
- `reader_experience.yaml` - èª­è€…ä½“é¨“ãƒã‚§ãƒƒã‚¯
- `structural.yaml` - æ§‹é€ ãƒã‚§ãƒƒã‚¯
- ãã®ä»–ã®å“è³ªé–¢é€£ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

**ä½¿ç”¨ã‚·ã‚¹ãƒ†ãƒ :** å“è³ªãƒã‚§ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰

## ğŸ“‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å½¹å‰²
- **æ®µéšå®Ÿè¡Œåˆ¶å¾¡**: LLMã«ã‚ˆã‚‹ä¸€æ‹¬å®Ÿè¡Œã‚’é˜²ãã€ã‚¹ãƒ†ãƒƒãƒ—å˜ä½ã§å®Ÿè¡Œ
- **ãƒ—ãƒ­ãƒƒãƒˆç”Ÿæˆ**: æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ãƒƒãƒˆä½œæˆæ”¯æ´
- **å“è³ªç®¡ç†**: åŸ·ç­†å“è³ªã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ãƒ»æ”¹å–„ææ¡ˆ

## ğŸ“ å‘½åè¦å‰‡
- **writeã‚³ãƒãƒ³ãƒ‰ç”¨**: `write_step*_*.yaml` - `/noveler write` ãŠã‚ˆã³ MCP çµŒç”±ã®æ®µéšå®Ÿè¡Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  - Schema v2 æ§‹é€ åŒ–ä»•æ§˜ï¼ˆA38æº–æ‹ ï¼‰: `docs/technical/prompt_template_schema_v2.md`
  - ãƒ«ãƒ¼ãƒˆå¿…é ˆã‚­ãƒ¼: `metadata`, `llm_config`, `prompt`, `inputs`, `constraints`, `tasks`, `artifacts`, `acceptance_criteria`, `next`, `variables`, `control_settings`
  - `control_settings` ã¯å…¨STEPã§ `strict_single_step` ãªã©å®‰å…¨ã‚¬ãƒ¼ãƒ‰ã‚’ `true` æŒ‡å®šã€‚å®Ÿè£…å´ãŒã“ã‚Œã‚‰ã®åˆ¶å¾¡ãƒ•ãƒ©ã‚°ã‚’å°Šé‡ã™ã‚‹å‰æã§ã™ã€‚
- **plotã‚³ãƒãƒ³ãƒ‰ç”¨**: `*ãƒ—ãƒ­ãƒƒãƒˆ*.yaml` - ãƒ—ãƒ­ãƒƒãƒˆç”Ÿæˆã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- **å“è³ªãƒã‚§ãƒƒã‚¯ç”¨**: `check_step*_*.yaml` / `*.yaml` - å“è³ªãƒã‚§ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  - Schema v2 æ§‹é€ åŒ–ä»•æ§˜ï¼ˆA38æº–æ‹ ï¼‰: ProgressiveCheckManager ãŒ `check_step*_*.yaml` ã‚’å„ªå…ˆãƒ­ãƒ¼ãƒ‰
  - ãƒ«ãƒ¼ãƒˆå¿…é ˆã‚­ãƒ¼: `metadata`, `llm_config`, `prompt`, `inputs`, `constraints`, `tasks`, `artifacts`, `acceptance_criteria`, `next`, `variables`, `control_settings`, `check_criteria`

## ğŸ“ æ›´æ–°å±¥æ­´
- 2025-09-24: check_step*_*.yaml ã‚’ Schema v2 ä»•æ§˜ã¸æ›´æ–°ï¼ˆProgressiveCheckManagerå¯¾å¿œï¼‰
- 2025-09-09: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ•´ç†ã€ã‚·ãƒ³ãƒ—ãƒ«æ§‹é€ ã«å¤‰æ›´
- 2025-09-09: å®Ÿç”¨æ€§é‡è¦–ã§templatesç›´ä¸‹ã«é…ç½®çµ±ä¸€
- 2025-09-09: ç”¨é€”æ˜ç¤ºã®ãŸã‚write_step*å½¢å¼ã«å‘½åè¦å‰‡å¤‰æ›´


## ğŸ” ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ¢ç´¢é †ï¼ˆå“è³ª/æ¨æ•²ï¼‰
1. `templates/quality/checks/`ï¼ˆæ­£æœ¬ï¼‰
2. `templates/quality/checks/backup/`ï¼ˆé€€é¿ãƒ»å‚ç…§å°‚ç”¨ï¼‰
3. æ—§äº’æ›: `templates/writing/`ï¼ˆå­˜åœ¨æ™‚ã®ã¿ï¼‰
æ¤œè¨¼å¤±æ•—æ™‚ã¯å†…è”µãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã€WARN ãƒ­ã‚°ã« `template_source=embedded` ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚


### ProgressiveCheck å›ºæœ‰ã®è£œè¶³
- LangGraph WorkflowStateStore ã«åˆã‚ã›ã€`variables` ã« `manuscript_hash`, `session_id`, `state_version` ã‚’å«ã‚ã‚‹ã€‚
- å¤‰æ•°ã‚»ãƒƒãƒˆ: `{step_id, step_name, episode_number, completed_steps, total_steps, phase, project_root, session_id}` ã‚’å‰æã€‚
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†: `metadata.version` ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæœ¬æ–‡ã®ãƒãƒƒã‚·ãƒ¥ï¼ˆcontent_hashï¼‰ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ manifest ã«è¨˜éŒ²ã—ã¦è¿½è·¡ï¼ˆSPEC-QUALITY-110ï¼‰ã€‚
- æ¤œå: `acceptance_criteria.by_task` ã¯ `issues.<category>` ã‚’æŒ‡ã™ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æŒ‡å®šã¨ã—ã€`artifacts.required_fields`ï¼ˆsummary/issues/recommendations/metricsï¼‰ã‚’æº€ãŸã™ã“ã¨ã€‚
