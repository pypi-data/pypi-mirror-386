# Story X4.7 - Developer Action Items (Quick Reference)

**Date**: 2025-10-23
**QA Reviewer**: Quinn (Test Architect)
**Developer**: James (Full Stack Developer)
**Status**: IN PROGRESS - Re-evaluation Required
**Priority**: HIGH

---

## 🔴 Critical Issues (Must Fix)

### Issue 1: BOHB Tested on Wrong Scale
**Problem**: Tested on 36-combination parameter space when story targets "heavy operations"
**Fix**: Re-test with ≥100 parameter combinations

### Issue 2: SharedBundleContext Alternatives Not Tried
**Problem**: Rejected due to pickle failure without trying fork() or other approaches
**Fix**: Try fork-based multiprocessing or read-only data extraction

---

## ✅ Quick Action Checklist

### BOHB Re-evaluation (1-2 days)
- [ ] Update `scripts/benchmarks/benchmark_phase6b_bohb.py`
- [ ] Increase parameter space to ≥100 combinations (see guidance doc for examples)
- [ ] Run 10+ benchmark runs with statistical validation
- [ ] Compare: BOHB time vs. Grid Search time on heavy workflow
- [ ] Document results in `docs/internal/benchmarks/decisions/bohb_rejected.md` (update)
- [ ] Update story tasks with results

### SharedBundleContext Re-evaluation (1-3 days)
- [ ] Try fork() approach first:
  ```python
  import multiprocessing
  multiprocessing.set_start_method('fork', force=True)  # Unix/macOS only
  ```
- [ ] Test functional equivalence (no pickle serialization needed with fork)
- [ ] Run 10+ benchmark runs if fork() works
- [ ] If fork() fails, try read-only data extraction (Alternative 2)
- [ ] Document results in `docs/internal/benchmarks/decisions/shared_bundle_context_rejected.md` (update)
- [ ] Update story tasks with results

---

## 📚 Key Documents

1. **Detailed Guidance**: `docs/internal/qa/X4.7-RE-EVALUATION-GUIDANCE.md` (READ FIRST)
   - Comprehensive explanation of both issues
   - Step-by-step implementation approaches
   - Code examples and success criteria

2. **Story**: `docs/internal/stories/X4.7.heavy-operations-optimization.story.md`
   - Tasks updated with QA findings (look for "QA FINDING" markers)
   - Status changed to IN PROGRESS

3. **Quality Gate**: `docs/internal/qa/gates/X4.7-heavy-operations-optimization.yml`
   - Gate status: CONCERNS (75/100)
   - Top issues documented with severity HIGH

---

## 🎯 Success Criteria (Unchanged)

**Accept optimization if:**
- ✅ Tested with proper heavy-workflow scope (≥100 combinations for BOHB)
- ✅ Functional equivalence validated BEFORE performance testing
- ✅ ≥5% speedup with statistical significance (≥10 runs, 95% CI, p<0.05)
- ✅ Implementation stable and maintainable

**Reject optimization if:**
- ❌ Still fails with proper heavy-workflow scope
- ❌ All alternatives fail or impractical
- ❌ <5% speedup even with correct testing

---

## 💡 Recommended Approach

### BOHB (Start Here - Easier)
1. Copy `benchmark_phase6b_bohb.py` to `benchmark_phase6b_bohb_heavy.py`
2. Change parameter space from 36 → 1000+ combinations
3. Run benchmark (may take 4-8 hours)
4. Document results

**Example parameter space (1,100 combinations)**:
```python
param_space = ParameterSpace(
    parameters=[
        DiscreteParameter(name="short_window", min_value=5, max_value=50, step=5),     # 10
        DiscreteParameter(name="long_window", min_value=50, max_value=200, step=15),   # 11
        DiscreteParameter(name="threshold", min_value=1, max_value=10, step=1),        # 10
    ]
)
# Total: 10 × 11 × 10 = 1,100 combinations
```

### SharedBundleContext (Try After BOHB)
1. Modify `SharedBundleContext.__init__()` to use fork mode
2. Add platform check (Unix/Linux/macOS only)
3. Test functional equivalence
4. Run benchmarks if tests pass

**Code change (one line)**:
```python
# In SharedBundleContext or ParallelOptimizer initialization
import os
if os.name != 'nt':  # Not Windows
    multiprocessing.set_start_method('fork', force=True)
```

---

## ⏱️ Time Estimates

- **BOHB re-test**: 1-2 days (includes 4-8 hour benchmark run)
- **SharedBundleContext fork()**: 1-2 days
- **SharedBundleContext Alternative 2** (if fork fails): 2-3 days
- **Total**: 1-5 days depending on success

---

## 🤝 Support Available

- **QA (Quinn)**: Methodology review, statistical validation
- **Architecture**: Bundle refactoring guidance (if needed for Alternative 2)
- **Product Owner**: Scope clarification if needed

---

## 📊 Expected Outcomes

### Best Case (Both Pass)
- BOHB: 40% additional speedup with heavy workflow
- SharedBundleContext: 13% additional speedup
- **Total Phase 6B**: 74.97% + 40% + 13% = **127.97%** ✨

### Realistic Case (One Pass)
- One optimization works (likely fork() SharedBundleContext)
- **Total Phase 6B**: 74.97% + 13% = **87.97%** 👍

### Worst Case (Both Still Fail)
- Comprehensive documentation of why both don't work
- **Total Phase 6B**: **74.97%** (PersistentWorkerPool only) ✅
- Still acceptable IF testing methodology is proper

---

## 🚀 Next Steps

1. **TODAY**: Read detailed guidance document
2. **Day 1-2**: Execute BOHB re-evaluation
3. **Day 2-4**: Execute SharedBundleContext fork() approach
4. **Day 4-5**: Document results, update decision files
5. **Day 5**: Request QA re-review

---

## ❓ Questions?

- **Scope questions**: Escalate to Product Owner
- **Technical questions**: Contact Quinn (QA) or Architecture team
- **Timeline concerns**: Discuss with Product Owner

---

**Remember**: PersistentWorkerPool is excellent and stays ACCEPTED. Focus on the two issues above.

**Goal**: Validate story scope properly or document architectural constraints comprehensively.
