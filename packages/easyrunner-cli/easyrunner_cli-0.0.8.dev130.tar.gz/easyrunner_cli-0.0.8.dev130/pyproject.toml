[tool.poetry]
name = "easyrunner_cli"
version = "0.0.8.dev130"
description = "EasyRunner CLI."
authors = ["Janaka Abeywardhana <janaka@easyrunner.xyz>"]
license = "Proprietary"
readme = "README.md"
homepage = "https://easyrunner.xyz"
repository = "https://github.com/janaka/easyrunner"
packages = [
    { include = "easyrunner" },
    { include = "source" }
]

[tool.poetry.dependencies]
python = "^3.13"
# CLI-specific dependencies
typer = "^0.15.1"
rich = "^13.9.4"
keyring = "^25.6.0"
pyobjc-framework-Security = {version = "^10.3.1", markers = "sys_platform == 'darwin'"}
pyjwt = "^2.9.0"
cryptography = "^44.0.0"
# easyrunner library dependencies (bundled during build)
fabric = "^3.2.2"
pyyaml = "^6.0.2"
pulumi = "^3.185.0"
pulumi-hcloud = "^1.23.1"
pulumi-aws = "^7.1.0"
requests = "^2.32.5"
typing-extensions = "^4.12.2"

[tool.poetry.group.dev.dependencies]
# Local development: use path dependency for easyrunner
easyrunner = {path = "../easyrunner", develop = true}
ruff = "^0.4.8"
isort = "^6.0.0"
black = "^25.1.0"
pytest = "^6.2.4"
pytest-cov = "^6.2.1"
pytest-mock = "^3.14.1"
poethepoet = "^0.33.1"

[tool.poe.tasks]
lint = "ruff check ."
format-check = "black --check ."
format = "black ."
sort-check = "isort --check ."
sort = "isort ."
test = "pytest -v"
test-cov = "pytest -v --cov --cov-report=xml"
check-all = ["lint", "format-check", "sort-check"]
fix-all = ["sort", "format", "lint"]

[tool.poetry.scripts]
# configures 'er' as the cli entry point command
er = "source.main:root_app"
easy = "source.main:root_app"

[tool.poe.tasks.run]
cmd = "poetry run python -m easyrunner_cli.source.main:root_app"
env = { PYTHONPATH = "${PWD}/..easyrunner_cli:${PWD}/../easyrunner" }

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.isort]
profile = "black"
src_paths = ["easyrunner", "easyrunner_cli"]
known_first_party = ["easyrunner_cli", "source"]
known_third_party = [ "easyrunner"]
multi_line_output = 3
include_trailing_comma = true
force_grid_wrap = 0
combine_as_imports = true
line_length = 88
relative_imports = true