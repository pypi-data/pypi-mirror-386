version: '3.8'
name: easyrunner
services:
  app:
    image: remix-chakra-demo:latest
    # ports: is ignored because we don't want containers binding directly to the host
    environment:
      - PORT=3000
      - NODE_ENV=production
    restart: unless-stopped
    networks:
      - easyrunner_proxy_network
    labels:
      xyz.easyrunner.appFramework: "standardbackend" # used to optimise the Caddy config (standardbackend) | nextjs)
      xyz.easyrunner.appIsPublic: true # default false. true means the app is accessible from the internet via Caddy
      xyz.easyrunner.appContainerInternalPort: 3000 # default 3000. the port the app process is listening on inside the container. Caddy will be configured to forward requests to this port

networks:
  easyrunner_proxy_network:
    name: easyrunner_proxy_network
    external: true
    driver: bridge

volumes:
  caddy_data:
  caddy_config:
