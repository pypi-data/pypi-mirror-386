# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/extensions/quic/server_preferred_address/v3/datasource.proto, envoy/extensions/quic/server_preferred_address/v3/fixed_server_preferred_address_config.proto
# plugin: python-betterproto2
# This file has been @generated

__all__ = (
    "DataSourceServerPreferredAddressConfig",
    "DataSourceServerPreferredAddressConfigAddressFamilyConfig",
    "FixedServerPreferredAddressConfig",
    "FixedServerPreferredAddressConfigAddressFamilyConfig",
)

import typing

import betterproto2
import pydantic
from pydantic.dataclasses import dataclass

from ......message_pool import default_message_pool

_COMPILER_VERSION = "0.9.0"
betterproto2.check_compiler_version(_COMPILER_VERSION)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class DataSourceServerPreferredAddressConfig(betterproto2.Message):
    """
    [#protodoc-title: QUIC DataSource server preferred address config]
    [#extension: envoy.quic.server_preferred_address.datasource]

    Configuration for DataSourceServerPreferredAddressConfig.
    """

    ipv4_config: "DataSourceServerPreferredAddressConfigAddressFamilyConfig | None" = (
        betterproto2.field(1, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The IPv4 address to advertise to clients for Server Preferred Address.
    """

    ipv6_config: "DataSourceServerPreferredAddressConfigAddressFamilyConfig | None" = (
        betterproto2.field(2, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The IPv6 address to advertise to clients for Server Preferred Address.
    """


default_message_pool.register_message(
    "envoy.extensions.quic.server_preferred_address.v3",
    "DataSourceServerPreferredAddressConfig",
    DataSourceServerPreferredAddressConfig,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class DataSourceServerPreferredAddressConfigAddressFamilyConfig(betterproto2.Message):
    """
    Addresses for server preferred address for a single address family (IPv4 or IPv6).
    """

    address: "____config__core__v3__.DataSource | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The server preferred address sent to clients. The data must contain an IP address string.
    """

    port: "____config__core__v3__.DataSource | None" = betterproto2.field(
        2, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The server preferred address port sent to clients. The data must contain a integer port value.

    If this is not specified, the listener's port is used.

    Note: Envoy currently must receive all packets for a QUIC connection on the same port, so unless
    :ref:`dnat_address <envoy_v3_api_field_extensions.quic.server_preferred_address.v3.DataSourceServerPreferredAddressConfig.AddressFamilyConfig.dnat_address>`
    is configured, this must be left unset.
    """

    dnat_address: "____config__core__v3__.DataSource | None" = betterproto2.field(
        3, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    If there is a DNAT between the client and Envoy, the address that Envoy will observe
    server preferred address packets being sent to. If this is not specified, it is assumed
    there is no DNAT and the server preferred address packets will be sent to the address advertised
    to clients for server preferred address.
    """


default_message_pool.register_message(
    "envoy.extensions.quic.server_preferred_address.v3",
    "DataSourceServerPreferredAddressConfig.AddressFamilyConfig",
    DataSourceServerPreferredAddressConfigAddressFamilyConfig,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class FixedServerPreferredAddressConfig(betterproto2.Message):
    """
    [#protodoc-title: QUIC fixed server preferred address config]
    [#extension: envoy.quic.server_preferred_address.fixed]

    Configuration for FixedServerPreferredAddressConfig.
    """

    ipv4_address: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        1, betterproto2.TYPE_STRING
    )
    """
    String representation of IPv4 address, i.e. "127.0.0.2".
    If not specified, none will be configured.
    """

    ipv4_config: "FixedServerPreferredAddressConfigAddressFamilyConfig | None" = (
        betterproto2.field(3, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The IPv4 address to advertise to clients for Server Preferred Address.
    This field takes precedence over
    :ref:`ipv4_address <envoy_v3_api_field_extensions.quic.server_preferred_address.v3.FixedServerPreferredAddressConfig.ipv4_address>`.
    """

    ipv6_address: "typing.Annotated[str, pydantic.AfterValidator(betterproto2.validators.validate_string)]" = betterproto2.field(
        2, betterproto2.TYPE_STRING
    )
    """
    String representation of IPv6 address, i.e. "::1".
    If not specified, none will be configured.
    """

    ipv6_config: "FixedServerPreferredAddressConfigAddressFamilyConfig | None" = (
        betterproto2.field(4, betterproto2.TYPE_MESSAGE, optional=True)
    )
    """
    The IPv6 address to advertise to clients for Server Preferred Address.
    This field takes precedence over
    :ref:`ipv6_address <envoy_v3_api_field_extensions.quic.server_preferred_address.v3.FixedServerPreferredAddressConfig.ipv6_address>`.
    """


default_message_pool.register_message(
    "envoy.extensions.quic.server_preferred_address.v3",
    "FixedServerPreferredAddressConfig",
    FixedServerPreferredAddressConfig,
)


@dataclass(eq=False, repr=False, config={"extra": "forbid"})
class FixedServerPreferredAddressConfigAddressFamilyConfig(betterproto2.Message):
    """
    Addresses for server preferred address for a single address family (IPv4 or IPv6).
    """

    address: "____config__core__v3__.SocketAddress | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The server preferred address sent to clients.

    .. note::

      Envoy currently requires all packets for a QUIC connection to arrive on the same port. Therefore, unless a
      :ref:`dnat_address <envoy_v3_api_field_extensions.quic.server_preferred_address.v3.FixedServerPreferredAddressConfig.AddressFamilyConfig.dnat_address>`
      is explicitly configured, the port specified here must be set to zero. In such cases, Envoy will automatically
      use the listener's port.
    """

    dnat_address: "____config__core__v3__.SocketAddress | None" = betterproto2.field(
        2, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    If a DNAT exists between the client and Envoy, this is the address where Envoy will observe incoming server
    preferred address packets. If unspecified, Envoy assumes there is no DNAT, and packets will be sent directly
    to the address advertised to clients as the server preferred address.

    .. note::

      Envoy currently requires all packets for a QUIC connection to arrive on the same port. Consequently, the
      port for this address must be set to zero, with Envoy defaulting to the listener's port instead.
    """


default_message_pool.register_message(
    "envoy.extensions.quic.server_preferred_address.v3",
    "FixedServerPreferredAddressConfig.AddressFamilyConfig",
    FixedServerPreferredAddressConfigAddressFamilyConfig,
)


from .....config.core import v3 as ____config__core__v3__
