<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Header -->
  <rect x="0" y="0" width="1200" height="60" fill="url(#headerGrad)"/>
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">DAGnostics</text>

  <!-- External Systems -->
  <g id="external-systems">
    <rect x="20" y="80" width="200" height="120" rx="8" fill="#FF6B35" filter="url(#shadow)"/>
    <text x="120" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">External Systems</text>

    <rect x="30" y="115" width="80" height="35" rx="4" fill="#FF8C42"/>
    <text x="70" y="135" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Apache Airflow</text>
    <text x="70" y="148" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">DAGs, Tasks, Logs</text>

    <rect x="120" y="115" width="80" height="35" rx="4" fill="#FF8C42"/>
    <text x="160" y="135" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">ETL Systems</text>
    <text x="160" y="148" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Log Files, Meta Files</text>

    <rect x="75" y="160" width="70" height="25" rx="4" fill="#FF8C42"/>
    <text x="110" y="175" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Database</text>
  </g>

  <!-- Data Collection Layer -->
  <g id="data-collection">
    <rect x="280" y="80" width="220" height="120" rx="8" fill="#20B2AA" filter="url(#shadow)"/>
    <text x="390" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Data Collection &amp; Monitoring</text>

    <rect x="290" y="115" width="60" height="30" rx="4" fill="#48CAE4"/>
    <text x="320" y="132" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Collector</text>

    <rect x="360" y="115" width="60" height="30" rx="4" fill="#48CAE4"/>
    <text x="390" y="132" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Monitor</text>

    <rect x="430" y="115" width="60" height="30" rx="4" fill="#48CAE4"/>
    <text x="460" y="132" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Daemon</text>

    <rect x="290" y="155" width="90" height="30" rx="4" fill="#48CAE4"/>
    <text x="335" y="172" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Airflow Client</text>

    <rect x="390" y="155" width="100" height="30" rx="4" fill="#48CAE4"/>
    <text x="440" y="172" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Alert System</text>
  </g>

  <!-- Core Processing Engine -->
  <g id="processing-engine">
    <rect x="40" y="240" width="800" height="160" rx="8" fill="#2C3E50" filter="url(#shadow)"/>
    <text x="440" y="265" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Intelligent Processing Engine</text>

    <!-- Log Clustering -->
    <rect x="60" y="280" width="160" height="100" rx="6" fill="#34495E"/>
    <text x="140" y="300" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Log Clustering</text>
    <text x="140" y="318" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Drain3 Adapter</text>
    <text x="140" y="332" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Pattern Recognition</text>
    <text x="140" y="346" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Baseline Clusters</text>
    <text x="140" y="360" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Anomaly Detection</text>

    <!-- Heuristics Engine -->
    <rect x="240" y="280" width="160" height="100" rx="6" fill="#34495E"/>
    <text x="320" y="300" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Heuristics Engine</text>
    <text x="320" y="318" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Pattern Filters</text>
    <text x="320" y="332" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Regex Engine</text>
    <text x="320" y="346" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Threshold Engine</text>
    <text x="320" y="360" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Custom Functions</text>

    <!-- LLM Engine -->
    <rect x="420" y="280" width="160" height="100" rx="6" fill="#8E44AD"/>
    <text x="500" y="300" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">LLM Engine</text>
    <text x="500" y="318" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8D5F5">• Multi-Provider Support</text>
    <text x="500" y="332" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8D5F5">• Configurable Prompts</text>
    <text x="500" y="346" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8D5F5">• Few-Shot Learning</text>
    <text x="500" y="360" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8D5F5">• Error Classification</text>

    <!-- Analysis Engine -->
    <rect x="600" y="280" width="160" height="100" rx="6" fill="#34495E"/>
    <text x="680" y="300" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Analysis Engine</text>
    <text x="680" y="318" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• DAG Analyzer</text>
    <text x="680" y="332" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Error Classifier</text>
    <text x="680" y="346" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Anomaly Detector</text>
    <text x="680" y="360" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">• Baseline Comparison</text>
  </g>

  <!-- LLM Providers -->
  <g id="llm-providers">
    <rect x="520" y="80" width="200" height="120" rx="8" fill="#8E44AD" filter="url(#shadow)"/>
    <text x="620" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">LLM Providers</text>

    <rect x="530" y="115" width="40" height="25" rx="3" fill="#A569BD"/>
    <text x="550" y="130" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Ollama</text>

    <rect x="580" y="115" width="40" height="25" rx="3" fill="#A569BD"/>
    <text x="600" y="130" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">OpenAI</text>

    <rect x="630" y="115" width="45" height="25" rx="3" fill="#A569BD"/>
    <text x="652" y="130" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Anthropic</text>

    <rect x="685" y="115" width="30" height="25" rx="3" fill="#A569BD"/>
    <text x="700" y="130" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Gemini</text>

    <rect x="555" y="150" width="130" height="35" rx="4" fill="#A569BD"/>
    <text x="620" y="170" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Configurable Prompts</text>
    <text x="620" y="183" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Few-Shot Examples</text>
  </g>

  <!-- Data Storage -->
  <g id="data-storage">
    <rect x="880" y="80" width="280" height="320" rx="8" fill="#2C3E50" filter="url(#shadow)"/>
    <text x="1020" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Data Storage &amp; Configuration</text>

    <rect x="900" y="120" width="120" height="40" rx="4" fill="#34495E"/>
    <text x="960" y="140" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Raw Data</text>
    <text x="960" y="153" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#BDC3C7">Log Files, Meta Files</text>

    <rect x="1030" y="120" width="120" height="40" rx="4" fill="#34495E"/>
    <text x="1090" y="140" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Processed Data</text>
    <text x="1090" y="153" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#BDC3C7">Analysis Results</text>

    <rect x="900" y="170" width="120" height="40" rx="4" fill="#34495E"/>
    <text x="960" y="190" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Clusters</text>
    <text x="960" y="203" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#BDC3C7">Drain3 State, Baselines</text>

    <rect x="1030" y="170" width="120" height="40" rx="4" fill="#34495E"/>
    <text x="1090" y="190" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Training Data</text>
    <text x="1090" y="203" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#BDC3C7">Fine-tuning Datasets</text>

    <rect x="900" y="220" width="120" height="40" rx="4" fill="#16A085"/>
    <text x="960" y="240" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Configuration</text>
    <text x="960" y="253" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Config YAML</text>

    <rect x="1030" y="220" width="120" height="40" rx="4" fill="#16A085"/>
    <text x="1090" y="240" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Filter Patterns</text>
    <text x="1090" y="253" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Heuristic Rules</text>

    <rect x="900" y="270" width="120" height="40" rx="4" fill="#E74C3C"/>
    <text x="960" y="290" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">System Logs</text>
    <text x="960" y="303" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#FFE5E5">Application Logs</text>

    <rect x="1030" y="270" width="120" height="40" rx="4" fill="#34495E"/>
    <text x="1090" y="290" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Feedback DB</text>
    <text x="1090" y="303" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#BDC3C7">User Feedback</text>

    <rect x="900" y="320" width="250" height="40" rx="4" fill="#16A085"/>
    <text x="1025" y="340" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">SQLAlchemy Database</text>
    <text x="1025" y="353" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">DAGnostics Internal Storage</text>
  </g>

  <!-- User Interfaces -->
  <g id="user-interfaces">
    <rect x="80" y="440" width="640" height="100" rx="8" fill="#E74C3C" filter="url(#shadow)"/>
    <text x="400" y="465" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">User Interfaces</text>

    <rect x="100" y="480" width="120" height="45" rx="4" fill="#C0392B"/>
    <text x="160" y="500" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">CLI Interface</text>
    <text x="160" y="515" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#FFE5E5">dagnostics analyze</text>

    <rect x="240" y="480" width="120" height="45" rx="4" fill="#C0392B"/>
    <text x="300" y="500" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Web Dashboard</text>
    <text x="300" y="515" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#FFE5E5">Monitoring UI</text>

    <rect x="380" y="480" width="120" height="45" rx="4" fill="#C0392B"/>
    <text x="440" y="500" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">REST API</text>
    <text x="440" y="515" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#FFE5E5">FastAPI Endpoints</text>

    <rect x="520" y="480" width="120" height="45" rx="4" fill="#C0392B"/>
    <text x="580" y="500" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Reporting</text>
    <text x="580" y="515" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#FFE5E5">JSON/YAML Output</text>
  </g>

  <!-- Training & Fine-tuning -->
  <g id="training">
    <rect x="760" y="440" width="200" height="100" rx="8" fill="#F39C12" filter="url(#shadow)"/>
    <text x="860" y="465" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Training &amp; Fine-tuning</text>

    <rect x="780" y="480" width="80" height="25" rx="3" fill="#E67E22"/>
    <text x="820" y="495" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Dataset Gen</text>

    <rect x="870" y="480" width="80" height="25" rx="3" fill="#E67E22"/>
    <text x="910" y="495" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Fine Tuner</text>

    <rect x="825" y="515" width="70" height="20" rx="3" fill="#E67E22"/>
    <text x="860" y="527" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Remote Trainer</text>
  </g>

  <!-- Connection Lines -->
  <g id="connections" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)">
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
      </marker>
    </defs>

    <!-- External to Collection -->
    <line x1="220" y1="140" x2="280" y2="140"/>

    <!-- Collection to Processing -->
    <line x1="390" y1="200" x2="390" y2="240"/>

    <!-- LLM Providers to LLM Engine -->
    <line x1="620" y1="200" x2="500" y2="240"/>

    <!-- Processing to Storage -->
    <line x1="780" y1="320" x2="880" y2="320"/>

    <!-- Processing to UI -->
    <line x1="400" y1="400" x2="400" y2="440"/>

    <!-- Storage to Training -->
    <line x1="1020" y1="400" x2="860" y2="440"/>
  </g>

  <!-- Key Features Box -->
  <g id="features">
    <rect x="80" y="580" width="1040" height="180" rx="8" fill="#ECF0F1" stroke="#BDC3C7" stroke-width="2"/>
    <text x="600" y="605" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">System Flow and Key Features</text>

    <text x="100" y="630" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2C3E50">1. Data Collection:</text>
    <text x="100" y="645" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Airflow API integration for task logs and metadata</text>
    <text x="100" y="658" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Background daemon service for continuous monitoring</text>
    <text x="100" y="671" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Real-time alert system (SMS/Email)</text>

    <text x="400" y="630" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2C3E50">2. Intelligent Analysis:</text>
    <text x="400" y="645" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Drain3 clustering for pattern recognition and baselines</text>
    <text x="400" y="658" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Multi-provider LLM support with configurable prompts</text>
    <text x="400" y="671" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Few-shot learning for improved error categorization</text>

    <text x="100" y="700" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2C3E50">3. Multiple Interfaces:</text>
    <text x="100" y="715" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• CLI for ad-hoc analysis and automation</text>
    <text x="100" y="728" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Web dashboard for monitoring and visualization</text>
    <text x="100" y="741" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• REST API for integration with existing tools</text>

    <text x="400" y="700" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2C3E50">4. Extensible Design:</text>
    <text x="400" y="715" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Configurable heuristic filtering and pattern matching</text>
    <text x="400" y="728" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Fine-tuning capabilities for domain-specific models</text>
    <text x="400" y="741" font-family="Arial, sans-serif" font-size="11" fill="#34495E">• Baseline-driven anomaly detection</text>

    <text x="720" y="630" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2C3E50">Implementation Status:</text>
    <text x="720" y="645" font-family="Arial, sans-serif" font-size="11" fill="#27AE60">✅ Core analysis engine and LLM integration</text>
    <text x="720" y="658" font-family="Arial, sans-serif" font-size="11" fill="#27AE60">✅ Daemon service and CLI interface</text>
    <text x="720" y="671" font-family="Arial, sans-serif" font-size="11" fill="#27AE60">✅ Configurable prompts and baseline system</text>
    <text x="720" y="684" font-family="Arial, sans-serif" font-size="11" fill="#F39C12">🚧 Web dashboard backend (partial)</text>
    <text x="720" y="697" font-family="Arial, sans-serif" font-size="11" fill="#F39C12">🚧 Report generation and export</text>
    <text x="720" y="710" font-family="Arial, sans-serif" font-size="11" fill="#F39C12">🚧 Advanced analytics and trend analysis</text>
  </g>
</svg>
