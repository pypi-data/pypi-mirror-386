schema-pycaosdb-ini:
  type: object
  additionalProperties: false
  properties:
    Container:
      additionalProperties: false
      properties:
        debug:
          default: 0
          type: integer
          enum: [0, 1, 2]
    Connection:
      description: Settings for the connection to the LinkAhead server
      additionalProperties: false
      properties:
        url:
          description: "URL of the LinkAhead server. Allowed are HTTP and HTTPS connections. However, since authentication tokens and sometimes even passwords are send in plain text to the server it is **highly** recommended to use HTTPS connections whenever possible. HTTP is ok for testing and debugging."
          type: string
          pattern: http(s)?://[-a-zA-Z0-9\.]+(:[0-9]+)?(/)?
          examples: ["https://demo.indiscale.com/", "http://localhost:10080/"]
        username:
          type: string
          description: User name used for authentication with the server
          examples: [admin]
        password_method:
          description: The password input method defines how the password is supplied that is used for authentication with the server.
          type: string
          default: input
          enum: [input, unauthenticated, plain, pass, keyring]
        password_identifier:
          type: string
        password:
          type: string
          examples: [caosdb]
        auth_token:
          type: string
          description: Using an authentication token to connect with the server. This setting is not recommended for users.
        cacert:
          type: string
          description: If the server's SSL certificate cannot be validated by your installed certificates (default or installed by your admins), you may also need to supply the matching key (pem file)
          examples: [/path/to/caosdb.ca.pem]
        ssl_insecure:
          description: If this option is set, the SSL certificate of the server will not be validated. This has the potential of a man-in-the-middle attack. Use with care!
          type: boolean
          default: false
        ssl_version:
            description: You may define the ssl version to be used. It has to be the name of the corresponding attribute in the Python ssl module.
            examples: [PROTOCOL_TLS]
        debug:
          default: 0
          type: integer
          enum: [0, 1, 2]
          description: The debug key allows control the verbosity. Set it to 1 or 2 in case you  want to see debugging output or if you want to learn more about the internals of the protocol.  0 disables debugging output.
        socket_proxy:
          examples: ["localhost:12345"]
          type: string
          description: Deprecated. Please use https_proxy instead.
        https_proxy:
          examples: ["http://localhost:8888", "socks5://localhost:8888", "socks4://localhost:8888"]
          type: string
          description: "Define a proxy for the https connections. These are either (non-TLS) HTTP proxies, SOCKS4 proxies, or SOCKS5 proxies. HTTPS proxies are not supported. However, the connection will be secured using TLS in the tunneled connection nonetheless. Only the connection to the proxy is insecure which is why it is not recommended to use HTTP proxies when authentication against the proxy is necessary. Note: this option is overridden by the HTTPS_PROXY environment variable, if present."
        http_proxy:
          examples: ["http://localhost:8888", "socks5://localhost:8888", "socks4://localhost:8888"]
          type: string
          description: "Define a proxy for the http connections. These are either (non-TLS) HTTP proxies, SOCKS4 proxies, or SOCKS5 proxies. HTTPS proxies are not supported. Note: this option is overridden by the HTTP_PROXY environment variable, if present."
        implementation:
          description: This option is used internally and for testing. Do not override.
          examples: [_DefaultCaosDBServerConnection]
        timeout:
          oneOf:
            - type: [integer, "null"]
            - type: array
              items:
                type: [integer, "null"]
              minItems: 2
              maxItems: 2
      allOf:
        - if:
            properties:
              password_method:
                const: input
            required: [password_method]
          then:
            required: [url]
        - if:
            properties:
              password_method:
                const: plain
            required: [password_method]
          then:
            required: [url, username, password]
        - if:
            properties:
              password_method:
                const: pass
            required: [password_method]
          then:
            required: [url, username, password_identifier]
        - if:
            properties:
              password_method:
                const: keyring
            required: [password_method]
          then:
            required: [url, username]
    IntegrationTests:
      description: "Used by the integration test suite from the linkahead-pyinttest repo."
      additionalProperties: true
    Misc:
      description: "Some additional configuration settings."
      additionalProperties: true
    advancedtools:
      description: "Configuration settings for the linkahead-advancedtools."
      additionalProperties: true
    caoscrawler:
      description: "Configuration settings for the LinkAhead Crawler."
      additionalProperties: true
    sss_helper:
      description: "Configuration settings for server-side scripting."
      additionalProperties: true
