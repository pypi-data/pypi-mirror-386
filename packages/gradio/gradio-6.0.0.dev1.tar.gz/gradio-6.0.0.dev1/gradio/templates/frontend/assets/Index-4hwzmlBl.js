import{e as Gt,I as Kt,a as Qt,C as He,f as Je,T as Vt,g as Xt,w as Yt,c as Zt}from"./FullscreenButton-pJVgMiya.js";import{f as ae,S as xt}from"./StreamingBar-Co5WtsWH.js";import{BaseDropdownOptions as ot,BaseDropdown as $t}from"./Index-DJGoI9Xx.js";import{default as is}from"./Example-Bx762nxc.js";import"./MarkdownCode-CJL7VgM9.js";import"./index-CtRY-svv.js";import"./svelte/svelte.js";import"./prism-python-DspNkBda.js";import"./init-5dmMBTcc.js";import"./Example-CXKuTmQ6.js";const{SvelteComponent:en,append:De,attr:ke,detach:tn,element:Ee,flush:ye,init:nn,insert:sn,listen:ln,noop:je,safe_not_equal:on,set_data:rn,set_style:un,space:an,text:fn}=window.__gradio__svelte__internal,{createEventDispatcher:cn}=window.__gradio__svelte__internal;function _n(n){let e,t,s,i,l,r,f;return{c(){e=Ee("div"),t=Ee("button"),s=an(),i=Ee("span"),l=fn(n[1]),ke(t,"role","switch"),ke(t,"aria-checked",n[0]),t.disabled=n[2],ke(t,"class","svelte-1wr5wa"),ke(e,"class","s s--slider svelte-1wr5wa"),un(e,"font-size","var(--font-size-sm)px")},m(u,c){sn(u,e,c),De(e,t),De(e,s),De(e,i),De(i,l),r||(f=ln(t,"click",n[3]),r=!0)},p(u,[c]){c&1&&ke(t,"aria-checked",u[0]),c&4&&(t.disabled=u[2]),c&2&&rn(l,u[1])},i:je,o:je,d(u){u&&tn(e),r=!1,f()}}}function dn(n,e,t){let{label:s}=e,{checked:i=!1}=e,{disabled:l=!1}=e;const r=cn();function f(u){const a=u.target.getAttribute("aria-checked");t(0,i=a!=="true"),r("click",{checked:i})}return n.$$set=u=>{"label"in u&&t(1,s=u.label),"checked"in u&&t(0,i=u.checked),"disabled"in u&&t(2,l=u.disabled)},[i,s,l,f]}class hn extends en{constructor(e){super(),nn(this,e,dn,_n,on,{label:1,checked:0,disabled:2})}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),ye()}get checked(){return this.$$.ctx[0]}set checked(e){this.$$set({checked:e}),ye()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),ye()}}const{SvelteComponent:gn,add_flush_callback:rt,add_render_callback:Te,append:P,attr:v,bind:ut,binding_callbacks:we,check_outros:$,create_bidirectional_transition:fe,create_component:ie,destroy_component:oe,destroy_each:mn,detach:K,element:R,ensure_array_like:ze,flush:U,group_outros:ee,init:bn,insert:Q,listen:F,mount_component:re,noop:Ce,run_all:at,safe_not_equal:pn,set_data:ft,set_input_value:ge,set_style:Ue,space:x,text:ct,toggle_class:Z,transition_in:b,transition_out:C}=window.__gradio__svelte__internal,{createEventDispatcher:kn,tick:de,onMount:wn}=window.__gradio__svelte__internal;function We(n,e,t){const s=n.slice();return s[77]=e[t],s[78]=e,s[79]=t,s}function Fe(n){let e,t;return e=new Kt({props:{$$slots:{default:[vn]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},m(s,i){re(e,s,i),t=!0},p(s,i){const l={};i[0]&16777216|i[2]&262144&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function vn(n){let e,t;return e=new Qt({props:{Icon:n[24]?He:Je,label:n[24]?"Copied":"Copy"}}),e.$on("click",n[38]),{c(){ie(e.$$.fragment)},m(s,i){re(e,s,i),t=!0},p(s,i){const l={};i[0]&16777216&&(l.Icon=s[24]?He:Je),i[0]&16777216&&(l.label=s[24]?"Copied":"Copy"),e.$set(l)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function Cn(n){let e;return{c(){e=ct(n[4])},m(t,s){Q(t,e,s)},p(t,s){s[0]&16&&ft(e,t[4])},d(t){t&&K(e)}}}function Ge(n){let e,t,s,i;function l(f){n[44](f)}let r={label:"Plain Text",disabled:n[28]||n[27]};return n[14]!==void 0&&(r.checked=n[14]),t=new hn({props:r}),we.push(()=>ut(t,"checked",l)),t.$on("click",n[45]),{c(){e=R("div"),ie(t.$$.fragment),v(e,"class","switch-container top-switch svelte-1de6p8m"),Z(e,"switch-disabled",n[28]||n[27])},m(f,u){Q(f,e,u),re(t,e,null),i=!0},p(f,u){const c={};u[0]&402653184&&(c.disabled=f[28]||f[27]),!s&&u[0]&16384&&(s=!0,c.checked=f[14],rt(()=>s=!1)),t.$set(c),(!i||u[0]&402653184)&&Z(e,"switch-disabled",f[28]||f[27])},i(f){i||(b(t.$$.fragment,f),i=!0)},o(f){C(t.$$.fragment,f),i=!1},d(f){f&&K(e),oe(t)}}}function Sn(n){let e,t,s,i,l,r,f,u=n[28]&&Ke(),c=n[18]&&Qe(n);return{c(){e=R("div"),u&&u.c(),t=x(),s=R("textarea"),i=x(),c&&c.c(),v(s,"data-testid","textbox"),v(s,"placeholder",n[3]),v(s,"rows",5),s.disabled=n[6],v(s,"class","svelte-1de6p8m"),v(e,"class","textarea-container svelte-1de6p8m"),Z(e,"loading",n[28])},m(a,_){Q(a,e,_),u&&u.m(e,null),P(e,t),P(e,s),ge(s,n[25]),n[66](s),P(e,i),c&&c.m(e,null),l=!0,r||(f=[F(s,"input",n[62]),F(s,"input",n[63]),F(s,"focus",n[64]),F(s,"keydown",n[65])],r=!0)},p(a,_){a[28]?u?_[0]&268435456&&b(u,1):(u=Ke(),u.c(),b(u,1),u.m(e,t)):u&&(ee(),C(u,1,1,()=>{u=null}),$()),(!l||_[0]&8)&&v(s,"placeholder",a[3]),(!l||_[0]&64)&&(s.disabled=a[6]),_[0]&33554432&&ge(s,a[25]),a[18]?c?(c.p(a,_),_[0]&262144&&b(c,1)):(c=Qe(a),c.c(),b(c,1),c.m(e,null)):c&&(ee(),C(c,1,1,()=>{c=null}),$()),(!l||_[0]&268435456)&&Z(e,"loading",a[28])},i(a){l||(b(u),b(c),l=!0)},o(a){C(u),C(c),l=!1},d(a){a&&K(e),u&&u.d(),n[66](null),c&&c.d(),r=!1,at(f)}}}function In(n){let e,t,s,i=n[27]&&Ve(),l=ze(n[15]),r=[];for(let u=0;u<l.length;u+=1)r[u]=Ze(We(n,l,u));const f=u=>C(r[u],1,1,()=>{r[u]=null});return{c(){e=R("div"),i&&i.c(),t=x();for(let u=0;u<r.length;u+=1)r[u].c();v(e,"class","dialogue-container svelte-1de6p8m"),Z(e,"loading",n[27])},m(u,c){Q(u,e,c),i&&i.m(e,null),P(e,t);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);n[61](e),s=!0},p(u,c){if(u[27]?i?c[0]&134217728&&b(i,1):(i=Ve(),i.c(),b(i,1),i.m(e,t)):i&&(ee(),C(i,1,1,()=>{i=null}),$()),c[0]&1690141262|c[1]&31){l=ze(u[15]);let a;for(a=0;a<l.length;a+=1){const _=We(u,l,a);r[a]?(r[a].p(_,c),b(r[a],1)):(r[a]=Ze(_),r[a].c(),b(r[a],1),r[a].m(e,null))}for(ee(),a=l.length;a<r.length;a+=1)f(a);$()}(!s||c[0]&134217728)&&Z(e,"loading",u[27])},i(u){if(!s){b(i);for(let c=0;c<l.length;c+=1)b(r[c]);s=!0}},o(u){C(i),r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)C(r[c]);s=!1},d(u){u&&K(e),i&&i.d(),mn(r,u),n[61](null)}}}function Ke(n){let e,t,s;return{c(){e=R("div"),e.innerHTML='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to plain text...</div>',v(e,"class","loading-overlay svelte-1de6p8m")},m(i,l){Q(i,e,l),s=!0},i(i){s||(i&&Te(()=>{s&&(t||(t=fe(e,ae,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=fe(e,ae,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&K(e),i&&t&&t.end()}}}function Qe(n){let e,t,s,i;return t=new ot({props:{choices:n[2].map(tt),filtered_indices:n[21].map(n[67]),active_index:n[21].map(n[68])[n[20]],show_options:!0}}),t.$on("change",n[69]),{c(){e=R("div"),ie(t.$$.fragment),v(e,"id","tag-menu"),v(e,"class","tag-menu-plain-text svelte-1de6p8m")},m(l,r){Q(l,e,r),re(t,e,null),i=!0},p(l,r){const f={};r[0]&4&&(f.choices=l[2].map(tt)),r[0]&2097156&&(f.filtered_indices=l[21].map(l[67])),r[0]&3145732&&(f.active_index=l[21].map(l[68])[l[20]]),t.$set(f)},i(l){i||(b(t.$$.fragment,l),l&&Te(()=>{i&&(s||(s=fe(e,ae,{duration:100},!0)),s.run(1))}),i=!0)},o(l){C(t.$$.fragment,l),l&&(s||(s=fe(e,ae,{duration:100},!1)),s.run(0)),i=!1},d(l){l&&K(e),oe(t),l&&s&&s.end()}}}function Ve(n){let e,t,s;return{c(){e=R("div"),e.innerHTML='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to dialogue format...</div>',v(e,"class","loading-overlay svelte-1de6p8m")},m(i,l){Q(i,e,l),s=!0},i(i){s||(i&&Te(()=>{s&&(t||(t=fe(e,ae,{duration:200},!0)),t.run(1))}),s=!0)},o(i){i&&(t||(t=fe(e,ae,{duration:200},!1)),t.run(0)),s=!1},d(i){i&&K(e),i&&t&&t.end()}}}function Dn(n){let e,t,s;function i(f){n[47](f,n[77])}function l(){return n[48](n[79],n[77])}let r={choices:n[1].map($e),show_label:!1,container:!0,label:""};return n[77].speaker!==void 0&&(r.value=n[77].speaker),e=new $t({props:r}),we.push(()=>ut(e,"value",i)),e.$on("change",l),{c(){ie(e.$$.fragment)},m(f,u){re(e,f,u),s=!0},p(f,u){n=f;const c={};u[0]&2&&(c.choices=n[1].map($e)),!t&&u[0]&32768&&(t=!0,c.value=n[77].speaker,rt(()=>t=!1)),e.$set(c)},i(f){s||(b(e.$$.fragment,f),s=!0)},o(f){C(e.$$.fragment,f),s=!1},d(f){oe(e,f)}}}function Tn(n){let e,t,s;function i(){n[46].call(e,n[78],n[79])}return{c(){e=R("textarea"),e.disabled=n[6],v(e,"rows","1"),e.readOnly=!0,v(e,"class","svelte-1de6p8m")},m(l,r){Q(l,e,r),ge(e,n[77].speaker),t||(s=F(e,"input",i),t=!0)},p(l,r){n=l,r[0]&64&&(e.disabled=n[6]),r[0]&32768&&ge(e,n[77].speaker)},i:Ce,o:Ce,d(l){l&&K(e),t=!1,s()}}}function Xe(n){let e,t,s,i;return t=new ot({props:{choices:n[2].map(et),filtered_indices:n[21].map(n[56]),active_index:n[21].map(n[57])[n[20]],show_options:!0,offset_from_top:n[23],from_top:!0}}),t.$on("change",n[58]),{c(){e=R("div"),ie(t.$$.fragment),v(e,"id","tag-menu"),v(e,"class","tag-menu svelte-1de6p8m")},m(l,r){Q(l,e,r),re(t,e,null),i=!0},p(l,r){const f={};r[0]&4&&(f.choices=l[2].map(et)),r[0]&2097156&&(f.filtered_indices=l[21].map(l[56])),r[0]&3145732&&(f.active_index=l[21].map(l[57])[l[20]]),r[0]&8388608&&(f.offset_from_top=l[23]),t.$set(f)},i(l){i||(b(t.$$.fragment,l),l&&Te(()=>{i&&(s||(s=fe(e,ae,{duration:100},!0)),s.run(1))}),i=!0)},o(l){C(t.$$.fragment,l),l&&(s||(s=fe(e,ae,{duration:100},!1)),s.run(0)),i=!1},d(l){l&&K(e),oe(t),l&&s&&s.end()}}}function Ye(n){let e,t,s,i,l,r;s=new Yt({});function f(){return n[59](n[79])}return{c(){e=R("div"),t=R("button"),ie(s.$$.fragment),v(t,"class","add-button svelte-1de6p8m"),v(t,"aria-label","Add new line"),t.disabled=n[6],v(e,"class","svelte-1de6p8m"),Z(e,"action-column",n[79]==0),Z(e,"hidden",n[6])},m(u,c){Q(u,e,c),P(e,t),re(s,t,null),i=!0,l||(r=F(t,"click",f),l=!0)},p(u,c){n=u,(!i||c[0]&64)&&(t.disabled=n[6]),(!i||c[0]&64)&&Z(e,"hidden",n[6])},i(u){i||(b(s.$$.fragment,u),i=!0)},o(u){C(s.$$.fragment,u),i=!1},d(u){u&&K(e),oe(s),l=!1,r()}}}function Ze(n){let e,t,s,i,l,r,f,u,c=n[79],a,_,g,k,j,M,V,w,h,S;const p=[Tn,Dn],E=[];function L(B,N){return B[6]?0:1}s=L(n),i=E[s]=p[s](n);function z(){return n[49](n[77])}function O(){n[51].call(u,n[78],n[79])}function G(...B){return n[52](n[79],...B)}function I(...B){return n[53](n[79],...B)}function W(...B){return n[54](n[79],...B)}const X=()=>n[55](u,c),ce=()=>n[55](null,c);let D=n[18]&&n[19]===n[79]&&Xe(n),T=(n[9]==null||n[9]&&n[79]<n[9]-1)&&Ye(n);M=new Vt({});function q(){return n[60](n[79])}return{c(){e=R("div"),t=R("div"),i.c(),l=x(),r=R("div"),f=R("div"),u=R("textarea"),a=x(),D&&D.c(),_=x(),T&&T.c(),g=x(),k=R("div"),j=R("button"),ie(M.$$.fragment),V=x(),v(t,"class","speaker-column svelte-1de6p8m"),v(t,"role","button"),v(t,"tabindex","0"),v(u,"placeholder",n[3]),u.disabled=n[6],v(u,"rows","1"),v(u,"class","svelte-1de6p8m"),v(f,"class","input-container svelte-1de6p8m"),v(r,"class","text-column svelte-1de6p8m"),v(j,"class","delete-button svelte-1de6p8m"),v(j,"aria-label","Remove current line"),j.disabled=n[6],v(k,"class","action-column svelte-1de6p8m"),Z(k,"hidden",n[6]||n[79]==0),v(e,"class","dialogue-line svelte-1de6p8m"),Ue(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},m(B,N){Q(B,e,N),P(e,t),E[s].m(t,null),P(e,l),P(e,r),P(r,f),P(f,u),ge(u,n[77].text),X(),P(f,a),D&&D.m(f,null),P(e,_),T&&T.m(e,null),P(e,g),P(e,k),P(k,j),re(M,j,null),P(e,V),w=!0,h||(S=[F(t,"mouseenter",z),F(t,"mouseleave",n[50]),F(u,"input",O),F(u,"input",G),F(u,"focus",I),F(u,"keydown",W),F(j,"click",q)],h=!0)},p(B,N){n=B;let d=s;s=L(n),s===d?E[s].p(n,N):(ee(),C(E[d],1,1,()=>{E[d]=null}),$(),i=E[s],i?i.p(n,N):(i=E[s]=p[s](n),i.c()),b(i,1),i.m(t,null)),(!w||N[0]&8)&&v(u,"placeholder",n[3]),(!w||N[0]&64)&&(u.disabled=n[6]),N[0]&32768&&ge(u,n[77].text),c!==n[79]&&(ce(),c=n[79],X()),n[18]&&n[19]===n[79]?D?(D.p(n,N),N[0]&786432&&b(D,1)):(D=Xe(n),D.c(),b(D,1),D.m(f,null)):D&&(ee(),C(D,1,1,()=>{D=null}),$()),n[9]==null||n[9]&&n[79]<n[9]-1?T?(T.p(n,N),N[0]&512&&b(T,1)):(T=Ye(n),T.c(),b(T,1),T.m(e,g)):T&&(ee(),C(T,1,1,()=>{T=null}),$()),(!w||N[0]&64)&&(j.disabled=n[6]),(!w||N[0]&64)&&Z(k,"hidden",n[6]||n[79]==0),(!w||N[0]&604012608)&&Ue(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},i(B){w||(b(i),b(D),b(T),b(M.$$.fragment,B),w=!0)},o(B){C(i),C(D),C(T),C(M.$$.fragment,B),w=!1},d(B){B&&K(e),E[s].d(),ce(),D&&D.d(),T&&T.d(),oe(M),h=!1,at(S)}}}function xe(n){let e,t,s,i,l,r,f;const u=[Bn,On],c=[];function a(_,g){return typeof _[11]=="string"?0:1}return s=a(n),i=c[s]=u[s](n),{c(){e=R("div"),t=R("button"),i.c(),v(t,"class","submit-button svelte-1de6p8m"),t.disabled=n[6],v(e,"class","submit-container svelte-1de6p8m")},m(_,g){Q(_,e,g),P(e,t),c[s].m(t,null),l=!0,r||(f=F(t,"click",n[39]),r=!0)},p(_,g){let k=s;s=a(_),s===k?c[s].p(_,g):(ee(),C(c[k],1,1,()=>{c[k]=null}),$(),i=c[s],i?i.p(_,g):(i=c[s]=u[s](_),i.c()),b(i,1),i.m(t,null)),(!l||g[0]&64)&&(t.disabled=_[6])},i(_){l||(b(i),l=!0)},o(_){C(i),l=!1},d(_){_&&K(e),c[s].d(),r=!1,f()}}}function On(n){let e,t;return e=new Xt({}),{c(){ie(e.$$.fragment)},m(s,i){re(e,s,i),t=!0},p:Ce,i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function Bn(n){let e;return{c(){e=ct(n[11])},m(t,s){Q(t,e,s)},p(t,s){s[0]&2048&&ft(e,t[11])},i:Ce,o:Ce,d(t){t&&K(e)}}}function En(n){let e,t,s,i,l,r,f,u,c,a,_,g=n[7]&&n[10]&&Fe(n);s=new Gt({props:{show_label:n[7],info:n[5],$$slots:{default:[Cn]},$$scope:{ctx:n}}});let k=n[1].length!==0&&n[12]==="both"&&Ge(n);const j=[In,Sn],M=[];function V(h,S){return!h[14]&&h[12]!=="text"?0:h[14]&&h[12]!=="dialogue"?1:-1}~(r=V(n))&&(f=M[r]=j[r](n));let w=n[11]&&!n[6]&&xe(n);return{c(){e=R("label"),g&&g.c(),t=x(),ie(s.$$.fragment),i=x(),k&&k.c(),l=x(),f&&f.c(),u=x(),w&&w.c(),v(e,"class","svelte-1de6p8m"),Z(e,"container",n[8])},m(h,S){Q(h,e,S),g&&g.m(e,null),P(e,t),re(s,e,null),P(e,i),k&&k.m(e,null),P(e,l),~r&&M[r].m(e,null),P(e,u),w&&w.m(e,null),c=!0,a||(_=F(window,"click",n[36]),a=!0)},p(h,S){h[7]&&h[10]?g?(g.p(h,S),S[0]&1152&&b(g,1)):(g=Fe(h),g.c(),b(g,1),g.m(e,t)):g&&(ee(),C(g,1,1,()=>{g=null}),$());const p={};S[0]&128&&(p.show_label=h[7]),S[0]&32&&(p.info=h[5]),S[0]&16|S[2]&262144&&(p.$$scope={dirty:S,ctx:h}),s.$set(p),h[1].length!==0&&h[12]==="both"?k?(k.p(h,S),S[0]&4098&&b(k,1)):(k=Ge(h),k.c(),b(k,1),k.m(e,l)):k&&(ee(),C(k,1,1,()=>{k=null}),$());let E=r;r=V(h),r===E?~r&&M[r].p(h,S):(f&&(ee(),C(M[E],1,1,()=>{M[E]=null}),$()),~r?(f=M[r],f?f.p(h,S):(f=M[r]=j[r](h),f.c()),b(f,1),f.m(e,u)):f=null),h[11]&&!h[6]?w?(w.p(h,S),S[0]&2112&&b(w,1)):(w=xe(h),w.c(),b(w,1),w.m(e,null)):w&&(ee(),C(w,1,1,()=>{w=null}),$()),(!c||S[0]&256)&&Z(e,"container",h[8])},i(h){c||(b(g),b(s.$$.fragment,h),b(k),b(f),b(w),c=!0)},o(h){C(g),C(s.$$.fragment,h),C(k),C(f),C(w),c=!1},d(h){h&&K(e),g&&g.d(),oe(s),k&&k.d(),~r&&M[r].d(),w&&w.d(),a=!1,_()}}}function yn(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const $e=n=>[n,n],et=(n,e)=>[n,e],tt=(n,e)=>[n,e];function An(n,e,t){let{speakers:s=[]}=e,{tags:i=[]}=e,{value:l=[]}=e,{value_is_output:r=!1}=e,{placeholder:f=void 0}=e,{label:u}=e,{info:c=void 0}=e,{disabled:a=!1}=e,{show_label:_=!0}=e,{container:g=!0}=e,{max_lines:k=void 0}=e,{show_copy_button:j=!1}=e,{submit_btn:M=!1}=e,{color_map:V=null}=e,{ui_mode:w="both"}=e,h=w==="text",{server:S}=e,p=[];l&&l.length&&typeof l!="string"?p=[...l]:l&&typeof l!="string"&&(p=[{speaker:`${s.length?s[0]:""}`,text:""}]);let E,L=!1,z=-1,O=0,G=[],I=[],W,X=JSON.stringify(l),ce=0,D=!1,T,q="",B=null,N=!1,d=!1,ue=!1;const Ne=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],_t={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let me={};s.length===0&&(h=!0,l="");function Pe(o){const m=s.length>0?s[0]:"";t(15,p=[...p.slice(0,o+1),{speaker:m,text:""},...p.slice(o+1)]),de().then(()=>{I[o+1]&&I[o+1].focus()})}function Re(o){t(15,p=[...p.slice(0,o),...p.slice(o+1)])}function Se(o,m,y){t(15,p[o][m]=y,p),t(15,p=[...p])}function be(o,m){const y=o.target||HTMLTextAreaElement;y&&!I[m]&&t(16,I[m]=y,I);const Y=y.selectionStart||0,te=y.value;let ne=!1,se=-1;if(te[Y-1]===":"){t(19,z=m),se=Y;const H=yn(te,Y);t(21,G=i.filter(J=>H===""||J.toLowerCase().includes(H.toLowerCase()))),ne=G.length>0,t(20,O=0)}else{const H=te.lastIndexOf(":",Y-1);if(H>=0&&!te.substring(H+1,Y).includes(" ")){t(19,z=m),se=H+1;const J=te.substring(H+1,Y);t(21,G=i.filter(le=>J===""||le.toLowerCase().includes(J.toLowerCase()))),ne=G.length>0,t(20,O=0)}}if(ne&&se!==-1){t(18,L=!0);const H=y.getBoundingClientRect();if(E){const J=E.getBoundingClientRect();t(23,ce=J.top+H.height*(m+1.5))}}else t(18,L=!1)}async function Oe(){const o=G[O];if(o){let m,y;h?(y=W,m=q):(y=I[z],m=p[z].text);const Y=y?.selectionStart||0,te=m.lastIndexOf(":",Y-1);if(te>=0){const ne=m.substring(0,te),se=m.substring(Y);if(h){const H=`${ne}${o} ${se}`;t(25,q=H),s.length===0?t(0,l=H):t(0,l=await S.unformat({text:H})),de().then(()=>{if(W){const J=ne.length+o.length+1;W.setSelectionRange(J,J),W.focus()}})}else{const H=ne.replace(/\[S\d+\]/g,"").trim(),J=`${H}${o} ${se}`;Se(z,"text",J),de().then(()=>{const le=I[z];if(le){const _e=H.length+o.length+1;le.setSelectionRange(_e,_e),le.focus()}})}}t(18,L=!1),t(20,O=0)}}async function Be(o){const m=i[o.detail.target.dataset.index];if(m){let y,Y;h?(Y=W,y=q):(Y=I[z],y=p[z].text);const te=Y?.selectionStart||0,ne=y.lastIndexOf(":",te-1);if(ne>=0){const se=y.substring(0,ne),H=y.substring(te);if(h){const J=`${se}${m} ${H}`;t(25,q=J),s.length===0?t(0,l=J):t(0,l=await S.unformat({text:J})),de().then(()=>{if(W){const le=se.length+m.length+1;W.setSelectionRange(le,le),W.focus()}})}else{const J=se.replace(/\[S\d+\]/g,"").trim(),le=`${J}${m} ${H}`;Se(z,"text",le),de().then(()=>{const _e=I[z];if(_e){const qe=J.length+m.length+1;_e.setSelectionRange(qe,qe),_e.focus()}})}}t(18,L=!1),t(20,O=0)}}function dt(o){if(L){const m=o.target,y=document.getElementById("tag-menu");y&&!y.contains(m)&&t(18,L=!1)}}const Ie=kn();function ht(){Ie("change",l),r||Ie("input")}function gt(o){s.length!==0&&(t(43,ue=!0),t(0,l=[...o]))}async function pe(o){return typeof o=="string"?o:await S.format(o)}async function mt(){if("clipboard"in navigator){const o=await pe(l);await navigator.clipboard.writeText(o),Ie("copy",{value:o}),bt()}}function bt(){t(24,D=!0),T&&clearTimeout(T),T=setTimeout(()=>{t(24,D=!1)},1e3)}async function pt(){h&&t(0,l=await S.unformat({text:q})),Ie("submit")}wn(async()=>{if(typeof l=="string")t(25,q=l);else if(l&&l.length>0){const o=await pe(l);t(25,q=o)}else t(25,q="")});function kt(o){h=o,t(14,h)}const wt=async o=>{if(o.detail.checked){t(28,d=!0);try{t(25,q=await pe(p))}finally{t(28,d=!1)}}else{t(27,N=!0);try{t(0,l=await S.unformat({text:q})),t(15,p=[...l])}finally{t(27,N=!1)}}};function vt(o,m){o[m].speaker=this.value,t(15,p),t(0,l),t(42,X),t(43,ue),t(14,h)}function Ct(o,m){n.$$.not_equal(m.speaker,o)&&(m.speaker=o,t(15,p),t(0,l),t(42,X),t(43,ue),t(14,h))}const St=(o,m)=>Se(o,"speaker",m.speaker),It=o=>a&&t(26,B=o.speaker),Dt=()=>a&&t(26,B=null);function Tt(o,m){o[m].text=this.value,t(15,p),t(0,l),t(42,X),t(43,ue),t(14,h)}const Ot=(o,m)=>be(m,o),Bt=(o,m)=>be(m,o),Et=(o,m)=>{m.key==="Escape"&&L?(t(18,L=!1),t(20,O=0),m.preventDefault()):L&&z===o&&(m.key==="ArrowDown"?(t(20,O=Math.min(O+1,G.length-1)),m.preventDefault()):m.key==="ArrowUp"?(t(20,O=Math.max(O-1,0)),m.preventDefault()):m.key==="Enter"&&(G[O]&&Oe(),m.preventDefault()))};function yt(o,m){we[o?"unshift":"push"](()=>{I[m]=o,t(16,I),t(15,p),t(0,l),t(42,X),t(43,ue),t(14,h)})}const At=o=>i.indexOf(o),Mt=o=>i.indexOf(o),Lt=o=>Be(o),Nt=o=>Pe(o),Pt=o=>Re(o);function Rt(o){we[o?"unshift":"push"](()=>{E=o,t(17,E)})}function qt(){q=this.value,t(25,q),t(0,l),t(42,X),t(43,ue),t(14,h),t(15,p)}const Ht=o=>{be(o,0)},Jt=o=>be(o,0),jt=o=>{o.key==="Escape"&&L?(t(18,L=!1),t(20,O=0),o.preventDefault()):L&&(o.key==="ArrowDown"?(t(20,O=Math.min(O+1,G.length-1)),o.preventDefault()):o.key==="ArrowUp"?(t(20,O=Math.max(O-1,0)),o.preventDefault()):o.key==="Enter"&&(G[O]&&Oe(),o.preventDefault()))};function zt(o){we[o?"unshift":"push"](()=>{W=o,t(22,W)})}const Ut=o=>i.indexOf(o),Wt=o=>i.indexOf(o),Ft=o=>Be(o);return n.$$set=o=>{"speakers"in o&&t(1,s=o.speakers),"tags"in o&&t(2,i=o.tags),"value"in o&&t(0,l=o.value),"value_is_output"in o&&t(40,r=o.value_is_output),"placeholder"in o&&t(3,f=o.placeholder),"label"in o&&t(4,u=o.label),"info"in o&&t(5,c=o.info),"disabled"in o&&t(6,a=o.disabled),"show_label"in o&&t(7,_=o.show_label),"container"in o&&t(8,g=o.container),"max_lines"in o&&t(9,k=o.max_lines),"show_copy_button"in o&&t(10,j=o.show_copy_button),"submit_btn"in o&&t(11,M=o.submit_btn),"color_map"in o&&t(41,V=o.color_map),"ui_mode"in o&&t(12,w=o.ui_mode),"server"in o&&t(13,S=o.server)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&(V?t(29,me={...V}):(t(29,me={}),s.forEach((o,m)=>{const y=Ne[m%Ne.length];t(29,me[o]=_t[y],me)}))),n.$$.dirty[0]&49153|n.$$.dirty[1]&6144&&JSON.stringify(l)!==X&&(l==null&&t(15,p=[]),t(42,X=JSON.stringify(l)),typeof l=="string"?t(25,q=l):typeof l=="object"&&Array.isArray(l)&&(t(15,p=[...l]),(!ue||h)&&pe(p).then(o=>{t(25,q=o)})),t(43,ue=!1),ht()),n.$$.dirty[0]&98304&&(p.length>I.length?t(16,I=[...I,...Array(p.length-I.length).fill(null)]):p.length<I.length&&t(16,I=I.slice(0,p.length)),de().then(()=>{I.forEach(o=>{o&&o instanceof HTMLTextAreaElement&&(o.style.height="auto",o.style.height=o.scrollHeight+"px")})})),n.$$.dirty[0]&32768&&gt(p)},[l,s,i,f,u,c,a,_,g,k,j,M,w,S,h,p,I,E,L,z,O,G,W,ce,D,q,B,N,d,me,Pe,Re,Se,be,Oe,Be,dt,pe,mt,pt,r,V,X,ue,kt,wt,vt,Ct,St,It,Dt,Tt,Ot,Bt,Et,yt,At,Mt,Lt,Nt,Pt,Rt,qt,Ht,Jt,jt,zt,Ut,Wt,Ft]}class Mn extends gn{constructor(e){super(),bn(this,e,An,En,pn,{speakers:1,tags:2,value:0,value_is_output:40,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,submit_btn:11,color_map:41,ui_mode:12,server:13},null,[-1,-1,-1])}get speakers(){return this.$$.ctx[1]}set speakers(e){this.$$set({speakers:e}),U()}get tags(){return this.$$.ctx[2]}set tags(e){this.$$set({tags:e}),U()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),U()}get value_is_output(){return this.$$.ctx[40]}set value_is_output(e){this.$$set({value_is_output:e}),U()}get placeholder(){return this.$$.ctx[3]}set placeholder(e){this.$$set({placeholder:e}),U()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),U()}get info(){return this.$$.ctx[5]}set info(e){this.$$set({info:e}),U()}get disabled(){return this.$$.ctx[6]}set disabled(e){this.$$set({disabled:e}),U()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),U()}get container(){return this.$$.ctx[8]}set container(e){this.$$set({container:e}),U()}get max_lines(){return this.$$.ctx[9]}set max_lines(e){this.$$set({max_lines:e}),U()}get show_copy_button(){return this.$$.ctx[10]}set show_copy_button(e){this.$$set({show_copy_button:e}),U()}get submit_btn(){return this.$$.ctx[11]}set submit_btn(e){this.$$set({submit_btn:e}),U()}get color_map(){return this.$$.ctx[41]}set color_map(e){this.$$set({color_map:e}),U()}get ui_mode(){return this.$$.ctx[12]}set ui_mode(e){this.$$set({ui_mode:e}),U()}get server(){return this.$$.ctx[13]}set server(e){this.$$set({server:e}),U()}}const{SvelteComponent:Ln,add_flush_callback:nt,assign:Nn,bind:st,binding_callbacks:lt,check_outros:Pn,create_component:Ae,destroy_component:Me,detach:Rn,flush:A,get_spread_object:qn,get_spread_update:Hn,group_outros:Jn,init:jn,insert:zn,mount_component:Le,safe_not_equal:Un,space:Wn,transition_in:he,transition_out:ve}=window.__gradio__svelte__internal;function it(n){let e,t;const s=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[19]];let i={};for(let l=0;l<s.length;l+=1)i=Nn(i,s[l]);return e=new xt({props:i}),e.$on("clear_status",n[22]),{c(){Ae(e.$$.fragment)},m(l,r){Le(e,l,r),t=!0},p(l,r){const f=r[0]&524292?Hn(s,[r[0]&4&&{autoscroll:l[2].autoscroll},r[0]&4&&{i18n:l[2].i18n},r[0]&524288&&qn(l[19])]):{};e.$set(f)},i(l){t||(he(e.$$.fragment,l),t=!0)},o(l){ve(e.$$.fragment,l),t=!1},d(l){Me(e,l)}}}function Fn(n){let e,t,s,i,l,r=n[19]&&it(n);function f(a){n[23](a)}function u(a){n[24](a)}let c={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:n[17]?.includes("copy")??!1,container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],submit_btn:n[18],server:n[3],ui_mode:n[21],disabled:!n[20]};return n[0]!==void 0&&(c.value=n[0]),n[1]!==void 0&&(c.value_is_output=n[1]),t=new Mn({props:c}),lt.push(()=>st(t,"value",f)),lt.push(()=>st(t,"value_is_output",u)),t.$on("change",n[25]),t.$on("input",n[26]),t.$on("submit",n[27]),t.$on("blur",n[28]),t.$on("select",n[29]),t.$on("focus",n[30]),t.$on("copy",n[31]),{c(){r&&r.c(),e=Wn(),Ae(t.$$.fragment)},m(a,_){r&&r.m(a,_),zn(a,e,_),Le(t,a,_),l=!0},p(a,_){a[19]?r?(r.p(a,_),_[0]&524288&&he(r,1)):(r=it(a),r.c(),he(r,1),r.m(e.parentNode,e)):r&&(Jn(),ve(r,1,1,()=>{r=null}),Pn());const g={};_[0]&16&&(g.label=a[4]),_[0]&128&&(g.info=a[7]),_[0]&4096&&(g.show_label=a[12]),_[0]&8192&&(g.max_lines=a[13]),_[0]&131072&&(g.show_copy_button=a[17]?.includes("copy")??!1),_[0]&16384&&(g.container=a[14]),_[0]&32&&(g.speakers=a[5]),_[0]&64&&(g.tags=a[6]),_[0]&256&&(g.placeholder=a[8]),_[0]&262144&&(g.submit_btn=a[18]),_[0]&8&&(g.server=a[3]),_[0]&2097152&&(g.ui_mode=a[21]),_[0]&1048576&&(g.disabled=!a[20]),!s&&_[0]&1&&(s=!0,g.value=a[0],nt(()=>s=!1)),!i&&_[0]&2&&(i=!0,g.value_is_output=a[1],nt(()=>i=!1)),t.$set(g)},i(a){l||(he(r),he(t.$$.fragment,a),l=!0)},o(a){ve(r),ve(t.$$.fragment,a),l=!1},d(a){a&&Rn(e),r&&r.d(a),Me(t,a)}}}function Gn(n){let e,t;return e=new Zt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[Fn]},$$scope:{ctx:n}}}),{c(){Ae(e.$$.fragment)},m(s,i){Le(e,s,i),t=!0},p(s,i){const l={};i[0]&2048&&(l.visible=s[11]),i[0]&512&&(l.elem_id=s[9]),i[0]&1024&&(l.elem_classes=s[10]),i[0]&32768&&(l.scale=s[15]),i[0]&65536&&(l.min_width=s[16]),i[0]&16384&&(l.padding=s[14]),i[0]&4092415|i[1]&2&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){t||(he(e.$$.fragment,s),t=!0)},o(s){ve(e.$$.fragment,s),t=!1},d(s){Me(e,s)}}}function Kn(n,e,t){let{gradio:s}=e,{server:i}=e,{label:l="Dialogue"}=e,{speakers:r=[]}=e,{tags:f=[]}=e,{info:u=void 0}=e,{placeholder:c=void 0}=e,{elem_id:a=""}=e,{elem_classes:_=[]}=e,{visible:g=!0}=e,{value:k=[]}=e,{show_label:j}=e,{max_lines:M=void 0}=e,{container:V=!0}=e,{scale:w=null}=e,{min_width:h=void 0}=e,{buttons:S=null}=e,{submit_btn:p=!1}=e,{loading_status:E=void 0}=e,{value_is_output:L=!1}=e,{interactive:z}=e,{ui_mode:O="both"}=e;const G=()=>s.dispatch("clear_status",E);function I(d){k=d,t(0,k)}function W(d){L=d,t(1,L)}const X=()=>s.dispatch("change",k),ce=()=>s.dispatch("input"),D=()=>s.dispatch("submit"),T=()=>s.dispatch("blur"),q=d=>s.dispatch("select",d.detail),B=()=>s.dispatch("focus"),N=d=>s.dispatch("copy",d.detail);return n.$$set=d=>{"gradio"in d&&t(2,s=d.gradio),"server"in d&&t(3,i=d.server),"label"in d&&t(4,l=d.label),"speakers"in d&&t(5,r=d.speakers),"tags"in d&&t(6,f=d.tags),"info"in d&&t(7,u=d.info),"placeholder"in d&&t(8,c=d.placeholder),"elem_id"in d&&t(9,a=d.elem_id),"elem_classes"in d&&t(10,_=d.elem_classes),"visible"in d&&t(11,g=d.visible),"value"in d&&t(0,k=d.value),"show_label"in d&&t(12,j=d.show_label),"max_lines"in d&&t(13,M=d.max_lines),"container"in d&&t(14,V=d.container),"scale"in d&&t(15,w=d.scale),"min_width"in d&&t(16,h=d.min_width),"buttons"in d&&t(17,S=d.buttons),"submit_btn"in d&&t(18,p=d.submit_btn),"loading_status"in d&&t(19,E=d.loading_status),"value_is_output"in d&&t(1,L=d.value_is_output),"interactive"in d&&t(20,z=d.interactive),"ui_mode"in d&&t(21,O=d.ui_mode)},[k,L,s,i,l,r,f,u,c,a,_,g,j,M,V,w,h,S,p,E,z,O,G,I,W,X,ce,D,T,q,B,N]}class ns extends Ln{constructor(e){super(),jn(this,e,Kn,Gn,Un,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,buttons:17,submit_btn:18,loading_status:19,value_is_output:1,interactive:20,ui_mode:21},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),A()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),A()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),A()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),A()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),A()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),A()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),A()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),A()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),A()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),A()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),A()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),A()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),A()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),A()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),A()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),A()}get buttons(){return this.$$.ctx[17]}set buttons(e){this.$$set({buttons:e}),A()}get submit_btn(){return this.$$.ctx[18]}set submit_btn(e){this.$$set({submit_btn:e}),A()}get loading_status(){return this.$$.ctx[19]}set loading_status(e){this.$$set({loading_status:e}),A()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),A()}get interactive(){return this.$$.ctx[20]}set interactive(e){this.$$set({interactive:e}),A()}get ui_mode(){return this.$$.ctx[21]}set ui_mode(e){this.$$set({ui_mode:e}),A()}}export{Mn as BaseDialogue,is as BaseExample,ns as default};
//# sourceMappingURL=Index-4hwzmlBl.js.map
