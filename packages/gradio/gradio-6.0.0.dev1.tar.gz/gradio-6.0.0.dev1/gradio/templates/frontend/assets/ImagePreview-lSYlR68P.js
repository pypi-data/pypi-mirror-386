import"./init-5dmMBTcc.js";import{B as X,d as W,u as Y,E as A,I as G,F as J,D as K,S as Q,a as U,b as V}from"./FullscreenButton-pJVgMiya.js";import{I as Z}from"./Image-0bVIZe-w.js";const x=o=>{let e;if(o.currentTarget instanceof Element)e=o.currentTarget.querySelector("img");else return[NaN,NaN];const n=e.getBoundingClientRect(),t=e.naturalWidth/n.width,r=e.naturalHeight/n.height;if(t>r){const m=e.naturalHeight/t,i=(n.height-m)/2;var a=Math.round((o.clientX-n.left)*t),f=Math.round((o.clientY-n.top-i)*t)}else{const m=e.naturalWidth/r,i=(n.width-m)/2;var a=Math.round((o.clientX-n.left-i)*r),f=Math.round((o.clientY-n.top)*r)}return a<0||a>=e.naturalWidth||f<0||f>=e.naturalHeight?null:[a,f]},{SvelteComponent:ee,append:M,attr:j,binding_callbacks:te,bubble:I,check_outros:N,create_component:h,destroy_component:p,detach:k,element:y,empty:F,flush:w,group_outros:S,init:ne,insert:v,listen:le,mount_component:$,safe_not_equal:re,space:B,toggle_class:D,transition_in:b,transition_out:g}=window.__gradio__svelte__internal,{createEventDispatcher:oe,onMount:he}=window.__gradio__svelte__internal;function se(o){let e,n,t,r,a,f,m,i,c;return n=new G({props:{display_top_corner:o[6],$$slots:{default:[ue]},$$scope:{ctx:o}}}),f=new Z({props:{src:o[0].url,alt:"",loading:"lazy"}}),f.$on("load",o[14]),{c(){e=y("div"),h(n.$$.fragment),t=B(),r=y("button"),a=y("div"),h(f.$$.fragment),j(a,"class","image-frame svelte-zxsjoa"),D(a,"selectable",o[4]),j(r,"class","svelte-zxsjoa"),j(e,"class","image-container svelte-zxsjoa")},m(l,s){v(l,e,s),$(n,e,null),M(e,t),M(e,r),M(r,a),$(f,a,null),o[15](e),m=!0,i||(c=le(r,"click",o[9]),i=!0)},p(l,s){const _={};s&64&&(_.display_top_corner=l[6]),s&131241&&(_.$$scope={dirty:s,ctx:l}),n.$set(_);const d={};s&1&&(d.src=l[0].url),f.$set(d),(!m||s&16)&&D(a,"selectable",l[4])},i(l){m||(b(n.$$.fragment,l),b(f.$$.fragment,l),m=!0)},o(l){g(n.$$.fragment,l),g(f.$$.fragment,l),m=!1},d(l){l&&k(e),p(n),p(f),o[15](null),i=!1,c()}}}function ae(o){let e,n;return e=new A({props:{unpadded_box:!0,size:"large",$$slots:{default:[fe]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,r){$(e,t,r),n=!0},p(t,r){const a={};r&131072&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){p(e,t)}}}function E(o){let e,n;return e=new J({props:{fullscreen:o[7]}}),e.$on("fullscreen",o[10]),{c(){h(e.$$.fragment)},m(t,r){$(e,t,r),n=!0},p(t,r){const a={};r&128&&(a.fullscreen=t[7]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){p(e,t)}}}function H(o){let e,n;return e=new K({props:{href:o[0].url,download:o[0].orig_name||"image",$$slots:{default:[ie]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,r){$(e,t,r),n=!0},p(t,r){const a={};r&1&&(a.href=t[0].url),r&1&&(a.download=t[0].orig_name||"image"),r&131104&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){p(e,t)}}}function ie(o){let e,n;return e=new U({props:{Icon:V,label:o[5]("common.download")}}),{c(){h(e.$$.fragment)},m(t,r){$(e,t,r),n=!0},p(t,r){const a={};r&32&&(a.label=t[5]("common.download")),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){p(e,t)}}}function T(o){let e,n;return e=new Q({props:{i18n:o[5],formatter:o[11],value:o[0]}}),e.$on("share",o[12]),e.$on("error",o[13]),{c(){h(e.$$.fragment)},m(t,r){$(e,t,r),n=!0},p(t,r){const a={};r&32&&(a.i18n=t[5]),r&1&&(a.value=t[0]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){p(e,t)}}}function ue(o){let e=o[3]===null?!0:o[3].includes("fullscreen"),n,t=o[3]===null?!0:o[3].includes("download"),r,a=o[3]===null?!0:o[3].includes("share"),f,m,i=e&&E(o),c=t&&H(o),l=a&&T(o);return{c(){i&&i.c(),n=B(),c&&c.c(),r=B(),l&&l.c(),f=F()},m(s,_){i&&i.m(s,_),v(s,n,_),c&&c.m(s,_),v(s,r,_),l&&l.m(s,_),v(s,f,_),m=!0},p(s,_){_&8&&(e=s[3]===null?!0:s[3].includes("fullscreen")),e?i?(i.p(s,_),_&8&&b(i,1)):(i=E(s),i.c(),b(i,1),i.m(n.parentNode,n)):i&&(S(),g(i,1,1,()=>{i=null}),N()),_&8&&(t=s[3]===null?!0:s[3].includes("download")),t?c?(c.p(s,_),_&8&&b(c,1)):(c=H(s),c.c(),b(c,1),c.m(r.parentNode,r)):c&&(S(),g(c,1,1,()=>{c=null}),N()),_&8&&(a=s[3]===null?!0:s[3].includes("share")),a?l?(l.p(s,_),_&8&&b(l,1)):(l=T(s),l.c(),b(l,1),l.m(f.parentNode,f)):l&&(S(),g(l,1,1,()=>{l=null}),N())},i(s){m||(b(i),b(c),b(l),m=!0)},o(s){g(i),g(c),g(l),m=!1},d(s){s&&(k(n),k(r),k(f)),i&&i.d(s),c&&c.d(s),l&&l.d(s)}}}function fe(o){let e,n;return e=new W({}),{c(){h(e.$$.fragment)},m(t,r){$(e,t,r),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){p(e,t)}}}function ce(o){let e,n,t,r,a,f;e=new X({props:{show_label:o[2],Icon:W,label:o[2]?o[1]||o[5]("image.image"):""}});const m=[ae,se],i=[];function c(l,s){return l[0]===null||!l[0].url?0:1}return t=c(o),r=i[t]=m[t](o),{c(){h(e.$$.fragment),n=B(),r.c(),a=F()},m(l,s){$(e,l,s),v(l,n,s),i[t].m(l,s),v(l,a,s),f=!0},p(l,[s]){const _={};s&4&&(_.show_label=l[2]),s&38&&(_.label=l[2]?l[1]||l[5]("image.image"):""),e.$set(_);let d=t;t=c(l),t===d?i[t].p(l,s):(S(),g(i[d],1,1,()=>{i[d]=null}),N(),r=i[t],r?r.p(l,s):(r=i[t]=m[t](l),r.c()),b(r,1),r.m(a.parentNode,a))},i(l){f||(b(e.$$.fragment,l),b(r),f=!0)},o(l){g(e.$$.fragment,l),g(r),f=!1},d(l){l&&(k(n),k(a)),p(e,l),i[t].d(l)}}}function _e(o,e,n){let{value:t}=e,{label:r=void 0}=e,{show_label:a}=e,{buttons:f=null}=e,{selectable:m=!1}=e,{i18n:i}=e,{display_icon_button_wrapper_top_corner:c=!1}=e,{fullscreen:l=!1}=e;const s=oe(),_=u=>{let z=x(u);z&&s("select",{index:z,value:null})};let d;function P(u){I.call(this,o,u)}const q=async u=>u?`<img src="${await Y(u)}" />`:"";function C(u){I.call(this,o,u)}function L(u){I.call(this,o,u)}function O(u){I.call(this,o,u)}function R(u){te[u?"unshift":"push"](()=>{d=u,n(8,d)})}return o.$$set=u=>{"value"in u&&n(0,t=u.value),"label"in u&&n(1,r=u.label),"show_label"in u&&n(2,a=u.show_label),"buttons"in u&&n(3,f=u.buttons),"selectable"in u&&n(4,m=u.selectable),"i18n"in u&&n(5,i=u.i18n),"display_icon_button_wrapper_top_corner"in u&&n(6,c=u.display_icon_button_wrapper_top_corner),"fullscreen"in u&&n(7,l=u.fullscreen)},[t,r,a,f,m,i,c,l,d,_,P,q,C,L,O,R]}class me extends ee{constructor(e){super(),ne(this,e,_e,ce,re,{value:0,label:1,show_label:2,buttons:3,selectable:4,i18n:5,display_icon_button_wrapper_top_corner:6,fullscreen:7})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),w()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),w()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),w()}get buttons(){return this.$$.ctx[3]}set buttons(e){this.$$set({buttons:e}),w()}get selectable(){return this.$$.ctx[4]}set selectable(e){this.$$set({selectable:e}),w()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),w()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[6]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),w()}get fullscreen(){return this.$$.ctx[7]}set fullscreen(e){this.$$set({fullscreen:e}),w()}}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{me as I,pe as a,x as g};
//# sourceMappingURL=ImagePreview-lSYlR68P.js.map
