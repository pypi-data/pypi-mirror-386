import{u as _t,B as mt,d as Ge,E as ht,I as dt,j as Se,k as qe,a as ce,b as gt,F as bt,S as pt,l as wt}from"./FullscreenButton-pJVgMiya.js";import{M as kt,U as vt}from"./ModifyUpload-B6U-QBfa.js";import{I as _e}from"./Image-0bVIZe-w.js";import"./ImagePreview-lSYlR68P.js";import{V as me}from"./Video-NpeJCQXG.js";import{d as yt}from"./index-tFQomdd2.js";import"./index-CtRY-svv.js";import"./init-5dmMBTcc.js";import"./MarkdownCode-CJL7VgM9.js";import"./prism-python-DspNkBda.js";import"./hls-C7-VjdhD.js";import"./svelte/svelte.js";async function zt(n){return n?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(n.map(async([l,t])=>l===null||!l.url?"":await _t(l.url)))).map(l=>`<img src="${l}" style="height: 400px" />`).join("")}</div>`:""}const{SvelteComponent:jt,add_flush_callback:Bt,add_render_callback:Et,append:N,attr:B,bind:It,binding_callbacks:ne,bubble:ae,check_outros:D,create_component:E,destroy_component:I,destroy_each:He,detach:T,element:S,empty:he,ensure_array_like:ie,flush:j,globals:Lt,group_outros:C,init:Mt,insert:U,is_function:$t,listen:K,mount_component:L,noop:Tt,run_all:Ut,safe_not_equal:Nt,set_data:Oe,set_style:H,space:A,stop_propagation:Rt,text:Pe,toggle_class:F,transition_in:m,transition_out:g}=window.__gradio__svelte__internal,{window:Ve}=Lt,{createEventDispatcher:Dt,onMount:Ct}=window.__gradio__svelte__internal,{tick:At}=window.__gradio__svelte__internal;function Be(n,e,l){const t=n.slice();return t[64]=e[l],t[66]=l,t}function Ee(n,e,l){const t=n.slice();return t[67]=e[l],t[68]=e,t[66]=l,t}function Ie(n){let e,l;return e=new mt({props:{show_label:n[2],Icon:Ge,label:n[3]||"Gallery"}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&4&&(o.show_label=t[2]),i[0]&8&&(o.label=t[3]||"Gallery"),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Wt(n){let e,l,t,i,o,f,u=n[30]&&n[6]&&Le(n),s=n[11]&&n[1]===null&&De(n),h=ie(n[21]),a=[];for(let c=0;c<h.length;c+=1)a[c]=Fe(Be(n,h,c));const p=c=>g(a[c],1,1,()=>{a[c]=null});return{c(){e=S("div"),u&&u.c(),l=A(),t=S("div"),s&&s.c(),i=A(),o=S("div");for(let c=0;c<a.length;c+=1)a[c].c();B(o,"class","grid-container svelte-ao1xvt"),H(o,"--grid-cols",n[25]),H(o,"--grid-rows",n[4]),H(o,"--object-fit",n[7]),F(o,"pt-6",n[2]),B(t,"class","grid-wrap svelte-ao1xvt"),F(t,"minimal",n[12]==="minimal"),F(t,"fixed-height",n[12]!=="minimal"&&(!n[5]||n[5]=="auto")),F(t,"hidden",n[23]),H(t,"height",n[5]!=="auto"?n[5]+"px":null),B(e,"class","gallery-container")},m(c,d){U(c,e,d),u&&u.m(e,null),N(e,l),N(e,t),s&&s.m(t,null),N(t,i),N(t,o);for(let b=0;b<a.length;b+=1)a[b]&&a[b].m(o,null);n[59](e),f=!0},p(c,d){if(c[30]&&c[6]?u?(u.p(c,d),d[0]&1073741888&&m(u,1)):(u=Le(c),u.c(),m(u,1),u.m(e,l)):u&&(C(),g(u,1,1,()=>{u=null}),D()),c[11]&&c[1]===null?s?(s.p(c,d),d[0]&2050&&m(s,1)):(s=De(c),s.c(),m(s,1),s.m(t,i)):s&&(C(),g(s,1,1,()=>{s=null}),D()),d[0]&2099266|d[1]&17){h=ie(c[21]);let b;for(b=0;b<h.length;b+=1){const z=Be(c,h,b);a[b]?(a[b].p(z,d),m(a[b],1)):(a[b]=Fe(z),a[b].c(),m(a[b],1),a[b].m(o,null))}for(C(),b=h.length;b<a.length;b+=1)p(b);D()}(!f||d[0]&33554432)&&H(o,"--grid-cols",c[25]),(!f||d[0]&16)&&H(o,"--grid-rows",c[4]),(!f||d[0]&128)&&H(o,"--object-fit",c[7]),(!f||d[0]&4)&&F(o,"pt-6",c[2]),(!f||d[0]&4096)&&F(t,"minimal",c[12]==="minimal"),(!f||d[0]&4128)&&F(t,"fixed-height",c[12]!=="minimal"&&(!c[5]||c[5]=="auto")),(!f||d[0]&8388608)&&F(t,"hidden",c[23]),d[0]&32&&H(t,"height",c[5]!=="auto"?c[5]+"px":null)},i(c){if(!f){m(u),m(s);for(let d=0;d<h.length;d+=1)m(a[d]);f=!0}},o(c){g(u),g(s),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)g(a[d]);f=!1},d(c){c&&T(e),u&&u.d(),s&&s.d(),He(a,c),n[59](null)}}}function Ft(n){let e,l;return e=new ht({props:{unpadded_box:!0,size:"large",$$slots:{default:[Kt]},$$scope:{ctx:n}}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[2]&128&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Le(n){let e,l,t,i,o,f,u,s,h,a,p,c;l=new dt({props:{display_top_corner:n[14],$$slots:{default:[Gt]},$$scope:{ctx:n}}});const d=[qt,St],b=[];function z(k,y){return"image"in k[30]?0:1}o=z(n),f=b[o]=d[o](n);let v=n[30]?.caption&&Ne(n),w=ie(n[21]),_=[];for(let k=0;k<w.length;k+=1)_[k]=Re(Ee(n,w,k));const R=k=>g(_[k],1,1,()=>{_[k]=null});return{c(){e=S("button"),E(l.$$.fragment),t=A(),i=S("button"),f.c(),u=A(),v&&v.c(),s=A(),h=S("div");for(let k=0;k<_.length;k+=1)_[k].c();B(i,"class","media-button svelte-ao1xvt"),H(i,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),B(i,"aria-label","detailed view of selected image"),B(h,"class","thumbnails scroll-hide svelte-ao1xvt"),B(h,"data-testid","container_el"),H(h,"justify-content",n[28]?"flex-start":"center"),B(e,"class","preview svelte-ao1xvt"),F(e,"minimal",n[12]==="minimal")},m(k,y){U(k,e,y),L(l,e,null),N(e,t),N(e,i),b[o].m(i,null),N(e,u),v&&v.m(e,null),N(e,s),N(e,h);for(let O=0;O<_.length;O+=1)_[O]&&_[O].m(h,null);n[52](h),a=!0,p||(c=[K(i,"click",function(){$t("image"in n[30]?n[49]:null)&&("image"in n[30]?n[49]:null).apply(this,arguments)}),K(e,"keydown",n[33])],p=!0)},p(k,y){n=k;const O={};y[0]&16384&&(O.display_top_corner=n[14]),y[0]&1084270338|y[2]&128&&(O.$$scope={dirty:y,ctx:n}),l.$set(O);let V=o;if(o=z(n),o===V?b[o].p(n,y):(C(),g(b[V],1,1,()=>{b[V]=null}),D(),f=b[o],f?f.p(n,y):(f=b[o]=d[o](n),f.c()),m(f,1),f.m(i,null)),(!a||y[0]&1073741824)&&H(i,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),n[30]?.caption?v?v.p(n,y):(v=Ne(n),v.c(),v.m(e,s)):v&&(v.d(1),v=null),y[0]&69210114){w=ie(n[21]);let M;for(M=0;M<w.length;M+=1){const Q=Ee(n,w,M);_[M]?(_[M].p(Q,y),m(_[M],1)):(_[M]=Re(Q),_[M].c(),m(_[M],1),_[M].m(h,null))}for(C(),M=w.length;M<_.length;M+=1)R(M);D()}(!a||y[0]&268435456)&&H(h,"justify-content",n[28]?"flex-start":"center"),(!a||y[0]&4096)&&F(e,"minimal",n[12]==="minimal")},i(k){if(!a){m(l.$$.fragment,k),m(f);for(let y=0;y<w.length;y+=1)m(_[y]);a=!0}},o(k){g(l.$$.fragment,k),g(f),_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)g(_[y]);a=!1},d(k){k&&T(e),I(l),b[o].d(),v&&v.d(),He(_,k),n[52](null),p=!1,Ut(c)}}}function Me(n){let e,l;return e=new ce({props:{Icon:gt,label:n[10]("common.download")}}),e.$on("click",n[44]),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&1024&&(o.label=t[10]("common.download")),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function $e(n){let e,l;return e=new bt({props:{fullscreen:n[15]}}),e.$on("fullscreen",n[45]),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&32768&&(o.fullscreen=t[15]),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Te(n){let e,l,t;return l=new pt({props:{i18n:n[10],value:n[21],formatter:zt}}),l.$on("share",n[46]),l.$on("error",n[47]),{c(){e=S("div"),E(l.$$.fragment),B(e,"class","icon-button")},m(i,o){U(i,e,o),L(l,e,null),t=!0},p(i,o){const f={};o[0]&1024&&(f.i18n=i[10]),o[0]&2097152&&(f.value=i[21]),l.$set(f)},i(i){t||(m(l.$$.fragment,i),t=!0)},o(i){g(l.$$.fragment,i),t=!1},d(i){i&&T(e),I(l)}}}function Ue(n){let e,l;return e=new ce({props:{Icon:qe,label:"Close"}}),e.$on("click",n[48]),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p:Tt,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Gt(n){let e,l,t,i,o,f=n[9]&&Me(n),u=n[13]&&$e(n),s=n[8]&&Te(n),h=!n[23]&&Ue(n);return{c(){f&&f.c(),e=A(),u&&u.c(),l=A(),s&&s.c(),t=A(),h&&h.c(),i=he()},m(a,p){f&&f.m(a,p),U(a,e,p),u&&u.m(a,p),U(a,l,p),s&&s.m(a,p),U(a,t,p),h&&h.m(a,p),U(a,i,p),o=!0},p(a,p){a[9]?f?(f.p(a,p),p[0]&512&&m(f,1)):(f=Me(a),f.c(),m(f,1),f.m(e.parentNode,e)):f&&(C(),g(f,1,1,()=>{f=null}),D()),a[13]?u?(u.p(a,p),p[0]&8192&&m(u,1)):(u=$e(a),u.c(),m(u,1),u.m(l.parentNode,l)):u&&(C(),g(u,1,1,()=>{u=null}),D()),a[8]?s?(s.p(a,p),p[0]&256&&m(s,1)):(s=Te(a),s.c(),m(s,1),s.m(t.parentNode,t)):s&&(C(),g(s,1,1,()=>{s=null}),D()),a[23]?h&&(C(),g(h,1,1,()=>{h=null}),D()):h?(h.p(a,p),p[0]&8388608&&m(h,1)):(h=Ue(a),h.c(),m(h,1),h.m(i.parentNode,i))},i(a){o||(m(f),m(u),m(s),m(h),o=!0)},o(a){g(f),g(u),g(s),g(h),o=!1},d(a){a&&(T(e),T(l),T(t),T(i)),f&&f.d(a),u&&u.d(a),s&&s.d(a),h&&h.d(a)}}}function St(n){let e,l;return e=new me({props:{src:n[30].video.url,"data-testid":"detailed-video",alt:n[30].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&1073741824&&(o.src=t[30].video.url),i[0]&1073741824&&(o.alt=t[30].caption||""),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function qt(n){let e,l;return e=new _e({props:{"data-testid":"detailed-image",src:n[30].image.url,alt:n[30].caption||"",title:n[30].caption||null,class:n[30].caption&&"with-caption",loading:"lazy"}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&1073741824&&(o.src=t[30].image.url),i[0]&1073741824&&(o.alt=t[30].caption||""),i[0]&1073741824&&(o.title=t[30].caption||null),i[0]&1073741824&&(o.class=t[30].caption&&"with-caption"),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Ne(n){let e,l=n[30].caption+"",t;return{c(){e=S("caption"),t=Pe(l),B(e,"class","caption svelte-ao1xvt")},m(i,o){U(i,e,o),N(e,t)},p(i,o){o[0]&1073741824&&l!==(l=i[30].caption+"")&&Oe(t,l)},d(i){i&&T(e)}}}function Ht(n){let e,l,t,i;return e=new Se({}),t=new me({props:{src:n[67].video.url,title:n[67].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[66]+1),alt:"",loading:"lazy",loop:!1}}),{c(){E(e.$$.fragment),l=A(),E(t.$$.fragment)},m(o,f){L(e,o,f),U(o,l,f),L(t,o,f),i=!0},p(o,f){const u={};f[0]&2097152&&(u.src=o[67].video.url),f[0]&2097152&&(u.title=o[67].caption||null),t.$set(u)},i(o){i||(m(e.$$.fragment,o),m(t.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),i=!1},d(o){o&&T(l),I(e,o),I(t,o)}}}function Ot(n){let e,l;return e=new _e({props:{src:n[67].image.url,title:n[67].caption||null,"data-testid":"thumbnail "+(n[66]+1),alt:"",loading:"lazy"}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&2097152&&(o.src=t[67].image.url),i[0]&2097152&&(o.title=t[67].caption||null),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Re(n){let e,l,t,i,o,f=n[66],u,s,h;const a=[Ot,Ht],p=[];function c(v,w){return"image"in v[67]?0:1}l=c(n),t=p[l]=a[l](n);const d=()=>n[50](e,f),b=()=>n[50](null,f);function z(){return n[51](n[66])}return{c(){e=S("button"),t.c(),i=A(),B(e,"class","thumbnail-item thumbnail-small svelte-ao1xvt"),B(e,"aria-label",o="Thumbnail "+(n[66]+1)+" of "+n[21].length),F(e,"selected",n[1]===n[66]&&n[12]!=="minimal")},m(v,w){U(v,e,w),p[l].m(e,null),N(e,i),d(),u=!0,s||(h=K(e,"click",z),s=!0)},p(v,w){n=v;let _=l;l=c(n),l===_?p[l].p(n,w):(C(),g(p[_],1,1,()=>{p[_]=null}),D(),t=p[l],t?t.p(n,w):(t=p[l]=a[l](n),t.c()),m(t,1),t.m(e,i)),(!u||w[0]&2097152&&o!==(o="Thumbnail "+(n[66]+1)+" of "+n[21].length))&&B(e,"aria-label",o),f!==n[66]&&(b(),f=n[66],d()),(!u||w[0]&4098)&&F(e,"selected",n[1]===n[66]&&n[12]!=="minimal")},i(v){u||(m(t),u=!0)},o(v){g(t),u=!1},d(v){v&&T(e),p[l].d(),b(),s=!1,h()}}}function De(n){let e,l;return e=new kt({props:{i18n:n[10],$$slots:{default:[Vt]},$$scope:{ctx:n}}}),e.$on("clear",n[56]),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&1024&&(o.i18n=t[10]),i[0]&538903552|i[2]&128&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Ce(n){let e,l;return e=new ce({props:{Icon:wt,label:n[10]("common.upload"),$$slots:{default:[Pt]},$$scope:{ctx:n}}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&1024&&(o.label=t[10]("common.upload")),i[0]&538902528|i[2]&128&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Pt(n){let e,l,t;function i(f){n[53](f)}let o={icon_upload:!0,filetype:n[17],file_count:"multiple",max_file_size:n[18],root:n[16],stream_handler:n[20],upload:n[19]};return n[29]!==void 0&&(o.uploading=n[29]),e=new vt({props:o}),ne.push(()=>It(e,"uploading",i)),e.$on("load",n[54]),e.$on("error",n[55]),{c(){E(e.$$.fragment)},m(f,u){L(e,f,u),t=!0},p(f,u){const s={};u[0]&131072&&(s.filetype=f[17]),u[0]&262144&&(s.max_file_size=f[18]),u[0]&65536&&(s.root=f[16]),u[0]&1048576&&(s.stream_handler=f[20]),u[0]&524288&&(s.upload=f[19]),!l&&u[0]&536870912&&(l=!0,s.uploading=f[29],Bt(()=>l=!1)),e.$set(s)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){I(e,f)}}}function Vt(n){let e,l,t=n[19]&&n[20]&&Ce(n);return{c(){t&&t.c(),e=he()},m(i,o){t&&t.m(i,o),U(i,e,o),l=!0},p(i,o){i[19]&&i[20]?t?(t.p(i,o),o[0]&1572864&&m(t,1)):(t=Ce(i),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(C(),g(t,1,1,()=>{t=null}),D())},i(i){l||(m(t),l=!0)},o(i){g(t),l=!1},d(i){i&&T(e),t&&t.d(i)}}}function Xt(n){let e,l,t,i;return e=new Se({}),t=new me({props:{src:n[64].video.url,title:n[64].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[66]+1),alt:"",loading:"lazy",loop:!1}}),{c(){E(e.$$.fragment),l=A(),E(t.$$.fragment)},m(o,f){L(e,o,f),U(o,l,f),L(t,o,f),i=!0},p(o,f){const u={};f[0]&2097152&&(u.src=o[64].video.url),f[0]&2097152&&(u.title=o[64].caption||null),t.$set(u)},i(o){i||(m(e.$$.fragment,o),m(t.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),i=!1},d(o){o&&T(l),I(e,o),I(t,o)}}}function Jt(n){let e,l;return e=new _e({props:{alt:n[64].caption||"",src:typeof n[64].image=="string"?n[64].image:n[64].image.url,loading:"lazy"}}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},p(t,i){const o={};i[0]&2097152&&(o.alt=t[64].caption||""),i[0]&2097152&&(o.src=typeof t[64].image=="string"?t[64].image:t[64].image.url),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Ae(n){let e,l=n[64].caption+"",t;return{c(){e=S("div"),t=Pe(l),B(e,"class","caption-label svelte-ao1xvt")},m(i,o){U(i,e,o),N(e,t)},p(i,o){o[0]&2097152&&l!==(l=i[64].caption+"")&&Oe(t,l)},d(i){i&&T(e)}}}function We(n){let e,l,t,i,o;l=new qe({});function f(){return n[58](n[66])}return{c(){e=S("button"),E(l.$$.fragment),B(e,"class","delete-button svelte-ao1xvt"),B(e,"aria-label","Delete image")},m(u,s){U(u,e,s),L(l,e,null),t=!0,i||(o=K(e,"click",Rt(f)),i=!0)},p(u,s){n=u},i(u){t||(m(l.$$.fragment,u),t=!0)},o(u){g(l.$$.fragment,u),t=!1},d(u){u&&T(e),I(l),i=!1,o()}}}function Fe(n){let e,l,t,i,o,f,u,s,h,a,p;const c=[Jt,Xt],d=[];function b(_,R){return"image"in _[64]?0:1}t=b(n),i=d[t]=c[t](n);let z=n[64].caption&&Ae(n);function v(){return n[57](n[66])}let w=n[11]&&We(n);return{c(){e=S("div"),l=S("button"),i.c(),o=A(),z&&z.c(),u=A(),w&&w.c(),s=A(),B(l,"class","thumbnail-item thumbnail-lg svelte-ao1xvt"),B(l,"aria-label",f="Thumbnail "+(n[66]+1)+" of "+n[21].length),F(l,"selected",n[1]===n[66]),B(e,"class","gallery-item svelte-ao1xvt")},m(_,R){U(_,e,R),N(e,l),d[t].m(l,null),N(l,o),z&&z.m(l,null),N(e,u),w&&w.m(e,null),N(e,s),h=!0,a||(p=K(l,"click",v),a=!0)},p(_,R){n=_;let k=t;t=b(n),t===k?d[t].p(n,R):(C(),g(d[k],1,1,()=>{d[k]=null}),D(),i=d[t],i?i.p(n,R):(i=d[t]=c[t](n),i.c()),m(i,1),i.m(l,o)),n[64].caption?z?z.p(n,R):(z=Ae(n),z.c(),z.m(l,null)):z&&(z.d(1),z=null),(!h||R[0]&2097152&&f!==(f="Thumbnail "+(n[66]+1)+" of "+n[21].length))&&B(l,"aria-label",f),(!h||R[0]&2)&&F(l,"selected",n[1]===n[66]),n[11]?w?(w.p(n,R),R[0]&2048&&m(w,1)):(w=We(n),w.c(),m(w,1),w.m(e,s)):w&&(C(),g(w,1,1,()=>{w=null}),D())},i(_){h||(m(i),m(w),h=!0)},o(_){g(i),g(w),h=!1},d(_){_&&T(e),d[t].d(),z&&z.d(),w&&w.d(),a=!1,p()}}}function Kt(n){let e,l;return e=new Ge({}),{c(){E(e.$$.fragment)},m(t,i){L(e,t,i),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Qt(n){let e,l,t,i,o,f,u;Et(n[43]);let s=n[2]&&Ie(n);const h=[Ft,Wt],a=[];function p(c,d){return c[0]==null||c[21]==null||c[21].length===0?0:1}return l=p(n),t=a[l]=h[l](n),{c(){s&&s.c(),e=A(),t.c(),i=he()},m(c,d){s&&s.m(c,d),U(c,e,d),a[l].m(c,d),U(c,i,d),o=!0,f||(u=K(Ve,"resize",n[43]),f=!0)},p(c,d){c[2]?s?(s.p(c,d),d[0]&4&&m(s,1)):(s=Ie(c),s.c(),m(s,1),s.m(e.parentNode,e)):s&&(C(),g(s,1,1,()=>{s=null}),D());let b=l;l=p(c),l===b?a[l].p(c,d):(C(),g(a[b],1,1,()=>{a[b]=null}),D(),t=a[l],t?t.p(c,d):(t=a[l]=h[l](c),t.c()),m(t,1),t.m(i.parentNode,i))},i(c){o||(m(s),m(t),o=!0)},o(c){g(s),g(t),o=!1},d(c){c&&(T(e),T(i)),s&&s.d(c),a[l].d(c),f=!1,u()}}}function Yt(n,e,l){let t,i,o,{show_label:f=!0}=e,{label:u}=e,{value:s=null}=e,{columns:h=[2]}=e,{rows:a=void 0}=e,{height:p="auto"}=e,{preview:c}=e,{allow_preview:d=!0}=e,{object_fit:b="cover"}=e,{show_share_button:z=!1}=e,{show_download_button:v=!1}=e,{i18n:w}=e,{selected_index:_=null}=e,{interactive:R}=e,{_fetch:k}=e,{mode:y="normal"}=e,{show_fullscreen_button:O=!0}=e,{display_icon_button_wrapper_top_corner:V=!1}=e,{fullscreen:M=!1}=e,{root:Q=""}=e,{file_types:de=["image","video"]}=e,{max_file_size:ge=null}=e,{upload:be=void 0}=e,{stream_handler:pe=void 0}=e,{fit_columns:oe=!0}=e,we=!1,re;const P=Dt();let Y=!0,W=null,ee=h,fe=s;_==null&&c&&s?.length&&(_=0);let se=_;function ke(r){const $=r.target,G=r.offsetX,J=$.offsetWidth/2;G<J?l(1,_=t):l(1,_=i)}function Xe(r){switch(r.code){case"Escape":r.preventDefault(),l(1,_=null);break;case"ArrowLeft":r.preventDefault(),l(1,_=t);break;case"ArrowRight":r.preventDefault(),l(1,_=i);break}}let X=[],q;async function Je(r){if(typeof r!="number"||(await At(),X[r]===void 0))return;X[r]?.focus();const{left:$,width:G}=q.getBoundingClientRect(),{left:te,width:J}=X[r].getBoundingClientRect(),x=te-$+J/2-G/2+q.scrollLeft;q&&typeof q.scrollTo=="function"&&q.scrollTo({left:x<0?0:x,behavior:"smooth"})}let ve=0;async function ye(r,$){let G;try{G=await k(r)}catch(x){if(x instanceof TypeError){window.open(r,"_blank","noreferrer");return}throw x}const te=await G.blob(),J=URL.createObjectURL(te),le=document.createElement("a");le.href=J,le.download=$,le.click(),URL.revokeObjectURL(J)}let ze=!1;function Z(){q&&l(28,ze=q.scrollWidth>q.clientWidth)}Ct(()=>(Z(),document.addEventListener("fullscreenchange",()=>{l(23,we=!!document.fullscreenElement)}),window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)));function je(r){if(!s||!W)return;const $=W[r];let G;"image"in $?G={file:$.image,index:r}:"video"in $&&(G={file:$.video,index:r}),G&&P("delete",G)}let ue=!1;function Ke(){l(27,ve=Ve.innerHeight)}const Qe=()=>{const r="image"in o?o?.image:o?.video;if(r==null)return;const{url:$,orig_name:G}=r;$&&ye($,G??"image")};function Ye(r){ae.call(this,n,r)}function Ze(r){ae.call(this,n,r)}function xe(r){ae.call(this,n,r)}const et=()=>{l(1,_=null),P("preview_close")},tt=r=>ke(r);function lt(r,$){ne[r?"unshift":"push"](()=>{X[$]=r,l(26,X)})}const nt=r=>l(1,_=r);function it(r){ne[r?"unshift":"push"](()=>{q=r,l(22,q)})}function ot(r){ue=r,l(29,ue)}const rt=r=>P("upload",r.detail),ft=r=>P("error",r.detail),st=()=>l(0,s=[]),ut=r=>{_===null&&d&&P("preview_open"),l(1,_=r)},at=r=>je(r);function ct(r){ne[r?"unshift":"push"](()=>{re=r,l(24,re)})}return n.$$set=r=>{"show_label"in r&&l(2,f=r.show_label),"label"in r&&l(3,u=r.label),"value"in r&&l(0,s=r.value),"columns"in r&&l(36,h=r.columns),"rows"in r&&l(4,a=r.rows),"height"in r&&l(5,p=r.height),"preview"in r&&l(37,c=r.preview),"allow_preview"in r&&l(6,d=r.allow_preview),"object_fit"in r&&l(7,b=r.object_fit),"show_share_button"in r&&l(8,z=r.show_share_button),"show_download_button"in r&&l(9,v=r.show_download_button),"i18n"in r&&l(10,w=r.i18n),"selected_index"in r&&l(1,_=r.selected_index),"interactive"in r&&l(11,R=r.interactive),"_fetch"in r&&l(38,k=r._fetch),"mode"in r&&l(12,y=r.mode),"show_fullscreen_button"in r&&l(13,O=r.show_fullscreen_button),"display_icon_button_wrapper_top_corner"in r&&l(14,V=r.display_icon_button_wrapper_top_corner),"fullscreen"in r&&l(15,M=r.fullscreen),"root"in r&&l(16,Q=r.root),"file_types"in r&&l(17,de=r.file_types),"max_file_size"in r&&l(18,ge=r.max_file_size),"upload"in r&&l(19,be=r.upload),"stream_handler"in r&&l(20,pe=r.stream_handler),"fit_columns"in r&&l(39,oe=r.fit_columns)},n.$$.update=()=>{if(n.$$.dirty[0]&1|n.$$.dirty[1]&512&&l(40,Y=s==null||s.length===0?!0:Y),n.$$.dirty[0]&1&&l(21,W=s==null?null:s.map(r=>"video"in r?{video:r.video,caption:r.caption}:"image"in r?{image:r.image,caption:r.caption}:{})),n.$$.dirty[0]&2097152|n.$$.dirty[1]&288)if(W&&h&&oe){const r=W.length;Array.isArray(h)?l(25,ee=h.map($=>Math.min($,r))):l(25,ee=Math.min(h,r))}else l(25,ee=h);n.$$.dirty[0]&3|n.$$.dirty[1]&1600&&(yt(fe,s)||(Y?(l(1,_=c&&s?.length?0:null),l(40,Y=!1)):_!==null&&s!==null?l(1,_=Math.max(0,Math.min(_,s.length-1))):l(1,_=null),P("change"),l(41,fe=s))),n.$$.dirty[0]&2097154|n.$$.dirty[1]&2048&&_!==se&&(l(42,se=_),_!==null&&(W!=null&&l(1,_=Math.max(0,Math.min(_,W.length-1))),P("select",{index:_,value:W?.[_]}))),n.$$.dirty[0]&2097154&&(t=((_??0)+(W?.length??0)-1)%(W?.length??0)),n.$$.dirty[0]&2097154&&(i=((_??0)+1)%(W?.length??0)),n.$$.dirty[0]&66&&d&&Je(_),n.$$.dirty[0]&2097154&&l(30,o=_!=null&&W!=null?W[_]:null),n.$$.dirty[0]&2097152&&Z(),n.$$.dirty[0]&4194304&&q&&Z()},[s,_,f,u,a,p,d,b,z,v,w,R,y,O,V,M,Q,de,ge,be,pe,W,q,we,re,ee,X,ve,ze,ue,o,P,ke,Xe,ye,je,h,c,k,oe,Y,fe,se,Ke,Qe,Ye,Ze,xe,et,tt,lt,nt,it,ot,rt,ft,st,ut,at,ct]}class al extends jt{constructor(e){super(),Mt(this,e,Yt,Qt,Nt,{show_label:2,label:3,value:0,columns:36,rows:4,height:5,preview:37,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9,i18n:10,selected_index:1,interactive:11,_fetch:38,mode:12,show_fullscreen_button:13,display_icon_button_wrapper_top_corner:14,fullscreen:15,root:16,file_types:17,max_file_size:18,upload:19,stream_handler:20,fit_columns:39},null,[-1,-1,-1])}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),j()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),j()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),j()}get columns(){return this.$$.ctx[36]}set columns(e){this.$$set({columns:e}),j()}get rows(){return this.$$.ctx[4]}set rows(e){this.$$set({rows:e}),j()}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),j()}get preview(){return this.$$.ctx[37]}set preview(e){this.$$set({preview:e}),j()}get allow_preview(){return this.$$.ctx[6]}set allow_preview(e){this.$$set({allow_preview:e}),j()}get object_fit(){return this.$$.ctx[7]}set object_fit(e){this.$$set({object_fit:e}),j()}get show_share_button(){return this.$$.ctx[8]}set show_share_button(e){this.$$set({show_share_button:e}),j()}get show_download_button(){return this.$$.ctx[9]}set show_download_button(e){this.$$set({show_download_button:e}),j()}get i18n(){return this.$$.ctx[10]}set i18n(e){this.$$set({i18n:e}),j()}get selected_index(){return this.$$.ctx[1]}set selected_index(e){this.$$set({selected_index:e}),j()}get interactive(){return this.$$.ctx[11]}set interactive(e){this.$$set({interactive:e}),j()}get _fetch(){return this.$$.ctx[38]}set _fetch(e){this.$$set({_fetch:e}),j()}get mode(){return this.$$.ctx[12]}set mode(e){this.$$set({mode:e}),j()}get show_fullscreen_button(){return this.$$.ctx[13]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),j()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[14]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),j()}get fullscreen(){return this.$$.ctx[15]}set fullscreen(e){this.$$set({fullscreen:e}),j()}get root(){return this.$$.ctx[16]}set root(e){this.$$set({root:e}),j()}get file_types(){return this.$$.ctx[17]}set file_types(e){this.$$set({file_types:e}),j()}get max_file_size(){return this.$$.ctx[18]}set max_file_size(e){this.$$set({max_file_size:e}),j()}get upload(){return this.$$.ctx[19]}set upload(e){this.$$set({upload:e}),j()}get stream_handler(){return this.$$.ctx[20]}set stream_handler(e){this.$$set({stream_handler:e}),j()}get fit_columns(){return this.$$.ctx[39]}set fit_columns(e){this.$$set({fit_columns:e}),j()}}export{al as default};
//# sourceMappingURL=Gallery-m0vlzA8l.js.map
