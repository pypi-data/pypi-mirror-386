import{SvelteComponent as Me,init as Ne,safe_not_equal as ye,element as L,space as Z,text as Re,claim_element as M,children as U,detach as T,claim_space as x,claim_text as Pe,attr as v,set_style as Le,insert_hydration as F,append_hydration as B,listen as W,set_data as He,noop as ke,createEventDispatcher as it,create_component as le,claim_component as se,toggle_class as ne,mount_component as ie,transition_in as k,group_outros as ee,transition_out as E,check_outros as te,destroy_component as re,onMount as Jt,tick as we,binding_callbacks as be,bind as Ae,add_flush_callback as Se,set_input_value as ve,run_all as rt,ensure_array_like as Xe,destroy_each as Xt,get_svelte_dataset as ot,add_render_callback as Be,create_bidirectional_transition as he,flush as H,assign as jt,get_spread_update as qt,get_spread_object as Wt}from"../../../svelte/svelte.js";import{fade as de}from"../../../svelte/svelte-submodules.js";import{w as Ft,I as Gt,h as Kt,z as je,A as qe,N as Qt,B as Yt,S as Zt}from"./2.kHWxRulR.js";import{P as xt}from"./Plus.aV-xa-_T.js";import{T as $t}from"./Trash.D4IfxcH_.js";import{D as at,c as en}from"./Dropdown.B9HW_c_4.js";/* empty css                                              */import{default as Vn}from"./Example.FcPgDijm.js";function tn(n){let e,t,l,i,s,r,f;return{c(){e=L("div"),t=L("button"),l=Z(),i=L("span"),s=Re(n[1]),this.h()},l(a){e=M(a,"DIV",{class:!0,style:!0});var u=U(e);t=M(u,"BUTTON",{role:!0,"aria-checked":!0,class:!0});var _=U(t);_.forEach(T),l=x(u),i=M(u,"SPAN",{});var c=U(i);s=Pe(c,n[1]),c.forEach(T),u.forEach(T),this.h()},h(){v(t,"role","switch"),v(t,"aria-checked",n[0]),t.disabled=n[2],v(t,"class","svelte-1wr5wa"),v(e,"class","s s--slider svelte-1wr5wa"),Le(e,"font-size","var(--font-size-sm)px")},m(a,u){F(a,e,u),B(e,t),B(e,l),B(e,i),B(i,s),r||(f=W(t,"click",n[3]),r=!0)},p(a,[u]){u&1&&v(t,"aria-checked",a[0]),u&4&&(t.disabled=a[2]),u&2&&He(s,a[1])},i:ke,o:ke,d(a){a&&T(e),r=!1,f()}}}function nn(n,e,t){let{label:l}=e,{checked:i=!1}=e,{disabled:s=!1}=e;const r=it();function f(a){const _=a.target.getAttribute("aria-checked");t(0,i=_!=="true"),r("click",{checked:i})}return n.$$set=a=>{"label"in a&&t(1,l=a.label),"checked"in a&&t(0,i=a.checked),"disabled"in a&&t(2,s=a.disabled)},[i,l,s,f]}class ln extends Me{constructor(e){super(),Ne(this,e,nn,tn,ye,{label:1,checked:0,disabled:2})}}function We(n,e,t){const l=n.slice();return l[77]=e[t],l[78]=e,l[79]=t,l}function Fe(n){let e,t;return e=new Gt({props:{$$slots:{default:[sn]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,i){ie(e,l,i),t=!0},p(l,i){const s={};i[0]&16777216|i[2]&262144&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function sn(n){let e,t;return e=new Kt({props:{Icon:n[24]?je:qe,label:n[24]?"Copied":"Copy"}}),e.$on("click",n[38]),{c(){le(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,i){ie(e,l,i),t=!0},p(l,i){const s={};i[0]&16777216&&(s.Icon=l[24]?je:qe),i[0]&16777216&&(s.label=l[24]?"Copied":"Copy"),e.$set(s)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function rn(n){let e;return{c(){e=Re(n[4])},l(t){e=Pe(t,n[4])},m(t,l){F(t,e,l)},p(t,l){l[0]&16&&He(e,t[4])},d(t){t&&T(e)}}}function Ge(n){let e,t,l,i;function s(f){n[44](f)}let r={label:"Plain Text",disabled:n[28]||n[27]};return n[14]!==void 0&&(r.checked=n[14]),t=new ln({props:r}),be.push(()=>Ae(t,"checked",s)),t.$on("click",n[45]),{c(){e=L("div"),le(t.$$.fragment),this.h()},l(f){e=M(f,"DIV",{class:!0});var a=U(e);se(t.$$.fragment,a),a.forEach(T),this.h()},h(){v(e,"class","switch-container top-switch svelte-1de6p8m"),ne(e,"switch-disabled",n[28]||n[27])},m(f,a){F(f,e,a),ie(t,e,null),i=!0},p(f,a){const u={};a[0]&402653184&&(u.disabled=f[28]||f[27]),!l&&a[0]&16384&&(l=!0,u.checked=f[14],Se(()=>l=!1)),t.$set(u),(!i||a[0]&402653184)&&ne(e,"switch-disabled",f[28]||f[27])},i(f){i||(k(t.$$.fragment,f),i=!0)},o(f){E(t.$$.fragment,f),i=!1},d(f){f&&T(e),re(t)}}}function on(n){let e,t,l,i,s,r,f,a=n[28]&&Ke(),u=n[18]&&Qe(n);return{c(){e=L("div"),a&&a.c(),t=Z(),l=L("textarea"),i=Z(),u&&u.c(),this.h()},l(_){e=M(_,"DIV",{class:!0});var c=U(e);a&&a.l(c),t=x(c),l=M(c,"TEXTAREA",{"data-testid":!0,placeholder:!0,rows:!0,class:!0}),U(l).forEach(T),i=x(c),u&&u.l(c),c.forEach(T),this.h()},h(){v(l,"data-testid","textbox"),v(l,"placeholder",n[3]),v(l,"rows",5),l.disabled=n[6],v(l,"class","svelte-1de6p8m"),v(e,"class","textarea-container svelte-1de6p8m"),ne(e,"loading",n[28])},m(_,c){F(_,e,c),a&&a.m(e,null),B(e,t),B(e,l),ve(l,n[25]),n[66](l),B(e,i),u&&u.m(e,null),s=!0,r||(f=[W(l,"input",n[62]),W(l,"input",n[63]),W(l,"focus",n[64]),W(l,"keydown",n[65])],r=!0)},p(_,c){_[28]?a?c[0]&268435456&&k(a,1):(a=Ke(),a.c(),k(a,1),a.m(e,t)):a&&(ee(),E(a,1,1,()=>{a=null}),te()),(!s||c[0]&8)&&v(l,"placeholder",_[3]),(!s||c[0]&64)&&(l.disabled=_[6]),c[0]&33554432&&ve(l,_[25]),_[18]?u?(u.p(_,c),c[0]&262144&&k(u,1)):(u=Qe(_),u.c(),k(u,1),u.m(e,null)):u&&(ee(),E(u,1,1,()=>{u=null}),te()),(!s||c[0]&268435456)&&ne(e,"loading",_[28])},i(_){s||(k(a),k(u),s=!0)},o(_){E(a),E(u),s=!1},d(_){_&&T(e),a&&a.d(),n[66](null),u&&u.d(),r=!1,rt(f)}}}function an(n){let e,t,l,i=n[27]&&Ye(),s=Xe(n[15]),r=[];for(let a=0;a<s.length;a+=1)r[a]=$e(We(n,s,a));const f=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){e=L("div"),i&&i.c(),t=Z();for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0});var u=U(e);i&&i.l(u),t=x(u);for(let _=0;_<r.length;_+=1)r[_].l(u);u.forEach(T),this.h()},h(){v(e,"class","dialogue-container svelte-1de6p8m"),ne(e,"loading",n[27])},m(a,u){F(a,e,u),i&&i.m(e,null),B(e,t);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(e,null);n[61](e),l=!0},p(a,u){if(a[27]?i?u[0]&134217728&&k(i,1):(i=Ye(),i.c(),k(i,1),i.m(e,t)):i&&(ee(),E(i,1,1,()=>{i=null}),te()),u[0]&1690141262|u[1]&31){s=Xe(a[15]);let _;for(_=0;_<s.length;_+=1){const c=We(a,s,_);r[_]?(r[_].p(c,u),k(r[_],1)):(r[_]=$e(c),r[_].c(),k(r[_],1),r[_].m(e,null))}for(ee(),_=s.length;_<r.length;_+=1)f(_);te()}(!l||u[0]&134217728)&&ne(e,"loading",a[27])},i(a){if(!l){k(i);for(let u=0;u<s.length;u+=1)k(r[u]);l=!0}},o(a){E(i),r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)E(r[u]);l=!1},d(a){a&&T(e),i&&i.d(),Xt(r,a),n[61](null)}}}function Ke(n){let e,t='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to plain text...</div>',l,i;return{c(){e=L("div"),e.innerHTML=t,this.h()},l(s){e=M(s,"DIV",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-1f7wytn"&&(e.innerHTML=t),this.h()},h(){v(e,"class","loading-overlay svelte-1de6p8m")},m(s,r){F(s,e,r),i=!0},i(s){i||(s&&Be(()=>{i&&(l||(l=he(e,de,{duration:200},!0)),l.run(1))}),i=!0)},o(s){s&&(l||(l=he(e,de,{duration:200},!1)),l.run(0)),i=!1},d(s){s&&T(e),s&&l&&l.end()}}}function Qe(n){let e,t,l,i;return t=new at({props:{choices:n[2].map(lt),filtered_indices:n[21].map(n[67]),active_index:n[21].map(n[68])[n[20]],show_options:!0}}),t.$on("change",n[69]),{c(){e=L("div"),le(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{id:!0,class:!0});var r=U(e);se(t.$$.fragment,r),r.forEach(T),this.h()},h(){v(e,"id","tag-menu"),v(e,"class","tag-menu-plain-text svelte-1de6p8m")},m(s,r){F(s,e,r),ie(t,e,null),i=!0},p(s,r){const f={};r[0]&4&&(f.choices=s[2].map(lt)),r[0]&2097156&&(f.filtered_indices=s[21].map(s[67])),r[0]&3145732&&(f.active_index=s[21].map(s[68])[s[20]]),t.$set(f)},i(s){i||(k(t.$$.fragment,s),s&&Be(()=>{i&&(l||(l=he(e,de,{duration:100},!0)),l.run(1))}),i=!0)},o(s){E(t.$$.fragment,s),s&&(l||(l=he(e,de,{duration:100},!1)),l.run(0)),i=!1},d(s){s&&T(e),re(t),s&&l&&l.end()}}}function Ye(n){let e,t='<div class="loading-spinner svelte-1de6p8m"></div> <div class="loading-text svelte-1de6p8m">Converting to dialogue format...</div>',l,i;return{c(){e=L("div"),e.innerHTML=t,this.h()},l(s){e=M(s,"DIV",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-nm3yad"&&(e.innerHTML=t),this.h()},h(){v(e,"class","loading-overlay svelte-1de6p8m")},m(s,r){F(s,e,r),i=!0},i(s){i||(s&&Be(()=>{i&&(l||(l=he(e,de,{duration:200},!0)),l.run(1))}),i=!0)},o(s){s&&(l||(l=he(e,de,{duration:200},!1)),l.run(0)),i=!1},d(s){s&&T(e),s&&l&&l.end()}}}function un(n){let e,t,l;function i(f){n[47](f,n[77])}function s(){return n[48](n[79],n[77])}let r={choices:n[1].map(tt),show_label:!1,container:!0,label:""};return n[77].speaker!==void 0&&(r.value=n[77].speaker),e=new en({props:r}),be.push(()=>Ae(e,"value",i)),e.$on("change",s),{c(){le(e.$$.fragment)},l(f){se(e.$$.fragment,f)},m(f,a){ie(e,f,a),l=!0},p(f,a){n=f;const u={};a[0]&2&&(u.choices=n[1].map(tt)),!t&&a[0]&32768&&(t=!0,u.value=n[77].speaker,Se(()=>t=!1)),e.$set(u)},i(f){l||(k(e.$$.fragment,f),l=!0)},o(f){E(e.$$.fragment,f),l=!1},d(f){re(e,f)}}}function fn(n){let e,t,l;function i(){n[46].call(e,n[78],n[79])}return{c(){e=L("textarea"),this.h()},l(s){e=M(s,"TEXTAREA",{rows:!0,class:!0}),U(e).forEach(T),this.h()},h(){e.disabled=n[6],v(e,"rows","1"),e.readOnly=!0,v(e,"class","svelte-1de6p8m")},m(s,r){F(s,e,r),ve(e,n[77].speaker),t||(l=W(e,"input",i),t=!0)},p(s,r){n=s,r[0]&64&&(e.disabled=n[6]),r[0]&32768&&ve(e,n[77].speaker)},i:ke,o:ke,d(s){s&&T(e),t=!1,l()}}}function Ze(n){let e,t,l,i;return t=new at({props:{choices:n[2].map(nt),filtered_indices:n[21].map(n[56]),active_index:n[21].map(n[57])[n[20]],show_options:!0,offset_from_top:n[23],from_top:!0}}),t.$on("change",n[58]),{c(){e=L("div"),le(t.$$.fragment),this.h()},l(s){e=M(s,"DIV",{id:!0,class:!0});var r=U(e);se(t.$$.fragment,r),r.forEach(T),this.h()},h(){v(e,"id","tag-menu"),v(e,"class","tag-menu svelte-1de6p8m")},m(s,r){F(s,e,r),ie(t,e,null),i=!0},p(s,r){const f={};r[0]&4&&(f.choices=s[2].map(nt)),r[0]&2097156&&(f.filtered_indices=s[21].map(s[56])),r[0]&3145732&&(f.active_index=s[21].map(s[57])[s[20]]),r[0]&8388608&&(f.offset_from_top=s[23]),t.$set(f)},i(s){i||(k(t.$$.fragment,s),s&&Be(()=>{i&&(l||(l=he(e,de,{duration:100},!0)),l.run(1))}),i=!0)},o(s){E(t.$$.fragment,s),s&&(l||(l=he(e,de,{duration:100},!1)),l.run(0)),i=!1},d(s){s&&T(e),re(t),s&&l&&l.end()}}}function xe(n){let e,t,l,i,s,r;l=new xt({});function f(){return n[59](n[79])}return{c(){e=L("div"),t=L("button"),le(l.$$.fragment),this.h()},l(a){e=M(a,"DIV",{class:!0});var u=U(e);t=M(u,"BUTTON",{class:!0,"aria-label":!0});var _=U(t);se(l.$$.fragment,_),_.forEach(T),u.forEach(T),this.h()},h(){v(t,"class","add-button svelte-1de6p8m"),v(t,"aria-label","Add new line"),t.disabled=n[6],v(e,"class","svelte-1de6p8m"),ne(e,"action-column",n[79]==0),ne(e,"hidden",n[6])},m(a,u){F(a,e,u),B(e,t),ie(l,t,null),i=!0,s||(r=W(t,"click",f),s=!0)},p(a,u){n=a,(!i||u[0]&64)&&(t.disabled=n[6]),(!i||u[0]&64)&&ne(e,"hidden",n[6])},i(a){i||(k(l.$$.fragment,a),i=!0)},o(a){E(l.$$.fragment,a),i=!1},d(a){a&&T(e),re(l),s=!1,r()}}}function $e(n){let e,t,l,i,s,r,f,a,u=n[79],_,c,h,m,y,R,Q,C,g,p;const w=[fn,un],P=[];function z(S,D){return S[6]?0:1}l=z(n),i=P[l]=w[l](n);function q(){return n[49](n[77])}function N(){n[51].call(a,n[78],n[79])}function Y(...S){return n[52](n[79],...S)}function O(...S){return n[53](n[79],...S)}function G(...S){return n[54](n[79],...S)}const $=()=>n[55](a,u),me=()=>n[55](null,u);let I=n[18]&&n[19]===n[79]&&Ze(n),A=(n[9]==null||n[9]&&n[79]<n[9]-1)&&xe(n);R=new $t({});function J(){return n[60](n[79])}return{c(){e=L("div"),t=L("div"),i.c(),s=Z(),r=L("div"),f=L("div"),a=L("textarea"),_=Z(),I&&I.c(),c=Z(),A&&A.c(),h=Z(),m=L("div"),y=L("button"),le(R.$$.fragment),Q=Z(),this.h()},l(S){e=M(S,"DIV",{class:!0,style:!0});var D=U(e);t=M(D,"DIV",{class:!0,role:!0,tabindex:!0});var d=U(t);i.l(d),d.forEach(T),s=x(D),r=M(D,"DIV",{class:!0});var oe=U(r);f=M(oe,"DIV",{class:!0});var ge=U(f);a=M(ge,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),U(a).forEach(T),_=x(ge),I&&I.l(ge),ge.forEach(T),oe.forEach(T),c=x(D),A&&A.l(D),h=x(D),m=M(D,"DIV",{class:!0});var Ce=U(m);y=M(Ce,"BUTTON",{class:!0,"aria-label":!0});var _e=U(y);se(R.$$.fragment,_e),_e.forEach(T),Ce.forEach(T),Q=x(D),D.forEach(T),this.h()},h(){v(t,"class","speaker-column svelte-1de6p8m"),v(t,"role","button"),v(t,"tabindex","0"),v(a,"placeholder",n[3]),a.disabled=n[6],v(a,"rows","1"),v(a,"class","svelte-1de6p8m"),v(f,"class","input-container svelte-1de6p8m"),v(r,"class","text-column svelte-1de6p8m"),v(y,"class","delete-button svelte-1de6p8m"),v(y,"aria-label","Remove current line"),y.disabled=n[6],v(m,"class","action-column svelte-1de6p8m"),ne(m,"hidden",n[6]||n[79]==0),v(e,"class","dialogue-line svelte-1de6p8m"),Le(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},m(S,D){F(S,e,D),B(e,t),P[l].m(t,null),B(e,s),B(e,r),B(r,f),B(f,a),ve(a,n[77].text),$(),B(f,_),I&&I.m(f,null),B(e,c),A&&A.m(e,null),B(e,h),B(e,m),B(m,y),ie(R,y,null),B(e,Q),C=!0,g||(p=[W(t,"mouseenter",q),W(t,"mouseleave",n[50]),W(a,"input",N),W(a,"input",Y),W(a,"focus",O),W(a,"keydown",G),W(y,"click",J)],g=!0)},p(S,D){n=S;let d=l;l=z(n),l===d?P[l].p(n,D):(ee(),E(P[d],1,1,()=>{P[d]=null}),te(),i=P[l],i?i.p(n,D):(i=P[l]=w[l](n),i.c()),k(i,1),i.m(t,null)),(!C||D[0]&8)&&v(a,"placeholder",n[3]),(!C||D[0]&64)&&(a.disabled=n[6]),D[0]&32768&&ve(a,n[77].text),u!==n[79]&&(me(),u=n[79],$()),n[18]&&n[19]===n[79]?I?(I.p(n,D),D[0]&786432&&k(I,1)):(I=Ze(n),I.c(),k(I,1),I.m(f,null)):I&&(ee(),E(I,1,1,()=>{I=null}),te()),n[9]==null||n[9]&&n[79]<n[9]-1?A?(A.p(n,D),D[0]&512&&k(A,1)):(A=xe(n),A.c(),k(A,1),A.m(e,h)):A&&(ee(),E(A,1,1,()=>{A=null}),te()),(!C||D[0]&64)&&(y.disabled=n[6]),(!C||D[0]&64)&&ne(m,"hidden",n[6]||n[79]==0),(!C||D[0]&604012608)&&Le(e,"--speaker-bg-color",n[6]&&(n[26]===null||n[26]===n[77].speaker)&&n[29][n[77].speaker]||"transparent")},i(S){C||(k(i),k(I),k(A),k(R.$$.fragment,S),C=!0)},o(S){E(i),E(I),E(A),E(R.$$.fragment,S),C=!1},d(S){S&&T(e),P[l].d(),me(),I&&I.d(),A&&A.d(),re(R),g=!1,rt(p)}}}function et(n){let e,t,l,i,s,r,f;const a=[_n,cn],u=[];function _(c,h){return typeof c[11]=="string"?0:1}return l=_(n),i=u[l]=a[l](n),{c(){e=L("div"),t=L("button"),i.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var h=U(e);t=M(h,"BUTTON",{class:!0});var m=U(t);i.l(m),m.forEach(T),h.forEach(T),this.h()},h(){v(t,"class","submit-button svelte-1de6p8m"),t.disabled=n[6],v(e,"class","submit-container svelte-1de6p8m")},m(c,h){F(c,e,h),B(e,t),u[l].m(t,null),s=!0,r||(f=W(t,"click",n[39]),r=!0)},p(c,h){let m=l;l=_(c),l===m?u[l].p(c,h):(ee(),E(u[m],1,1,()=>{u[m]=null}),te(),i=u[l],i?i.p(c,h):(i=u[l]=a[l](c),i.c()),k(i,1),i.m(t,null)),(!s||h[0]&64)&&(t.disabled=c[6])},i(c){s||(k(i),s=!0)},o(c){E(i),s=!1},d(c){c&&T(e),u[l].d(),r=!1,f()}}}function cn(n){let e,t;return e=new Qt({}),{c(){le(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,i){ie(e,l,i),t=!0},p:ke,i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function _n(n){let e;return{c(){e=Re(n[11])},l(t){e=Pe(t,n[11])},m(t,l){F(t,e,l)},p(t,l){l[0]&2048&&He(e,t[11])},i:ke,o:ke,d(t){t&&T(e)}}}function hn(n){let e,t,l,i,s,r,f,a,u,_,c,h=n[7]&&n[10]&&Fe(n);l=new Ft({props:{show_label:n[7],info:n[5],$$slots:{default:[rn]},$$scope:{ctx:n}}});let m=n[1].length!==0&&n[12]==="both"&&Ge(n);const y=[an,on],R=[];function Q(g,p){return!g[14]&&g[12]!=="text"?0:g[14]&&g[12]!=="dialogue"?1:-1}~(r=Q(n))&&(f=R[r]=y[r](n));let C=n[11]&&!n[6]&&et(n);return{c(){e=L("label"),h&&h.c(),t=Z(),le(l.$$.fragment),i=Z(),m&&m.c(),s=Z(),f&&f.c(),a=Z(),C&&C.c(),this.h()},l(g){e=M(g,"LABEL",{class:!0});var p=U(e);h&&h.l(p),t=x(p),se(l.$$.fragment,p),i=x(p),m&&m.l(p),s=x(p),f&&f.l(p),a=x(p),C&&C.l(p),p.forEach(T),this.h()},h(){v(e,"class","svelte-1de6p8m"),ne(e,"container",n[8])},m(g,p){F(g,e,p),h&&h.m(e,null),B(e,t),ie(l,e,null),B(e,i),m&&m.m(e,null),B(e,s),~r&&R[r].m(e,null),B(e,a),C&&C.m(e,null),u=!0,_||(c=W(window,"click",n[36]),_=!0)},p(g,p){g[7]&&g[10]?h?(h.p(g,p),p[0]&1152&&k(h,1)):(h=Fe(g),h.c(),k(h,1),h.m(e,t)):h&&(ee(),E(h,1,1,()=>{h=null}),te());const w={};p[0]&128&&(w.show_label=g[7]),p[0]&32&&(w.info=g[5]),p[0]&16|p[2]&262144&&(w.$$scope={dirty:p,ctx:g}),l.$set(w),g[1].length!==0&&g[12]==="both"?m?(m.p(g,p),p[0]&4098&&k(m,1)):(m=Ge(g),m.c(),k(m,1),m.m(e,s)):m&&(ee(),E(m,1,1,()=>{m=null}),te());let P=r;r=Q(g),r===P?~r&&R[r].p(g,p):(f&&(ee(),E(R[P],1,1,()=>{R[P]=null}),te()),~r?(f=R[r],f?f.p(g,p):(f=R[r]=y[r](g),f.c()),k(f,1),f.m(e,a)):f=null),g[11]&&!g[6]?C?(C.p(g,p),p[0]&2112&&k(C,1)):(C=et(g),C.c(),k(C,1),C.m(e,null)):C&&(ee(),E(C,1,1,()=>{C=null}),te()),(!u||p[0]&256)&&ne(e,"container",g[8])},i(g){u||(k(h),k(l.$$.fragment,g),k(m),k(f),k(C),u=!0)},o(g){E(h),E(l.$$.fragment,g),E(m),E(f),E(C),u=!1},d(g){g&&T(e),h&&h.d(),re(l),m&&m.d(),~r&&R[r].d(),C&&C.d(),_=!1,c()}}}function dn(n,e){const t=n.lastIndexOf(":",e-1);return t>=0?n.substring(t+1,e):""}const tt=n=>[n,n],nt=(n,e)=>[n,e],lt=(n,e)=>[n,e];function mn(n,e,t){let{speakers:l=[]}=e,{tags:i=[]}=e,{value:s=[]}=e,{value_is_output:r=!1}=e,{placeholder:f=void 0}=e,{label:a}=e,{info:u=void 0}=e,{disabled:_=!1}=e,{show_label:c=!0}=e,{container:h=!0}=e,{max_lines:m=void 0}=e,{show_copy_button:y=!1}=e,{submit_btn:R=!1}=e,{color_map:Q=null}=e,{ui_mode:C="both"}=e,g=C==="text",{server:p}=e,w=[];s&&s.length&&typeof s!="string"?w=[...s]:s&&typeof s!="string"&&(w=[{speaker:`${l.length?l[0]:""}`,text:""}]);let P,z=!1,q=-1,N=0,Y=[],O=[],G,$=JSON.stringify(s),me=0,I=!1,A,J="",S=null,D=!1,d=!1,oe=!1;const ge=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],Ce={red:"rgba(254, 202, 202, 0.7)",green:"rgba(209, 250, 229, 0.7)",blue:"rgba(219, 234, 254, 0.7)",yellow:"rgba(254, 243, 199, 0.7)",purple:"rgba(233, 213, 255, 0.7)",teal:"rgba(204, 251, 241, 0.7)",orange:"rgba(254, 215, 170, 0.7)",cyan:"rgba(207, 250, 254, 0.7)",lime:"rgba(217, 249, 157, 0.7)",pink:"rgba(252, 231, 243, 0.7)"};let _e={};l.length===0&&(g=!0,s="");function Ue(o){const b=l.length>0?l[0]:"";t(15,w=[...w.slice(0,o+1),{speaker:b,text:""},...w.slice(o+1)]),we().then(()=>{O[o+1]&&O[o+1].focus()})}function ze(o){t(15,w=[...w.slice(0,o),...w.slice(o+1)])}function De(o,b,V){t(15,w[o][b]=V,w),t(15,w=[...w])}function Ee(o,b){const V=o.target||HTMLTextAreaElement;V&&!O[b]&&t(16,O[b]=V,O);const K=V.selectionStart||0,ae=V.value;let ue=!1,fe=-1;if(ae[K-1]===":"){t(19,q=b),fe=K;const X=dn(ae,K);t(21,Y=i.filter(j=>X===""||j.toLowerCase().includes(X.toLowerCase()))),ue=Y.length>0,t(20,N=0)}else{const X=ae.lastIndexOf(":",K-1);if(X>=0&&!ae.substring(X+1,K).includes(" ")){t(19,q=b),fe=X+1;const j=ae.substring(X+1,K);t(21,Y=i.filter(ce=>j===""||ce.toLowerCase().includes(j.toLowerCase()))),ue=Y.length>0,t(20,N=0)}}if(ue&&fe!==-1){t(18,z=!0);const X=V.getBoundingClientRect();if(P){const j=P.getBoundingClientRect();t(23,me=j.top+X.height*(b+1.5))}}else t(18,z=!1)}async function Oe(){const o=Y[N];if(o){let b,V;g?(V=G,b=J):(V=O[q],b=w[q].text);const K=(V==null?void 0:V.selectionStart)||0,ae=b.lastIndexOf(":",K-1);if(ae>=0){const ue=b.substring(0,ae),fe=b.substring(K);if(g){const X=`${ue}${o} ${fe}`;t(25,J=X),l.length===0?t(0,s=X):t(0,s=await p.unformat({text:X})),we().then(()=>{if(G){const j=ue.length+o.length+1;G.setSelectionRange(j,j),G.focus()}})}else{const X=ue.replace(/\[S\d+\]/g,"").trim(),j=`${X}${o} ${fe}`;De(q,"text",j),we().then(()=>{const ce=O[q];if(ce){const pe=X.length+o.length+1;ce.setSelectionRange(pe,pe),ce.focus()}})}}t(18,z=!1),t(20,N=0)}}async function Ve(o){const b=i[o.detail.target.dataset.index];if(b){let V,K;g?(K=G,V=J):(K=O[q],V=w[q].text);const ae=(K==null?void 0:K.selectionStart)||0,ue=V.lastIndexOf(":",ae-1);if(ue>=0){const fe=V.substring(0,ue),X=V.substring(ae);if(g){const j=`${fe}${b} ${X}`;t(25,J=j),l.length===0?t(0,s=j):t(0,s=await p.unformat({text:j})),we().then(()=>{if(G){const ce=fe.length+b.length+1;G.setSelectionRange(ce,ce),G.focus()}})}else{const j=fe.replace(/\[S\d+\]/g,"").trim(),ce=`${j}${b} ${X}`;De(q,"text",ce),we().then(()=>{const pe=O[q];if(pe){const Je=j.length+b.length+1;pe.setSelectionRange(Je,Je),pe.focus()}})}}t(18,z=!1),t(20,N=0)}}function ut(o){if(z){const b=o.target,V=document.getElementById("tag-menu");V&&!V.contains(b)&&t(18,z=!1)}}const Ie=it();function ft(){Ie("change",s),r||Ie("input")}function ct(o){l.length!==0&&(t(43,oe=!0),t(0,s=[...o]))}async function Te(o){return typeof o=="string"?o:await p.format(o)}async function _t(){if("clipboard"in navigator){const o=await Te(s);await navigator.clipboard.writeText(o),Ie("copy",{value:o}),ht()}}function ht(){t(24,I=!0),A&&clearTimeout(A),A=setTimeout(()=>{t(24,I=!1)},1e3)}async function dt(){g&&t(0,s=await p.unformat({text:J})),Ie("submit")}Jt(async()=>{if(typeof s=="string")t(25,J=s);else if(s&&s.length>0){const o=await Te(s);t(25,J=o)}else t(25,J="")});function mt(o){g=o,t(14,g)}const gt=async o=>{if(o.detail.checked){t(28,d=!0);try{t(25,J=await Te(w))}finally{t(28,d=!1)}}else{t(27,D=!0);try{t(0,s=await p.unformat({text:J})),t(15,w=[...s])}finally{t(27,D=!1)}}};function bt(o,b){o[b].speaker=this.value,t(15,w),t(0,s),t(42,$),t(43,oe),t(14,g)}function kt(o,b){n.$$.not_equal(b.speaker,o)&&(b.speaker=o,t(15,w),t(0,s),t(42,$),t(43,oe),t(14,g))}const pt=(o,b)=>De(o,"speaker",b.speaker),wt=o=>_&&t(26,S=o.speaker),vt=()=>_&&t(26,S=null);function Et(o,b){o[b].text=this.value,t(15,w),t(0,s),t(42,$),t(43,oe),t(14,g)}const Tt=(o,b)=>Ee(b,o),Ct=(o,b)=>Ee(b,o),Dt=(o,b)=>{b.key==="Escape"&&z?(t(18,z=!1),t(20,N=0),b.preventDefault()):z&&q===o&&(b.key==="ArrowDown"?(t(20,N=Math.min(N+1,Y.length-1)),b.preventDefault()):b.key==="ArrowUp"?(t(20,N=Math.max(N-1,0)),b.preventDefault()):b.key==="Enter"&&(Y[N]&&Oe(),b.preventDefault()))};function It(o,b){be[o?"unshift":"push"](()=>{O[b]=o,t(16,O),t(15,w),t(0,s),t(42,$),t(43,oe),t(14,g)})}const At=o=>i.indexOf(o),St=o=>i.indexOf(o),Bt=o=>Ve(o),Ot=o=>Ue(o),Vt=o=>ze(o);function Lt(o){be[o?"unshift":"push"](()=>{P=o,t(17,P)})}function Mt(){J=this.value,t(25,J),t(0,s),t(42,$),t(43,oe),t(14,g),t(15,w)}const Nt=o=>{Ee(o,0)},yt=o=>Ee(o,0),Rt=o=>{o.key==="Escape"&&z?(t(18,z=!1),t(20,N=0),o.preventDefault()):z&&(o.key==="ArrowDown"?(t(20,N=Math.min(N+1,Y.length-1)),o.preventDefault()):o.key==="ArrowUp"?(t(20,N=Math.max(N-1,0)),o.preventDefault()):o.key==="Enter"&&(Y[N]&&Oe(),o.preventDefault()))};function Pt(o){be[o?"unshift":"push"](()=>{G=o,t(22,G)})}const Ht=o=>i.indexOf(o),Ut=o=>i.indexOf(o),zt=o=>Ve(o);return n.$$set=o=>{"speakers"in o&&t(1,l=o.speakers),"tags"in o&&t(2,i=o.tags),"value"in o&&t(0,s=o.value),"value_is_output"in o&&t(40,r=o.value_is_output),"placeholder"in o&&t(3,f=o.placeholder),"label"in o&&t(4,a=o.label),"info"in o&&t(5,u=o.info),"disabled"in o&&t(6,_=o.disabled),"show_label"in o&&t(7,c=o.show_label),"container"in o&&t(8,h=o.container),"max_lines"in o&&t(9,m=o.max_lines),"show_copy_button"in o&&t(10,y=o.show_copy_button),"submit_btn"in o&&t(11,R=o.submit_btn),"color_map"in o&&t(41,Q=o.color_map),"ui_mode"in o&&t(12,C=o.ui_mode),"server"in o&&t(13,p=o.server)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&(Q?t(29,_e={...Q}):(t(29,_e={}),l.forEach((o,b)=>{const V=ge[b%ge.length];t(29,_e[o]=Ce[V],_e)}))),n.$$.dirty[0]&49153|n.$$.dirty[1]&6144&&JSON.stringify(s)!==$&&(s==null&&t(15,w=[]),t(42,$=JSON.stringify(s)),typeof s=="string"?t(25,J=s):typeof s=="object"&&Array.isArray(s)&&(t(15,w=[...s]),(!oe||g)&&Te(w).then(o=>{t(25,J=o)})),t(43,oe=!1),ft()),n.$$.dirty[0]&98304&&(w.length>O.length?t(16,O=[...O,...Array(w.length-O.length).fill(null)]):w.length<O.length&&t(16,O=O.slice(0,w.length)),we().then(()=>{O.forEach(o=>{o&&o instanceof HTMLTextAreaElement&&(o.style.height="auto",o.style.height=o.scrollHeight+"px")})})),n.$$.dirty[0]&32768&&ct(w)},[s,l,i,f,a,u,_,c,h,m,y,R,C,p,g,w,O,P,z,q,N,Y,G,me,I,J,S,D,d,_e,Ue,ze,De,Ee,Oe,Ve,ut,Te,_t,dt,r,Q,$,oe,mt,gt,bt,kt,pt,wt,vt,Et,Tt,Ct,Dt,It,At,St,Bt,Ot,Vt,Lt,Mt,Nt,yt,Rt,Pt,Ht,Ut,zt]}class gn extends Me{constructor(e){super(),Ne(this,e,mn,hn,ye,{speakers:1,tags:2,value:0,value_is_output:40,placeholder:3,label:4,info:5,disabled:6,show_label:7,container:8,max_lines:9,show_copy_button:10,submit_btn:11,color_map:41,ui_mode:12,server:13},null,[-1,-1,-1])}}const bn=gn;function st(n){let e,t;const l=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[19]];let i={};for(let s=0;s<l.length;s+=1)i=jt(i,l[s]);return e=new Zt({props:i}),e.$on("clear_status",n[22]),{c(){le(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,r){ie(e,s,r),t=!0},p(s,r){const f=r[0]&524292?qt(l,[r[0]&4&&{autoscroll:s[2].autoscroll},r[0]&4&&{i18n:s[2].i18n},r[0]&524288&&Wt(s[19])]):{};e.$set(f)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){E(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function kn(n){var _;let e,t,l,i,s,r=n[19]&&st(n);function f(c){n[23](c)}function a(c){n[24](c)}let u={label:n[4],info:n[7],show_label:n[12],max_lines:n[13],show_copy_button:((_=n[17])==null?void 0:_.includes("copy"))??!1,container:n[14],speakers:n[5],tags:n[6],placeholder:n[8],submit_btn:n[18],server:n[3],ui_mode:n[21],disabled:!n[20]};return n[0]!==void 0&&(u.value=n[0]),n[1]!==void 0&&(u.value_is_output=n[1]),t=new bn({props:u}),be.push(()=>Ae(t,"value",f)),be.push(()=>Ae(t,"value_is_output",a)),t.$on("change",n[25]),t.$on("input",n[26]),t.$on("submit",n[27]),t.$on("blur",n[28]),t.$on("select",n[29]),t.$on("focus",n[30]),t.$on("copy",n[31]),{c(){r&&r.c(),e=Z(),le(t.$$.fragment)},l(c){r&&r.l(c),e=x(c),se(t.$$.fragment,c)},m(c,h){r&&r.m(c,h),F(c,e,h),ie(t,c,h),s=!0},p(c,h){var y;c[19]?r?(r.p(c,h),h[0]&524288&&k(r,1)):(r=st(c),r.c(),k(r,1),r.m(e.parentNode,e)):r&&(ee(),E(r,1,1,()=>{r=null}),te());const m={};h[0]&16&&(m.label=c[4]),h[0]&128&&(m.info=c[7]),h[0]&4096&&(m.show_label=c[12]),h[0]&8192&&(m.max_lines=c[13]),h[0]&131072&&(m.show_copy_button=((y=c[17])==null?void 0:y.includes("copy"))??!1),h[0]&16384&&(m.container=c[14]),h[0]&32&&(m.speakers=c[5]),h[0]&64&&(m.tags=c[6]),h[0]&256&&(m.placeholder=c[8]),h[0]&262144&&(m.submit_btn=c[18]),h[0]&8&&(m.server=c[3]),h[0]&2097152&&(m.ui_mode=c[21]),h[0]&1048576&&(m.disabled=!c[20]),!l&&h[0]&1&&(l=!0,m.value=c[0],Se(()=>l=!1)),!i&&h[0]&2&&(i=!0,m.value_is_output=c[1],Se(()=>i=!1)),t.$set(m)},i(c){s||(k(r),k(t.$$.fragment,c),s=!0)},o(c){E(r),E(t.$$.fragment,c),s=!1},d(c){c&&T(e),r&&r.d(c),re(t,c)}}}function pn(n){let e,t;return e=new Yt({props:{visible:n[11],elem_id:n[9],elem_classes:n[10],scale:n[15],min_width:n[16],allow_overflow:!0,padding:n[14],$$slots:{default:[kn]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,i){ie(e,l,i),t=!0},p(l,i){const s={};i[0]&2048&&(s.visible=l[11]),i[0]&512&&(s.elem_id=l[9]),i[0]&1024&&(s.elem_classes=l[10]),i[0]&32768&&(s.scale=l[15]),i[0]&65536&&(s.min_width=l[16]),i[0]&16384&&(s.padding=l[14]),i[0]&4092415|i[1]&2&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function wn(n,e,t){let{gradio:l}=e,{server:i}=e,{label:s="Dialogue"}=e,{speakers:r=[]}=e,{tags:f=[]}=e,{info:a=void 0}=e,{placeholder:u=void 0}=e,{elem_id:_=""}=e,{elem_classes:c=[]}=e,{visible:h=!0}=e,{value:m=[]}=e,{show_label:y}=e,{max_lines:R=void 0}=e,{container:Q=!0}=e,{scale:C=null}=e,{min_width:g=void 0}=e,{buttons:p=null}=e,{submit_btn:w=!1}=e,{loading_status:P=void 0}=e,{value_is_output:z=!1}=e,{interactive:q}=e,{ui_mode:N="both"}=e;const Y=()=>l.dispatch("clear_status",P);function O(d){m=d,t(0,m)}function G(d){z=d,t(1,z)}const $=()=>l.dispatch("change",m),me=()=>l.dispatch("input"),I=()=>l.dispatch("submit"),A=()=>l.dispatch("blur"),J=d=>l.dispatch("select",d.detail),S=()=>l.dispatch("focus"),D=d=>l.dispatch("copy",d.detail);return n.$$set=d=>{"gradio"in d&&t(2,l=d.gradio),"server"in d&&t(3,i=d.server),"label"in d&&t(4,s=d.label),"speakers"in d&&t(5,r=d.speakers),"tags"in d&&t(6,f=d.tags),"info"in d&&t(7,a=d.info),"placeholder"in d&&t(8,u=d.placeholder),"elem_id"in d&&t(9,_=d.elem_id),"elem_classes"in d&&t(10,c=d.elem_classes),"visible"in d&&t(11,h=d.visible),"value"in d&&t(0,m=d.value),"show_label"in d&&t(12,y=d.show_label),"max_lines"in d&&t(13,R=d.max_lines),"container"in d&&t(14,Q=d.container),"scale"in d&&t(15,C=d.scale),"min_width"in d&&t(16,g=d.min_width),"buttons"in d&&t(17,p=d.buttons),"submit_btn"in d&&t(18,w=d.submit_btn),"loading_status"in d&&t(19,P=d.loading_status),"value_is_output"in d&&t(1,z=d.value_is_output),"interactive"in d&&t(20,q=d.interactive),"ui_mode"in d&&t(21,N=d.ui_mode)},[m,z,l,i,s,r,f,a,u,_,c,h,y,R,Q,C,g,p,w,P,q,N,Y,O,G,$,me,I,A,J,S,D]}class Sn extends Me{constructor(e){super(),Ne(this,e,wn,pn,ye,{gradio:2,server:3,label:4,speakers:5,tags:6,info:7,placeholder:8,elem_id:9,elem_classes:10,visible:11,value:0,show_label:12,max_lines:13,container:14,scale:15,min_width:16,buttons:17,submit_btn:18,loading_status:19,value_is_output:1,interactive:20,ui_mode:21},null,[-1,-1])}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),H()}get server(){return this.$$.ctx[3]}set server(e){this.$$set({server:e}),H()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),H()}get speakers(){return this.$$.ctx[5]}set speakers(e){this.$$set({speakers:e}),H()}get tags(){return this.$$.ctx[6]}set tags(e){this.$$set({tags:e}),H()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),H()}get placeholder(){return this.$$.ctx[8]}set placeholder(e){this.$$set({placeholder:e}),H()}get elem_id(){return this.$$.ctx[9]}set elem_id(e){this.$$set({elem_id:e}),H()}get elem_classes(){return this.$$.ctx[10]}set elem_classes(e){this.$$set({elem_classes:e}),H()}get visible(){return this.$$.ctx[11]}set visible(e){this.$$set({visible:e}),H()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),H()}get show_label(){return this.$$.ctx[12]}set show_label(e){this.$$set({show_label:e}),H()}get max_lines(){return this.$$.ctx[13]}set max_lines(e){this.$$set({max_lines:e}),H()}get container(){return this.$$.ctx[14]}set container(e){this.$$set({container:e}),H()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),H()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),H()}get buttons(){return this.$$.ctx[17]}set buttons(e){this.$$set({buttons:e}),H()}get submit_btn(){return this.$$.ctx[18]}set submit_btn(e){this.$$set({submit_btn:e}),H()}get loading_status(){return this.$$.ctx[19]}set loading_status(e){this.$$set({loading_status:e}),H()}get value_is_output(){return this.$$.ctx[1]}set value_is_output(e){this.$$set({value_is_output:e}),H()}get interactive(){return this.$$.ctx[20]}set interactive(e){this.$$set({interactive:e}),H()}get ui_mode(){return this.$$.ctx[21]}set ui_mode(e){this.$$set({ui_mode:e}),H()}}export{bn as BaseDialogue,Vn as BaseExample,Sn as default};
//# sourceMappingURL=Index.DJ4FoAC1.js.map
