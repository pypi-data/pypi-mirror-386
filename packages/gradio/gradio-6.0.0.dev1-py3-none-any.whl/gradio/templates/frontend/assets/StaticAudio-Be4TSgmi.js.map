{"version":3,"file":"StaticAudio-Be4TSgmi.js","sources":["../../../../js/audio/static/StaticAudio.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { Empty } from \"@gradio/atoms\";\n\timport {\n\t\tShareButton,\n\t\tIconButton,\n\t\tBlockLabel,\n\t\tDownloadLink,\n\t\tIconButtonWrapper\n\t} from \"@gradio/atoms\";\n\timport { Download, Music } from \"@gradio/icons\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport AudioPlayer from \"../player/AudioPlayer.svelte\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { FileData } from \"@gradio/client\";\n\timport type { WaveformOptions, SubtitleData } from \"../shared/types\";\n\n\texport let value: null | FileData = null;\n\texport let subtitles: null | FileData | SubtitleData[] = null;\n\texport let label: string;\n\texport let show_label = true;\n\texport let buttons: string[] | null = null;\n\texport let i18n: I18nFormatter;\n\texport let waveform_settings: Record<string, any> = {};\n\texport let waveform_options: WaveformOptions = {\n\t\tshow_recording_waveform: true\n\t};\n\texport let editable = true;\n\texport let loop: boolean;\n\texport let display_icon_button_wrapper_top_corner = false;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData;\n\t\tplay: undefined;\n\t\tpause: undefined;\n\t\tend: undefined;\n\t\tstop: undefined;\n\t}>();\n\n\t$: value && dispatch(\"change\", value);\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={false}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n\n{#if value !== null}\n\t<IconButtonWrapper\n\t\tdisplay_top_corner={display_icon_button_wrapper_top_corner}\n\t>\n\t\t{#if buttons === null ? true : buttons.includes(\"download\")}\n\t\t\t<DownloadLink\n\t\t\t\thref={value.is_stream\n\t\t\t\t\t? value.url?.replace(\"playlist.m3u8\", \"playlist-file\")\n\t\t\t\t\t: value.url}\n\t\t\t\tdownload={value.orig_name || value.path}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</DownloadLink>\n\t\t{/if}\n\t\t{#if buttons === null ? true : buttons.includes(\"share\")}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:error\n\t\t\t\ton:share\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value.url, \"url\");\n\t\t\t\t\treturn `<audio controls src=\"${url}\"></audio>`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</IconButtonWrapper>\n\n\t<AudioPlayer\n\t\t{value}\n\t\tsubtitles={Array.isArray(subtitles) ? subtitles : subtitles?.url}\n\t\t{label}\n\t\t{i18n}\n\t\t{waveform_settings}\n\t\t{waveform_options}\n\t\t{editable}\n\t\t{loop}\n\t\ton:pause\n\t\ton:play\n\t\ton:stop\n\t\ton:load\n\t/>\n{:else}\n\t<Empty size=\"small\">\n\t\t<Music />\n\t</Empty>\n{/if}\n"],"names":["ctx","dirty","downloadlink_changes","Download","iconbutton_changes","show_if_1","show_if","Music","value","$$props","subtitles","label","show_label","buttons","i18n","waveform_settings","waveform_options","editable","loop","display_icon_button_wrapper_top_corner","dispatch","createEventDispatcher","uploadToHuggingFace"],"mappings":"imBAauC,EAAA,OAAA,kYAsCjBA,EAAsC,EAAA,iFA6B/C,MAAM,QAAQA,EAAS,CAAA,CAAA,EAAIA,EAAS,CAAA,EAAGA,MAAW,wTA7BzCA,EAAsC,EAAA,oGA6B/C,MAAM,QAAQA,EAAS,CAAA,CAAA,EAAIA,EAAS,CAAA,EAAGA,MAAW,+fAzBrD,KAAAA,EAAM,CAAA,EAAA,UACTA,KAAM,KAAK,QAAQ,gBAAiB,eAAe,EACnDA,KAAM,IACC,SAAAA,EAAM,CAAA,EAAA,WAAaA,KAAM,8GAH7BC,EAAA,IAAAC,EAAA,KAAAF,EAAM,CAAA,EAAA,UACTA,KAAM,KAAK,QAAQ,gBAAiB,eAAe,EACnDA,KAAM,KACCC,EAAA,IAAAC,EAAA,SAAAF,EAAM,CAAA,EAAA,WAAaA,KAAM,yLAEjBG,EAAiB,MAAAH,KAAK,iBAAiB,oEAAtBC,EAAA,KAAAG,EAAA,MAAAJ,KAAK,iBAAiB,4aAPtD,IAAAK,EAAAL,OAAY,KAAO,GAAOA,EAAO,CAAA,EAAC,SAAS,UAAU,IAUrDM,EAAAN,OAAY,KAAO,GAAOA,EAAO,CAAA,EAAC,SAAS,OAAO,kIAVlDC,EAAA,KAAAI,EAAAL,OAAY,KAAO,GAAOA,EAAO,CAAA,EAAC,SAAS,UAAU,4GAUrDC,EAAA,KAAAK,EAAAN,OAAY,KAAO,GAAOA,EAAO,CAAA,EAAC,SAAS,OAAO,0QAnBlDO,QACC,SACAP,EAAK,CAAA,GAAIA,EAAI,CAAA,EAAC,aAAa,wCAG9B,OAAAA,OAAU,KAAI,0LAHXA,EAAK,CAAA,GAAIA,EAAI,CAAA,EAAC,aAAa,kSA7BvB,MAAAQ,EAAyB,IAAA,EAAAC,GACzB,UAAAC,EAA8C,IAAA,EAAAD,EAC9C,CAAA,MAAAE,CAAA,EAAAF,GACA,WAAAG,EAAa,EAAA,EAAAH,GACb,QAAAI,EAA2B,IAAA,EAAAJ,EAC3B,CAAA,KAAAK,CAAA,EAAAL,EACA,CAAA,kBAAAM,EAAA,CAAA,CAAA,EAAAN,EACA,CAAA,iBAAAO,EAAA,CACV,wBAAyB,EAAA,CAAA,EAAAP,GAEf,SAAAQ,EAAW,EAAA,EAAAR,EACX,CAAA,KAAAS,CAAA,EAAAT,GACA,uCAAAU,EAAyC,EAAA,EAAAV,QAE9CW,EAAWC,EAAA,UAqCIb,GACZA,gCACWc,EAAoBd,EAAM,GAAU,CAClB,aAFf,6qBA9BpBA,GAASY,EAAS,SAAUZ,CAAK"}