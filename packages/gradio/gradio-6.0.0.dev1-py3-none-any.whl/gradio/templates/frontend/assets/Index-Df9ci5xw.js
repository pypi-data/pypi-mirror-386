import{c as ce,B as he,d as y,E as ge,I as me,F as be}from"./FullscreenButton-pJVgMiya.js";import{S as de}from"./StreamingBar-Co5WtsWH.js";import"./index-CtRY-svv.js";import"./MarkdownCode-CJL7VgM9.js";import"./prism-python-DspNkBda.js";import"./init-5dmMBTcc.js";import"./svelte/svelte.js";const{SvelteComponent:we,add_flush_callback:ke,append:A,assign:ve,attr:k,bind:Be,binding_callbacks:x,check_outros:ee,create_component:z,destroy_component:E,destroy_each:le,detach:I,element:C,empty:te,ensure_array_like:G,flush:w,get_spread_object:Ie,get_spread_update:Me,group_outros:ne,init:Se,insert:M,listen:W,mount_component:F,run_all:qe,safe_not_equal:ze,set_data:Ee,set_style:U,space:j,src_url_equal:H,text:Fe,toggle_class:q,transition_in:v,transition_out:B}=window.__gradio__svelte__internal;function V(l,e,t){const n=l.slice();return n[32]=e[t],n[34]=t,n}function X(l,e,t){const n=l.slice();return n[32]=e[t],n[34]=t,n}function Ne(l){let e,t,n,s,a,i,f,_,b;t=new me({props:{$$slots:{default:[Ce]},$$scope:{ctx:l}}});let m=G(l[15]?l[15]?.annotations:[]),c=[];for(let r=0;r<m.length;r+=1)c[r]=Z(X(l,m,r));let h=l[6]&&l[15]&&p(l);return{c(){e=C("div"),z(t.$$.fragment),n=j(),s=C("img"),i=j();for(let r=0;r<c.length;r+=1)c[r].c();f=j(),h&&h.c(),_=te(),k(s,"class","base-image svelte-303fln"),H(s.src,a=l[15]?l[15].image.url:null)||k(s,"src",a),k(s,"alt","the base file that is annotated"),q(s,"fit-height",l[7]&&!l[18]),k(e,"class","image-container svelte-303fln")},m(r,o){M(r,e,o),F(t,e,null),A(e,n),A(e,s),A(e,i);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);l[25](e),M(r,f,o),h&&h.m(r,o),M(r,_,o),b=!0},p(r,o){const g={};if(o[0]&278528|o[1]&32&&(g.$$scope={dirty:o,ctx:r}),t.$set(g),(!b||o[0]&32768&&!H(s.src,a=r[15]?r[15].image.url:null))&&k(s,"src",a),(!b||o[0]&262272)&&q(s,"fit-height",r[7]&&!r[18]),o[0]&360976){m=G(r[15]?r[15]?.annotations:[]);let d;for(d=0;d<m.length;d+=1){const S=X(r,m,d);c[d]?c[d].p(S,o):(c[d]=Z(S),c[d].c(),c[d].m(e,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=m.length}r[6]&&r[15]?h?h.p(r,o):(h=p(r),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},i(r){b||(v(t.$$.fragment,r),b=!0)},o(r){B(t.$$.fragment,r),b=!1},d(r){r&&(I(e),I(f),I(_)),E(t),le(c,r),l[25](null),h&&h.d(r)}}}function je(l){let e,t;return e=new ge({props:{size:"large",unpadded_box:!0,$$slots:{default:[Le]},$$scope:{ctx:l}}}),{c(){z(e.$$.fragment)},m(n,s){F(e,n,s),t=!0},p(n,s){const a={};s[1]&32&&(a.$$scope={dirty:s,ctx:n}),e.$set(a)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Y(l){let e,t;return e=new be({props:{fullscreen:l[18]}}),e.$on("fullscreen",l[24]),{c(){z(e.$$.fragment)},m(n,s){F(e,n,s),t=!0},p(n,s){const a={};s[0]&262144&&(a.fullscreen=n[18]),e.$set(a)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Ce(l){let e=l[14]?.includes("fullscreen")??!0,t,n,s=e&&Y(l);return{c(){s&&s.c(),t=te()},m(a,i){s&&s.m(a,i),M(a,t,i),n=!0},p(a,i){i[0]&16384&&(e=a[14]?.includes("fullscreen")??!0),e?s?(s.p(a,i),i[0]&16384&&v(s,1)):(s=Y(a),s.c(),v(s,1),s.m(t.parentNode,t)):s&&(ne(),B(s,1,1,()=>{s=null}),ee())},i(a){n||(v(s),n=!0)},o(a){B(s),n=!1},d(a){a&&I(t),s&&s.d(a)}}}function Z(l){let e,t,n,s;return{c(){e=C("img"),k(e,"alt",t="segmentation mask identifying "+l[4]+" within the uploaded file"),k(e,"class","mask fit-height svelte-303fln"),H(e.src,n=l[32].image.url)||k(e,"src",n),k(e,"style",s=l[9]&&l[32].label in l[9]?null:`filter: hue-rotate(${Math.round(l[34]*360/l[15]?.annotations.length)}deg);`),q(e,"fit-height",!l[18]),q(e,"active",l[16]==l[32].label),q(e,"inactive",l[16]!=l[32].label&&l[16]!=null)},m(a,i){M(a,e,i)},p(a,i){i[0]&16&&t!==(t="segmentation mask identifying "+a[4]+" within the uploaded file")&&k(e,"alt",t),i[0]&32768&&!H(e.src,n=a[32].image.url)&&k(e,"src",n),i[0]&33280&&s!==(s=a[9]&&a[32].label in a[9]?null:`filter: hue-rotate(${Math.round(a[34]*360/a[15]?.annotations.length)}deg);`)&&k(e,"style",s),i[0]&262144&&q(e,"fit-height",!a[18]),i[0]&98304&&q(e,"active",a[16]==a[32].label),i[0]&98304&&q(e,"inactive",a[16]!=a[32].label&&a[16]!=null)},d(a){a&&I(e)}}}function p(l){let e,t=G(l[15].annotations),n=[];for(let s=0;s<t.length;s+=1)n[s]=$(V(l,t,s));return{c(){e=C("div");for(let s=0;s<n.length;s+=1)n[s].c();k(e,"class","legend svelte-303fln")},m(s,a){M(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,a){if(a[0]&3703296){t=G(s[15].annotations);let i;for(i=0;i<t.length;i+=1){const f=V(s,t,i);n[i]?n[i].p(f,a):(n[i]=$(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&I(e),le(n,s)}}}function $(l){let e,t=l[32].label+"",n,s,a,i;function f(){return l[26](l[32])}function _(){return l[27](l[32])}function b(){return l[30](l[34],l[32])}return{c(){e=C("button"),n=Fe(t),s=j(),k(e,"class","legend-item svelte-303fln"),U(e,"background-color",l[9]&&l[32].label in l[9]?l[9][l[32].label]+"88":`hsla(${Math.round(l[34]*360/l[15].annotations.length)}, 100%, 50%, 0.3)`)},m(m,c){M(m,e,c),A(e,n),A(e,s),a||(i=[W(e,"mouseover",f),W(e,"focus",_),W(e,"mouseout",l[28]),W(e,"blur",l[29]),W(e,"click",b)],a=!0)},p(m,c){l=m,c[0]&32768&&t!==(t=l[32].label+"")&&Ee(n,t),c[0]&33280&&U(e,"background-color",l[9]&&l[32].label in l[9]?l[9][l[32].label]+"88":`hsla(${Math.round(l[34]*360/l[15].annotations.length)}, 100%, 50%, 0.3)`)},d(m){m&&I(e),a=!1,qe(i)}}}function Le(l){let e,t;return e=new y({}),{c(){z(e.$$.fragment)},m(n,s){F(e,n,s),t=!0},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function We(l){let e,t,n,s,a,i,f,_;const b=[{autoscroll:l[3].autoscroll},{i18n:l[3].i18n},l[13]];let m={};for(let o=0;o<b.length;o+=1)m=ve(m,b[o]);e=new de({props:m}),n=new he({props:{show_label:l[5],Icon:y,label:l[4]||l[3].i18n("image.image")}});const c=[je,Ne],h=[];function r(o,g){return o[15]==null?0:1}return i=r(l),f=h[i]=c[i](l),{c(){z(e.$$.fragment),t=j(),z(n.$$.fragment),s=j(),a=C("div"),f.c(),k(a,"class","container svelte-303fln")},m(o,g){F(e,o,g),M(o,t,g),F(n,o,g),M(o,s,g),M(o,a,g),h[i].m(a,null),_=!0},p(o,g){const d=g[0]&8200?Me(b,[g[0]&8&&{autoscroll:o[3].autoscroll},g[0]&8&&{i18n:o[3].i18n},g[0]&8192&&Ie(o[13])]):{};e.$set(d);const S={};g[0]&32&&(S.show_label=o[5]),g[0]&24&&(S.label=o[4]||o[3].i18n("image.image")),n.$set(S);let N=i;i=r(o),i===N?h[i].p(o,g):(ne(),B(h[N],1,1,()=>{h[N]=null}),ee(),f=h[i],f?f.p(o,g):(f=h[i]=c[i](o),f.c()),v(f,1),f.m(a,null))},i(o){_||(v(e.$$.fragment,o),v(n.$$.fragment,o),v(f),_=!0)},o(o){B(e.$$.fragment,o),B(n.$$.fragment,o),B(f),_=!1},d(o){o&&(I(t),I(s),I(a)),E(e,o),E(n,o),h[i].d()}}}function Ae(l){let e,t,n;function s(i){l[31](i)}let a={visible:l[2],elem_id:l[0],elem_classes:l[1],padding:!1,height:l[7],width:l[8],allow_overflow:!1,container:l[10],scale:l[11],min_width:l[12],$$slots:{default:[We]},$$scope:{ctx:l}};return l[18]!==void 0&&(a.fullscreen=l[18]),e=new ce({props:a}),x.push(()=>Be(e,"fullscreen",s)),{c(){z(e.$$.fragment)},m(i,f){F(e,i,f),n=!0},p(i,f){const _={};f[0]&4&&(_.visible=i[2]),f[0]&1&&(_.elem_id=i[0]),f[0]&2&&(_.elem_classes=i[1]),f[0]&128&&(_.height=i[7]),f[0]&256&&(_.width=i[8]),f[0]&1024&&(_.container=i[10]),f[0]&2048&&(_.scale=i[11]),f[0]&4096&&(_.min_width=i[12]),f[0]&516856|f[1]&32&&(_.$$scope={dirty:f,ctx:i}),!t&&f[0]&262144&&(t=!0,_.fullscreen=i[18],ke(()=>t=!1)),e.$set(_)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){E(e,i)}}}function De(l,e,t){let{elem_id:n=""}=e,{elem_classes:s=[]}=e,{visible:a=!0}=e,{value:i=null}=e,f=null,_=null,{gradio:b}=e,{label:m=b.i18n("annotated_image.annotated_image")}=e,{show_label:c=!0}=e,{show_legend:h=!0}=e,{height:r}=e,{width:o}=e,{color_map:g}=e,{container:d=!0}=e,{scale:S=null}=e,{min_width:N=void 0}=e,J=null,{loading_status:Q}=e,{buttons:R=null}=e,K,D=!1;function O(u){t(16,J=u)}function P(){t(16,J=null)}function T(u,L){b.dispatch("select",{value:m,index:u})}const ie=({detail:u})=>{t(18,D=u)};function se(u){x[u?"unshift":"push"](()=>{K=u,t(17,K)})}const ae=u=>O(u.label),ue=u=>O(u.label),oe=()=>P(),re=()=>P(),fe=(u,L)=>T(u,L.label);function _e(u){D=u,t(18,D)}return l.$$set=u=>{"elem_id"in u&&t(0,n=u.elem_id),"elem_classes"in u&&t(1,s=u.elem_classes),"visible"in u&&t(2,a=u.visible),"value"in u&&t(22,i=u.value),"gradio"in u&&t(3,b=u.gradio),"label"in u&&t(4,m=u.label),"show_label"in u&&t(5,c=u.show_label),"show_legend"in u&&t(6,h=u.show_legend),"height"in u&&t(7,r=u.height),"width"in u&&t(8,o=u.width),"color_map"in u&&t(9,g=u.color_map),"container"in u&&t(10,d=u.container),"scale"in u&&t(11,S=u.scale),"min_width"in u&&t(12,N=u.min_width),"loading_status"in u&&t(13,Q=u.loading_status),"buttons"in u&&t(14,R=u.buttons)},l.$$.update=()=>{if(l.$$.dirty[0]&12582920)if(i!==f&&(t(23,f=i),b.dispatch("change")),i){const u={image:i.image,annotations:i.annotations.map(L=>({image:L.image,label:L.label}))};t(15,_=u)}else t(15,_=null)},[n,s,a,b,m,c,h,r,o,g,d,S,N,Q,R,_,J,K,D,O,P,T,i,f,ie,se,ae,ue,oe,re,fe,_e]}class Re extends we{constructor(e){super(),Se(this,e,De,Ae,ze,{elem_id:0,elem_classes:1,visible:2,value:22,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,loading_status:13,buttons:14},null,[-1,-1])}get elem_id(){return this.$$.ctx[0]}set elem_id(e){this.$$set({elem_id:e}),w()}get elem_classes(){return this.$$.ctx[1]}set elem_classes(e){this.$$set({elem_classes:e}),w()}get visible(){return this.$$.ctx[2]}set visible(e){this.$$set({visible:e}),w()}get value(){return this.$$.ctx[22]}set value(e){this.$$set({value:e}),w()}get gradio(){return this.$$.ctx[3]}set gradio(e){this.$$set({gradio:e}),w()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),w()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),w()}get show_legend(){return this.$$.ctx[6]}set show_legend(e){this.$$set({show_legend:e}),w()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),w()}get width(){return this.$$.ctx[8]}set width(e){this.$$set({width:e}),w()}get color_map(){return this.$$.ctx[9]}set color_map(e){this.$$set({color_map:e}),w()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),w()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),w()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),w()}get loading_status(){return this.$$.ctx[13]}set loading_status(e){this.$$set({loading_status:e}),w()}get buttons(){return this.$$.ctx[14]}set buttons(e){this.$$set({buttons:e}),w()}}export{Re as default};
//# sourceMappingURL=Index-Df9ci5xw.js.map
