import{SvelteComponent as bl,init as pl,safe_not_equal as wl,add_render_callback as kl,space as P,empty as ee,claim_space as W,insert_hydration as V,listen as le,transition_in as g,group_outros as R,transition_out as d,check_outros as A,detach as E,createEventDispatcher as vl,onMount as yl,globals as El,create_component as D,claim_component as N,mount_component as U,destroy_component as j,tick as Tl,bubble as de,binding_callbacks as ue,ensure_array_like as se,element as q,claim_element as H,children as X,attr as B,set_style as K,toggle_class as G,append_hydration as O,destroy_each as qe,is_function as Il,run_all as zl,text as He,claim_text as Xe,set_data as Je,noop as Bl,bind as Dl,add_flush_callback as Nl,stop_propagation as Ul}from"../../../svelte/svelte.js";import"../../../svelte/svelte-submodules.js";import{u as jl,I as Ll,h as be,C as Ke,o as pe}from"./2.kHWxRulR.js";import{B as Ml}from"./BlockLabel.BOO7yzSi.js";import{E as Vl}from"./Empty.CO7FZzAD.js";import{S as Ol}from"./ShareButton.BdgLeiM2.js";import{D as Cl}from"./Download.CpfEFmFf.js";import{I as Qe}from"./Image.CTVzPhL7.js";import{P as Ye}from"./Play.DJ4h2PVY.js";import{U as Rl,a as Al}from"./Upload.McbAR2b8.js";import{F as Pl}from"./FullscreenButton.ZmySZmof.js";import{M as Wl}from"./ModifyUpload.C2wJL4Cs.js";/* empty css                                             */import{V as we}from"./Video.CGJke9Z3.js";import{d as Fl}from"./index.tFQomdd2.js";async function Gl(n){return n?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(n.map(async([t,e])=>t===null||!t.url?"":await jl(t.url)))).map(t=>`<img src="${t}" style="height: 400px" />`).join("")}</div>`:""}const{window:Ze}=El;function Ne(n,l,t){const e=n.slice();return e[64]=l[t],e[66]=t,e}function Ue(n,l,t){const e=n.slice();return e[67]=l[t],e[68]=l,e[66]=t,e}function je(n){let l,t;return l=new Ml({props:{show_label:n[2],Icon:Qe,label:n[3]||"Gallery"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&4&&(i.show_label=e[2]),o[0]&8&&(i.label=e[3]||"Gallery"),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Sl(n){let l,t,e,o,i,a,u=n[30]&&n[6]&&Le(n),f=n[11]&&n[1]===null&&Pe(n),m=se(n[21]),s=[];for(let c=0;c<m.length;c+=1)s[c]=Se(Ne(n,m,c));const w=c=>d(s[c],1,1,()=>{s[c]=null});return{c(){l=q("div"),u&&u.c(),t=P(),e=q("div"),f&&f.c(),o=P(),i=q("div");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){l=H(c,"DIV",{class:!0});var h=X(l);u&&u.l(h),t=W(h),e=H(h,"DIV",{class:!0});var b=X(e);f&&f.l(b),o=W(b),i=H(b,"DIV",{class:!0,style:!0});var y=X(i);for(let k=0;k<s.length;k+=1)s[k].l(y);y.forEach(E),b.forEach(E),h.forEach(E),this.h()},h(){B(i,"class","grid-container svelte-ao1xvt"),K(i,"--grid-cols",n[25]),K(i,"--grid-rows",n[4]),K(i,"--object-fit",n[7]),G(i,"pt-6",n[2]),B(e,"class","grid-wrap svelte-ao1xvt"),G(e,"minimal",n[12]==="minimal"),G(e,"fixed-height",n[12]!=="minimal"&&(!n[5]||n[5]=="auto")),G(e,"hidden",n[23]),K(e,"height",n[5]!=="auto"?n[5]+"px":null),B(l,"class","gallery-container")},m(c,h){V(c,l,h),u&&u.m(l,null),O(l,t),O(l,e),f&&f.m(e,null),O(e,o),O(e,i);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(i,null);n[59](l),a=!0},p(c,h){if(c[30]&&c[6]?u?(u.p(c,h),h[0]&1073741888&&g(u,1)):(u=Le(c),u.c(),g(u,1),u.m(l,t)):u&&(R(),d(u,1,1,()=>{u=null}),A()),c[11]&&c[1]===null?f?(f.p(c,h),h[0]&2050&&g(f,1)):(f=Pe(c),f.c(),g(f,1),f.m(e,o)):f&&(R(),d(f,1,1,()=>{f=null}),A()),h[0]&2099266|h[1]&17){m=se(c[21]);let b;for(b=0;b<m.length;b+=1){const y=Ne(c,m,b);s[b]?(s[b].p(y,h),g(s[b],1)):(s[b]=Se(y),s[b].c(),g(s[b],1),s[b].m(i,null))}for(R(),b=m.length;b<s.length;b+=1)w(b);A()}(!a||h[0]&33554432)&&K(i,"--grid-cols",c[25]),(!a||h[0]&16)&&K(i,"--grid-rows",c[4]),(!a||h[0]&128)&&K(i,"--object-fit",c[7]),(!a||h[0]&4)&&G(i,"pt-6",c[2]),(!a||h[0]&4096)&&G(e,"minimal",c[12]==="minimal"),(!a||h[0]&4128)&&G(e,"fixed-height",c[12]!=="minimal"&&(!c[5]||c[5]=="auto")),(!a||h[0]&8388608)&&G(e,"hidden",c[23]),h[0]&32&&K(e,"height",c[5]!=="auto"?c[5]+"px":null)},i(c){if(!a){g(u),g(f);for(let h=0;h<m.length;h+=1)g(s[h]);a=!0}},o(c){d(u),d(f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)d(s[h]);a=!1},d(c){c&&E(l),u&&u.d(),f&&f.d(),qe(s,c),n[59](null)}}}function ql(n){let l,t;return l=new Vl({props:{unpadded_box:!0,size:"large",$$slots:{default:[et]},$$scope:{ctx:n}}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[2]&128&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Le(n){var C;let l,t,e,o,i,a,u,f,m,s,w,c;t=new Ll({props:{display_top_corner:n[14],$$slots:{default:[Hl]},$$scope:{ctx:n}}});const h=[Jl,Xl],b=[];function y(T,v){return"image"in T[30]?0:1}i=y(n),a=b[i]=h[i](n);let k=((C=n[30])==null?void 0:C.caption)&&Re(n),p=se(n[21]),_=[];for(let T=0;T<p.length;T+=1)_[T]=Ae(Ue(n,p,T));const z=T=>d(_[T],1,1,()=>{_[T]=null});return{c(){l=q("button"),D(t.$$.fragment),e=P(),o=q("button"),a.c(),u=P(),k&&k.c(),f=P(),m=q("div");for(let T=0;T<_.length;T+=1)_[T].c();this.h()},l(T){l=H(T,"BUTTON",{class:!0});var v=X(l);N(t.$$.fragment,v),e=W(v),o=H(v,"BUTTON",{class:!0,style:!0,"aria-label":!0});var F=X(o);a.l(F),F.forEach(E),u=W(v),k&&k.l(v),f=W(v),m=H(v,"DIV",{class:!0,"data-testid":!0,style:!0});var Q=X(m);for(let Y=0;Y<_.length;Y+=1)_[Y].l(Q);Q.forEach(E),v.forEach(E),this.h()},h(){B(o,"class","media-button svelte-ao1xvt"),K(o,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),B(o,"aria-label","detailed view of selected image"),B(m,"class","thumbnails scroll-hide svelte-ao1xvt"),B(m,"data-testid","container_el"),K(m,"justify-content",n[28]?"flex-start":"center"),B(l,"class","preview svelte-ao1xvt"),G(l,"minimal",n[12]==="minimal")},m(T,v){V(T,l,v),U(t,l,null),O(l,e),O(l,o),b[i].m(o,null),O(l,u),k&&k.m(l,null),O(l,f),O(l,m);for(let F=0;F<_.length;F+=1)_[F]&&_[F].m(m,null);n[52](m),s=!0,w||(c=[le(o,"click",function(){Il("image"in n[30]?n[49]:null)&&("image"in n[30]?n[49]:null).apply(this,arguments)}),le(l,"keydown",n[33])],w=!0)},p(T,v){var Y;n=T;const F={};v[0]&16384&&(F.display_top_corner=n[14]),v[0]&1084270338|v[2]&128&&(F.$$scope={dirty:v,ctx:n}),t.$set(F);let Q=i;if(i=y(n),i===Q?b[i].p(n,v):(R(),d(b[Q],1,1,()=>{b[Q]=null}),A(),a=b[i],a?a.p(n,v):(a=b[i]=h[i](n),a.c()),g(a,1),a.m(o,null)),(!s||v[0]&1073741824)&&K(o,"height","calc(100% - "+(n[30].caption?"80px":"60px")+")"),(Y=n[30])!=null&&Y.caption?k?k.p(n,v):(k=Re(n),k.c(),k.m(l,f)):k&&(k.d(1),k=null),v[0]&69210114){p=se(n[21]);let L;for(L=0;L<p.length;L+=1){const te=Ue(n,p,L);_[L]?(_[L].p(te,v),g(_[L],1)):(_[L]=Ae(te),_[L].c(),g(_[L],1),_[L].m(m,null))}for(R(),L=p.length;L<_.length;L+=1)z(L);A()}(!s||v[0]&268435456)&&K(m,"justify-content",n[28]?"flex-start":"center"),(!s||v[0]&4096)&&G(l,"minimal",n[12]==="minimal")},i(T){if(!s){g(t.$$.fragment,T),g(a);for(let v=0;v<p.length;v+=1)g(_[v]);s=!0}},o(T){d(t.$$.fragment,T),d(a),_=_.filter(Boolean);for(let v=0;v<_.length;v+=1)d(_[v]);s=!1},d(T){T&&E(l),j(t),b[i].d(),k&&k.d(),qe(_,T),n[52](null),w=!1,zl(c)}}}function Me(n){let l,t;return l=new be({props:{Icon:Cl,label:n[10]("common.download")}}),l.$on("click",n[44]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1024&&(i.label=e[10]("common.download")),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Ve(n){let l,t;return l=new Pl({props:{fullscreen:n[15]}}),l.$on("fullscreen",n[45]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&32768&&(i.fullscreen=e[15]),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Oe(n){let l,t,e;return t=new Ol({props:{i18n:n[10],value:n[21],formatter:Gl}}),t.$on("share",n[46]),t.$on("error",n[47]),{c(){l=q("div"),D(t.$$.fragment),this.h()},l(o){l=H(o,"DIV",{class:!0});var i=X(l);N(t.$$.fragment,i),i.forEach(E),this.h()},h(){B(l,"class","icon-button")},m(o,i){V(o,l,i),U(t,l,null),e=!0},p(o,i){const a={};i[0]&1024&&(a.i18n=o[10]),i[0]&2097152&&(a.value=o[21]),t.$set(a)},i(o){e||(g(t.$$.fragment,o),e=!0)},o(o){d(t.$$.fragment,o),e=!1},d(o){o&&E(l),j(t)}}}function Ce(n){let l,t;return l=new be({props:{Icon:Ke,label:"Close"}}),l.$on("click",n[48]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p:Bl,i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Hl(n){let l,t,e,o,i,a=n[9]&&Me(n),u=n[13]&&Ve(n),f=n[8]&&Oe(n),m=!n[23]&&Ce(n);return{c(){a&&a.c(),l=P(),u&&u.c(),t=P(),f&&f.c(),e=P(),m&&m.c(),o=ee()},l(s){a&&a.l(s),l=W(s),u&&u.l(s),t=W(s),f&&f.l(s),e=W(s),m&&m.l(s),o=ee()},m(s,w){a&&a.m(s,w),V(s,l,w),u&&u.m(s,w),V(s,t,w),f&&f.m(s,w),V(s,e,w),m&&m.m(s,w),V(s,o,w),i=!0},p(s,w){s[9]?a?(a.p(s,w),w[0]&512&&g(a,1)):(a=Me(s),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(R(),d(a,1,1,()=>{a=null}),A()),s[13]?u?(u.p(s,w),w[0]&8192&&g(u,1)):(u=Ve(s),u.c(),g(u,1),u.m(t.parentNode,t)):u&&(R(),d(u,1,1,()=>{u=null}),A()),s[8]?f?(f.p(s,w),w[0]&256&&g(f,1)):(f=Oe(s),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(R(),d(f,1,1,()=>{f=null}),A()),s[23]?m&&(R(),d(m,1,1,()=>{m=null}),A()):m?(m.p(s,w),w[0]&8388608&&g(m,1)):(m=Ce(s),m.c(),g(m,1),m.m(o.parentNode,o))},i(s){i||(g(a),g(u),g(f),g(m),i=!0)},o(s){d(a),d(u),d(f),d(m),i=!1},d(s){s&&(E(l),E(t),E(e),E(o)),a&&a.d(s),u&&u.d(s),f&&f.d(s),m&&m.d(s)}}}function Xl(n){let l,t;return l=new we({props:{src:n[30].video.url,"data-testid":"detailed-video",alt:n[30].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1073741824&&(i.src=e[30].video.url),o[0]&1073741824&&(i.alt=e[30].caption||""),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Jl(n){let l,t;return l=new pe({props:{"data-testid":"detailed-image",src:n[30].image.url,alt:n[30].caption||"",title:n[30].caption||null,class:n[30].caption&&"with-caption",loading:"lazy"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1073741824&&(i.src=e[30].image.url),o[0]&1073741824&&(i.alt=e[30].caption||""),o[0]&1073741824&&(i.title=e[30].caption||null),o[0]&1073741824&&(i.class=e[30].caption&&"with-caption"),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Re(n){let l,t=n[30].caption+"",e;return{c(){l=q("caption"),e=He(t),this.h()},l(o){l=H(o,"CAPTION",{class:!0});var i=X(l);e=Xe(i,t),i.forEach(E),this.h()},h(){B(l,"class","caption svelte-ao1xvt")},m(o,i){V(o,l,i),O(l,e)},p(o,i){i[0]&1073741824&&t!==(t=o[30].caption+"")&&Je(e,t)},d(o){o&&E(l)}}}function Kl(n){let l,t,e,o;return l=new Ye({}),e=new we({props:{src:n[67].video.url,title:n[67].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[66]+1),alt:"",loading:"lazy",loop:!1}}),{c(){D(l.$$.fragment),t=P(),D(e.$$.fragment)},l(i){N(l.$$.fragment,i),t=W(i),N(e.$$.fragment,i)},m(i,a){U(l,i,a),V(i,t,a),U(e,i,a),o=!0},p(i,a){const u={};a[0]&2097152&&(u.src=i[67].video.url),a[0]&2097152&&(u.title=i[67].caption||null),e.$set(u)},i(i){o||(g(l.$$.fragment,i),g(e.$$.fragment,i),o=!0)},o(i){d(l.$$.fragment,i),d(e.$$.fragment,i),o=!1},d(i){i&&E(t),j(l,i),j(e,i)}}}function Ql(n){let l,t;return l=new pe({props:{src:n[67].image.url,title:n[67].caption||null,"data-testid":"thumbnail "+(n[66]+1),alt:"",loading:"lazy"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&2097152&&(i.src=e[67].image.url),o[0]&2097152&&(i.title=e[67].caption||null),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Ae(n){let l,t,e,o,i,a=n[66],u,f,m;const s=[Ql,Kl],w=[];function c(k,p){return"image"in k[67]?0:1}t=c(n),e=w[t]=s[t](n);const h=()=>n[50](l,a),b=()=>n[50](null,a);function y(){return n[51](n[66])}return{c(){l=q("button"),e.c(),o=P(),this.h()},l(k){l=H(k,"BUTTON",{class:!0,"aria-label":!0});var p=X(l);e.l(p),o=W(p),p.forEach(E),this.h()},h(){B(l,"class","thumbnail-item thumbnail-small svelte-ao1xvt"),B(l,"aria-label",i="Thumbnail "+(n[66]+1)+" of "+n[21].length),G(l,"selected",n[1]===n[66]&&n[12]!=="minimal")},m(k,p){V(k,l,p),w[t].m(l,null),O(l,o),h(),u=!0,f||(m=le(l,"click",y),f=!0)},p(k,p){n=k;let _=t;t=c(n),t===_?w[t].p(n,p):(R(),d(w[_],1,1,()=>{w[_]=null}),A(),e=w[t],e?e.p(n,p):(e=w[t]=s[t](n),e.c()),g(e,1),e.m(l,o)),(!u||p[0]&2097152&&i!==(i="Thumbnail "+(n[66]+1)+" of "+n[21].length))&&B(l,"aria-label",i),a!==n[66]&&(b(),a=n[66],h()),(!u||p[0]&4098)&&G(l,"selected",n[1]===n[66]&&n[12]!=="minimal")},i(k){u||(g(e),u=!0)},o(k){d(e),u=!1},d(k){k&&E(l),w[t].d(),b(),f=!1,m()}}}function Pe(n){let l,t;return l=new Wl({props:{i18n:n[10],$$slots:{default:[Zl]},$$scope:{ctx:n}}}),l.$on("clear",n[56]),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1024&&(i.i18n=e[10]),o[0]&538903552|o[2]&128&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function We(n){let l,t;return l=new be({props:{Icon:Rl,label:n[10]("common.upload"),$$slots:{default:[Yl]},$$scope:{ctx:n}}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&1024&&(i.label=e[10]("common.upload")),o[0]&538902528|o[2]&128&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Yl(n){let l,t,e;function o(a){n[53](a)}let i={icon_upload:!0,filetype:n[17],file_count:"multiple",max_file_size:n[18],root:n[16],stream_handler:n[20],upload:n[19]};return n[29]!==void 0&&(i.uploading=n[29]),l=new Al({props:i}),ue.push(()=>Dl(l,"uploading",o)),l.$on("load",n[54]),l.$on("error",n[55]),{c(){D(l.$$.fragment)},l(a){N(l.$$.fragment,a)},m(a,u){U(l,a,u),e=!0},p(a,u){const f={};u[0]&131072&&(f.filetype=a[17]),u[0]&262144&&(f.max_file_size=a[18]),u[0]&65536&&(f.root=a[16]),u[0]&1048576&&(f.stream_handler=a[20]),u[0]&524288&&(f.upload=a[19]),!t&&u[0]&536870912&&(t=!0,f.uploading=a[29],Nl(()=>t=!1)),l.$set(f)},i(a){e||(g(l.$$.fragment,a),e=!0)},o(a){d(l.$$.fragment,a),e=!1},d(a){j(l,a)}}}function Zl(n){let l,t,e=n[19]&&n[20]&&We(n);return{c(){e&&e.c(),l=ee()},l(o){e&&e.l(o),l=ee()},m(o,i){e&&e.m(o,i),V(o,l,i),t=!0},p(o,i){o[19]&&o[20]?e?(e.p(o,i),i[0]&1572864&&g(e,1)):(e=We(o),e.c(),g(e,1),e.m(l.parentNode,l)):e&&(R(),d(e,1,1,()=>{e=null}),A())},i(o){t||(g(e),t=!0)},o(o){d(e),t=!1},d(o){o&&E(l),e&&e.d(o)}}}function $l(n){let l,t,e,o;return l=new Ye({}),e=new we({props:{src:n[64].video.url,title:n[64].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[66]+1),alt:"",loading:"lazy",loop:!1}}),{c(){D(l.$$.fragment),t=P(),D(e.$$.fragment)},l(i){N(l.$$.fragment,i),t=W(i),N(e.$$.fragment,i)},m(i,a){U(l,i,a),V(i,t,a),U(e,i,a),o=!0},p(i,a){const u={};a[0]&2097152&&(u.src=i[64].video.url),a[0]&2097152&&(u.title=i[64].caption||null),e.$set(u)},i(i){o||(g(l.$$.fragment,i),g(e.$$.fragment,i),o=!0)},o(i){d(l.$$.fragment,i),d(e.$$.fragment,i),o=!1},d(i){i&&E(t),j(l,i),j(e,i)}}}function xl(n){let l,t;return l=new pe({props:{alt:n[64].caption||"",src:typeof n[64].image=="string"?n[64].image:n[64].image.url,loading:"lazy"}}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},p(e,o){const i={};o[0]&2097152&&(i.alt=e[64].caption||""),o[0]&2097152&&(i.src=typeof e[64].image=="string"?e[64].image:e[64].image.url),l.$set(i)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function Fe(n){let l,t=n[64].caption+"",e;return{c(){l=q("div"),e=He(t),this.h()},l(o){l=H(o,"DIV",{class:!0});var i=X(l);e=Xe(i,t),i.forEach(E),this.h()},h(){B(l,"class","caption-label svelte-ao1xvt")},m(o,i){V(o,l,i),O(l,e)},p(o,i){i[0]&2097152&&t!==(t=o[64].caption+"")&&Je(e,t)},d(o){o&&E(l)}}}function Ge(n){let l,t,e,o,i;t=new Ke({});function a(){return n[58](n[66])}return{c(){l=q("button"),D(t.$$.fragment),this.h()},l(u){l=H(u,"BUTTON",{class:!0,"aria-label":!0});var f=X(l);N(t.$$.fragment,f),f.forEach(E),this.h()},h(){B(l,"class","delete-button svelte-ao1xvt"),B(l,"aria-label","Delete image")},m(u,f){V(u,l,f),U(t,l,null),e=!0,o||(i=le(l,"click",Ul(a)),o=!0)},p(u,f){n=u},i(u){e||(g(t.$$.fragment,u),e=!0)},o(u){d(t.$$.fragment,u),e=!1},d(u){u&&E(l),j(t),o=!1,i()}}}function Se(n){let l,t,e,o,i,a,u,f,m,s,w;const c=[xl,$l],h=[];function b(_,z){return"image"in _[64]?0:1}e=b(n),o=h[e]=c[e](n);let y=n[64].caption&&Fe(n);function k(){return n[57](n[66])}let p=n[11]&&Ge(n);return{c(){l=q("div"),t=q("button"),o.c(),i=P(),y&&y.c(),u=P(),p&&p.c(),f=P(),this.h()},l(_){l=H(_,"DIV",{class:!0});var z=X(l);t=H(z,"BUTTON",{class:!0,"aria-label":!0});var C=X(t);o.l(C),i=W(C),y&&y.l(C),C.forEach(E),u=W(z),p&&p.l(z),f=W(z),z.forEach(E),this.h()},h(){B(t,"class","thumbnail-item thumbnail-lg svelte-ao1xvt"),B(t,"aria-label",a="Thumbnail "+(n[66]+1)+" of "+n[21].length),G(t,"selected",n[1]===n[66]),B(l,"class","gallery-item svelte-ao1xvt")},m(_,z){V(_,l,z),O(l,t),h[e].m(t,null),O(t,i),y&&y.m(t,null),O(l,u),p&&p.m(l,null),O(l,f),m=!0,s||(w=le(t,"click",k),s=!0)},p(_,z){n=_;let C=e;e=b(n),e===C?h[e].p(n,z):(R(),d(h[C],1,1,()=>{h[C]=null}),A(),o=h[e],o?o.p(n,z):(o=h[e]=c[e](n),o.c()),g(o,1),o.m(t,i)),n[64].caption?y?y.p(n,z):(y=Fe(n),y.c(),y.m(t,null)):y&&(y.d(1),y=null),(!m||z[0]&2097152&&a!==(a="Thumbnail "+(n[66]+1)+" of "+n[21].length))&&B(t,"aria-label",a),(!m||z[0]&2)&&G(t,"selected",n[1]===n[66]),n[11]?p?(p.p(n,z),z[0]&2048&&g(p,1)):(p=Ge(n),p.c(),g(p,1),p.m(l,f)):p&&(R(),d(p,1,1,()=>{p=null}),A())},i(_){m||(g(o),g(p),m=!0)},o(_){d(o),d(p),m=!1},d(_){_&&E(l),h[e].d(),y&&y.d(),p&&p.d(),s=!1,w()}}}function et(n){let l,t;return l=new Qe({}),{c(){D(l.$$.fragment)},l(e){N(l.$$.fragment,e)},m(e,o){U(l,e,o),t=!0},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){d(l.$$.fragment,e),t=!1},d(e){j(l,e)}}}function lt(n){let l,t,e,o,i,a,u;kl(n[43]);let f=n[2]&&je(n);const m=[ql,Sl],s=[];function w(c,h){return c[0]==null||c[21]==null||c[21].length===0?0:1}return t=w(n),e=s[t]=m[t](n),{c(){f&&f.c(),l=P(),e.c(),o=ee()},l(c){f&&f.l(c),l=W(c),e.l(c),o=ee()},m(c,h){f&&f.m(c,h),V(c,l,h),s[t].m(c,h),V(c,o,h),i=!0,a||(u=le(Ze,"resize",n[43]),a=!0)},p(c,h){c[2]?f?(f.p(c,h),h[0]&4&&g(f,1)):(f=je(c),f.c(),g(f,1),f.m(l.parentNode,l)):f&&(R(),d(f,1,1,()=>{f=null}),A());let b=t;t=w(c),t===b?s[t].p(c,h):(R(),d(s[b],1,1,()=>{s[b]=null}),A(),e=s[t],e?e.p(c,h):(e=s[t]=m[t](c),e.c()),g(e,1),e.m(o.parentNode,o))},i(c){i||(g(f),g(e),i=!0)},o(c){d(f),d(e),i=!1},d(c){c&&(E(l),E(o)),f&&f.d(c),s[t].d(c),a=!1,u()}}}function tt(n,l,t){let e,o,i,{show_label:a=!0}=l,{label:u}=l,{value:f=null}=l,{columns:m=[2]}=l,{rows:s=void 0}=l,{height:w="auto"}=l,{preview:c}=l,{allow_preview:h=!0}=l,{object_fit:b="cover"}=l,{show_share_button:y=!1}=l,{show_download_button:k=!1}=l,{i18n:p}=l,{selected_index:_=null}=l,{interactive:z}=l,{_fetch:C}=l,{mode:T="normal"}=l,{show_fullscreen_button:v=!0}=l,{display_icon_button_wrapper_top_corner:F=!1}=l,{fullscreen:Q=!1}=l,{root:Y=""}=l,{file_types:L=["image","video"]}=l,{max_file_size:te=null}=l,{upload:ke=void 0}=l,{stream_handler:ve=void 0}=l,{fit_columns:ce=!0}=l,ye=!1,_e;const Z=vl();let ne=!0,I=null,re=m,me=f;_==null&&c&&(f!=null&&f.length)&&(_=0);let he=_;function Ee(r){const M=r.target,S=r.offsetX,x=M.offsetWidth/2;S<x?t(1,_=e):t(1,_=o)}function $e(r){switch(r.code){case"Escape":r.preventDefault(),t(1,_=null);break;case"ArrowLeft":r.preventDefault(),t(1,_=e);break;case"ArrowRight":r.preventDefault(),t(1,_=o);break}}let $=[],J;async function xe(r){var De;if(typeof r!="number"||(await Tl(),$[r]===void 0))return;(De=$[r])==null||De.focus();const{left:M,width:S}=J.getBoundingClientRect(),{left:fe,width:x}=$[r].getBoundingClientRect(),oe=fe-M+x/2-S/2+J.scrollLeft;J&&typeof J.scrollTo=="function"&&J.scrollTo({left:oe<0?0:oe,behavior:"smooth"})}let Te=0;async function Ie(r,M){let S;try{S=await C(r)}catch(oe){if(oe instanceof TypeError){window.open(r,"_blank","noreferrer");return}throw oe}const fe=await S.blob(),x=URL.createObjectURL(fe),ae=document.createElement("a");ae.href=x,ae.download=M,ae.click(),URL.revokeObjectURL(x)}let ze=!1;function ie(){J&&t(28,ze=J.scrollWidth>J.clientWidth)}yl(()=>(ie(),document.addEventListener("fullscreenchange",()=>{t(23,ye=!!document.fullscreenElement)}),window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)));function Be(r){if(!f||!I)return;const M=I[r];let S;"image"in M?S={file:M.image,index:r}:"video"in M&&(S={file:M.video,index:r}),S&&Z("delete",S)}let ge=!1;function el(){t(27,Te=Ze.innerHeight)}const ll=()=>{const r="image"in i?i==null?void 0:i.image:i==null?void 0:i.video;if(r==null)return;const{url:M,orig_name:S}=r;M&&Ie(M,S??"image")};function tl(r){de.call(this,n,r)}function nl(r){de.call(this,n,r)}function il(r){de.call(this,n,r)}const ol=()=>{t(1,_=null),Z("preview_close")},rl=r=>Ee(r);function fl(r,M){ue[r?"unshift":"push"](()=>{$[M]=r,t(26,$)})}const al=r=>t(1,_=r);function ul(r){ue[r?"unshift":"push"](()=>{J=r,t(22,J)})}function sl(r){ge=r,t(29,ge)}const cl=r=>Z("upload",r.detail),_l=r=>Z("error",r.detail),ml=()=>t(0,f=[]),hl=r=>{_===null&&h&&Z("preview_open"),t(1,_=r)},gl=r=>Be(r);function dl(r){ue[r?"unshift":"push"](()=>{_e=r,t(24,_e)})}return n.$$set=r=>{"show_label"in r&&t(2,a=r.show_label),"label"in r&&t(3,u=r.label),"value"in r&&t(0,f=r.value),"columns"in r&&t(36,m=r.columns),"rows"in r&&t(4,s=r.rows),"height"in r&&t(5,w=r.height),"preview"in r&&t(37,c=r.preview),"allow_preview"in r&&t(6,h=r.allow_preview),"object_fit"in r&&t(7,b=r.object_fit),"show_share_button"in r&&t(8,y=r.show_share_button),"show_download_button"in r&&t(9,k=r.show_download_button),"i18n"in r&&t(10,p=r.i18n),"selected_index"in r&&t(1,_=r.selected_index),"interactive"in r&&t(11,z=r.interactive),"_fetch"in r&&t(38,C=r._fetch),"mode"in r&&t(12,T=r.mode),"show_fullscreen_button"in r&&t(13,v=r.show_fullscreen_button),"display_icon_button_wrapper_top_corner"in r&&t(14,F=r.display_icon_button_wrapper_top_corner),"fullscreen"in r&&t(15,Q=r.fullscreen),"root"in r&&t(16,Y=r.root),"file_types"in r&&t(17,L=r.file_types),"max_file_size"in r&&t(18,te=r.max_file_size),"upload"in r&&t(19,ke=r.upload),"stream_handler"in r&&t(20,ve=r.stream_handler),"fit_columns"in r&&t(39,ce=r.fit_columns)},n.$$.update=()=>{if(n.$$.dirty[0]&1|n.$$.dirty[1]&512&&t(40,ne=f==null||f.length===0?!0:ne),n.$$.dirty[0]&1&&t(21,I=f==null?null:f.map(r=>"video"in r?{video:r.video,caption:r.caption}:"image"in r?{image:r.image,caption:r.caption}:{})),n.$$.dirty[0]&2097152|n.$$.dirty[1]&288)if(I&&m&&ce){const r=I.length;Array.isArray(m)?t(25,re=m.map(M=>Math.min(M,r))):t(25,re=Math.min(m,r))}else t(25,re=m);n.$$.dirty[0]&3|n.$$.dirty[1]&1600&&(Fl(me,f)||(ne?(t(1,_=c&&(f!=null&&f.length)?0:null),t(40,ne=!1)):_!==null&&f!==null?t(1,_=Math.max(0,Math.min(_,f.length-1))):t(1,_=null),Z("change"),t(41,me=f))),n.$$.dirty[0]&2097154|n.$$.dirty[1]&2048&&_!==he&&(t(42,he=_),_!==null&&(I!=null&&t(1,_=Math.max(0,Math.min(_,I.length-1))),Z("select",{index:_,value:I==null?void 0:I[_]}))),n.$$.dirty[0]&2097154&&(e=((_??0)+((I==null?void 0:I.length)??0)-1)%((I==null?void 0:I.length)??0)),n.$$.dirty[0]&2097154&&(o=((_??0)+1)%((I==null?void 0:I.length)??0)),n.$$.dirty[0]&66&&h&&xe(_),n.$$.dirty[0]&2097154&&t(30,i=_!=null&&I!=null?I[_]:null),n.$$.dirty[0]&2097152&&ie(),n.$$.dirty[0]&4194304&&J&&ie()},[f,_,a,u,s,w,h,b,y,k,p,z,T,v,F,Q,Y,L,te,ke,ve,I,J,ye,_e,re,$,Te,ze,ge,i,Z,Ee,$e,Ie,Be,m,c,C,ce,ne,me,he,el,ll,tl,nl,il,ol,rl,fl,al,ul,sl,cl,_l,ml,hl,gl,dl]}class pt extends bl{constructor(l){super(),pl(this,l,tt,lt,wl,{show_label:2,label:3,value:0,columns:36,rows:4,height:5,preview:37,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9,i18n:10,selected_index:1,interactive:11,_fetch:38,mode:12,show_fullscreen_button:13,display_icon_button_wrapper_top_corner:14,fullscreen:15,root:16,file_types:17,max_file_size:18,upload:19,stream_handler:20,fit_columns:39},null,[-1,-1,-1])}}export{pt as default};
//# sourceMappingURL=Gallery.DeECI6vq.js.map
