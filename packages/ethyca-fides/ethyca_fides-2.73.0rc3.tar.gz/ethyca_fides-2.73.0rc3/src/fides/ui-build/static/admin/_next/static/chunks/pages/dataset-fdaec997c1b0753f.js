(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8473],{64902:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset",function(){return s(91949)}])},84306:function(e,t,s){"use strict";s.d(t,{V:function(){return l}});var a=s(24246),i=s(87949);let l=()=>{let e=(0,i.pmc)();return{errorAlert:(t,s,l)=>{let n={...l,position:(null==l?void 0:l.position)||"top",render:e=>{let{onClose:l}=e;return(0,a.jsxs)(i.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,a.jsx)(i.zMQ,{}),(0,a.jsxs)(i.xuv,{children:[s&&(0,a.jsx)(i.CdC,{children:s}),(0,a.jsx)(i.XaZ,{children:t})]}),(0,a.jsx)(i.PZ7,{onClick:l,position:"relative",right:0,size:"sm",top:-1})]})}};(null==l?void 0:l.id)&&e.isActive(l.id)?e.update(l.id,n):e(n)},successAlert:(t,s,l)=>{let n={...l,position:(null==l?void 0:l.position)||"top",render:e=>{let{onClose:l}=e;return(0,a.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,a.jsx)(i.zMQ,{}),(0,a.jsxs)(i.xuv,{children:[s&&(0,a.jsx)(i.CdC,{children:s}),(0,a.jsx)(i.XaZ,{children:t})]}),(0,a.jsx)(i.PZ7,{onClick:l,position:"relative",right:0,size:"sm",top:-1})]})}};(null==l?void 0:l.id)&&e.isActive(l.id)?e.update(l.id,n):e(n)}}}},8133:function(e,t,s){"use strict";var a=s(24246),i=s(87949);t.Z=e=>{let{title:t,children:s,isOpen:l,onClose:n,modalContentProps:r,showCloseButton:o=!1,footer:d,...u}=e;return(0,a.jsxs)(i.u_l,{isOpen:l,onClose:n,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...u,children:[(0,a.jsx)(i.ZAr,{}),(0,a.jsxs)(i.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",...r,children:[o&&(0,a.jsx)(i.olH,{}),(0,a.jsx)(i.xBx,{p:0,children:(0,a.jsx)(i.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,a.jsx)(i.X6q,{as:"h3",size:"sm",children:t})})}),(0,a.jsx)(i.fef,{pb:4,overflow:"auto",children:s}),d&&(0,a.jsx)(i.mzw,{children:d})]})]})}},39715:function(e,t,s){"use strict";var a=s(24246),i=s(87949);s(27378),t.Z=e=>{let{isEmptyState:t,yamlError:s}=e;return(0,a.jsx)(i.Rg9,{in:!0,children:(0,a.jsxs)(i.xuv,{w:"fit-content",bg:"white",p:3,borderRadius:3,children:[(0,a.jsxs)(i.Ugi,{children:[(0,a.jsx)(i.X6q,{as:"h5",color:"gray.700",size:"xs",children:"YAML"}),(0,a.jsx)(i.Vp9,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,a.jsx)(i.xuv,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,a.jsxs)(i.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,a.jsx)(i.f9v,{}),t&&(0,a.jsxs)(i.xuv,{children:[(0,a.jsx)(i.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,a.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:"Yaml system is required"})]}),s&&(0,a.jsxs)(i.xuv,{children:[(0,a.jsx)(i.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,a.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:s.message}),(0,a.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:s.reason}),(0,a.jsxs)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:["Ln ",(0,a.jsx)("b",{children:s.mark.line}),", Col"," ",(0,a.jsx)("b",{children:s.mark.column}),", Pos"," ",(0,a.jsx)("b",{children:s.mark.position})]})]})]})})]})})}},41207:function(e,t,s){"use strict";s.d(t,{F:function(){return n},M:function(){return l}});var a=s(76649),i=s(65218);let l=s.n(i)()(()=>s.e(7088).then(s.bind(s,57088)).then(e=>e.default),{loadableGenerated:{webpack:()=>[57088]},ssr:!1}),n=e=>(0,a.Ln)({name:"string"},e)&&"YAMLException"===e.name},56026:function(e,t,s){"use strict";s.d(t,{QL:function(){return l},du:function(){return i},tz:function(){return a}});let a={name:{tooltip:"A UI-friendly label for the Dataset."},description:{tooltip:"A human-readable description of the Dataset."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."}},i={description:{tooltip:"A human-readable description of the collection."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."}},l={description:{tooltip:"A human-readable description of the field."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."}}},91949:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(24246),i=s(92222),l=s(59003),n=s(87949),r=s(79894),o=s.n(r),d=s(86677),u=s(27378),c=s(16125),h=s(32885),p=s(65735);let f=e=>{let{resourceType:t,fidesKeys:s,skip:a}=e,[i,l]=(0,u.useState)(!0),n=(0,h.Wm)({resource_type:t,fides_keys:s},{skip:a,pollingInterval:i?3e3:void 0}),r=!!n.data&&n.data.every(e=>e.status===p.Wg.COMPLETE||e.status===p.Wg.FAILED||e.status===p.Wg.REVIEWED);return(0,u.useEffect)(()=>{r&&l(!1)},[r]),{...n,isClassificationFinished:r}};var m=s(25980),x=s(77213),g=s(77830),b=s(58754),j=s(47935),y=s(20386),_=s(79806),v=s(812),C=s(46628),k=s(8133),w=s(84306),S=s(66527),z=s(41207),A=s(39715),E=s(41966),P=e=>{let{data:t=[],isSubmitting:s=!1,onCancel:i,onSubmit:l,disabled:r,isLoading:o,onChange:d}=e,c=(0,u.useRef)(null),{errorAlert:h}=(0,w.V)(),p=t.length>0?S.ZP.dump(t):void 0,[f,m]=(0,u.useState)(void 0),[x,g]=(0,u.useState)(!1),[b,j]=(0,u.useState)(!p),{data:y}=(0,E.LH)({minimal:!0}),[_,v]=(0,u.useState)([]),C=e=>{S.ZP.load(e,{json:!0}),m(void 0)},k=()=>{if(y&&y.length){let e=c.current.getValue();v(y.filter(t=>e.includes("fides_key: ".concat(t.fides_key,"\n"))).map(e=>e.fides_key))}},P=r||b||!x||!!f||s;return(0,a.jsxs)(n.kCb,{gap:"97px",children:[(0,a.jsxs)(n.gCW,{align:"stretch",w:"800px",children:[(0,a.jsx)(z.M,{defaultLanguage:"yaml",defaultValue:p,height:"calc(100vh - 526px)",onChange:e=>{try{g(!0),C(e),j(!e||""===e.trim());let t=S.ZP.load(e||"",{json:!0});Array.isArray(t)?d(t[0]):d(t),k()}catch(e){(0,z.F)(e)?m(e):h("Could not parse the supplied YAML")}},onMount:(e,t)=>{c.current=e,c.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!1},readOnly:r},theme:"light"}),_.length>0?(0,a.jsxs)(n.xvT,{children:["You are about to overwrite the dataset",_.length>1?"s":""," ",_.map((e,t)=>{let s=t===_.length-1;return(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(n.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:e}),s?".":", "]},e)})]}):null,(0,a.jsx)(n.mzw,{children:(0,a.jsxs)("div",{className:"flex w-full justify-end gap-4",children:[i&&(0,a.jsx)(n.wpx,{onClick:i,"data-testid":"cancel-btn",disabled:o,children:"Cancel"}),(0,a.jsx)(n.wpx,{type:"primary",onClick:()=>{null==l||l(),null==i||i()},"data-testid":"continue-btn",disabled:P,loading:s||o,children:"Confirm"})]})})]}),x&&(b||f)&&(0,a.jsx)(A.Z,{isEmptyState:b,yamlError:f})]})},D=e=>{let{isOpen:t,onClose:s,title:i,isLoading:l,returnFocusOnClose:r,isDatasetSelected:o,dataset:d,onChange:u,onSubmit:c}=e;return(0,a.jsx)(k.Z,{isOpen:t,onClose:s,size:"3xl",returnFocusOnClose:null==r||r,isCentered:!0,title:null!=i?i:"Edit Dataset",children:(0,a.jsx)(n.xuv,{"data-testid":"yaml-editor-section",children:(0,a.jsx)(P,{data:d?[d]:[],onSubmit:c,isSubmitting:!1,disabled:o,onChange:u,isLoading:l,onCancel:s})})})},O=s(34090),R=s(40324),T=s(56026);let M="edit-field-drawer";var Z=e=>{var t,s;let{values:i,onSubmit:l}=e,r={name:null!==(t=i.name)&&void 0!==t?t:"",description:null!==(s=i.description)&&void 0!==s?s:"",data_categories:i.data_categories};return(0,a.jsx)(O.J9,{initialValues:r,onSubmit:e=>{l({...e,data_categories:i.data_categories||[]})},children:(0,a.jsx)(O.l0,{id:M,children:(0,a.jsxs)(n.Kqy,{spacing:"3",children:[(0,a.jsx)(R.j0,{name:"name",label:"Name",tooltip:T.tz.name.tooltip,"data-testid":"name-input",variant:"block"}),(0,a.jsx)(R.j0,{name:"description",label:"Description",tooltip:T.tz.description.tooltip,"data-testid":"description-input",variant:"block"})]})})})},L=e=>{let{dataset:t,isOpen:s,onClose:i}=e,[l,{isLoading:r}]=(0,y.TG)(),[o]=(0,y.QY)(),c=(0,d.useRouter)(),h=(0,n.pmc)(),{isOpen:p,onOpen:f,onClose:m}=(0,n.qY0)(),{isOpen:x,onOpen:g,onClose:b}=(0,n.qY0)(),[j,k]=(0,u.useState)(void 0),w=async e=>{let s={...t,...e};try{let e=await l(s);(0,v.D4)(e)?h((0,C.Vo)((0,v.e$)(e.error))):h((0,C.t5)("Successfully modified dataset"))}catch(e){h((0,C.Vo)(e))}i()},S=async()=>{let{fides_key:e}=t,s=await o(e);(0,v.D4)(s)?h((0,C.Vo)((0,v.e$)(s.error))):h((0,C.t5)("Successfully deleted dataset")),(0,y.Zl)(void 0),c.push("/dataset"),i(),m()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(_.ZP,{isOpen:s,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:(0,a.jsx)(_.zR,{title:"Edit: ".concat(null==t?void 0:t.name)}),footer:(0,a.jsx)(_.Gn,{onClose:i,onDelete:f,onEditYaml:()=>g(),formId:M}),children:[(0,a.jsx)(D,{isOpen:x,onClose:b,onChange:k,onSubmit:()=>w(j),title:"Edit dataset YAML",isLoading:r,isDatasetSelected:!1,dataset:t}),(0,a.jsx)(Z,{values:t,onSubmit:w})]}),(0,a.jsx)(n.cVQ,{isOpen:p,onClose:m,onConfirm:S,title:"Delete Dataset",message:(0,a.jsxs)(n.xvT,{children:["You are about to permanently delete the dataset named"," ",(0,a.jsx)(n.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name}),". Are you sure you would like to continue?"]})})]})};let V=(0,i.Cl)(),W={items:[],total:0,page:1,size:25,pages:1},I=()=>(0,a.jsx)(n.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,a.jsxs)(n.gCW,{children:[(0,a.jsx)(n.xvT,{fontSize:"md",fontWeight:"600",children:"No datasets found."}),(0,a.jsx)(n.xvT,{fontSize:"sm",children:'Click "Create new dataset" to add your first dataset to Fides.'})]})});var F=()=>{let e=(0,c.I0)(),t=(0,d.useRouter)(),[s,r]=(0,u.useState)(!1),[h,_]=(0,u.useState)(),{PAGE_SIZES:v,pageSize:C,setPageSize:k,onPreviousPageClick:w,isPreviousPageDisabled:S,onNextPageClick:z,isNextPageDisabled:A,startRange:E,endRange:P,pageIndex:D,setTotalPages:O,resetPageIndexToDefault:R}=(0,j.oi)(),[T,M]=(0,u.useState)(),Z=(0,u.useCallback)(e=>{R(),M(e)},[R,M]),{data:F,isLoading:N,isFetching:Y}=(0,y.rt)({page:D,size:C,search:T,exclude_saas_datasets:!0}),{items:G,total:q,pages:X}=(0,u.useMemo)(()=>null!=F?F:W,[F]);(0,u.useEffect)(()=>{O(X)},[X,O]);let H=(0,u.useCallback)(s=>{e((0,y.Zl)(s.fides_key)),t.push({pathname:g.o5,query:{datasetId:encodeURIComponent(s.fides_key)}})},[e,t]),Q=(0,m.hz)();f({resourceType:p.j.DATASETS,skip:!Q.plus});let U=(0,u.useMemo)(()=>[V.accessor(e=>e.name,{id:"name",cell:e=>(0,a.jsx)(j.G3,{value:e.getValue(),fontWeight:"semibold"}),header:e=>(0,a.jsx)(j.Rr,{value:"Dataset Name",...e}),size:180}),V.accessor(e=>e.fides_key,{id:"fides_key",cell:e=>(0,a.jsx)(j.G3,{value:e.getValue()}),header:e=>(0,a.jsx)(j.Rr,{value:"Fides Key",...e}),size:150}),V.accessor(e=>e.description,{id:"description",cell:e=>(0,a.jsx)(j.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,a.jsx)(j.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),V.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,s=t.original;return(0,a.jsx)(n.Ugi,{spacing:0,"data-testid":"dataset-".concat(s.fides_key),children:(0,a.jsx)(n.wpx,{size:"small",icon:(0,a.jsx)(n.dY8,{}),onClick:()=>{_(s),r(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})].filter(Boolean),[]),B=(0,l.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:U,data:G,columnResizeMode:"onChange"});return(0,a.jsx)(x.Z,{title:"Datasets",children:(0,a.jsxs)(n.xuv,{"data-testid":"system-management",children:[(0,a.jsx)(b.Z,{heading:"Datasets",breadcrumbItems:[{title:"All datasets"}],rightContent:(0,a.jsx)(o(),{href:"/dataset/new",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(n.wpx,{"data-testid":"create-dataset-btn",children:"+ Add dataset"})})}),N?(0,a.jsx)(j.I4,{rowHeight:36,numRows:15}):(0,a.jsxs)(n.xuv,{"data-testid":"dataset-table",children:[(0,a.jsx)(j.Q$,{children:(0,a.jsx)(j.HO,{globalFilter:T,setGlobalFilter:Z,placeholder:"Search",testid:"dataset-search"})}),(0,a.jsx)(j.ZK,{tableInstance:B,emptyTableNotice:(0,a.jsx)(I,{}),onRowClick:H})]}),(0,a.jsx)(j.s8,{totalRows:q||0,pageSizes:v,setPageSize:k,onPreviousPageClick:w,isPreviousPageDisabled:S||Y,onNextPageClick:z,isNextPageDisabled:A||Y,startRange:E,endRange:P}),(0,a.jsx)(L,{dataset:h,isOpen:s,onClose:()=>{_(void 0),r(!1)}})]})})}},76737:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return r},noSSR:function(){return n}});let a=s(51538);s(24246),s(27378);let i=a._(s(21887));function l(e){return{default:(null==e?void 0:e.default)||e}}function n(e,t){return delete t.webpack,delete t.modules,e(t)}function r(e,t){let s=i.default,a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a={...a,...e});let r=(a={...a,...t}).loader;return(a.loadableGenerated&&(a={...a,...a.loadableGenerated},delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?s({...a,loader:()=>null!=r?r().then(l):Promise.resolve(l(()=>null))}):(delete a.webpack,delete a.modules,n(s,a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},28438:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return a}});let a=s(51538)._(s(27378)).default.createContext(null)},21887:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});let a=s(51538)._(s(27378)),i=s(28438),l=[],n=[],r=!1;function o(e){let t=e(),s={loading:!0,loaded:null,error:null};return s.promise=t.then(e=>(s.loading=!1,s.loaded=e,e)).catch(e=>{throw s.loading=!1,s.error=e,e}),s}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),l=null;function o(){if(!l){let t=new d(e,s);l={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return l.promise()}if(!r){let e=s.webpack?s.webpack():s.modules;e&&n.push(t=>{for(let s of e)if(t.includes(s))return o()})}function u(e,t){!function(){o();let e=a.default.useContext(i.LoadableContext);e&&Array.isArray(s.modules)&&s.modules.forEach(t=>{e(t)})}();let n=a.default.useSyncExternalStore(l.subscribe,l.getCurrentValue,l.getCurrentValue);return a.default.useImperativeHandle(t,()=>({retry:l.retry}),[]),a.default.useMemo(()=>{var t;return n.loading||n.error?a.default.createElement(s.loading,{isLoading:n.loading,pastDelay:n.pastDelay,timedOut:n.timedOut,error:n.error,retry:l.retry}):n.loaded?a.default.createElement((t=n.loaded)&&t.default?t.default:t,e):null},[e,n])}return u.preload=()=>o(),u.displayName="LoadableComponent",a.default.forwardRef(u)}(o,e)}function c(e,t){let s=[];for(;e.length;){let a=e.pop();s.push(a(t))}return Promise.all(s).then(()=>{if(e.length)return c(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{c(l).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let s=()=>(r=!0,t());c(n,e).then(s,s)})),window.__NEXT_PRELOADREADY=u.preloadReady;let h=u},65218:function(e,t,s){e.exports=s(76737)}},function(e){e.O(0,[6527,3772,2888,9774,179],function(){return e(e.s=64902)}),_N_E=e.O()}]);