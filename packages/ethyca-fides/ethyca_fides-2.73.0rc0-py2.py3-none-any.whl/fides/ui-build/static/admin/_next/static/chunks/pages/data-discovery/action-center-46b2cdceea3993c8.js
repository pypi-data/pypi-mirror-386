(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,n){var i=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),s=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,u,d,g,p,m=0,f=!1,h=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=l,i=c;return l=c=void 0,m=t,d=e.apply(i,n)}function v(e){var n=e-p,i=e-m;return void 0===p||n>=t||n<0||h&&i>=u}function j(){var e,n,i,a=s();if(v(a))return C(a);g=setTimeout(j,(e=a-p,n=a-m,i=t-e,h?o(i,u-n):i))}function C(e){return(g=void 0,x&&l)?y(e):(l=c=void 0,d)}function _(){var e,n=s(),i=v(n);if(l=arguments,c=this,p=n,i){if(void 0===g)return m=e=p,g=setTimeout(j,t),f?y(e):d;if(h)return clearTimeout(g),g=setTimeout(j,t),y(p)}return void 0===g&&(g=setTimeout(j,t)),d}return t=a(t)||0,i(n)&&(f=!!n.leading,u=(h="maxWait"in n)?r(a(n.maxWait)||0,t):u,x="trailing"in n?!!n.trailing:x),_.cancel=function(){void 0!==g&&clearTimeout(g),m=0,l=p=c=g=void 0},_.flush=function(){return void 0===g?d:C(s())},_}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var i=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==i(e)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},91936:function(e,t,n){var i=n(74833),s=n(11611),a=n(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?r:+e}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(22627)}])},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(24246),s=n(87949),a=n(88038),r=n.n(a),o=n(86677);n(27378);var l=n(25980),c=n(90867),u=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:a=!0,mainProps:d}=e,p=(0,l.hz)(),m=(0,o.useRouter)(),f="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,h=!(p.flags.messagingConfiguration&&f),{data:x}=(0,u.JE)(void 0,{skip:h}),{data:y}=(0,c.PW)(void 0,{skip:h}),v=p.flags.messagingConfiguration&&(!x||!y)&&f;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[v?(0,i.jsx)(g,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var i=n(24246),s=n(87949),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:o,rightContent:l,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.lQT,{className:n||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,i.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),s=n(87949),a=n(79894),r=n.n(a),o=n(27378);let{Text:l}=s.AntTypography,c=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,i.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,i.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,i.jsx)(s.zrq,{items:a,...n})}},14908:function(e,t,n){"use strict";var i=n(86677),s=n(27378);let a=e=>e.startsWith("#")?e.slice(1):e;t.Z=e=>{let{tabKeys:t,initialTab:n}=e,r=(0,i.useRouter)(),o=r.asPath.split("#")[1]||t[0],[l,c]=(0,s.useState)(o);return(0,s.useEffect)(()=>{n&&t.includes(n)&&c(n)},[n,t,r.isReady]),{activeTab:l,onTabChange:(0,s.useCallback)(async e=>{if(!t.includes(e)){await r.replace({pathname:r.pathname,query:r.query,hash:void 0}),c(t[0]);return}r.isReady&&(await r.replace({pathname:r.pathname,query:r.query,hash:a(e)},void 0,{shallow:!0}),c(e))},[r,t]),setActiveTab:c}}},54762:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(24246),s=n(87949),a=n(62165),r=n(65735);let o=e=>{let{consentStatus:t}=e,{flags:n}=(0,a.hz)(),{assetConsentStatusLabels:o}=n;return o&&(null==t?void 0:t.status)===r.pF.ALERT?(0,i.jsx)(s.esZ,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,i.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,i.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return c},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return p},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return u}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},22627:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var i,s,a=n(24246),r=n(87949),o=n(79894),l=n.n(o),c=n(27378),u=n(30952),d=n(25980),g=n(77213),p=n(77830),m=n(58754),f=n(47935),h=n(7426),x=n(37059),y=n(16394),v=n(17245),j=n(67359);let C=()=>{let{pageIndex:e,pageSize:t,updatePageIndex:n,showSizeChanger:i}=(0,v.h0)({defaultPageSize:20,showSizeChanger:!1}),{searchQuery:s,updateSearch:o}=(0,v.Rx)(),l=(0,c.useMemo)(()=>[j.n.PENDING,j.n.IN_PROCESSING,j.n.PAUSED,j.n.RETRYING,j.n.ERROR],[]),[u,d]=(0,c.useState)(l),[g,p]=(0,c.useState)(!1),[m,f]=(0,c.useState)(l),[h,y]=(0,c.useState)(!1),C=(0,c.useCallback)(e=>{o(e),n(1)},[o,n]),_=(0,c.useCallback)(e=>{f(e)},[]),b=(0,c.useCallback)(e=>{y(e)},[]),k=(0,c.useCallback)(()=>{d(m),p(h),n(1)},[m,h,n]),w=(0,c.useCallback)(()=>{f(l),y(!1),d(l),p(!1),n(1)},[l,n]),N=[j.n.PENDING,j.n.IN_PROCESSING,j.n.COMPLETE,j.n.ERROR,j.n.PAUSED,j.n.RETRYING,j.n.SKIPPED],{data:E,isLoading:T,isFetching:S}=(0,x.$h)({page:e,size:t,search:s,statuses:u.length>0?u:void 0,return_dismissed:g},{pollingInterval:3e3,refetchOnFocus:!0,refetchOnReconnect:!0});return{searchQuery:s,updateSearch:C,statusFilters:m,updateStatusFilters:_,showDismissed:h,updateShowDismissed:b,applyFilters:k,resetAndApplyFilters:w,availableStatuses:N,listProps:(0,c.useMemo)(()=>({dataSource:(null==E?void 0:E.items)||[],loading:T,locale:{emptyText:(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"No tasks in progress"})},pagination:{current:e,pageSize:t,total:null==E?void 0:E.total,showSizeChanger:i,showQuickJumper:!1,onChange:e=>n(e)}}),[null==E?void 0:E.items,null==E?void 0:E.total,T,e,t,i,n]),isLoading:T,isFetching:S}};var _=n(10969),b=n(60145),k=n(11558),w=n(70641),N=n(7317),E=n(85302),T=n(64892);function S(e,t,n){let i;let s=(0,b.j)(),a=n?.locale??s.locale??_._,r=(0,E.U)(e,t);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:r}),[l,c]=(0,N.d)(n?.in,...r>0?[t,e]:[e,t]),u=(0,k.u)(n?.roundingMethod??"round"),d=c.getTime()-l.getTime(),g=d/T.yJ,p=(d-((0,w.D)(c)-(0,w.D)(l)))/T.yJ,m=n?.unit;if("second"===(i=m||(g<1?"second":g<60?"minute":g<T.H_?"hour":p<T.fH?"day":p<T.UU?"month":"year"))){let e=u(d/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===i){let e=u(g);return a.formatDistance("xMinutes",e,o)}if("hour"===i){let e=u(g/60);return a.formatDistance("xHours",e,o)}if("day"===i){let e=u(p/T.H_);return a.formatDistance("xDays",e,o)}if("month"===i){let e=u(p/T.fH);return 12===e&&"month"!==m?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=u(p/T.UU);return a.formatDistance("xYears",e,o)}}var I=n(41337),P=n(65735);let{Text:R,Title:M}=r.AntTypography,A=e=>"paused"===e?"Awaiting Processing":e.split("_").map(y.kC).join(" "),O=e=>{var t,n,i,s,o,l,c,u,d,g;let{task:p,...m}=e,f=(0,r.pmc)(),[h,{isLoading:y}]=(0,x.mL)(),[v,{isLoading:j}]=(0,x.QC)(),C=!!p.dismissed,_="error"===p.status&&p.action_type!==P.K8.DETECTION,{data:b}=(0,x.Ud)({page:1,size:1e3}),k=p.monitor_config_id?null==b?void 0:null===(t=b.items)||void 0===t?void 0:t.find(e=>e.key===p.monitor_config_id):void 0,w=k?(0,I.AZ)({connection_type:k.connection_type,name:null!==(s=k.name)&&void 0!==s?s:null,key:null!==(o=k.key)&&void 0!==o?o:null,saas_config:k.saas_config?{type:null!==(l=k.saas_config.type)&&void 0!==l?l:null,name:null!==(c=k.saas_config.name)&&void 0!==c?c:null,fides_key:null!==(u=k.saas_config.fides_key)&&void 0!==u?u:null}:null,secrets:(null===(i=k.secrets)||void 0===i?void 0:i.url)?{url:k.secrets.url}:null}):p.connection_type?(0,I.AZ)({connection_type:p.connection_type,name:null!==(d=p.connection_name)&&void 0!==d?d:p.connection_type?p.connection_type.toString():null,key:null,saas_config:null,secrets:null}):void 0,N=(null===(n=p.staged_resource_urns)||void 0===n?void 0:n.length)||0,E=["pending","in_processing","paused","retrying"].includes((p.status||"").toLowerCase()),T=p.field_count||N,O=(()=>{if(p.action_type===P.K8.CLASSIFICATION||p.action_type===P.K8.LLM_CLASSIFICATION){let e="complete"===p.status?"Classified":"Classifying";return"".concat(e," ").concat(T," ").concat(1===T?"field":"fields")}if(p.action_type===P.K8.DETECTION)return"complete"===p.status?"Monitor scanned":"Monitor scanning";if(p.action_type===P.K8.PROMOTION){let e="complete"===p.status?"Confirmed":"Confirming";return"".concat(e," ").concat(T," ").concat(1===T?"field":"fields")}return p.action_type?p.action_type.replace(/_/g," "):"Task"})(),q=p.monitor_name||"Unknown monitor",D=async()=>{try{await h({taskId:p.id}).unwrap(),f({status:"success",description:"Task retry initiated successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to retry task: ".concat(t)})}},z=async()=>{try{await v({taskId:p.id}).unwrap(),f({status:"success",description:"Task dismissed successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to dismiss task: ".concat(t)})}};return(0,a.jsx)("div",{...m,className:"w-full",children:(0,a.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,a.jsx)(r.JGx,{span:14,className:"align-middle",children:(0,a.jsxs)(r.vyj,{direction:"vertical",size:4,children:[(0,a.jsxs)(r.vyj,{align:"center",size:8,wrap:!0,children:[w&&(0,a.jsx)(I.ZP,{data:w,size:24}),(0,a.jsx)(M,{level:5,className:"m-0",children:O}),!E&&(0,a.jsx)(r.j8w,{color:(e=>{switch(e){case"pending":case"retrying":case"skipped":default:return r.tAb.DEFAULT;case"in_processing":return r.tAb.INFO;case"complete":return r.tAb.SUCCESS;case"error":return r.tAb.ERROR;case"paused":return r.tAb.MARBLE}})(p.status),children:(g=p.status)?A(g):"Unknown"})]}),"error"===p.status&&(0,a.jsx)(r.vyj,{className:"pl-1",children:(0,a.jsx)(R,{type:"secondary",size:"sm",children:p.message||"Unknown error"})})]})}),(0,a.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,a.jsx)(R,{type:"secondary",size:"sm",children:q})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:E?(0,a.jsx)(r.ZJQ,{size:"small"}):(0,a.jsx)(R,{type:"secondary",size:"sm",children:S(new Date(p.updated_at),new Date,{addSuffix:!0})})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:"error"===p.status&&(0,a.jsxs)(r.vyj,{size:0,split:(0,a.jsx)(r.htM,{type:"vertical"}),children:[_&&(0,a.jsx)(r.wpx,{type:"link",size:"small",loading:y,onClick:D,className:"p-0",children:"Retry"}),!C&&(0,a.jsx)(r.wpx,{type:"link",size:"small",loading:j,onClick:z,className:"p-0",children:"Dismiss"})]})})]})})},q=e=>"paused"===e?"Awaiting Processing":e.split("_").map(y.kC).join(" "),D=()=>{let[e,t]=(0,c.useState)(!1),{searchQuery:n,updateSearch:i,statusFilters:s,updateStatusFilters:o,showDismissed:l,updateShowDismissed:d,applyFilters:g,resetAndApplyFilters:p,availableStatuses:m,listProps:f}=C(),h=(0,c.useCallback)(e=>{o(e)},[o]),x=(0,c.useCallback)(()=>{g(),t(!1)},[g]),y=(0,c.useCallback)(()=>{p(),t(!1)},[p]),v=(0,a.jsxs)(r.jqI,{vertical:!0,className:"min-w-[220px]",children:[(0,a.jsxs)(r.jqI,{vertical:!0,className:"gap-1.5 px-4 py-2",children:[(0,a.jsx)(r.E_O.Group,{value:s,onChange:h,className:"flex flex-col gap-1.5",children:m.map(e=>(0,a.jsx)(r.E_O,{value:e,children:q(e)},e))}),(0,a.jsx)(r.E_O,{checked:l,onChange:e=>d(e.target.checked),children:"Dismissed"})]}),(0,a.jsx)(r.htM,{className:"m-0"}),(0,a.jsxs)(r.jqI,{justify:"space-between",className:"px-4 py-2",children:[(0,a.jsx)(r.wpx,{size:"small",type:"text",onClick:y,className:"-ml-2",children:"Reset"}),(0,a.jsx)(r.wpx,{size:"small",type:"primary",onClick:x,children:"Apply"})]})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,a.jsx)("div",{className:"min-w-[300px]",children:(0,a.jsx)(u.f,{value:null!=n?n:"",onChange:i,placeholder:"Search by monitor name..."})}),(0,a.jsx)(r.bPF,{content:v,trigger:"click",placement:"bottomRight",open:e,onOpenChange:t,children:(0,a.jsx)(r.wpx,{icon:(0,a.jsx)(r.PJP._ME,{}),iconPosition:"end",children:"Filter"})})]}),(0,a.jsx)(r.krs,{...f,renderItem:e=>(0,a.jsx)(r.krs.Item,{children:(0,a.jsx)(O,{task:e})})})]})},z=e=>{let{isConfigLoading:t}=e;return(0,a.jsx)(g.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,a.jsx)(r.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,a.jsx)(r.$jN,{color:"primary.900"}):(0,a.jsx)(r.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},U=()=>(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,a.jsx)(l(),{href:p.KH,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"primary",children:"Visit integrations"})})});var F=n(14908);(i=s||(s={})).ATTENTION_REQUIRED="attention-required",i.IN_PROGRESS="in-progress";var L=()=>{let{flags:e}=(0,d.hz)(),t=!!e.alphaFullActionCenter,n=(0,c.useMemo)(()=>t?Object.values(s):["attention-required"],[t]),{activeTab:i,onTabChange:a}=(0,F.Z)({tabKeys:n});return{tabs:(0,c.useMemo)(()=>{let e=[{label:"Attention required",hash:"attention-required"}];return t&&e.push({label:"Activity",hash:"in-progress"}),e},[t]),activeTab:i,onTabChange:a}},G=n(54762),J=n(42905),K=n.n(J),B=n(98145);let Z=e=>{let{updates:t,isAssetList:n}=e,i=e=>{var t;return null!==(t=B.v8.get(e))&&void 0!==t?t:e},s=(0,c.useMemo)(()=>t?Object.entries(t).filter(e=>{let[t,n]=e;return n>0&&!B.EP.includes(t)}).sort((e,t)=>{let n=B.H6.indexOf(e[0]),i=B.H6.indexOf(t[0]);return -1===n&&-1===i?0:-1===n?1:-1===i?-1:n-i}).map(e=>{let[t,s]=e;return"".concat((0,y.pF)(s)," ").concat(i(t)).concat(n&&1!==s?"s":"")}):[],[t,n]);if(!t)return null;if(n){let e=s.join(", ");return(0,a.jsxs)("span",{children:[e," detected."]})}let r=s.join(", ");return(0,a.jsx)("span",{children:r})};var W=n(71985);let{Text:H}=r.AntTypography,Q={[W.w.WEBSITE]:"asset",[W.w.DATASTORE]:"field",[W.w.INFRASTRUCTURE]:"system"},Y=e=>{let{monitorSummary:t,showSkeleton:n,href:i,...s}=e,{name:o,consent_status:c,total_updates:u,updates:d,last_monitored:g,secrets:p,key:m,connection_type:f,saas_config:h,monitorType:x,isTestMonitor:v}=t,j=g?(0,y.p6)(new Date(g)):void 0,C=g?S(new Date(g),new Date,{addSuffix:!0}):void 0,_=Q[x];return(0,a.jsx)(r.krs.Item,{"data-testid":"monitor-result-".concat(m),...s,children:(0,a.jsx)(r.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,a.jsxs)(r.bue,{gutter:{xs:6,lg:12},className:"w-full",children:[(0,a.jsx)(r.JGx,{span:18,className:"align-middle",children:(0,a.jsx)(r.krs.Item.Meta,{avatar:(0,a.jsx)(I.ZP,{data:{kind:I.hY.CONNECTION,connectionType:f,name:o,key:m,saasType:null==h?void 0:h.type,websiteUrl:null==p?void 0:p.url}}),title:(0,a.jsxs)(r.jqI,{align:"center",gap:4,className:K()["monitor-result__title"],children:[(0,a.jsx)(l(),{href:i,"data-testid":"monitor-link",children:o}),(0,a.jsxs)(H,{type:"secondary",children:[(0,y.pF)(u)," ",_,1===u?"":"s"]}),c&&(0,a.jsx)(G.l,{consentStatus:c}),v&&(0,a.jsx)(r.j8w,{color:"nectar",children:"test monitor"})]}),description:!!d&&(0,a.jsx)(Z,{updates:d,isAssetList:x===W.w.WEBSITE})})}),(0,a.jsx)(r.JGx,{span:6,className:"flex items-center justify-end",children:!!C&&(0,a.jsx)(r.esZ,{title:j,children:(0,a.jsxs)(H,{type:"secondary","data-testid":"monitor-date",children:[(0,a.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),C]})})})]})})})};var $=()=>{var e,t;let n=(0,r.pmc)(),{tabs:i,activeTab:o,onTabChange:y}=L(),{flags:v}=(0,d.hz)(),{PAGE_SIZES:j,pageSize:C,setPageSize:_,onPreviousPageClick:b,isPreviousPageDisabled:k,onNextPageClick:w,isNextPageDisabled:N,startRange:E,endRange:T,pageIndex:S,setTotalPages:I,resetPageIndexToDefault:P}=(0,f.oi)(),[R,M]=(0,c.useState)(""),{data:A,isLoading:O}=(0,h.tB)({api_set:!1}),q=!!(null==A?void 0:null===(e=A.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,c.useEffect)(()=>{P()},[R,P]);let{data:F,isError:G,isLoading:J,isFetching:K}=(0,x.Ud)({page:S,size:C,search:R},{skip:O||!q});(0,c.useEffect)(()=>{G&&n&&q&&n({title:"Error fetching data",description:"Please try again later",status:"error"})},[G,n,q]),(0,c.useEffect)(()=>{if(F){var e;I(null!==(e=F.total)&&void 0!==e?e:1)}},[F,I]);let B=(null==F?void 0:null===(t=F.items)||void 0===t?void 0:t.flatMap(e=>e.key&&void 0!==e.key?[e]:[]).filter(e=>v.alphaFullActionCenter||e.monitorType===W.w.WEBSITE))||[],Z=K?Array.from({length:C},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],H=(0,c.useCallback)((e,t)=>[(0,a.jsx)(l(),{href:null!=t?t:"",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return q?(0,a.jsxs)(g.Z,{title:"Action center",children:[(0,a.jsx)(m.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,a.jsx)(r.Niu,{"aria-label":"Action center tabs",mode:"horizontal",items:i.map(e=>({key:e.hash,label:e.label})),selectedKeys:[o],onClick:async e=>{let t=Object.values(s).find(t=>t===e.key);t&&await y(t)},className:"mb-4","data-testid":"action-center-tabs"}),o===s.IN_PROGRESS?(0,a.jsx)(D,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.jqI,{className:"justify-between py-6",children:(0,a.jsx)(u.f,{value:R,onChange:M})}),(0,a.jsx)(r.krs,{loading:J,dataSource:B||Z,locale:{emptyText:(0,a.jsx)(U,{})},renderItem:e=>{let t=e.key&&e.monitorType?"".concat(p.vi,"/").concat(e.monitorType,"/").concat(e.key):"";return!!(null==e?void 0:e.key)&&(0,a.jsx)(Y,{showSkeleton:K,monitorSummary:e,href:t,actions:H(e.key,t)},e.key)}}),!!B&&!!(null==F?void 0:F.total)&&F.total>C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.htM,{className:"mb-6 mt-0"}),(0,a.jsx)(f.s8,{totalRows:(null==F?void 0:F.total)||0,pageSizes:j,setPageSize:_,onPreviousPageClick:b,isPreviousPageDisabled:k||K,onNextPageClick:w,isNextPageDisabled:N||K,startRange:E,endRange:T})]})]})]}):(0,a.jsx)(z,{isConfigLoading:O})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}},function(e){e.O(0,[431,7245,3080,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);