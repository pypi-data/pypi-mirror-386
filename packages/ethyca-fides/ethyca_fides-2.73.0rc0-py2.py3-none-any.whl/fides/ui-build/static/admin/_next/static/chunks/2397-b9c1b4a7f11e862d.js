"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2397],{14908:function(e,a,s){var i=s(86677),t=s(27378);let l=e=>e.startsWith("#")?e.slice(1):e;a.Z=e=>{let{tabKeys:a,initialTab:s}=e,r=(0,i.useRouter)(),o=r.asPath.split("#")[1]||a[0],[c,n]=(0,t.useState)(o);return(0,t.useEffect)(()=>{s&&a.includes(s)&&n(s)},[s,a,r.isReady]),{activeTab:c,onTabChange:(0,t.useCallback)(async e=>{if(!a.includes(e)){await r.replace({pathname:r.pathname,query:r.query,hash:void 0}),n(a[0]);return}r.isReady&&(await r.replace({pathname:r.pathname,query:r.query,hash:l(e)},void 0,{shallow:!0}),n(e))},[r,a]),setActiveTab:n}}},69828:function(e,a,s){s.d(a,{Y:function(){return r}});var i=s(24246),t=s(87949),l=s(70788);let r=[(0,i.jsx)(t.PJP.S9g,{},"layers"),(0,i.jsx)(t.PJP.ehp,{},"dataset"),(0,i.jsx)(t.PJP.iA_,{},"table"),(0,i.jsx)(t.PJP.$4y,{style:{transform:"rotate(-90deg)"}},"field")];a.Z=e=>{let{resourceUrn:a,parentLink:s,onPathClick:t=()=>{}}=e,o=[];if(a||o.push({title:"All activity"}),a){o.push({title:"All activity",href:s});let e=a.split(".");e.forEach((a,s)=>{0!==s&&o.push({title:a,icon:r[s-1],onClick:a=>{a.preventDefault(),t(e.slice(0,s+1).join("."))}})})}return(0,i.jsx)(l.m,{"data-testid":"results-breadcrumb",items:o})}},1039:function(e,a,s){s.d(a,{Z:function(){return Z}});var i,t,l=s(24246),r=s(59003),o=s(92222),c=s(87949),n=s(27378),d=s(47935),u=s(70675),h=s(72625),g=s(54409),m=s(79947),x=s(87667),j=s(50169),v=s(28278),p=s(65735),y=s(74241),R=e=>{let{resourceType:a,changeTypeOverride:s}=e,i=(0,o.Cl)(),t=[];return a?a===p.D$.SCHEMA?{columns:[i.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(x.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Name",...e}),size:300}),i.accessor(e=>e.urn,{id:"project",cell:e=>(0,l.jsx)(d.G3,{value:(0,y.Z)(e.getValue())}),header:e=>(0,l.jsx)(d.Rr,{value:"Project",...e})}),i.display({id:"status",cell:e=>(0,l.jsx)(j.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Status",...e})}),i.accessor(e=>e.system,{id:"system",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"System",...e})}),i.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Detected by",...e})}),i.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"When",...e})}),i.display({id:"actions",cell:e=>(0,l.jsx)(g.Z,{ignoreChildActions:s===v.E.MONITORED||s===v.E.MUTED,resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:a===p.D$.TABLE?{columns:[i.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(x.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Table name",...e}),size:300}),i.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(d.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),i.display({id:"status",cell:e=>(0,l.jsx)(j.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Status",...e})}),i.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Detected by",...e})}),i.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"When",...e})}),i.display({id:"actions",cell:e=>(0,l.jsx)(g.Z,{resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:a===p.D$.FIELD?{columns:[i.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(x.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Field name",...e}),size:300}),i.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,l.jsx)(m.Z,{type:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Data type",...e})}),i.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(d.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),i.display({id:"status",cell:e=>(0,l.jsx)(j.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Status",...e})}),i.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Detected by",...e})}),i.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"When",...e})}),i.display({id:"actions",cell:e=>(0,l.jsx)(g.Z,{resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:a===p.D$.ENDPOINT?{columns:[i.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(x.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Object",...e}),size:300}),i.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(d.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),i.display({id:"status",cell:e=>(0,l.jsx)(j.Z,{changeTypeOverride:s,result:e.row.original}),header:e=>(0,l.jsx)(d.Rr,{value:"Status",...e})}),i.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Detected by",...e})}),i.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"When",...e})}),i.display({id:"actions",cell:e=>(0,l.jsx)(g.Z,{resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:{columns:t}:{columns:t}},f=s(14908);(i=t||(t={})).ACTION_REQUIRED="action-required",i.MONITORED="monitored",i.UNMONITORED="unmonitored";let b={"action-required":{label:"Action Required",key:"action-required",filters:[p.LL.ADDITION,p.LL.REMOVAL],childFilters:[p.LL.ADDITION,p.LL.REMOVAL]},monitored:{label:"Monitored",key:"monitored",filters:[p.LL.MONITORED],childFilters:[],changeTypeOverride:v.E.MONITORED},unmonitored:{label:"Unmonitored",key:"unmonitored",filters:[p.LL.MUTED],childFilters:[],changeTypeOverride:v.E.MUTED}};var w=()=>{var e,a,s;let{activeTab:i,onTabChange:l}=(0,f.Z)({tabKeys:Object.values(t)});return{filterTabs:Object.values(b),activeTabKey:i,onTabChange:l,activeDiffFilters:null===(e=b[i])||void 0===e?void 0:e.filters,activeChildDiffFilters:null===(a=b[i])||void 0===a?void 0:a.childFilters,activeChangeTypeOverride:null===(s=b[i])||void 0===s?void 0:s.changeTypeOverride}},D=s(47182),T=s(38347),C=s(7940),O=s(80285),E=s(36168),_=s(30952);let k={items:[],total:0,page:1,size:50,pages:1},P=()=>(0,l.jsx)(c.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,l.jsxs)(c.gCW,{children:[(0,l.jsx)(c.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,l.jsx)(c.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var Z=e=>{let{resourceUrn:a}=e,[s,i]=(0,n.useState)(""),{filterTabs:t,activeTabKey:h,onTabChange:g,activeDiffFilters:m,activeChildDiffFilters:x,activeChangeTypeOverride:j}=w(),{PAGE_SIZES:v,pageSize:y,setPageSize:f,onPreviousPageClick:b,isPreviousPageDisabled:Z,onNextPageClick:M,isNextPageDisabled:I,startRange:N,endRange:A,pageIndex:L,setTotalPages:V,resetPageIndexToDefault:z}=(0,d.oi)();(0,n.useEffect)(()=>{z()},[a,s,z,m,x]);let{isFetching:S,isLoading:G,data:F}=(0,u.z8)({staged_resource_urn:a,page:L,size:y,child_diff_status:x,diff_status:m,search:s}),q=(0,C.G)(null==F?void 0:F.items[0]),{columns:W}=R({resourceType:q,changeTypeOverride:j}),{items:U,total:$,pages:H}=(0,n.useMemo)(()=>null!=F?F:k,[F]);(0,n.useEffect)(()=>{V(H)},[H,V]);let J=(0,n.useMemo)(()=>W,[W]),{navigateToDetectionResults:K}=(0,D.Z)(),Q=(0,r.b7)({getCoreRowModel:(0,o.sC)(),getGroupedRowModel:(0,o.qe)(),getExpandedRowModel:(0,o.rV)(),getRowId:O.Z,columns:J,manualPagination:!0,data:U,columnResizeMode:"onChange"});return G?(0,l.jsx)(d.I4,{rowHeight:36,numRows:36}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A5g,{items:t.map(e=>({key:e.key,label:e.label})),activeKey:h,onChange:e=>g(e)}),(0,l.jsx)(d.Q$,{children:(0,l.jsx)(c.kCb,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"full",children:(0,l.jsxs)(c.kCb,{gap:6,align:"center",children:[(0,l.jsx)(c.xuv,{flexShrink:0,children:(0,l.jsx)(_.f,{value:s,onChange:i})}),(0,l.jsx)(T.a,{})]})})}),(0,l.jsx)(d.ZK,{tableInstance:Q,onRowClick:e=>K({resourceUrn:e.urn,filterTab:h}),getRowIsClickable:e=>q!==p.D$.FIELD||(0,E.Z)(e),emptyTableNotice:(0,l.jsx)(P,{})}),(0,l.jsx)(d.s8,{totalRows:$||0,pageSizes:v,setPageSize:f,onPreviousPageClick:b,isPreviousPageDisabled:Z||S,onNextPageClick:M,isNextPageDisabled:I||S,startRange:N,endRange:A})]})}}}]);