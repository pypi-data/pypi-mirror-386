(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6721],{74833:function(e,t,n){var i=n(56127),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},56632:function(e,t,n){var i=n(89278),r=n(80068),l=n(50098);e.exports=function(e){return function(t,n,a){var o=Object(t);if(!r(t)){var s=i(n,3);t=l(t),n=function(e){return s(o[e],e,o)}}var c=e(t,n,a);return c>-1?o[s?t[c]:c]:void 0}}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),r=n(82846),l=n(91936),a=Math.max,o=Math.min;e.exports=function(e,t,n){var s,c,d,u,p,f,h=0,v=!1,m=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=s,i=c;return s=c=void 0,h=t,u=e.apply(i,n)}function j(e){var n=e-f,i=e-h;return void 0===f||n>=t||n<0||m&&i>=d}function y(){var e,n,i,l=r();if(j(l))return b(l);p=setTimeout(y,(e=l-f,n=l-h,i=t-e,m?o(i,d-n):i))}function b(e){return(p=void 0,g&&s)?x(e):(s=c=void 0,u)}function _(){var e,n=r(),i=j(n);if(s=arguments,c=this,f=n,i){if(void 0===p)return h=e=f,p=setTimeout(y,t),v?x(e):u;if(m)return clearTimeout(p),p=setTimeout(y,t),x(f)}return void 0===p&&(p=setTimeout(y,t)),u}return t=l(t)||0,i(n)&&(v=!!n.leading,d=(m="maxWait"in n)?a(l(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),_.cancel=function(){void 0!==p&&clearTimeout(p),h=0,s=f=c=p=void 0},_.flush=function(){return void 0===p?u:b(r())},_}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),r=n(89278),l=n(47991),a=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return -1;var s=null==n?0:l(n);return s<0&&(s=a(o+s,0)),i(e,r(t,3),s)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},94919:function(e,t,n){var i=n(91936),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var i=n(74833),r=n(11611),l=n(55193),a=0/0,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(l(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=s.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):o.test(e)?a:+e}},83806:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/datastore/[monitorId]",function(){return n(68345)}])},35287:function(e,t,n){"use strict";var i=n(24246),r=n(87949),l=n(88038),a=n.n(l);n(27378),t.Z=e=>{let{children:t,title:n,fullHeight:l,fullWidth:o,mainProps:s}=e;return(0,i.jsxs)(r.kCb,{"data-testid":n,direction:"column",height:l?"100vh":"calc(100vh - 48px)",width:o?"100vw":"calc(100vw - 240px)",children:[(0,i.jsxs)(a(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(r.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...s,children:t})]})}},58754:function(e,t,n){"use strict";var i=n(24246),r=n(87949),l=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:a=!0,children:o,rightContent:s,style:c,...d}=e;return(0,i.jsxs)("div",{...d,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(r.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(r.lQT,{className:n||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,s&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:s})]}),!!n&&(0,i.jsx)(l.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},12627:function(e,t,n){"use strict";var i=n(24246),r=n(79283),l=n(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:n=!1,...a}=e,{getDataCategoryDisplayNameProps:o,getDataCategories:s}=(0,l.Z)(),c=(n?s():s().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:n}=o(e.fides_key);return{value:e.fides_key,name:t,primaryName:n,description:e.description||""}});return(0,i.jsx)(r.l,{options:c,...a})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(24246),r=n(87949),l=n(72707),a=n.n(l);let o=e=>{let{data:{formattedTitle:t,description:n,name:l,primaryName:a}}=e;return(0,i.jsxs)(r.jqI,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:a||l}),a&&": ".concat(l)]}),(0,i.jsx)("em",{children:n})]})},s=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:a().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),d=e=>{let{options:t,...n}=e,l=null==t?void 0:t.map(e=>s(e)?{...e,options:e.options.map(c)}:c(e));return(0,i.jsx)(r.WPr,{options:l,filterOption:(e,t)=>{var n,i;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:o,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var i=n(24246),r=n(64925),l=n.n(r),a=n(27378),o=n(16134),s=n(30002),c=n(28079),d=n(57072);let u=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,o.C)(c.U3),{isLoading:n}=(0,d.MO)(),i=(0,o.C)(d.qb),{isLoading:r}=(0,s.te)();return{dataUses:t,dataSubjects:(0,o.C)(s.ZL),dataCategories:i,isLoading:e||n||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:r}=u(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let r=t(o(e,n)),l=!!i.parent_key;return{name:i.name||void 0,primaryName:l&&(null==r?void 0:r.name)!==i.name&&(null==r?void 0:r.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:r,primaryName:l}=s(e,t,n);return r?l?(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)("strong",{children:[l,":"]})," ",r]},e):(0,i.jsx)("strong",{children:r},e):e},d=t=>l()(e,{fides_key:t}),p=e=>l()(t,{fides_key:e}),f=e=>l()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:d,getDataUseDisplayName:e=>c(e,d,1),getDataUseDisplayNameProps:e=>s(e,d,1),getDataCategories:()=>t,getDataCategoryByKey:p,getDataCategoryDisplayName:e=>c(e,p,2),getDataCategoryDisplayNameProps:e=>s(e,p,2),getDataSubjects:()=>n,getDataSubjectByKey:f,getDataSubjectDisplayName:e=>{let t=f(e);return t?t.name:e},getPrimaryKey:o,isLoading:r}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),r=n(87949),l=n(79894),a=n.n(l),o=n(27378);let{Text:s}=r.AntTypography,c=e=>{let{items:t,...n}=e,l=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let l=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,i.jsx)(s,{style:{color:"inherit",maxWidth:l?void 0:400},ellipsis:!l,id:l?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,i.jsx)(r.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,i.jsx)(a(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,i.jsx)(r.zrq,{items:l,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var i=n(27378),r=n(36866);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.h)(e),{pageIndex:n,pageSize:l,updatePageIndex:a,updatePageSize:o,pageSizeOptions:s,showSizeChanger:c}=t,d=(0,i.useMemo)(()=>({current:n,pageSize:l,showSizeChanger:c,pageSizeOptions:s.map(String),onChange:a,onShowSizeChange:(e,t)=>{o(t)}}),[n,l,c,s,a,o]);return{...t,paginationProps:d}}},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return i.Bd},L5:function(){return i.L5},MO:function(){return i.MO},qb:function(){return i.qb}});var i=n(5785)},68345:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eo}});var i,r,l=n(24246),a=n(87949),o=n(25980),s=n(3124),c=n.n(s),d=n(86677),u=n(27378),p=n(16394);(i=r||(r={})).LOW="low",i.HIGH="high",i.MANUAL="manual";let f={percentPosition:{align:"start",type:"outer"},steps:2,showInfo:!1,strokeLinecap:"round",size:{width:24,height:8}},h=e=>({percent:e,strokeColor:(null!=e?e:0)>50?"var(--ant-color-success-text)":"var(--ant-color-warning-text)"}),v=e=>e>50?r.HIGH:r.LOW,m=e=>{let{percent:t,confidenceScore:n}=e;return(0,l.jsxs)(a.jqI,{gap:"small",align:"center",children:[(0,l.jsx)(a.HwE,{...f,...h(t)}),(0,l.jsx)(a.lKn,{size:"sm",type:"secondary",className:"font-normal",children:(0,p.kC)(null!=n?n:v(t))})]})};var g=n(30952),x=n(12627),j=n(35287),y=n(812),b=n(17245),_=n(77830),w=n(58754),S=n(9270),k=n(46628),C=n(37059),I=n(70675),N=n(65735),P=n(31883);let A=e=>{let{itemKey:t,actions:n}=e,i=Object.values(n);return(0,l.jsx)(a.jqI,{gap:"small",justify:"flex-end",children:i.map((e,n)=>{let{callback:r,label:o}=e;return(0,l.jsx)(a.wpx,{onClick:()=>r(t),type:n===i.length-1?"primary":"default",children:o},o)})})},D=e=>{let{title:t,titleIcon:n,titleTag:i}=e;return(0,l.jsxs)(a.jqI,{align:"center",gap:"small",children:[n,(0,l.jsx)("span",{children:t}),i&&(0,l.jsx)(a.j8w,{...i})]})},L=e=>{let{title:t,titleIcon:n,titleTag:i,actions:r,width:o=480,...s}=e;return(0,l.jsx)(a.To0,{title:(0,l.jsx)(D,{title:t,titleIcon:n,titleTag:i}),footer:s.footer||!r?s.footer:(0,l.jsx)(A,{itemKey:s.itemKey,actions:r}),width:o,...s})},O={approve:"Approve","assign-categories":"Assign categories",classify:"Classify",promote:"Confirm","un-mute":"Un-mute",mute:"Ignore"},R=["classify","approve","promote","mute"],{useFieldActionsMutation:T,useGetMonitorFieldsQuery:E}=n(78780).u.injectEndpoints({endpoints:e=>({getMonitorFields:e.query({query:e=>{let{path:{monitor_config_id:t},query:{page:n=1,size:i=20,search:r,diff_status:l,confidence_score:a,...o}}=e,s=(0,p.$J)({...o,...r?{search:[r]}:{},...l?{diff_status:l}:{},...a?{confidence_score:a}:{}});return{url:"/plus/discovery-monitor/".concat(t,"/fields?").concat(null==s?void 0:s.toString()),params:{page:n,size:i}}},providesTags:["Monitor Field Results"]}),fieldActions:e.mutation({query:e=>{let{path:{monitor_config_id:t,action_type:n},query:{search:i,diff_status:r,confidence_score:l,...a},...o}=e,s=(0,p.$J)({...a,...i?{search:[i]}:{},...r?{diff_status:r}:{},...l?{confidence_score:l}:{}});return{url:"/plus/discovery-monitor/".concat(t,"/fields/").concat(n,"?").concat(s.toString()),method:"POST",body:o}},invalidatesTags:["Monitor Field Results"]})})}),q="load_more",M="skeleton",z=["Unlabeled","In Review","Classifying","Approved","Ignored","Confirmed","Removed"],F={classifying:{label:"Classifying",color:a.tAb.INFO},classification_queued:{label:"Classifying",color:a.tAb.INFO},classification_update:{label:"In Review",color:a.tAb.CAUTION},classification_addition:{label:"In Review",color:a.tAb.CAUTION},addition:{label:"Unlabeled"},muted:{label:"Ignored",color:a.tAb.DEFAULT},removal:{label:"Removed",color:a.tAb.ERROR},removing:{label:"In Review",color:a.tAb.CAUTION},promoting:{label:"In Review",color:a.tAb.CAUTION},monitored:{label:"Confirmed",color:a.tAb.MINOS},approved:{label:"Approved",color:a.tAb.SUCCESS}},U=e=>{var t,n;let{resourceStatus:i,setResourceStatus:r,dataCategory:o,setDataCategory:s,reset:c,monitorId:d}=e,{data:u}=(0,C.S0)({monitor_config_id:d},{refetchOnMountOrArgChange:!0}),f=null==u?void 0:null===(t=u.diff_status)||void 0===t?void 0:t.reduce((e,t)=>{let n=Object.values(N.LL).find(e=>e===t),i=n?F[n].label:null;return i&&!e.includes(i)?[...e,i]:e},[]);return(0,l.jsx)(a.V4A,{variant:"borderless",style:{boxShadow:"var(--ant-box-shadow-secondary)"},children:(0,l.jsx)(a.vyj,{size:"middle",className:"p-[var(--ant-padding)]",children:(0,l.jsxs)(a.PPS,{layout:"vertical",children:[(0,l.jsx)(a.PPS.Item,{label:"Status",className:"w-min whitespace-nowrap",children:(0,l.jsx)(a.E_O.Group,{value:i||[],onChange:e=>r(e.length>0?e:null),children:(0,l.jsx)(a.bue,{children:null==f?void 0:f.flatMap(e=>(0,l.jsx)(a.JGx,{span:24,children:(0,l.jsx)(a.E_O,{value:e,children:e})},e))})})}),(null==u?void 0:u.data_category)&&(null==u?void 0:null===(n=u.data_category)||void 0===n?void 0:n.length)>0&&(0,l.jsx)(a.PPS.Item,{label:"Data category",className:"w-min whitespace-nowrap",children:(0,l.jsx)(a.E_O.Group,{value:o||[],onChange:e=>s(e.length>0?e:null),children:(0,l.jsx)(a.bue,{children:u.data_category.map(e=>(0,l.jsx)(a.JGx,{span:24,children:(0,l.jsx)(a.E_O,{value:e,children:(0,p.kC)(e)})},e))})})}),(0,l.jsx)(a.wpx,{onClick:()=>{c()},children:"Clear"})]})})})};var K=n(95353),J=n.n(K),W=n(79283),$=n(34929),Q=e=>{let{onSelectDataCategory:t,...n}=e,{getDataCategoryDisplayNameProps:i,getDataCategories:r}=(0,$.Z)(),o=r(),[s,c]=(0,u.useState)(!1),d=o.map(e=>{let{name:t,primaryName:n}=i(e.fides_key);return{value:e.fides_key,label:(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:n||t}),n&&": ".concat(t)]}),name:t,primaryName:n,description:e.description||""}});return(0,l.jsx)(W.l,{options:d,prefix:(0,l.jsx)(a.wpx,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,l.jsx)(a.PJP.mm_,{})}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:s,onOpenChange:e=>c(e),onSelect:e=>{t(e),c(!1)},...n})};let G=e=>{let{label:t,closable:n,onClose:i,isFromClassifier:r}=e;return(0,l.jsx)(a.j8w,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:i,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:r&&(0,l.jsx)(a.QMR,{}),children:(0,l.jsx)(a.lKn,{size:"sm",children:t})})};var Z=e=>{var t,n;let{urn:i,classifications:r,name:o,diff_status:s,selected:c,onSelect:d,onSetDataCategories:u,onNavigate:p,user_assigned_data_categories:f,onIgnore:h}=e;return(0,l.jsx)(a.krs.Item,{actions:[r&&r.length>0&&(0,l.jsx)(a.wpx,{"aria-label":"Approve",icon:(0,l.jsx)(a.PJP.MCw,{}),size:"small"},"approve"),s!==N.LL.MUTED&&(0,l.jsx)(a.wpx,{icon:(0,l.jsx)(a.PJP.uzw,{}),size:"small","aria-label":"Ignore",onClick:()=>h(i)},"ignore"),(0,l.jsx)(a.wpx,{"aria-label":"Reclassify",icon:(0,l.jsx)(a.QMR,{}),size:"small"},"reclassify")],children:(0,l.jsx)(a.krs.Item.Meta,{avatar:(0,l.jsx)(a.E_O,{checked:c,onChange:e=>d&&d(i,e.target.checked)}),title:(0,l.jsx)(a.jqI,{justify:"space-between",children:(0,l.jsxs)(a.jqI,{gap:"small",align:"center",className:"w-full",children:[(0,l.jsx)(a.wpx,{type:"link",className:"h-auto p-0 ".concat(J().primaryColorLink),onClick:()=>p&&p(i),children:o}),s&&s!==N.LL.ADDITION&&(0,l.jsx)(a.j8w,{bordered:!1,color:F[s].color,className:"font-normal text-[var(--ant-font-size-sm)]",children:F[s].label}),(0,l.jsx)(a.lKn,{size:"sm",type:"secondary",className:"overflow-hidden font-normal",ellipsis:{tooltip:i},children:i})]})}),description:(0,l.jsx)(Q,{mode:"tags",value:[...null!==(t=null==r?void 0:r.map(e=>{let{label:t}=e;return t}))&&void 0!==t?t:[],...null!==(n=null==f?void 0:f.map(e=>e))&&void 0!==n?n:[]],tagRender:e=>{let t=!!(null==r?void 0:r.find(t=>t.label===e.value)),n=!t&&!!f&&f.includes(e.value);return G({...e,isFromClassifier:t,closable:n,onClose:()=>{if(n){var t;u(null!==(t=null==f?void 0:f.filter(t=>t!==e.value))&&void 0!==t?t:[],i)}}})},onSelectDataCategory:e=>{(null==r||!r.find(t=>t.label===e))&&((null==f?void 0:f.includes(e))||u([...null!=f?f:[],e],i))}})})},i)};let B=(e,t)=>e.find(e=>{let{children:n}=e;return n&&!!n.find(e=>e.key.toString()===t)}),H=(e,t)=>e.reduce((e,n)=>{if(n.children){var i;return null!==(i=B(n.children,t))&&void 0!==i?i:H(n.children,t)}return e},null),V=e=>{let{node:t,treeData:n,onLoadMore:i}=e;if(!t.title)return null;if(t.key.toString().startsWith(q)){let e=H(n,t.key.toString());return(0,l.jsx)(a.wpx,{type:"link",block:!0,onClick:()=>{(null==e?void 0:e.key)&&i(e.key.toString())},className:"p-0",children:t.title})}if(t.key.toString().startsWith(M))return(0,l.jsx)(a.N_L,{paragraph:!1,title:{width:"80px"},active:!0,children:t.title});let r=(()=>{switch(t.status){case N.Ag.ADDITION:return c().FIDESUI_SUCCESS;case N.Ag.REMOVAL:return c().FIDESUI_ERROR;case N.Ag.CHANGE:return c().FIDESUI_WARNING;default:return null}})();return(0,l.jsxs)(a.jqI,{gap:4,align:"center",className:"inline-flex",children:[r&&(0,l.jsx)(a.PJP.fRw,{className:"size-2",style:{color:r}}),(0,l.jsx)(a.lKn,{ellipsis:{tooltip:t.title},children:t.title})]})},X=(e,t)=>{var n;let i=e.items.map(e=>({title:e.name,key:e.urn,selectable:!0,icon:()=>{switch(e.resource_type){case"Database":return(0,l.jsx)(a.PJP.S9g,{className:"h-full"});case"Schema":return(0,l.jsx)(a.PJP.ehp,{className:"h-full"});case"Table":return(0,l.jsx)(a.PJP.iA_,{className:"h-full"});case"Field":return(0,l.jsx)(a.PJP.sgG,{className:"h-full"});default:return null}},status:e.update_status,isLeaf:!e.has_grandchildren}));return(null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0)<100?i:[...i,{title:"Load more...",key:"".concat(q,"-").concat(e.page,"-").concat(t),selectable:!1,isLeaf:!0}]},Y=(e,t,n)=>e.map(e=>{if(e.key===t){var i,r;return{...e,children:[...null!==(r=null===(i=e.children)||void 0===i?void 0:i.filter(e=>!(e.key.toString().startsWith(q)||e.key.toString().startsWith(M))))&&void 0!==r?r:[],...n]}}return e.children?{...e,children:Y(e.children,t,n)}:e}),ee=(e,t,n)=>e.map(e=>e.key===t?{...e,children:n}:e.children?{...e,children:ee(e.children,t,n)}:e);var et=e=>{let{selectedNodeKeys:t,setSelectedNodeKeys:n,onClickClassifyButton:i}=e,r=decodeURIComponent((0,d.useRouter)().query.monitorId),[o]=(0,C.RV)(),[s,c]=(0,u.useState)({}),[p,f]=(0,u.useState)([]),h=(0,u.useRef)({}),v=(0,u.useRef)({}),m=(0,u.useCallback)(async e=>{var t;let{nodeKey:n,queryParams:i,updateFn:r,onFastDataLoaded:l}=e,a=(null!==(t=h.current[n])&&void 0!==t?t:0)+1;h.current[n]=a;let s=o({...i,include_descendant_details:!1}),c=o({...i,include_descendant_details:!0});s.then(e=>{let{data:t}=e;if(t&&h.current[n]===a&&v.current[n]!==a){var o;r(t),null==l||l(null!==(o=i.page)&&void 0!==o?o:1)}}),c.then(e=>{let{data:t}=e;t&&h.current[n]===a&&(v.current[n]=a,r(t))})},[o]),g=e=>{let t=null==s?void 0:s[e];if(t){let n=t.pageIndex+1;f(t=>Y(t,e,[...Array(100)].map((t,n)=>({key:"".concat(M,"-").concat(e,"-").concat(n),title:"SKELETON",isLeaf:!0})))),m({nodeKey:e,queryParams:{monitor_config_id:r,staged_resource_urn:e,size:100,page:n},updateFn:t=>{f(n=>Y(n,e,X(t,e)))},onFastDataLoaded:t=>{c({...s,[e]:{pageSize:100,pageIndex:t}})}})}};return(0,u.useEffect)(()=>{(async()=>{p.length>0||m({nodeKey:"root",queryParams:{monitor_config_id:r,size:100},updateFn:e=>{f(X(e))}})})()},[m,r,f,p.length]),(0,l.jsxs)(a.jqI,{gap:"middle",vertical:!0,className:"h-full",children:[(0,l.jsx)(a.lQT,{level:3,className:"sticky top-0",children:"Schema explorer"}),(0,l.jsx)(a.a$q,{loadData:e=>{let{children:t,key:n}=e;return new Promise(e=>{if(t){e();return}let i=n.toString();m({nodeKey:i,queryParams:{monitor_config_id:r,staged_resource_urn:i,size:100},updateFn:e=>{f(t=>ee(t,n,X(e,i)))},onFastDataLoaded:()=>{c({...s,[i]:{pageSize:100,pageIndex:1}})}}),e()})},treeData:p,onSelect:(e,t)=>n(t.selectedNodes.map(e=>{let{key:t}=e;return t})),showIcon:!0,showLine:!0,blockNode:!0,multiple:!0,rootClassName:"h-full overflow-x-hidden",titleRender:e=>(0,l.jsx)(V,{node:e,treeData:p,onLoadMore:g})}),t.length>0&&(0,l.jsxs)(a.jqI,{justify:"space-between",align:"center",children:[(0,l.jsxs)("span",{children:[t.length," selected"]}),(0,l.jsx)(a.wpx,{"aria-label":"Classify ".concat(t.length," Selected Nodes"),icon:(0,l.jsx)(a.QMR,{}),size:"small",onClick:i})]})]})},en=n(40431);let ei=()=>{let[e,t]=(0,en.v1)("resourceStatus",(0,en.S$)((0,en.km)(z))),[n,i]=(0,en.v1)("confidenceScore",(0,en.S$)((0,en.jx)(Object.values(r)))),[l,a]=(0,en.v1)("dataCategory",(0,en.S$)(en.Oi));return{resourceStatus:e,setResourceStatus:t,confidenceScore:n,setConfidenceScore:i,dataCategory:l,setDataCategory:a,reset:()=>{t(null),i(null),a(null)}}},er=e=>Object.values(N.LL).flatMap(t=>F[t].label===e?[t]:[]);var el=()=>{var e,t,n,i,r;let o=decodeURIComponent((0,d.useRouter)().query.monitorId),{paginationProps:s,pageIndex:p,pageSize:f,resetPagination:h}=(0,S.S)({defaultPageSize:25}),v=(0,b.Rx)(),{resourceStatus:N,confidenceScore:A,dataCategory:D,...q}=ei(),{data:M}=(0,C.vc)({monitor_config_id:o}),[z,K]=(0,u.useState)([]),[J,W]=(0,u.useState)([]),[$,Q]=(0,u.useState)(!1),{data:G}=E({path:{monitor_config_id:o},query:{size:f,page:p,staged_resource_urn:z.map(e=>e.toString()),search:v.searchProps.value,diff_status:N?N.flatMap(er):void 0,confidence_score:A||void 0,data_category:D||void 0}}),B=(0,a.pmc)(),[H]=(0,C.Av)(),[V]=(0,I.NA)(),[X]=(0,C.nS)(),{errorAlert:Y}=(0,b.VY)(),[ee]=T(),[en,el]=(0,u.useState)(),[ea,eo]=(0,C.mC)(),es=eo.data,ec=async(e,t)=>{let n=await V({monitor_config_id:o,staged_resource_urn:t,user_assigned_data_categories:e});(0,P.D4)(n)&&Y((0,y.e$)(n.error))},ed=async e=>{el(e)},eu=async e=>{let t=await X({urnList:[e]});(0,P.D4)(t)&&Y((0,y.e$)(t.error))},ep=async e=>{var t,n;let i=await ee({query:{staged_resource_urn:z.map(e=>e.toString()),search:v.searchProps.value,diff_status:N?N.flatMap(er):void 0,confidence_score:A||void 0,data_category:D||void 0},path:{monitor_config_id:o,action_type:e}});if((0,P.D4)(i)){Y((0,y.e$)(i.error));return}let r=null!==(n=null===(t=i.data.task_ids)||void 0===t?void 0:t.length)&&void 0!==n?n:0;B((0,k.t5)("Successful ".concat(O[e]," action for ").concat(r," item").concat(1!==r?"s":"")))},ef=async()=>{let e=await H({monitor_config_key:o,staged_resource_urns:z.flatMap(e=>"bigint"!=typeof e?[e.toString()]:[])});if((0,P.D4)(e)){B((0,k.Vo)((0,y.e$)(e.error)));return}B((0,k.t5)("Classifying initiated"))},eh=e=>{Q(e),W(e&&G?G.items.map(e=>e.urn):[])},ev=(e,t)=>{Q(!1),W(t?[...J,e]:J.filter(t=>t!==e))},em=$&&(null==G?void 0:G.total)?null==G?void 0:G.total:J.length;return(0,u.useEffect)(()=>{en&&ea({stagedResourceUrn:en})},[en]),(0,u.useEffect)(()=>{h()},[N,A,z,v.searchQuery,D]),(0,l.jsxs)(j.Z,{title:"Action center - Discovered assets by system",mainProps:{overflow:"hidden"},fullHeight:!0,children:[(0,l.jsx)(w.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:_.vi},{title:o}],isSticky:!1}),(0,l.jsxs)(a.LgQ,{className:"h-[calc(100%-48px)] overflow-hidden",children:[(0,l.jsx)(a.LgQ.Panel,{defaultSize:250,style:{paddingRight:"var(--ant-padding-md)"},children:(0,l.jsx)(et,{selectedNodeKeys:z,setSelectedNodeKeys:K,onClickClassifyButton:ef})}),(0,l.jsx)(a.LgQ.Panel,{style:{paddingLeft:"var(--ant-padding-md)"},children:(0,l.jsxs)(a.jqI,{vertical:!0,gap:"middle",className:"h-full overflow-hidden",children:[(0,l.jsxs)(a.jqI,{justify:"space-between",children:[(0,l.jsx)(a.lQT,{level:2,children:"Monitor results"}),(0,l.jsx)(a.jqI,{align:"center",children:(null==M?void 0:M.last_monitored)&&(0,l.jsxs)(a.lKn,{type:"secondary",children:["Last scan:"," ",new Date(null==M?void 0:M.last_monitored).toLocaleString()]})})]}),(0,l.jsxs)(a.jqI,{justify:"space-between",children:[(0,l.jsx)(g.f,{value:v.searchQuery,onChange:v.updateSearch,placeholder:"Search"}),(0,l.jsxs)(a.jqI,{gap:"small",children:[(0,l.jsx)(a.S0p,{trigger:["click"],popupRender:()=>(0,l.jsx)(U,{resourceStatus:N,confidenceScore:A,dataCategory:D,...q,monitorId:o}),children:(0,l.jsx)(a.wpx,{icon:(0,l.jsx)(a.PJP._ME,{}),iconPosition:"end",children:"Filter"})}),(0,l.jsx)(a.S0p,{menu:{items:[...R.map(e=>({key:e,label:O[e],onClick:()=>ep(e)}))]},disabled:J.length<=0,children:(0,l.jsx)(a.wpx,{type:"primary",icon:(0,l.jsx)(a.PJP._ME,{}),iconPosition:"end",children:"Actions"})})]})]}),(0,l.jsxs)(a.jqI,{gap:"middle",children:[(0,l.jsx)(a.E_O,{checked:$,onChange:e=>eh(e.target.checked)}),(0,l.jsx)(a.lKn,{children:"Select all"}),!!em&&(0,l.jsxs)(a.lKn,{strong:!0,children:[em.toLocaleString()," selected"]})]}),(0,l.jsx)(a.krs,{dataSource:null==G?void 0:G.items,className:"overflow-scroll",renderItem:e=>Z({...e,selected:J.includes(e.urn),onSelect:ev,onSetDataCategories:ec,onNavigate:ed,onIgnore:eu})}),(0,l.jsx)(a.B7X,{...s,showSizeChanger:!1,total:(null==G?void 0:G.total)||0})]})})]}),(0,l.jsx)(L,{itemKey:null!==(n=null==es?void 0:es.urn)&&void 0!==n?n:0,title:es?es.name:null,titleIcon:(0,l.jsx)(a.PJP.sgG,{}),titleTag:{bordered:!1,color:(null==es?void 0:es.diff_status)?F[es.diff_status].color:void 0,className:"font-normal text-[var(--ant-font-size-sm)]",children:(null==es?void 0:es.diff_status)?F[es.diff_status].label:null},actions:{reject:{label:"Reject",callback:()=>{}},approve:{label:"Approve",callback:()=>{}},confirm:{label:"Confirm",callback:()=>{}}},open:!!en,onClose:()=>el(void 0),children:es?(0,l.jsxs)(a.jqI,{gap:"middle",vertical:!0,children:[(0,l.jsx)(a.Yfl,{bordered:!0,column:1,items:[{key:"system",label:"System",children:es.system_key},{key:"path",label:"Path",children:es.urn},{key:"data-type",label:"Data type",children:es.resource_type},{key:"description",label:"Description",children:es.description}]}),(0,l.jsx)(a.PPS,{layout:"vertical",children:(0,l.jsx)(a.PPS.Item,{label:"Data categories",children:(0,l.jsx)(x.Z,{variant:"outlined",mode:"tags",maxTagCount:"responsive",value:[...null!==(i=null===(e=es.classifications)||void 0===e?void 0:e.map(e=>{let{label:t}=e;return t}))&&void 0!==i?i:[],...null!==(r=null===(t=es.user_assigned_data_categories)||void 0===t?void 0:t.map(e=>e))&&void 0!==r?r:[]],autoFocus:!1,onChange:e=>ec(e,es.urn)})})}),es.classifications&&es.classifications.length>0&&(0,l.jsx)(a.krs,{dataSource:es.classifications,renderItem:e=>(0,l.jsx)(a.krs.Item,{children:(0,l.jsx)(a.krs.Item.Meta,{avatar:(0,l.jsx)(a.t3Z,{style:{backgroundColor:null===c()||void 0===c()?void 0:c().FIDESUI_BG_DEFAULT},icon:(0,l.jsx)(a.QMR,{color:"black"})}),title:(0,l.jsxs)(a.jqI,{align:"center",gap:"middle",children:[(0,l.jsx)("div",{children:e.label}),(0,l.jsx)(m,{percent:100*e.score})]}),description:e.rationale})})})]}):null})]})};let ea=()=>(0,l.jsxs)(l.Fragment,{children:["Attempting to access the alpha version of monitor results without setting the ",(0,l.jsx)(a.lKn,{code:!0,children:"alphaFullActionCenter"})," flag"]});var eo=()=>{let{flags:e}=(0,o.hz)();return e.alphaFullActionCenter?(0,l.jsx)(el,{}):(0,l.jsx)(a.ux6,{status:"error",title:(0,l.jsx)(ea,{})})}},31883:function(e,t,n){"use strict";n.d(t,{Bw:function(){return i.Bw},D4:function(){return i.D4}});var i=n(19043)},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,8765,9278,5163,7245,3080,2888,9774,179],function(){return e(e.s=83806)}),_N_E=e.O()}]);