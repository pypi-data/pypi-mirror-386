(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{74833:function(e,t,i){var n=i(56127),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i}},66726:function(e,t,i){var n=i(11611),a=i(82846),s=i(91936),r=Math.max,o=Math.min;e.exports=function(e,t,i){var l,c,u,d,f,g,x=0,h=!1,p=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var i=l,n=c;return l=c=void 0,x=t,d=e.apply(n,i)}function I(e){var i=e-g,n=e-x;return void 0===g||i>=t||i<0||p&&n>=u}function j(){var e,i,n,s=a();if(I(s))return L(s);f=setTimeout(j,(e=s-g,i=s-x,n=t-e,p?o(n,u-i):n))}function L(e){return(f=void 0,v&&l)?m(e):(l=c=void 0,d)}function A(){var e,i=a(),n=I(i);if(l=arguments,c=this,g=i,n){if(void 0===f)return x=e=g,f=setTimeout(j,t),h?m(e):d;if(p)return clearTimeout(f),f=setTimeout(j,t),m(g)}return void 0===f&&(f=setTimeout(j,t)),d}return t=s(t)||0,n(i)&&(h=!!i.leading,u=(p="maxWait"in i)?r(s(i.maxWait)||0,t):u,v="trailing"in i?!!i.trailing:v),A.cancel=function(){void 0!==f&&clearTimeout(f),x=0,l=g=c=f=void 0},A.flush=function(){return void 0===f?d:L(a())},A}},82846:function(e,t,i){var n=i(77400);e.exports=function(){return n.Date.now()}},91936:function(e,t,i){var n=i(74833),a=i(11611),s=i(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return r;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=l.test(e);return i||c.test(e)?u(e.slice(2),i?2:8):o.test(e)?r:+e}},45550:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return i(3680)}])},30952:function(e,t,i){"use strict";i.d(t,{f:function(){return l}});var n=i(24246),a=i(66726),s=i.n(a),r=i(27378),o=i(26917);let l=e=>{let{value:t,onChange:i,placeholder:a,...l}=e,[c,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{u(t||"")},[t]);let d=s()(i,500),f=(0,r.useCallback)(e=>{u(e),d(e)},[]);return(0,n.jsx)(o.Z,{value:c,onChange:f,onClear:()=>{u(""),i("")},placeholder:a,...l})}},58754:function(e,t,i){"use strict";var n=i(24246),a=i(87949),s=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:r=!0,children:o,rightContent:l,style:c,...u}=e;return(0,n.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,n.jsxs)(a.jqI,{justify:"space-between",children:["string"==typeof t?(0,n.jsx)(a.lQT,{className:i||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!i&&(0,n.jsx)(s.m,{className:o?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),o]})}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return c}});var n=i(24246),a=i(87949),s=i(79894),r=i.n(s),o=i(27378);let{Text:l}=a.AntTypography,c=e=>{let{items:t,...i}=e,s=(0,o.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let s=i===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,n.jsx)(l,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,id:s?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,n.jsx)(a.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,n.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,n.jsx)(a.zrq,{items:s,...i})}},91761:function(e,t,i){"use strict";var n=i(24246),a=i(87949),s=i(812),r=i(17245),o=i(7940),l=i(98559),c=i(65735),u=i(79494),d=i(70675);t.Z=e=>{let{resource:t}=e,[i,{isLoading:f}]=(0,d.v8)(),[g,{isLoading:x}]=(0,d.cM)(),[h,{isLoading:p}]=(0,d.vi)(),v=x||p||f,{diff_status:m,child_diff_statuses:I,top_level_field_name:j}=t,{successAlert:L,errorAlert:A}=(0,r.VY)(),C=m===c.LL.CLASSIFICATION_ADDITION||m===c.LL.CLASSIFICATION_UPDATE||m===c.LL.APPROVED,T=I&&(I[c.LL.CLASSIFICATION_ADDITION]||I[c.LL.CLASSIFICATION_UPDATE]||I[c.LL.APPROVED]),_=(C||T)&&!j,S=C||T,D=(0,o.G)(t)!==c.D$.FIELD,y=_&&S&&D,b=async()=>{let e=await g({staged_resource_urn:t.urn});(0,s.D4)(e)?A((0,s.e$)(e.error),"Failed to promote resource"):L('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},N=async()=>{let e=await h({staged_resource_urn:t.urn});(0,s.D4)(e)?A((0,s.e$)(e.error),"Failed to mute resource"):L("Ignored changes will not be added to a Fides dataset.","".concat(t.name||"Changes"," ignored"))},E=async()=>{let e=await i({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id,start_classification:!0,diff_statuses_to_classify:[c.LL.CLASSIFICATION_ADDITION,c.LL.CLASSIFICATION_UPDATE,c.LL.CLASSIFYING,c.LL.CLASSIFICATION_QUEUED]});(0,s.D4)(e)?A((0,s.e$)(e.error),"Failed to reclassify resource"):L("Reclassification of ".concat((0,l.Z)(t)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,n.jsxs)(a.Ugi,{gap:2,children:[_&&(0,n.jsx)(u.Z,{title:"Confirm",icon:(0,n.jsx)(a.nQG,{}),onClick:b,disabled:v,loading:x}),S&&(0,n.jsx)(u.Z,{title:"Ignore",icon:(0,n.jsx)(a.tpL,{}),onClick:N,disabled:v,loading:p}),D&&!y&&(0,n.jsx)(u.Z,{title:"Reclassify",icon:(0,n.jsx)(a.nyI,{}),onClick:E,disabled:v,loading:f}),y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.LZC,{}),(0,n.jsxs)(a.v2r,{children:[(0,n.jsx)(a.j2t,{as:a.wpx,size:"small",type:"text",icon:(0,n.jsx)(a.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,n.jsx)(a.qyq,{children:(0,n.jsx)(a.sNh,{onClick:E,icon:(0,n.jsx)(a.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}},7940:function(e,t,i){"use strict";i.d(t,{G:function(){return a}});var n=i(65735);let a=e=>{var t,i,a;return e?e.resource_type?e.resource_type:(null===(t=e.schemas)||void 0===t?void 0:t.length)?n.D$.DATABASE:(null===(i=e.tables)||void 0===i?void 0:i.length)?n.D$.SCHEMA:(null===(a=e.fields)||void 0===a?void 0:a.length)?n.D$.TABLE:n.D$.FIELD:void 0}},98559:function(e,t){"use strict";t.Z=e=>{let{name:t,urn:i,monitor_config_id:n,database_name:a,schema_name:s,table_name:r,top_level_field_name:o,top_level_field_urn:l}=e;if(!o)return t;let c=i.split(".");return l?i.replace("".concat(l).concat("."),""):([n,a,s,r,o].forEach(e=>{if(e){let t=c.indexOf(e);t>-1&&c.splice(t,1)}}),c.join("."))}},36168:function(e,t){"use strict";t.Z=e=>{var t;return!!e.parent_table_urn&&null!==(t=e.sub_field_urns)&&void 0!==t&&!!t.length&&!e.top_level_field_name}},80356:function(e,t,i){"use strict";var n=i(7940),a=i(36168),s=i(65735);t.Z=e=>(0,n.G)(e)!==s.D$.FIELD||(0,a.Z)(e)},3680:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var n,a,s=i(24246),r=i(27378),o=i(35287),l=i(58754),c=i(47182),u=i(92222),d=i(59003),f=i(87949),g=i(47935),x=i(72625),h=i(70675),p=i(38347),v=i(87667),m=i(50169),I=i(80285),j=i(30952);(n=a||(a={})).DATASET="Dataset",n.CLASSIFICATION="Classification";var L=i(74241),A=i(28278),C=i(20449),T=e=>(0,C.Z)(e)===A.E.CLASSIFICATION?a.CLASSIFICATION:a.DATASET,_=i(54409),S=i(91761);let D={items:[],total:0,page:1,size:50,pages:1},y=()=>(0,s.jsx)(f.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,s.jsxs)(f.gCW,{children:[(0,s.jsx)(f.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,s.jsx)(f.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),b=(0,u.Cl)();var N=e=>{let{onRowClick:t,statusFilters:i,childsStatusFilters:n}=e,[o,l]=(0,r.useState)(""),{PAGE_SIZES:c,pageSize:A,setPageSize:C,onPreviousPageClick:N,isPreviousPageDisabled:E,onNextPageClick:w,isNextPageDisabled:O,startRange:R,endRange:F,pageIndex:k,setTotalPages:Z}=(0,g.oi)(),{isFetching:P,isLoading:M,data:V}=(0,h.z8)({diff_status:i,child_diff_status:n,page:k,size:A,search:o}),{items:$,total:z,pages:U}=(0,r.useMemo)(()=>null!=V?V:D,[V]);(0,r.useEffect)(()=>{Z(U)},[U,Z]);let G=(0,r.useMemo)(()=>[b.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(v.Z,{result:e.row.original}),header:e=>(0,s.jsx)(g.Rr,{value:"Name",...e})}),b.accessor(e=>e.urn,{id:"project",cell:e=>(0,s.jsx)(g.G3,{value:(0,L.Z)(e.getValue())}),header:e=>(0,s.jsx)(g.Rr,{value:"Project",...e})}),b.display({id:"status",cell:e=>(0,s.jsx)(m.Z,{result:e.row.original}),header:e=>(0,s.jsx)(g.Rr,{value:"Status",...e})}),b.accessor(e=>e.system,{id:"system",cell:e=>(0,s.jsx)(g.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(g.Rr,{value:"System",...e})}),b.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,s.jsx)(g.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(g.Rr,{value:"Detected by",...e})}),b.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,s.jsx)(x.Cy,{time:e.getValue()}),header:e=>(0,s.jsx)(g.Rr,{value:"When",...e})}),b.accessor(e=>e,{id:"action",cell:e=>T(e.getValue())===a.DATASET?(0,s.jsx)(_.Z,{resource:e.getValue()}):(0,s.jsx)(S.Z,{resource:e.getValue()}),header:e=>(0,s.jsx)(g.Rr,{value:"Action",...e})})],[]),W=(0,d.b7)({getCoreRowModel:(0,u.sC)(),getGroupedRowModel:(0,u.qe)(),getExpandedRowModel:(0,u.rV)(),getRowId:I.Z,columns:G,manualPagination:!0,data:$,columnResizeMode:"onChange"});return M?(0,s.jsx)(g.I4,{rowHeight:36,numRows:36}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Q$,{children:(0,s.jsxs)(f.kCb,{gap:6,align:"center",children:[(0,s.jsx)(f.xuv,{flexShrink:0,children:(0,s.jsx)(j.f,{value:o,onChange:l})}),(0,s.jsx)(p.a,{})]})}),(0,s.jsx)(g.ZK,{tableInstance:W,onRowClick:t,emptyTableNotice:(0,s.jsx)(y,{})}),(0,s.jsx)(g.s8,{totalRows:z||0,pageSizes:c,setPageSize:C,onPreviousPageClick:N,isPreviousPageDisabled:E||P,onNextPageClick:w,isNextPageDisabled:O||P,startRange:R,endRange:F})]})},E=i(65735),w=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:t}=(0,c.Z)();return(0,s.jsxs)(o.Z,{title:"Data discovery",children:[(0,s.jsx)(l.Z,{heading:"All activity"}),(0,s.jsx)(N,{onRowClick:i=>{if(T(i)===a.DATASET){e({resourceUrn:i.urn});return}t({resourceUrn:i.urn})},statusFilters:[E.LL.ADDITION,E.LL.REMOVAL,E.LL.CLASSIFICATION_ADDITION,E.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[E.LL.ADDITION,E.LL.REMOVAL,E.LL.CLASSIFICATION_ADDITION,E.LL.CLASSIFICATION_UPDATE]})]})}}},function(e){e.O(0,[431,7245,8853,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);