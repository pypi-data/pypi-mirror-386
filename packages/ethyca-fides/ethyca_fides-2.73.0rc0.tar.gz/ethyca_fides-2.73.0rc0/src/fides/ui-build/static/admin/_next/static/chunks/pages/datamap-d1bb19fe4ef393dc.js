(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{58095:function(e,t,n){var r=n(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},8817:function(e,t,n){var r=n(95372),i=n(1129),l=n(58263);e.exports=function(e,t,n){return t==t?l(e,t,n):r(e,i,n)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,n){var r=n(52485),i=n(58095),l=n(21796),s=n(65581),a=n(47111),o=n(43735);e.exports=function(e,t,n){var u=-1,d=i,c=e.length,g=!0,f=[],h=f;if(n)g=!1,d=l;else if(c>=200){var m=t?null:a(e);if(m)return o(m);g=!1,d=s,h=new r}else h=t?[]:f;e:for(;++u<c;){var x=e[u],p=t?t(x):x;if(x=n||0!==x?x:0,g&&p==p){for(var y=h.length;y--;)if(h[y]===p)continue e;t&&h.push(p),f.push(x)}else d(h,p,n)||(h!==f&&h.push(p),f.push(x))}return f}},47111:function(e,t,n){var r=n(46151),i=n(50344),l=n(43735),s=r&&1/l(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=s},58263:function(e){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return -1}},50344:function(e){e.exports=function(){}},83766:function(e,t,n){var r=n(92198);e.exports=function(e){return e&&e.length?r(e):[]}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(18839)}])},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(24246),i=n(87949),l=n(88038),s=n.n(l),a=n(86677);n(27378);var o=n(25980),u=n(90867),d=n(42478),c=n(77830),g=()=>{let e=(0,a.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:n,padded:l=!0,mainProps:c}=e,f=(0,o.hz)(),h=(0,a.useRouter)(),m="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,x=!(f.flags.messagingConfiguration&&m),{data:p}=(0,d.JE)(void 0,{skip:x}),{data:y}=(0,u.PW)(void 0,{skip:x}),b=f.flags.messagingConfiguration&&(!p||!y)&&m;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(s(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:l?6:0,px:l?10:0,h:l?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[b?(0,r.jsx)(g,{}):null,t]})]})}},99811:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(27378);class i{updateTableInstance(e){this.tableInstance=e}constructor(e=null){this.tableInstance=e,this.updateTableInstance=this.updateTableInstance.bind(this)}}let l=r.createContext(new i);t.Z=l},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return u},JE:function(){return i},Ki:function(){return c},SU:function(){return g},W:function(){return f},h9:function(){return l},jc:function(){return r},qt:function(){return o},sn:function(){return d}});let{useGetEmailInviteStatusQuery:r,useGetActiveMessagingProviderQuery:i,useCreateMessagingConfigurationMutation:l,useCreateMessagingConfigurationSecretsMutation:s,useGetMessagingConfigurationDetailsQuery:a,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,r)=>{let i=await r({url:"messaging/default/active"});return i.error&&404===i.error.status?{data:null}:i},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},18839:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(24246),i=n(27378),l=n(45938),s=n(77213),a=n(58754),o=n(87949),u=n(65218),d=n.n(u),c=n(16134),g=n(35258),f=n(92222),h=n(59003),m=n(30002),x=n(28079),p=n(49600),y=n(99811);let b=e=>{var t;let{column:n}=e,{tableInstance:r}=(0,i.useContext)(y.Z),l=i.useMemo(()=>Array.from(n.getFacetedUniqueValues().keys()),[n]),s=i.useMemo(()=>{let e={};return l.forEach(t=>{e[t]=!1}),e},[l]);return{filterValue:null!==(t=n.getFilterValue())&&void 0!==t?t:s,clearFilterOptions:()=>{let e={};l.forEach(t=>{e[t]=!1}),n.setFilterValue(e)},toggleFilterOption:(e,t)=>{var i;let l={...null!==(i=n.getFilterValue())&&void 0!==i?i:s,[e]:t};Object.values(l).every(e=>!e)?null==r||r.setColumnFilters(null==r?void 0:r.getState().columnFilters.filter(e=>e.id!==n.id)):n.setFilterValue(l)},options:l,header:n.columnDef.header}};var v=n(57072);let j=(0,f.Cl)(),C={multifield:(e,t,n)=>n[e.original[t]]},w=()=>{let e=(0,c.T)(),{updateTableInstance:t}=(0,i.useContext)(y.Z),n=(0,c.C)(p.eo),{data:r,isLoading:l}=(0,p.Ex)({organizationName:"default_organization"});(0,v.MO)(),(0,x.fd)(),(0,m.te)();let s=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if(r){let{columns:t,rows:n}=r;e((0,p.dd)(t)),s.current||(s.current=!0,0===n.length?e((0,p.ym)(!0)):e((0,p.ym)(!1)))}},[r,e]);let a=(0,i.useMemo)(()=>r?r.rows:[],[r]),o=(0,i.useMemo)(()=>(n||[]).map(e=>{let{text:t,value:n}=e;return j.accessor(e=>e[n],{id:n,header:t,cell:e=>{let{getValue:t}=e,n=t();return Array.isArray(n)?n.join(", "):n},filterFn:C.multifield})}),[n]),u=(0,h.b7)({columns:o,data:a,filterFns:C,getCoreRowModel:(0,f.sC)(),getFilteredRowModel:(0,f.vL)(),getFacetedRowModel:(0,f.o6)(),getFacetedUniqueValues:(0,f.JG)(),manualPagination:!0,columnResizeMode:"onChange"});return(0,i.useEffect)(()=>t(u),[u,t]),{...u,isLoading:l}};var _=n(83766),k=n.n(_),M=n(25980),T=n(46238),S=n(47935),F=n(22968);let O=e=>{var t,n,i;let{option:l,columnId:s,filterValue:a,toggleFilterOption:u}=e,d=(0,c.C)(v.L5),g=s===F.Ux&&null!==(n=null===(t=d.get(l))||void 0===t?void 0:t.name)&&void 0!==n?n:l;return(0,r.jsx)(o.XZJ,{value:l,width:"193px",height:"20px",mb:"25px",isChecked:null!==(i=a[l])&&void 0!==i&&i,onChange:e=>{let{target:t}=e;u(l,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,r.jsx)(o.xvT,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:g})},l)};var P=e=>{let{column:t}=e,{filterValue:n,toggleFilterOption:l,options:s}=b({column:t}),[a,u]=(0,i.useState)(!1),d=a?s:s.slice(0,15),c=s.length>15;return(0,r.jsx)(o.UQy,{width:"100%",allowToggle:!0,children:(0,r.jsxs)(o.Qdk,{border:"0px",children:[(0,r.jsx)(o.X6q,{height:"56px",children:(0,r.jsxs)(o.KFZ,{height:"100%",children:[(0,r.jsx)(o.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.columnDef.header}),(0,r.jsx)(o.XEm,{})]})}),(0,r.jsxs)(o.Hk3,{children:[(0,r.jsx)(o.MIq,{columns:3,children:d.map(e=>(0,r.jsx)(O,{columnId:t.id,option:e,filterValue:n,toggleFilterOption:l},e))}),!a&&c?(0,r.jsx)(o.wpx,{type:"text",onClick:()=>{u(!0)},children:"View more"}):null,a&&c?(0,r.jsx)(o.wpx,{type:"text",onClick:()=>{u(!1)},children:"View less"}):null]})]})},t.id)};let E=e=>{let{heading:t,children:n}=e;return(0,r.jsxs)(o.xuv,{padding:"24px 8px 8px 24px",children:[(0,r.jsx)(o.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})};var q=e=>{let t,{isOpen:n,onClose:l}=e,{tableInstance:s}=(0,i.useContext)(y.Z),a=null==s?void 0:s.getHeaderGroups(),u=(e,t)=>e.filter(e=>e.id===t).map(e=>(0,r.jsx)(P,{column:e.column},t)),d=(0,i.useMemo)(()=>(null==a?void 0:a[0].headers)||[],[a]);return(0,r.jsxs)(o.u_l,{isOpen:n,onClose:l,isCentered:!0,size:"2xl",children:[(0,r.jsx)(o.ZAr,{}),(0,r.jsxs)(o.hzk,{children:[(0,r.jsx)(o.xBx,{children:"Filters"}),(0,r.jsx)(o.olH,{}),(0,r.jsx)(o.izJ,{}),(0,r.jsx)(o.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",children:(t=[F.vy,F.Ux,F.OL],d.some(e=>t.indexOf(e.id)>-1))?(0,r.jsxs)(E,{heading:"Privacy attributes",children:[u(d,F.vy),u(d,F.Ux),u(d,F.OL)]}):null}),(0,r.jsx)(o.mzw,{children:(0,r.jsxs)(o.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,r.jsx)(o.wpx,{onClick:()=>{null==s||s.resetColumnFilters()},className:"mr-3 grow",children:"Reset Filters"}),(0,r.jsx)(o.wpx,{onClick:l,type:"primary",className:"grow",children:"Done"})]})})]})]})};let I=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,o.qY0)();return{isFilterModalOpen:e,onFilterModalOpen:t,onFilterModalClose:n}};var R=()=>{let{isFilterModalOpen:e,onFilterModalOpen:t,onFilterModalClose:n}=I(),{tableInstance:l}=(0,i.useContext)(y.Z),{systemsCount:s,dictionaryService:a}=(0,M.hz)(),u=null==l?void 0:l.getRowModel(),d=(0,i.useMemo)(()=>{let e=(null==u?void 0:u.rows)||[];return k()(null==e?void 0:e.map(e=>e.original["system.fides_key"]))},[u]);if(!l)return null;let c=d.length,g=l.getState().columnFilters.length;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.kCb,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,r.jsx)(o.kCb,{flexGrow:1,children:(0,r.jsx)(S.HO,{globalFilter:l.getState().globalFilter,setGlobalFilter:l.setGlobalFilter})}),(0,r.jsxs)(o.kCb,{children:[s>0?(0,r.jsxs)(o.kCb,{alignItems:"center",borderRadius:"md",gap:1,marginRight:4,children:[(0,r.jsxs)(o.xvT,{fontSize:"xs",children:[c," of ",s," systems displayed"]}),a?(0,r.jsx)(T.b,{label:"Note that Global Vendor List (GVL) and Additional Consent (AC) systems are not currently included in these reports"}):null]}):null,(0,r.jsxs)(o.wpx,{"aria-label":"Open Filter Settings",onClick:t,children:["Filter",g>0?(0,r.jsx)(o.j8w,{className:"ml-2",children:g}):null]})]})]}),(0,r.jsx)(q,{isOpen:e,onClose:n})]})},A=n(38943),V=n(77830),D=()=>(0,r.jsx)(o.M5Y,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,r.jsx)(o.xuv,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,r.jsxs)(o.Kqy,{spacing:4,children:[(0,r.jsx)(o.xvT,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology—fear not—Fides is here to simplify this."}),(0,r.jsx)(o.xvT,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,r.jsx)(o.xvT,{children:"Let's get started!"}),(0,r.jsx)(o.xuv,{children:(0,r.jsx)(o.wpx,{href:V.xo,role:"link",type:"primary",className:"w-fit","data-testid":"add-systems-btn",children:"Add Systems"})})]})})});let N=d()(()=>Promise.all([n.e(105),n.e(1096),n.e(8765),n.e(9278),n.e(699),n.e(6148),n.e(5619),n.e(4259),n.e(1975)]).then(n.bind(n,34849)),{loadableGenerated:{webpack:()=>[34849]},ssr:!1,loading:()=>(0,r.jsx)(o.M5Y,{width:"100%",flex:"1",children:(0,r.jsx)(o.$jN,{})})}),L=()=>{let e=(0,c.C)(A.Xt),{attemptAction:t}=(0,l.oI)(),[n,r]=(0,i.useState)(),s=(0,i.useCallback)(e=>{t().then(t=>{t&&r(e)})},[t,r]),a=(0,i.useCallback)(()=>{t().then(e=>{e&&n&&r(void 0)})},[t,n]);return{isGettingStarted:e,selectedSystemId:n,setSelectedSystemId:s,resetSelectedSystemId:a}};var G=()=>{let{isGettingStarted:e,setSelectedSystemId:t,selectedSystemId:n,resetSelectedSystemId:i}=L(),{isLoading:l}=w();return l?(0,r.jsx)(o.M5Y,{width:"100%",flex:"1",children:(0,r.jsx)(o.$jN,{})}):e?(0,r.jsx)(D,{}):(0,r.jsxs)(o.kCb,{direction:"column",height:"100%",children:[(0,r.jsx)(o.xuv,{marginBottom:3,marginRight:10,children:(0,r.jsx)(R,{})}),(0,r.jsxs)(o.kCb,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[(0,r.jsx)(o.xuv,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,r.jsx)(N,{setSelectedSystemId:t,selectedSystemId:n})}),(0,r.jsx)(g.Z,{selectedSystemId:n,resetSelectedSystemId:i})]})]})},Z=()=>{let e=(0,i.useMemo)(()=>new y.m,[]);return(0,r.jsxs)(s.Z,{title:"Data lineage",mainProps:{padding:"24px 0 0 40px"},children:[(0,r.jsx)(a.Z,{style:{paddingLeft:0},heading:"Data lineage"}),(0,r.jsxs)(y.Z.Provider,{value:e,children:[(0,r.jsx)(G,{}),(0,r.jsx)(l.eB,{})]})]})}},76737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return a},noSSR:function(){return s}});let r=n(51538);n(24246),n(27378);let i=r._(n(21887));function l(e){return{default:(null==e?void 0:e.default)||e}}function s(e,t){return delete t.webpack,delete t.modules,e(t)}function a(e,t){let n=i.default,r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let a=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?n({...r,loader:()=>null!=a?a().then(l):Promise.resolve(l(()=>null))}):(delete r.webpack,delete r.modules,s(n,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},28438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=n(51538)._(n(27378)).default.createContext(null)},21887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return g}});let r=n(51538)._(n(27378)),i=n(28438),l=[],s=[],a=!1;function o(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}class u{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function d(e){return function(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),l=null;function o(){if(!l){let t=new u(e,n);l={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return l.promise()}if(!a){let e=n.webpack?n.webpack():n.modules;e&&s.push(t=>{for(let n of e)if(t.includes(n))return o()})}function d(e,t){!function(){o();let e=r.default.useContext(i.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach(t=>{e(t)})}();let s=r.default.useSyncExternalStore(l.subscribe,l.getCurrentValue,l.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:l.retry}),[]),r.default.useMemo(()=>{var t;return s.loading||s.error?r.default.createElement(n.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:l.retry}):s.loaded?r.default.createElement((t=s.loaded)&&t.default?t.default:t,e):null},[e,s])}return d.preload=()=>o(),d.displayName="LoadableComponent",r.default.forwardRef(d)}(o,e)}function c(e,t){let n=[];for(;e.length;){let r=e.pop();n.push(r(t))}return Promise.all(n).then(()=>{if(e.length)return c(e,t)})}d.preloadAll=()=>new Promise((e,t)=>{c(l).then(e,t)}),d.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let n=()=>(a=!0,t());c(s,e).then(n,n)})),window.__NEXT_PRELOADREADY=d.preloadReady;let g=d},65218:function(e,t,n){e.exports=n(76737)}},function(e){e.O(0,[431,5163,7245,9899,5258,2888,9774,179],function(){return e(e.s=53910)}),_N_E=e.O()}]);