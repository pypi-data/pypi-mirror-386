(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{54727:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return n(47672)}])},77213:function(e,s,n){"use strict";n.d(s,{Z:function(){return p}});var t=n(24246),i=n(87949),a=n(88038),r=n.n(a),l=n(86677);n(27378);var o=n(25980),c=n(90867),u=n(42478),d=n(77830),g=()=>{let e=(0,l.useRouter)();return(0,t.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,t.jsxs)(i.xuv,{children:[(0,t.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,t.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,t.jsx)(i.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,t.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:s,title:n,padded:a=!0,mainProps:d}=e,p=(0,o.hz)(),x=(0,l.useRouter)(),h="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,f=!(p.flags.messagingConfiguration&&h),{data:m}=(0,u.JE)(void 0,{skip:f}),{data:j}=(0,c.PW)(void 0,{skip:f}),C=p.flags.messagingConfiguration&&(!m||!j)&&h;return(0,t.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,t.jsxs)(r(),{children:[(0,t.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,t.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)(i.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[C?(0,t.jsx)(g,{}):null,s]})]})}},58754:function(e,s,n){"use strict";var t=n(24246),i=n(87949),a=n(70788);s.Z=e=>{let{heading:s,breadcrumbItems:n,isSticky:r=!0,children:l,rightContent:o,style:c,...u}=e;return(0,t.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,t.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof s?(0,t.jsx)(i.lQT,{className:n||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:s}):s,o&&(0,t.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,t.jsx)(a.m,{className:l?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),l]})}},70788:function(e,s,n){"use strict";n.d(s,{m:function(){return c}});var t=n(24246),i=n(87949),a=n(79894),r=n.n(a),l=n(27378);let{Text:o}=i.AntTypography,c=e=>{let{items:s,...n}=e,a=(0,l.useMemo)(()=>null==s?void 0:s.map((e,n)=>{let a=n===s.length-1,l={...e},c=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,t.jsx)(o,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:l.title})),c)?l.title=(0,t.jsx)(i.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,t.jsx)(r(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[s]);return(0,t.jsx)(i.zrq,{items:a,...n})}},6675:function(e,s,n){"use strict";n.d(s,{ZS:function(){return l},a4:function(){return a}});var t=n(3228);let i=n(78780).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:a}=i,r={purposes:{},special_purposes:{}},l=(0,t.P1)(i.endpoints.getPurposes.select(),e=>{let{data:s}=e;return s||r})},48347:function(e,s,n){"use strict";n.d(s,{W:function(){return o},m:function(){return c}});var t=n(24246),i=n(87949),a=n(32885);let{Text:r,Title:l}=i.AntTypography,o=()=>{let{isOpen:e,onOpen:s,onClose:n}=(0,i.qY0)();return{isOpen:e,onOpen:s,onClose:n}},c=e=>{let{isOpen:s,onClose:n,fidesKey:o}=e,{data:c,isLoading:u}=(0,a.ho)(o),d=(e,s)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{level:5,children:e}),(null==s?void 0:s.length)?(0,t.jsx)("div",{children:(0,t.jsx)(i.vyj,{size:[0,2],wrap:!0,children:null==s?void 0:s.map(e=>(0,t.jsx)(i.j8w,{children:e},e))})}):(0,t.jsxs)(r,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,t.jsxs)(i.u_l,{isOpen:s,onClose:n,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,t.jsx)(i.ZAr,{}),(0,t.jsxs)(i.hzk,{maxWidth:"800px",children:[(0,t.jsx)(i.xBx,{children:c?null==c?void 0:c.name:"Vendor"}),(0,t.jsx)(i.fef,{children:u?(0,t.jsx)(i.jqI,{className:"h-80 w-full",align:"center",justify:"center",children:(0,t.jsx)(i.$jN,{})}):!!c&&(0,t.jsxs)(i.AntTypography,{children:[(0,t.jsx)(l,{level:5,children:"Purposes"}),Object.entries(c.purposes||{}).length>0?(0,t.jsx)(i.UQy,{allowMultiple:!0,children:Object.entries(c.purposes).map((e,s)=>{let[n]=e;return(0,t.jsx)(i.Qdk,{children:e=>{let{isExpanded:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.KFZ,{backgroundColor:s?"gray.50":"unset",children:[(0,t.jsx)(i.xuv,{flex:"1",textAlign:"left",children:n}),(0,t.jsx)(i.XEm,{})]}),(0,t.jsxs)(i.Hk3,{backgroundColor:"gray.50",children:[(0,t.jsx)(i.jqI,{className:"my-4",vertical:!0,children:d("Data uses",c.purposes[n].data_uses)}),(0,t.jsx)(i.jqI,{className:"my-4",vertical:!0,children:d("Legal basis",c.purposes[n].legal_bases)})]})]})}},s)})}):(0,t.jsx)(r,{italic:!0,children:"no known purposes"}),(0,t.jsx)("div",{className:"my-4",children:d("Features",c.features)}),(0,t.jsx)("div",{className:"my-4",children:d("Data categories",c.data_categories)})]})}),(0,t.jsxs)(i.mzw,{children:[(0,t.jsx)(i.wpx,{size:"small",onClick:n,children:"Close"}),(0,t.jsx)(i.LZC,{})]})]})]})}},42478:function(e,s,n){"use strict";n.d(s,{FU:function(){return c},JE:function(){return i},Ki:function(){return d},SU:function(){return g},W:function(){return p},h9:function(){return a},jc:function(){return t},qt:function(){return o},sn:function(){return u}});let{useGetEmailInviteStatusQuery:t,useGetActiveMessagingProviderQuery:i,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:l,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,s,n,t)=>{let i=await t({url:"messaging/default/active"});return i.error&&404===i.error.status?{data:null}:i},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},47672:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return P}});var t=n(24246),i=n(87949),a=n(27378),r=n(77213),l=n(58754),o=n(92222),c=n(59003),u=n(25980),d=n(47935),g=n(86677);let p=(e,s)=>{let n=e.filter(e=>e.isChecked);return n.length>0?"".concat(s,"=").concat(n.map(e=>e.value).join("&".concat(s,"="))):void 0},x=e=>{let{value:s,displayText:n,isChecked:a,onCheckboxChange:r}=e;return(0,t.jsx)(i.XZJ,{value:s,height:"20px",mb:"25px",isChecked:a,onChange:e=>{let{target:n}=e;r(s,n.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,t.jsx)(i.xvT,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:n})},s)},h=e=>{let{options:s,header:n,onCheckboxChange:r,columns:l=3,numDefaultOptions:o=15}=e,[c,u]=(0,a.useState)(!1),d=c?s:s.slice(0,o),g=s.length>o;return(0,t.jsxs)(i.Qdk,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,t.jsx)(i.X6q,{height:"56px",children:(0,t.jsxs)(i.KFZ,{height:"100%",children:[(0,t.jsx)(i.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:n}),(0,t.jsx)(i.XEm,{})]})}),(0,t.jsxs)(i.Hk3,{id:"panel-".concat(n),children:[(0,t.jsx)(i.MIq,{columns:l,children:d.map(e=>(0,t.jsx)(x,{...e,onCheckboxChange:r},e.value))}),!c&&g?(0,t.jsx)(i.wpx,{type:"text",onClick:()=>{u(!0)},children:"View more"}):null,c&&g?(0,t.jsx)(i.wpx,{type:"text",onClick:()=>{u(!1)},children:"View less"}):null]})]})},f=e=>{let{heading:s,children:n}=e;return(0,t.jsxs)(i.xuv,{padding:"12px 8px 8px 12px",maxHeight:600,children:[s?(0,t.jsx)(i.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:s}):null,n]})},m=e=>{let{resetFilters:s,isOpen:n,onClose:a,children:r,...l}=e;return(0,t.jsxs)(i.u_l,{isOpen:n,onClose:a,isCentered:!0,size:"2xl",...l,children:[(0,t.jsx)(i.ZAr,{}),(0,t.jsxs)(i.hzk,{children:[(0,t.jsx)(i.xBx,{children:"Filters"}),(0,t.jsx)(i.olH,{}),(0,t.jsx)(i.izJ,{}),(0,t.jsx)(i.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:r}),(0,t.jsx)(i.mzw,{children:(0,t.jsxs)(i.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,t.jsx)(i.wpx,{onClick:s,className:"mr-3 grow",children:"Reset filters"}),(0,t.jsx)(i.wpx,{type:"primary",onClick:a,className:"grow",children:"Done"})]})})]})]})};var j=n(77830),C=n(23923),y=n(16134),v=n(6675),b=n(28079);let k=()=>{let{isOpen:e,onClose:s,onOpen:n}=(0,i.qY0)();(0,b.fd)();let t=(0,y.C)(b.U3);(0,v.a4)();let r=(0,y.C)(v.ZS),[l,o]=(0,a.useState)([]),[c,u]=(0,a.useState)([]),[d,g]=(0,a.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),[p,x]=(0,a.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]);(0,a.useEffect)(()=>{0===c.length&&u(t.map(e=>({value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1})))},[t,c,u]),(0,a.useEffect)(()=>{0===l.length&&o([...Object.entries(r.purposes).map(e=>({value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1})),...Object.entries(r.special_purposes).map(e=>({value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}))])},[r,l,u]);let h=(e,s,n,t)=>{t(n.map(n=>n.value===e?{...n,isChecked:s}:n))};return{isOpen:e,onClose:s,onOpen:n,resetFilters:()=>{u(e=>e.map(e=>({...e,isChecked:!1}))),g(e=>e.map(e=>({...e,isChecked:!1}))),o(e=>e.map(e=>({...e,isChecked:!1}))),x(e=>e.map(e=>({...e,isChecked:!1})))},purposeOptions:l,onPurposeChange:(e,s)=>{h(e,s,l,o)},dataUseOptions:c,onDataUseChange:(e,s)=>{h(e,s,c,u)},legalBasisOptions:d,onLegalBasisChange:(e,s)=>{h(e,s,d,g)},consentCategoryOptions:p,onConsentCategoryChange:(e,s)=>{h(e,s,p,x)}}},w=e=>{let{isOpen:s,isTcfEnabled:n,onClose:a,resetFilters:r,purposeOptions:l,onPurposeChange:o,dataUseOptions:c,onDataUseChange:u,legalBasisOptions:d,onLegalBasisChange:g,consentCategoryOptions:p,onConsentCategoryChange:x}=e;return(0,t.jsx)(m,{isOpen:s,onClose:a,resetFilters:r,children:(0,t.jsx)(i.UQy,{children:(0,t.jsxs)(f,{children:[n?(0,t.jsx)(h,{options:l,onCheckboxChange:o,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,t.jsx)(h,{options:c,onCheckboxChange:u,header:"Data uses"}),n?(0,t.jsx)(h,{options:d,onCheckboxChange:g,header:"Legal basis"}):null,n?null:(0,t.jsx)(h,{options:p,onCheckboxChange:x,header:"Consent categories"})]})})})};var T=n(48347),_=n(32885);let S=(0,o.Cl)(),M={items:[],total:0,page:1,size:25,pages:1},q=()=>{let{tcf:e,dictionaryService:s}=(0,u.hz)(),{isLoading:n}=(0,_.x8)(),{isOpen:r,onOpen:l,onClose:x}=(0,T.W)(),h=(0,g.useRouter)(),[f,m]=(0,a.useState)(),{isOpen:y,onOpen:v,onClose:b,resetFilters:q,purposeOptions:O,onPurposeChange:P,dataUseOptions:E,onDataUseChange:F,legalBasisOptions:z,onLegalBasisChange:N,consentCategoryOptions:R,onConsentCategoryChange:I}=k(),A=(0,a.useMemo)(()=>p(E,"data_uses"),[E]),L=(0,a.useMemo)(()=>p(z,"legal_bases"),[z]),B=(0,a.useMemo)(()=>p(O.filter(e=>e.value.includes("normal")).map(e=>({...e,value:e.value.split(".")[1]})),"purposes"),[O]),U=(0,a.useMemo)(()=>p(O.filter(e=>e.value.includes("special")).map(e=>({...e,value:e.value.split(".")[1]})),"special_purposes"),[O]),Z=(0,a.useMemo)(()=>p(R,"consent_category"),[R]),{PAGE_SIZES:D,pageSize:V,setPageSize:W,onPreviousPageClick:H,isPreviousPageDisabled:K,onNextPageClick:X,isNextPageDisabled:Q,startRange:G,endRange:J,pageIndex:Y,setTotalPages:$,resetPageIndexToDefault:ee}=(0,d.oi)(),[es,en]=(0,a.useState)(),et=(0,a.useCallback)(e=>{ee(),en(e)},[ee,en]),{isFetching:ei,isLoading:ea,data:er}=(0,_.de)({pageIndex:Y,pageSize:V,dataUses:A,search:es,legalBasis:L,purposes:B,specialPurposes:U,consentCategories:Z}),{items:el,total:eo,pages:ec}=(0,a.useMemo)(()=>er||M,[er]);(0,a.useEffect)(()=>{$(ec)},[ec,$]);let eu=(0,a.useMemo)(()=>[S.accessor(e=>e.name,{id:"name",cell:e=>(0,t.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,t.jsx)(d.Rr,{value:"Vendor",...e})}),S.accessor(e=>e.data_uses,{id:"tcf_purpose",cell:e=>(0,t.jsx)(d.CI,{plSuffix:"purposes",singSuffix:"purpose",count:e.getValue()}),header:e=>(0,t.jsx)(d.Rr,{value:"TCF purpose",...e})}),S.accessor(e=>e.data_uses,{id:"data_uses",cell:e=>(0,t.jsx)(d.CI,{plSuffix:"data uses",singSuffix:"data use",count:e.getValue()}),header:e=>(0,t.jsx)(d.Rr,{value:"Data use",...e})}),S.accessor(e=>e.legal_bases,{id:"legal_bases",cell:e=>(0,t.jsx)(d.CI,{plSuffix:"bases",singSuffix:"basis",count:e.getValue()}),header:e=>(0,t.jsx)(d.Rr,{value:"Legal basis",...e})}),S.accessor(e=>e.consent_categories,{id:"consent_categories",cell:e=>(0,t.jsx)(d.CI,{plSuffix:"categories",singSuffix:"category",count:e.getValue()}),header:e=>(0,t.jsx)(d.Rr,{value:"Categories",...e})}),S.accessor(e=>e.cookies,{id:"cookies",cell:e=>(0,t.jsx)(d.CI,{plSuffix:"cookies",singSuffix:"cookie",count:e.getValue()}),header:e=>(0,t.jsx)(d.Rr,{value:"Cookies",...e})})],[]),ed=(0,c.b7)({columns:eu,data:el,state:{columnVisibility:{tcf_purpose:e,data_uses:e,legal_bases:e,consent_categories:!e,cookies:!e}},getCoreRowModel:(0,o.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return ea||n?(0,t.jsx)(d.I4,{rowHeight:36,numRows:15}):(0,t.jsxs)(i.kCb,{flex:1,direction:"column",overflow:"auto",children:[r&&f?(0,t.jsx)(T.m,{isOpen:r,fidesKey:f,onClose:x}):null,(0,t.jsxs)(d.Q$,{children:[(0,t.jsx)(d.HO,{globalFilter:es,setGlobalFilter:et,placeholder:"Search"}),(0,t.jsx)(w,{isOpen:y,isTcfEnabled:e,onClose:b,resetFilters:q,purposeOptions:O,onPurposeChange:P,dataUseOptions:E,onDataUseChange:F,legalBasisOptions:z,onLegalBasisChange:N,consentCategoryOptions:R,onConsentCategoryChange:I}),(0,t.jsxs)(i.Ugi,{alignItems:"center",spacing:2,children:[(0,t.jsx)(C.Z,{buttonLabel:"Add vendors",onButtonClick:s?()=>{h.push(j.Gg)}:void 0}),(0,t.jsx)(i.wpx,{onClick:v,"data-testid":"filter-multiple-systems-btn",children:"Filter"})]})]}),(0,t.jsx)(d.ZK,{tableInstance:ed,onRowClick:e=>{m(e.fides_key),l()}}),(0,t.jsx)(d.s8,{totalRows:eo||0,pageSizes:D,setPageSize:W,onPreviousPageClick:H,isPreviousPageDisabled:K||ei,onNextPageClick:X,isNextPageDisabled:Q||ei,startRange:G,endRange:J})]})},{Text:O}=i.AntTypography;var P=()=>(0,t.jsxs)(r.Z,{title:"Vendors",children:[(0,t.jsx)(l.Z,{heading:"Vendors",children:(0,t.jsx)(O,{className:"block w-1/2",children:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"})}),(0,t.jsx)(q,{})]})}},function(e){e.O(0,[401,3923,2888,9774,179],function(){return e(e.s=54727)}),_N_E=e.O()}]);