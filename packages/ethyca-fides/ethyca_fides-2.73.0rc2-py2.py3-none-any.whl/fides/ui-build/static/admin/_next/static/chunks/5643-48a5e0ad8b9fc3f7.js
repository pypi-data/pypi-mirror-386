"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5643],{77213:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(24246),a=n(87949),s=n(88038),r=n.n(s),l=n(86677);n(27378);var o=n(25980),d=n(90867),u=n(42478),c=n(77830),g=()=>{let e=(0,l.useRouter)();return(0,i.jsx)(a.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(a.xuv,{children:[(0,i.jsxs)(a.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(a.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(a.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,i.jsxs)(a.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:s=!0,mainProps:c}=e,p=(0,o.hz)(),m=(0,l.useRouter)(),f="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,y=!(p.flags.messagingConfiguration&&f),{data:v}=(0,u.JE)(void 0,{skip:y}),{data:x}=(0,d.PW)(void 0,{skip:y}),h=p.flags.messagingConfiguration&&(!v||!x)&&f;return(0,i.jsxs)(a.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(a.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[h?(0,i.jsx)(g,{}):null,t]})]})}},58754:function(e,t,n){var i=n(24246),a=n(87949),s=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:l,rightContent:o,style:d,...u}=e;return(0,i.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,i.jsxs)(a.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(a.lQT,{className:n||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,i.jsx)(s.m,{className:l?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),l]})}},19904:function(e,t,n){n.d(t,{Tg:function(){return r}});var i=n(24246),a=n(16134),s=n(31793);let r=e=>(0,a.C)(s.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:n}=e;return r(t)?(0,i.jsx)(i.Fragment,{children:n}):null}},70788:function(e,t,n){n.d(t,{m:function(){return d}});var i=n(24246),a=n(87949),s=n(79894),r=n.n(s),l=n(27378);let{Text:o}=a.AntTypography,d=e=>{let{items:t,...n}=e,s=(0,l.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let s=n===t.length-1,l={...e},d=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,i.jsx)(o,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,id:s?"breadcrumb-current-page":void 0,children:l.title})),d)?l.title=(0,i.jsx)(a.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,i.jsx)(r(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,i.jsx)(a.zrq,{items:s,...n})}},47094:function(e,t,n){n.d(t,{Z:function(){return T}});var i=n(24246),a=n(87949),s=n(86677),r=n(27378),l=n(812),o=n(77830),d=n(19904),u=n(8917),c=n(56141),g=n.n(c),p=n(32885),m=n(65735);let f=()=>Date.now().toString()+Math.random().toString();var y=()=>{let[e,{isLoading:t}]=(0,p.Ld)(),[n,{isLoading:i}]=(0,p.yM)(),[a]=(0,p.Nt)();return{createOrUpdate:async(t,i,s)=>{if(t.field_type===u.Uv.OPEN_TEXT){let a={...t,field_type:m.AL.STRING,id:i?i.id:void 0};return i?await n(a):await e(a)}if(t.field_type===u.Uv.SINGLE_SELECT||t.field_type===u.Uv.MULTIPLE_SELECT){var r,o;let d;if(!i){let{options:n,...i}=t,s={name:f(),allowed_values:null!=n?n:[]},o=await a(s);if((0,l.D4)(o))return o;let d={...i,field_type:t.field_type===u.Uv.SINGLE_SELECT?m.AL.STRING:m.AL.STRING_,allow_list_id:null===(r=o.data)||void 0===r?void 0:r.id};return await e(d)}let{options:c,...p}=t;if(!g()(null==s?void 0:s.allowed_values,c)){let e={...s,name:null!==(o=null==s?void 0:s.name)&&void 0!==o?o:f(),id:null==s?void 0:s.id,allowed_values:null!=c?c:[]};if(d=await a(e),(0,l.D4)(d))return d}let y={...p,id:i.id,allow_list_id:d?d.data.id:i.allow_list_id,field_type:t.field_type===u.Uv.SINGLE_SELECT?m.AL.STRING:m.AL.STRING_};return await n(y)}},isLoading:t||i}},v=n(66236),x=n(31883);let h=()=>(0,i.jsxs)(a.N_L,{active:!0,children:[(0,i.jsx)(a.N_L.Input,{}),(0,i.jsx)(a.N_L.Input,{}),(0,i.jsx)(a.N_L.Input,{}),(0,i.jsx)(a.N_L.Input,{}),(0,i.jsx)(a.N_L.Button,{})]});var T=e=>{let{initialField:t,isLoading:n}=e,[c]=a.PPS.useForm(),g=(0,s.useRouter)(),[f,T]=a.Pg3.useMessage(),{createOrUpdate:C}=y(),{data:P,isLoading:S}=(0,p.vA)(null==t?void 0:t.allow_list_id,{skip:!(null==t?void 0:t.allow_list_id)}),[_,{isLoading:j}]=(0,p.UF)(),E=(0,d.Tg)([m.Sh.CUSTOM_FIELD_DELETE])&&!!t,b=async()=>{let e=await _({id:null==t?void 0:t.id});if((0,x.D4)(e)){f.error((0,l.e$)(e.error));return}f.success("Custom field deleted successfully",void 0,()=>{g.push(o.WC)})},[L,A]=(0,r.useState)(!1),w=async e=>{let n=await C(e,t,P);if(!n){f.error("An unexpected error occurred");return}(0,x.D4)(n)?f.error((0,l.e$)(n.error)):f.success("Custom field ".concat(t?"updated":"created"," successfully")),g.push(o.WC)},I=(e=>{var t;if(e)return{...e,field_type:(0,v._)(e),options:null!==(t=null==P?void 0:P.allowed_values)&&void 0!==t?t:[]}})(t);return n||S?(0,i.jsx)(h,{}):(0,i.jsxs)(a.PPS,{form:c,layout:"vertical",initialValues:I||{},validateTrigger:["onBlur","onChange"],onFinish:w,children:[T,(0,i.jsx)(a.PPS.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter a name"}],children:(0,i.jsx)(a.AntInput,{"data-testid":"input-name"})}),(0,i.jsx)(a.PPS.Item,{label:"Description",name:"description",children:(0,i.jsx)(a.AntInput.TextArea,{rows:2,"data-testid":"input-description"})}),(0,i.jsx)(a.PPS.Item,{label:"Location",name:"resource_type",rules:[{required:!0,message:"Please select a resource type"}],children:(0,i.jsx)(a.WPr,{options:u.C7,getPopupContainer:e=>e.parentElement||document.body,disabled:!!t,"data-testid":"select-resource-type"})}),(0,i.jsx)(a.PPS.Item,{label:"Field Type",name:"field_type",rules:[{required:!0,message:"Please select a field type"}],children:(0,i.jsx)(a.WPr,{options:u.TY,getPopupContainer:e=>e.parentElement||document.body,"data-testid":"select-field-type"})}),(0,i.jsx)(a.PPS.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.field_type!==t.field_type,children:e=>{let{getFieldValue:t}=e,n=t("field_type");return(n===u.Uv.SINGLE_SELECT||n===u.Uv.MULTIPLE_SELECT)&&(0,i.jsx)(a.PPS.List,{name:"options",rules:[{validator:async(e,t)=>!t||t.length<1?Promise.reject(Error("At least one option is required for selects")):Promise.resolve()}],children:(e,n,s)=>{let{add:r,remove:l}=n,{errors:o}=s;return(0,i.jsxs)(i.Fragment,{children:[e.map((n,s)=>(0,i.jsx)(a.PPS.Item,{required:!1,label:0===s?"Options":"","data-testid":"options-form-item",children:(0,i.jsxs)(a.jqI,{gap:"middle",children:[(0,i.jsx)(a.PPS.Item,{...n,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Options cannot be empty"},()=>({validator:(e,n)=>t("options").filter(e=>e===n).length>1?Promise.reject(Error("Option values must be unique")):Promise.resolve()})],noStyle:!0,children:(0,i.jsx)(a.AntInput,{placeholder:"Enter option value","data-testid":"input-option-".concat(s)})}),e.length>1&&(0,i.jsx)(a.wpx,{icon:(0,i.jsx)(a.PJP.ZNm,{}),onClick:()=>l(n.name),"aria-label":"Remove option"})]})},n.key)),(0,i.jsx)(a.PPS.Item,{children:(0,i.jsx)(a.wpx,{type:"dashed",onClick:()=>r(),icon:(0,i.jsx)(a.PJP.mm_,{}),"data-testid":"add-option-btn",children:"Add select option"})}),(0,i.jsx)(a.PPS.ErrorList,{errors:o,className:"-mt-4 mb-4"})]})}})}}),(0,i.jsxs)(a.jqI,{justify:"space-between",children:[E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.wpx,{danger:!0,onClick:()=>A(!0),loading:j,"data-testid":"delete-btn",children:"Delete"}),(0,i.jsx)(a.cVQ,{isOpen:L,onClose:()=>A(!1),onConfirm:b,title:"Delete custom field",message:(0,i.jsxs)(a.AntTypography.Paragraph,{children:["Are you sure you want to delete"," ",(0,i.jsx)("strong",{children:null==t?void 0:t.name}),"? This action cannot be undone."]}),isCentered:!0,"data-testid":"delete-modal"})]}),(0,i.jsx)(a.wpx,{type:"primary",htmlType:"submit","data-testid":"save-btn",children:"Save"})]})]})}},8917:function(e,t,n){n.d(t,{C7:function(){return l},P3:function(){return d},TY:function(){return o},Uv:function(){return a},uP:function(){return r}});var i,a,s=n(65735);let r=new Map([[s.P6.SYSTEM,"system:information"],[s.P6.DATA_USE,"taxonomy:data use"],[s.P6.DATA_CATEGORY,"taxonomy:data category"],[s.P6.DATA_SUBJECT,"taxonomy:data subject"],[s.P6.PRIVACY_DECLARATION,"system:data use"]]);(i=a||(a={})).SINGLE_SELECT="singleSelect",i.MULTIPLE_SELECT="multipleSelect",i.OPEN_TEXT="openText";let l=[{label:"taxonomy:".concat(s.P6.DATA_CATEGORY),value:s.P6.DATA_CATEGORY},{label:"taxonomy:".concat(s.P6.DATA_SUBJECT),value:s.P6.DATA_SUBJECT},{label:"taxonomy:".concat(s.P6.DATA_USE),value:s.P6.DATA_USE},{label:"".concat(s.P6.SYSTEM,":information"),value:s.P6.SYSTEM},{label:"system:data use",value:s.P6.PRIVACY_DECLARATION}],o=[{label:"Single select",value:"singleSelect"},{label:"Multiple select",value:"multipleSelect"},{label:"Open text",value:"openText"}],d={singleSelect:"Single-value select",multipleSelect:"Multi-value select",openText:"Open text"}},66236:function(e,t,n){n.d(t,{S:function(){return r},_:function(){return s}});var i=n(8917),a=n(65735);let s=e=>e.field_type===a.AL.STRING_?i.Uv.MULTIPLE_SELECT:e.allow_list_id?i.Uv.SINGLE_SELECT:i.Uv.OPEN_TEXT,r=e=>i.P3[s(e)]},42478:function(e,t,n){n.d(t,{FU:function(){return d},JE:function(){return a},Ki:function(){return c},SU:function(){return g},W:function(){return p},h9:function(){return s},jc:function(){return i},qt:function(){return o},sn:function(){return u}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:a,useCreateMessagingConfigurationMutation:s,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:l,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:d,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let a=await i({url:"messaging/default/active"});return a.error&&404===a.error.status?{data:null}:a},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},31883:function(e,t,n){n.d(t,{Bw:function(){return i.Bw},D4:function(){return i.D4}});var i=n(19043)}}]);