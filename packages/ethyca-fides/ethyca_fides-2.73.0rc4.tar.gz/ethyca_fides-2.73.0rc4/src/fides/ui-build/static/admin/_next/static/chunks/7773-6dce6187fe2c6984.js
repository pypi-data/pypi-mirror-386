"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7773],{77213:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(24246),s=n(87949),r=n(88038),a=n.n(r),o=n(86677);n(27378);var l=n(25980),u=n(90867),c=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:n,padded:r=!0,mainProps:d}=e,f=(0,l.hz)(),p=(0,o.useRouter)(),m="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,h=!(f.flags.messagingConfiguration&&m),{data:y}=(0,c.JE)(void 0,{skip:h}),{data:x}=(0,u.PW)(void 0,{skip:h}),v=f.flags.messagingConfiguration&&(!y||!x)&&m;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(a(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:r?6:0,px:r?10:0,h:r?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[v?(0,i.jsx)(g,{}):null,t]})]})}},19904:function(e,t,n){n.d(t,{Tg:function(){return a}});var i=n(24246),s=n(16134),r=n(31793);let a=e=>(0,s.C)(r.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:n}=e;return a(t)?(0,i.jsx)(i.Fragment,{children:n}):null}},46782:function(e,t,n){n.d(t,{j:function(){return r},l:function(){return a}});var i=n(30454),s=n.n(i);let r="#/definitions/FidesDatasetReference",a=e=>{let t=(e,t,n)=>{let i;return(void 0===t||""===t||void 0===t)&&(i="".concat(e," is required")),n===r&&((null==t?void 0:t.includes("."))?t.split(".").length<3&&(i="Dataset reference must include at least three parts"):i="Dataset reference must be dot delimited"),i},n=t=>{var n,i;return null!==(i=null==e?void 0:null===(n=e.required)||void 0===n?void 0:n.includes(t))&&void 0!==i&&i};return{validateField:t,isRequiredField:n,getFieldValidation:(e,i)=>{if(n(e))return e=>{var n;return t(i.title,e,null===(n=i.allOf)||void 0===n?void 0:n[0].$ref)}},preprocessValues:t=>{let n=s()(t);return e&&Object.keys(e.properties).forEach(t=>{var i,s;if((null===(i=e.properties[t].allOf)||void 0===i?void 0:i[0].$ref)===r){let e=null===(s=n.secrets[t])||void 0===s?void 0:s.split(".");e&&(n.secrets[t]={dataset:e.shift(),field:e.join("."),direction:"from"})}"WebsiteSchema"!==e.title||"URL"!==e.properties[t].title||n.secrets[t].startsWith("http://")||n.secrets[t].startsWith("https://")||(n.secrets[t]="https://".concat(n.secrets[t])),"integer"===e.properties[t].type&&"string"==typeof n.secrets[t]&&""===n.secrets[t].trim()&&(n.secrets[t]=void 0)}),n}}}},44553:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(24246),s=n(87949),r=n(27378),a=n(45277),o=n(16125),l=n(812),u=n(46628),c=n(20682),d=n(54427),g=n(52253),f=n(78780);let{reducer:p}=(0,d.oM)({name:"connectorTemplate",initialState:{},reducers:{}}),{useRegisterConnectorTemplateMutation:m}=f.u.injectEndpoints({endpoints:e=>({registerConnectorTemplate:e.mutation({query:e=>{let t=new FormData;return t.append("file",e),{url:"".concat(g.o4,"/register"),method:"POST",body:t}},invalidatesTags:()=>["Connection Type"]})})});var h=e=>{let{isOpen:t,onClose:n,testId:d="connector-template-modal"}=e,g=(0,o.I0)(),[f,p]=(0,r.useState)(null),h=(0,s.pmc)(),{getRootProps:y,getInputProps:x,isDragActive:v}=(0,a.uI)({onDrop:e=>{var t;if("zip"!==(null===(t=e[0].name.split(".").pop())||void 0===t?void 0:t.toLowerCase())){h((0,u.Vo)("Only zip files are allowed."));return}p(e[0])}}),[C,{isLoading:j}]=m(),{refetch:b}=(0,c.$I)({search:""},{skip:!1}),T=async()=>{if(f)try{var e;await C(f).unwrap(),h((0,u.t5)("Integration template uploaded successfully."));let{data:t}=await b();g((0,c.fP)(null!==(e=null==t?void 0:t.items)&&void 0!==e?e:[])),n()}catch(e){h((0,u.Vo)((0,l.e$)(e)))}finally{p(null)}};return(0,i.jsxs)(s.u_l,{isOpen:t,onClose:n,size:"2xl",children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{textAlign:"left",p:2,"data-testid":d,children:[(0,i.jsx)(s.xBx,{children:"Upload integration template"}),(0,i.jsxs)(s.fef,{children:[(0,i.jsx)(s.xvT,{fontSize:"sm",mb:4,children:"Drag and drop your integration template zip file here, or click to browse your files."}),(0,i.jsxs)(s.xuv,{...y(),bg:v?"gray.100":"gray.50",border:"2px dashed",borderColor:v?"gray.300":"gray.200",borderRadius:"md",cursor:"pointer",minHeight:"150px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,i.jsx)("input",{...x()}),f?(0,i.jsx)(s.xvT,{children:f.name}):v?(0,i.jsx)(s.xvT,{children:"Drop the file here..."}):(0,i.jsx)(s.xvT,{children:"Click or drag and drop your file here."})]}),(0,i.jsx)(s.xvT,{fontSize:"sm",mt:4,children:"An integration template zip file must include a SaaS config and dataset, but may also contain an icon (.svg) as an optional file."})]}),(0,i.jsxs)(s.mzw,{className:"flex w-full justify-end gap-2",children:[(0,i.jsx)(s.wpx,{onClick:n,"data-testid":"cancel-btn",disabled:j,children:"Cancel"}),(0,i.jsx)(s.wpx,{type:"primary",htmlType:"submit",disabled:!f||j,onClick:T,"data-testid":"submit-btn",children:"Submit"})]})]})]})}},27259:function(e,t,n){var i=n(24246),s=n(87949),r=n(34090);t.Z=e=>{let{disabled:t=!1,isRequired:n=!1,label:a,placeholder:o,type:l="text",...u}=e,{id:c,autoFocus:d}=u,[g,f]=(0,r.U$)(u);return(0,i.jsxs)(s.NIc,{display:"flex",isRequired:n,isInvalid:!!(f.error&&f.touched),children:[a&&(0,i.jsx)(s.lXp,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:c,minWidth:"150px",children:a}),(0,i.jsxs)(s.gCW,{align:"flex-start",w:"inherit",children:["number"===l&&(0,i.jsxs)(s.Y2U,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,i.jsx)(s.zuI,{...g,autoComplete:"off",autoFocus:d}),(0,i.jsxs)(s.FiK,{children:[(0,i.jsx)(s.WQu,{}),(0,i.jsx)(s.Y_d,{})]})]}),"text"===l&&(0,i.jsx)(s.IIB,{...g,autoComplete:"off",autoFocus:d,color:"gray.700",isDisabled:t,placeholder:o,size:"sm"}),"textarea"===l&&(0,i.jsx)(s.gxH,{...g,autoComplete:"off",autoFocus:d,color:"gray.700",placeholder:o,resize:"none",size:"sm",value:g.value||""}),(0,i.jsx)(s.J1D,{children:f.error})]})]})}},42478:function(e,t,n){n.d(t,{FU:function(){return u},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return f},h9:function(){return r},jc:function(){return i},qt:function(){return l},sn:function(){return c}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:r,useCreateMessagingConfigurationSecretsMutation:a,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})}}]);