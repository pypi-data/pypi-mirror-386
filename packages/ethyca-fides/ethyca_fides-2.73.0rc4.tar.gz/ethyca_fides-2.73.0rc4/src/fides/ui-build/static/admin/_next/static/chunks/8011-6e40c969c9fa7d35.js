"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8011],{58754:function(e,i,t){var n=t(24246),a=t(87949),r=t(70788);i.Z=e=>{let{heading:i,breadcrumbItems:t,isSticky:s=!0,children:l,rightContent:o,style:d,...c}=e;return(0,n.jsxs)("div",{...c,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,n.jsxs)(a.jqI,{justify:"space-between",children:["string"==typeof i?(0,n.jsx)(a.lQT,{className:t||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:i}):i,o&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!t&&(0,n.jsx)(r.m,{className:l?"pb-4":void 0,items:t,"data-testid":"page-breadcrumb"}),l]})}},97181:function(e,i,t){t.d(i,{d:function(){return d}});var n=t(24246),a=t(87949),r=t(34090),s=t(27378),l=t(46238),o=t(40324);let d=e=>{let{name:i,label:t,labelProps:d,tooltip:c,isRequired:u,layout:h="inline",helperText:x,...m}=e,[p,g,{setValue:f}]=(0,r.U$)(i),j=!!(g.touched&&g.error),[v,y]=(0,s.useState)("");p.value||"tags"!==m.mode&&"multiple"!==m.mode||(p.value=[]),"tags"===m.mode&&"string"==typeof p.value&&(p.value=[p.value]);let b="tags"===m.mode?(e,i)=>e?e.value!==v||p.value.includes(v)?m.optionRender?m.optionRender(e,i):e.label:'Create "'.concat(v,'"'):void 0:m.optionRender||void 0,k=e=>{y(e),m.onSearch&&m.onSearch(e)},C=(e,i)=>{f(e),m.onChange&&m.onChange(e,i)};return"inline"===h?(0,n.jsx)(a.NIc,{isInvalid:j,isRequired:u,children:(0,n.jsxs)(a.rjZ,{templateColumns:t?"1fr 3fr":"1fr",children:[t?(0,n.jsx)(o.__,{htmlFor:m.id||i,...d,children:t}):null,(0,n.jsxs)(a.jqI,{align:"center",children:[(0,n.jsxs)(a.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,n.jsx)(a.WPr,{...p,id:m.id||i,"data-testid":"controlled-select-".concat(p.name),...m,optionRender:b,onSearch:"tags"===m.mode?k:void 0,onChange:C,value:p.value||void 0,status:j?"error":void 0}),x&&(0,n.jsx)(a.Q6r,{children:x}),(0,n.jsx)(o.Bc,{isInvalid:j,message:g.error,fieldName:p.name})]}),(0,n.jsx)(l.b,{label:c,className:j?"mt-2 self-start":void 0})]})]})}):(0,n.jsx)(a.NIc,{isInvalid:j,isRequired:u,children:(0,n.jsxs)(a.gCW,{alignItems:"start",children:[(0,n.jsxs)(a.jqI,{align:"center",children:[t?(0,n.jsx)(o.__,{htmlFor:m.id||i,fontSize:"xs",my:0,mr:1,...d,children:t}):null,(0,n.jsx)(l.b,{label:c})]}),(0,n.jsx)(a.WPr,{...p,id:m.id||i,"data-testid":"controlled-select-".concat(p.name),...m,optionRender:b,onSearch:"tags"===m.mode?k:void 0,onChange:C,value:p.value||void 0,status:j?"error":void 0}),x&&(0,n.jsx)(a.Q6r,{style:{marginTop:0},children:x}),(0,n.jsx)(o.Bc,{isInvalid:j,message:g.error,fieldName:p.name})]})})}},70788:function(e,i,t){t.d(i,{m:function(){return d}});var n=t(24246),a=t(87949),r=t(79894),s=t.n(r),l=t(27378);let{Text:o}=a.AntTypography,d=e=>{let{items:i,...t}=e,r=(0,l.useMemo)(()=>null==i?void 0:i.map((e,t)=>{let r=t===i.length-1,l={...e},d=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,n.jsx)(o,{style:{color:"inherit",maxWidth:r?void 0:400},ellipsis:!r,id:r?"breadcrumb-current-page":void 0,children:l.title})),d)?l.title=(0,n.jsx)(a.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,n.jsx)(s(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[i]);return(0,n.jsx)(a.zrq,{items:r,...t})}},39715:function(e,i,t){var n=t(24246),a=t(87949);t(27378),i.Z=e=>{let{isEmptyState:i,yamlError:t}=e;return(0,n.jsx)(a.Rg9,{in:!0,children:(0,n.jsxs)(a.xuv,{w:"fit-content",bg:"white",p:3,borderRadius:3,children:[(0,n.jsxs)(a.Ugi,{children:[(0,n.jsx)(a.X6q,{as:"h5",color:"gray.700",size:"xs",children:"YAML"}),(0,n.jsx)(a.Vp9,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,n.jsx)(a.xuv,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,n.jsxs)(a.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,n.jsx)(a.f9v,{}),i&&(0,n.jsxs)(a.xuv,{children:[(0,n.jsx)(a.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,n.jsx)(a.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:"Yaml system is required"})]}),t&&(0,n.jsxs)(a.xuv,{children:[(0,n.jsx)(a.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,n.jsx)(a.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:t.message}),(0,n.jsx)(a.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:t.reason}),(0,n.jsxs)(a.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:["Ln ",(0,n.jsx)("b",{children:t.mark.line}),", Col"," ",(0,n.jsx)("b",{children:t.mark.column}),", Pos"," ",(0,n.jsx)("b",{children:t.mark.position})]})]})]})})]})})}},41207:function(e,i,t){t.d(i,{F:function(){return s},M:function(){return r}});var n=t(76649),a=t(65218);let r=t.n(a)()(()=>t.e(7088).then(t.bind(t,57088)).then(e=>e.default),{loadableGenerated:{webpack:()=>[57088]},ssr:!1}),s=e=>(0,n.Ln)({name:"string"},e)&&"YAMLException"===e.name},1226:function(e,i,t){var n=t(24246);t(27378);var a=t(77213);i.Z=e=>{let{children:i}=e;return(0,n.jsx)(a.Z,{title:"Connections",children:i})}},11274:function(e,i,t){t.d(i,{s:function(){return q}});var n=t(24246),a=t(96356),r=t(87949),s=t(86677),l=t(27378),o=t(16134),d=t(77830),c=t(65735),u=t(17245),h=t(84306),x=t(14207),m=t(16125),p=t(33335),g=t(34090),f=t(46782),j=t(46238);let v=(e,i)=>{let t={...e};return Object.entries(i.properties).forEach(i=>{let[n,a]=i;if("integer"===a.type){let i=a.default?Number(a.default):e[n];t[n]=i||0}else{var r;let i=null!==(r=a.default)&&void 0!==r?r:e[n];t[n]=null!=i?i:null}}),t};var y=e=>{let{data:i,defaultValues:t,isSubmitting:s=!1,onSaveClick:d,onTestConnectionClick:h,testButtonLabel:m="Test integration"}=e,p=(0,l.useRef)(!1),{handleError:y}=(0,u.HK)(),{connection:b,connectionOption:k}=(0,o.C)(a.ZZ),[C,_]=(0,x.h2)(),S=e=>{let i;return(void 0===e||""===e)&&(i="Connection Identifier is required"),e&&(0,r.kEn)(e)&&(i="Connection Identifier must be an alphanumeric value"),i},w=(e,i,t)=>{let n;return(void 0===i||""===i)&&(n="".concat(e," is required")),t===f.j&&(i.includes(".")?i.split(".").length<3&&(n="Dataset reference must include at least three parts"):n="Dataset reference must be dot delimited"),n},I=(e,i)=>(0,n.jsx)(r.lXp,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:e,minWidth:"150px",children:i}),R=e=>{var i;if((null===(i=e.allOf)||void 0===i?void 0:i[0].$ref)===f.j)return"Enter dataset.collection.field"},z=(e,t)=>{var a;return(0,n.jsx)(g.gN,{id:e,name:e,validate:(null!==(a=i.required)&&void 0!==a&&!!a.includes(e)||"integer"===t.type)&&(e=>{var i;return w(t.title,e,null===(i=t.allOf)||void 0===i?void 0:i[0].$ref)}),children:a=>{var s;let{field:l,form:o}=a;return(0,n.jsxs)(r.NIc,{display:"flex",isRequired:null===(s=i.required)||void 0===s?void 0:s.includes(e),isInvalid:o.errors[e]&&o.touched[e],children:[I(e,t.title),(0,n.jsxs)(r.gCW,{align:"flex-start",w:"inherit",children:["integer"!==t.type&&(0,n.jsx)(r.IIB,{...l,value:l.value||"",placeholder:R(t),autoComplete:"off",color:"gray.700",size:"sm"}),"integer"===t.type&&(0,n.jsxs)(r.Y2U,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,n.jsx)(r.zuI,{...l,autoComplete:"off"}),(0,n.jsxs)(r.FiK,{children:[(0,n.jsx)(r.WQu,{}),(0,n.jsx)(r.Y_d,{})]})]}),(0,n.jsx)(r.J1D,{children:o.errors[e]})]}),(0,n.jsx)(r.kCb,{alignItems:"center",h:8,ml:2,children:(0,n.jsx)(j.b,{label:t.description})})]})}},e)},Z=async()=>{try{await C(b.key).unwrap()}catch(e){y(e)}};return(0,l.useEffect)(()=>(p.current=!0,_.isSuccess&&h(_),()=>{p.current=!1}),[h,_]),(0,n.jsx)(g.J9,{enableReinitialize:!0,initialValues:(()=>{let e={...t};if(null==b?void 0:b.key){var n,a;e.name=null!==(a=b.name)&&void 0!==a?a:"",e.description=b.description,e.instance_key=b.connection_type===c.Rj.SAAS?null===(n=b.saas_config)||void 0===n?void 0:n.fides_key:b.key}return v(e,i)})(),onSubmit:(e,t)=>{let n={...e};Object.keys(i.properties).forEach(t=>{var a;if((null===(a=i.properties[t].allOf)||void 0===a?void 0:a[0].$ref)===f.j){let i=e[t].split(".");n[t]={dataset:i.shift(),field:i.join("."),direction:"from"}}}),d(n,t)},validateOnBlur:!1,validateOnChange:!1,children:e=>(0,n.jsx)(g.l0,{noValidate:!0,children:(0,n.jsxs)(r.gCW,{align:"stretch",gap:"16px",children:[(0,n.jsx)(g.gN,{id:"name",name:"name",validate:e=>w("Name",e),children:i=>{let{field:t}=i;return(0,n.jsxs)(r.NIc,{display:"flex",isRequired:!0,isInvalid:e.errors.name&&e.touched.name,children:[I("name","Name"),(0,n.jsxs)(r.gCW,{align:"flex-start",w:"inherit",mr:"6",children:[(0,n.jsx)(r.IIB,{...t,autoComplete:"off",autoFocus:!0,color:"gray.700",placeholder:"Enter a friendly name for your new ".concat(k.human_readable," connection"),size:"sm","data-testid":"input-name"}),(0,n.jsx)(r.J1D,{children:e.errors.name})]})]})}}),(0,n.jsx)(g.gN,{id:"description",name:"description",children:e=>{let{field:i}=e;return(0,n.jsxs)(r.NIc,{display:"flex",children:[I("description","Description"),(0,n.jsx)(r.gxH,{...i,color:"gray.700",placeholder:"Enter a description for your new ".concat(k.human_readable," connection"),resize:"none",size:"sm",value:i.value||"",mr:"6"})]})}}),(0,n.jsx)(g.gN,{id:"instance_key",name:"instance_key",validate:S,children:i=>{let{field:t}=i;return(0,n.jsxs)(r.NIc,{display:"flex",isRequired:!0,isInvalid:e.errors.instance_key&&e.touched.instance_key,children:[I("instance_key","Connection Identifier"),(0,n.jsxs)(r.gCW,{align:"flex-start",w:"inherit",children:[(0,n.jsx)(r.IIB,{...t,autoComplete:"off",color:"gray.700",isDisabled:!!(null==b?void 0:b.key),placeholder:"A unique identifier for your new ".concat(k.human_readable," connection"),size:"sm"}),(0,n.jsx)(r.J1D,{children:e.errors.instance_key})]}),(0,n.jsx)(r.kCb,{alignItems:"center",h:8,ml:2,children:(0,n.jsx)(j.b,{label:"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection."})})]})}}),Object.entries(i.properties).map(e=>{let[i,t]=e;return"advanced_settings"===i?null:z(i,t)}),(0,n.jsxs)(r.kCb,{gap:2,children:[(0,n.jsx)(r.wpx,{disabled:!(null==b?void 0:b.key),loading:_.isLoading||_.isFetching,onClick:Z,"data-testid":"test-connection-button",children:m}),(0,n.jsx)(r.wpx,{htmlType:"submit",type:"primary",disabled:s,loading:s,children:"Save"})]})]})})})};let b=e=>{let{onConnectionCreated:i,data:t}=e,r=(0,m.I0)(),{errorAlert:s,successAlert:d}=(0,h.V)(),{handleError:g}=(0,u.HK)(),[f,j]=(0,l.useState)(!1),{connection:v,connectionOption:y}=(0,o.C)(a.ZZ),[b]=(0,x.pH)(),[k]=(0,x.Du)();return{isSubmitting:f,handleSubmit:async e=>{try{var l;j(!0);let o={access:c.uv.WRITE,connection_type:null==y?void 0:y.identifier,description:e.description,disabled:!1,key:(0,p.E)(e.instance_key),name:e.name},u=await b(o).unwrap();if((null===(l=u.failed)||void 0===l?void 0:l.length)>0)s(u.failed[0].message);else{let l={connection_key:u.succeeded[0].key,secrets:{}};Object.entries(t.properties).forEach(i=>{l.secrets[i[0]]=e[i[0]]});let o=await k(l).unwrap();"failed"===o.test_status?s((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:"Message:"})," ",o.msg,(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:"Failure Reason:"})," ",o.failure_reason]})):(r((0,a.lm)(u.succeeded[0])),d("Connector successfully ".concat((null==v?void 0:v.key)?"updated":"added","!")),(null==v?void 0:v.key)||!i||i())}}catch(e){g(e)}finally{j(!1)}},connectionOption:y}},k=e=>{let{data:i,onConnectionCreated:t,onTestConnectionClick:a}=e,{isSubmitting:s,handleSubmit:l,connectionOption:o}=b({onConnectionCreated:t,data:i});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.xuv,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",o.human_readable," environment by providing the information below. Once you have saved the form, you may test the integration to confirm that it's working correctly."]}),(0,n.jsx)(y,{data:i,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:s,onSaveClick:l,onTestConnectionClick:a})]})},C={description:"",instance_key:"",name:""},_=e=>{let{data:i,onConnectionCreated:t,onTestEmail:a}=e,{connectionOption:s,isSubmitting:l,handleSubmit:o}=b({onConnectionCreated:t,data:i});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.xuv,{color:"gray.700",fontSize:"14px",h:"80px",children:["Configure your ",s.human_readable," connector by providing the connector name, description and a test email address. Once you have saved the details, you can click test email to check the format of the email."]}),(0,n.jsx)(y,{data:i,defaultValues:C,isSubmitting:l,onSaveClick:e=>{o(e)},onTestConnectionClick:a,testButtonLabel:"Test email"})]})};var S=t(55484),w=t(27259),I=t(67762),R=e=>{let{defaultValues:i,isSubmitting:t=!1,onSaveClick:l}=e,c=(0,s.useRouter)(),{connection:u,connectionOption:h}=(0,o.C)(a.ZZ);return(0,n.jsx)(g.J9,{initialValues:(()=>{if(null==u?void 0:u.key){var e;i.name=null!==(e=u.name)&&void 0!==e?e:"",i.description=u.description}return i})(),onSubmit:(e,i)=>{l(e,i)},validateOnBlur:!1,validateOnChange:!1,validationSchema:S.Ry().shape({name:S.Z_().required("Name is required")}),children:(0,n.jsx)(g.l0,{noValidate:!0,children:(0,n.jsxs)(r.gCW,{align:"stretch",gap:"16px",children:[(0,n.jsx)(w.Z,{autoFocus:!0,disabled:!!(null==u?void 0:u.key),isRequired:!0,label:"Name",name:"name",placeholder:"Enter a friendly name for your new ".concat(h.human_readable," connection")}),(0,n.jsx)(w.Z,{label:"Description",name:"description",placeholder:"Enter a description for your new ".concat(h.human_readable," connection"),type:"textarea"}),(0,n.jsx)(I.h,{isSubmitting:t,onCancelClick:()=>{c.push(d.JR)}})]})})})};let z=e=>{let{onConnectionCreated:i}=e,t=(0,m.I0)(),{errorAlert:s,successAlert:d}=(0,h.V)(),{handleError:p}=(0,u.HK)(),[g,f]=(0,l.useState)(!1),{connection:j,connectionOption:v}=(0,o.C)(a.ZZ),[y]=(0,x.pH)(),b=async(e,n)=>{try{var r;f(!0);let n={access:c.uv.WRITE,connection_type:null==v?void 0:v.identifier,description:e.description,disabled:!1,name:e.name,key:null==j?void 0:j.key},l=await y(n).unwrap();(null===(r=l.failed)||void 0===r?void 0:r.length)>0?s(l.failed[0].message):(t((0,a.lm)(l.succeeded[0])),d("Connector successfully ".concat((null==j?void 0:j.key)?"updated":"added","!")),(null==j?void 0:j.key)||!i||i())}catch(e){p(e)}finally{f(!1)}};return(0,n.jsxs)(r.gCW,{align:"stretch",gap:"16px",children:[(0,n.jsxs)(r.xuv,{color:"gray.700",fontSize:"14px",children:["To begin setting up your new ",v.human_readable," ","connector you must first assign a name to the connector and a description.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"Once you have completed this section you can then progress onto"," ",(0,n.jsx)(r.xvT,{display:"inline-block",fontWeight:"700",children:"DSR customization"})," ","using the menu on the left hand side."]}),(0,n.jsx)(R,{defaultValues:{description:"",name:""},isSubmitting:g,onSaveClick:b})]})},Z=e=>{let{data:i,onConnectionCreated:t,onTestConnectionClick:s}=e,d=(0,m.I0)(),{errorAlert:g,successAlert:f}=(0,h.V)(),{handleError:j}=(0,u.HK)(),[v,b]=(0,l.useState)(!1),{connection:k,connectionOption:C}=(0,o.C)(a.ZZ),[_]=(0,x.pL)(),[S]=(0,x.pH)(),[w]=(0,x.Du)(),I=async(e,r)=>{try{if(b(!0),k){var s;let t={access:c.uv.WRITE,connection_type:k.connection_type,description:e.description,disabled:!1,key:k.key,name:e.name},r=await S(t).unwrap();if((null===(s=r.failed)||void 0===s?void 0:s.length)>0)g(r.failed[0].message);else{d((0,a.lm)(r.succeeded[0]));let t={connection_key:k.key,secrets:{}};Object.entries(i.properties).forEach(i=>{t.secrets[i[0]]=e[i[0]]});let s=await w(t).unwrap();"failed"===s.test_status?g((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:"Message:"})," ",s.msg,(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:"Failure Reason:"})," ",s.failure_reason]})):f("Connector successfully updated!")}}else{let n={description:e.description,name:e.name,instance_key:(0,p.E)(e.instance_key),saas_connector_type:C.identifier,secrets:{}};Object.entries(i.properties).forEach(i=>{n.secrets[i[0]]=e[i[0]]});let r=await _(n).unwrap();d((0,a.lm)(r.connection)),f("Connector successfully added!"),null==t||t()}}catch(e){j(e)}finally{b(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.xuv,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",C.human_readable," environment by providing the information below. Once you have saved the form, you may test the integration to confirm that it's working correctly."]}),(0,n.jsx)(y,{data:i,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:v,onSaveClick:I,onTestConnectionClick:s})]})};var T=t(16394);let W=e=>{var i,t;let{response:s}=e,{connectionOption:l}=(0,o.C)(a.ZZ);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.izJ,{color:"gray.100"}),(0,n.jsxs)(r.gCW,{align:"flex-start",mt:"16px",children:[(null===(i=s.data)||void 0===i?void 0:i.test_status)==="succeeded"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.Ugi,{children:[(0,n.jsxs)(r.X6q,{as:"h5",color:"gray.700",size:"xs",children:["Successfully connected to ",l.human_readable]}),(0,n.jsx)(r.Vp9,{colorScheme:"green",size:"sm",variant:"solid",children:"Success"})]}),(0,n.jsx)(r.xvT,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,T.p6)(s.fulfilledTimeStamp)}),(0,n.jsx)(r.xuv,{bg:"green.100",border:"1px solid",borderColor:"green.300",color:"green.700",mt:"16px",borderRadius:"6px",children:(0,n.jsxs)(r.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,n.jsx)(r.StI,{}),(0,n.jsxs)(r.xuv,{children:[(0,n.jsx)(r.X6q,{as:"h5",color:"green.500",fontWeight:"semibold",size:"xs",children:"Success message:"}),(0,n.jsx)(r.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:s.data.msg})]})]})})]}),(null===(t=s.data)||void 0===t?void 0:t.test_status)==="failed"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.Ugi,{children:[(0,n.jsxs)(r.X6q,{as:"h5",color:"gray.700",size:"xs",children:["Output error to ",l.human_readable]}),(0,n.jsx)(r.Vp9,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,n.jsx)(r.xvT,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,T.p6)(s.fulfilledTimeStamp)}),(0,n.jsx)(r.xuv,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,n.jsxs)(r.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,n.jsx)(r.f9v,{}),(0,n.jsxs)(r.xuv,{children:[(0,n.jsx)(r.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,n.jsx)(r.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:s.data.failure_reason}),(0,n.jsx)(r.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:s.data.msg})]})]})})]})]})]})},q=e=>{let{onConnectionCreated:i}=e,t=(0,s.useRouter)(),{connectionOption:u}=(0,o.C)(a.ZZ),h=u&&u.type===c.Zi.MANUAL,{data:x,isFetching:m,isLoading:p,isSuccess:g}=(0,a.n3)(u.identifier,{skip:h}),[f,j]=(0,l.useState)(),v=e=>{j(e)},y=(0,l.useCallback)(()=>{t.push(d.JR)},[t]),b=(0,l.useCallback)(()=>{switch(null==u?void 0:u.type){case c.Zi.DATABASE:if(g&&x)return(0,n.jsx)(k,{data:x,onConnectionCreated:i,onTestConnectionClick:v});break;case c.Zi.MANUAL:return(0,n.jsx)(z,{onConnectionCreated:i});case c.Zi.SAAS:if(g&&x)return(0,n.jsx)(Z,{data:x,onConnectionCreated:i,onTestConnectionClick:v});break;case c.Zi.EMAIL:if(g&&x)return(0,n.jsx)(_,{data:x,onConnectionCreated:y,onTestEmail:v})}},[null==u?void 0:u.type,x,g,i,y]);return(0,n.jsxs)(r.kCb,{gap:"97px",children:[(0,n.jsxs)(r.gCW,{w:"579px",gap:"16px",align:"stretch",children:[(m||p)&&(0,n.jsx)(r.M5Y,{children:(0,n.jsx)(r.$jN,{})}),b()]}),f&&(0,n.jsxs)(r.Rg9,{in:!0,children:[" ",(0,n.jsx)(r.xuv,{mt:"16px",maxW:"528px",w:"fit-content",children:(0,n.jsx)(W,{response:f})})]})]})}},38212:function(e,i,t){t.d(i,{Z:function(){return y}});var n=t(24246),a=t(17245),r=t(96356),s=t(14207),l=t(87949),o=t(86677),d=t(27378),c=t(16134),u=t(812),h=t(77830),x=t(41966),m=t(84306),p=t(66527),g=t(41207),f=t(39715),j=e=>{let{data:i=[],isSubmitting:t=!1,onSubmit:a,onCancel:r,disabled:s}=e,o=(0,d.useRef)(null),{errorAlert:c}=(0,m.V)(),u=i.length>0?p.ZP.dump(i):void 0,[h,j]=(0,d.useState)(void 0),[v,y]=(0,d.useState)(!1),[b,k]=(0,d.useState)(!u),C=(0,l.qY0)(),{data:_}=(0,x.LH)({minimal:!0}),[S,w]=(0,d.useState)([]),I=e=>{p.ZP.load(e,{json:!0}),j(void 0)},R=()=>{let e=o.current.getValue();a(p.ZP.load(e,{json:!0})),w([])};return(0,n.jsxs)(l.kCb,{gap:"97px",children:[(0,n.jsxs)(l.gCW,{align:"stretch",w:"800px",children:[(0,n.jsx)(g.M,{defaultLanguage:"yaml",defaultValue:u,height:"calc(100vh - 526px)",onChange:e=>{try{y(!0),I(e),k(!!(!e||""===e.trim()))}catch(e){(0,g.F)(e)?j(e):c("Could not parse the supplied YAML")}},onMount:(e,i)=>{o.current=e,o.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!0},readOnly:s},theme:"light"}),(0,n.jsxs)(l.Ugi,{justifyContent:"flex-end",pr:6,children:[r&&(0,n.jsx)(l.wpx,{onClick:r,children:"Cancel"}),(0,n.jsx)(l.wpx,{type:"primary",disabled:s||b||!!h||t,loading:t,onClick:()=>{if(_&&_.length){let e=o.current.getValue(),i=_.filter(i=>e.includes("fides_key: ".concat(i.fides_key,"\n"))).map(e=>e.fides_key);if(w(i),i.length){C.onOpen();return}}R()},htmlType:"submit","data-testid":"save-yaml-btn",children:"Save"})]})]}),v&&(b||h)&&(0,n.jsx)(f.Z,{isEmptyState:b,yamlError:h}),(0,n.jsx)(l.cVQ,{isOpen:C.isOpen,onClose:C.onClose,onConfirm:()=>{R(),C.onClose()},title:"Overwrite dataset",message:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.xvT,{children:["You are about to overwrite the dataset",S.length>1?"s":""," ",S.map((e,i)=>{let t=i===S.length-1;return(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:e}),t?".":", "]},e)})]}),(0,n.jsx)(l.xvT,{children:"Are you sure you would like to continue?"})]})})]})};let v=e=>{let{children:i,...t}=e;return(0,n.jsx)(l.xvT,{color:"gray.700",fontSize:"14px",...t,children:i})};var y=()=>{let e=(0,o.useRouter)(),{errorAlert:i,successAlert:t}=(0,a.VY)(),{handleError:m}=(0,a.HK)(),[p,g]=(0,d.useState)(!1),{connection:f}=(0,c.C)(r.ZZ),{data:y,isFetching:b,isLoading:k,isSuccess:C}=(0,s.Eg)(f.key),[_]=(0,s.Lz)(),[S]=(0,x.EG)(),{data:w,isLoading:I,error:R}=(0,x.LH)({minimal:!0}),[z,Z]=(0,d.useState)(void 0);(0,d.useEffect)(()=>{y&&y.items.length&&Z(y.items[0].ctl_dataset.fides_key)},[y]);let T=async n=>{var a;let r={connection_key:null==f?void 0:f.key,dataset_pairs:n},s=await _(r).unwrap();(null===(a=s.failed)||void 0===a?void 0:a.length)>0?i(s.failed[0].message):t("Dataset successfully updated!"),e.push(h.JR)},W=async()=>{if(z)try{let e=z;y&&y.items.length&&(e=y.items[0].fides_key);let i=[{fides_key:e,ctl_dataset_fides_key:z}];T(i)}catch(e){m(e)}},q=async e=>{try{g(!0);let t=Array.isArray(e)?e:[e],n=await S(t);if((0,u.D4)(n)){let e=(0,u.e$)(n.error);i(e);return}let a=t.map(e=>({fides_key:e.fides_key,ctl_dataset_fides_key:e.fides_key}));if(y&&y.items.length){let{items:e}=y;a=e.map((e,i)=>({fides_key:e.fides_key,ctl_dataset_fides_key:t[i].fides_key}))}T(a)}catch(e){m(e)}finally{g(!1)}},E=""!==z&&void 0!==z;if(b||k||I&&!R)return(0,n.jsx)(l.M5Y,{children:(0,n.jsx)(l.$jN,{})});let N=w&&w.length;return(0,n.jsxs)(l.gCW,{alignItems:"left",gap:4,children:[R&&(0,n.jsx)(v,{color:"red",children:"There was a problem loading existing datasets, please try again."}),(0,n.jsxs)(l.gCW,{alignItems:"flex-start",children:[N&&(0,n.jsx)("div",{children:(0,n.jsx)(l.gCW,{alignSelf:"start",gap:4,children:(0,n.jsxs)(l.xuv,{"data-testid":"dataset-selector-section",children:[(0,n.jsx)(v,{mb:4,children:"Choose a dataset to associate with this connector."}),(0,n.jsxs)(l.Ugi,{children:[(0,n.jsx)(l.WPr,{allowClear:!0,options:w.map(e=>({label:e.fides_key,value:e.fides_key})),className:"w-full",placeholder:"Select",onChange:e=>Z(e),value:z,"data-testid":"dataset-selector","aria-label":"Select a dataset"}),(0,n.jsx)(l.wpx,{onClick:W,type:"primary",className:"self-start",disabled:!E,"data-testid":"save-dataset-link-btn",children:"Save"})]})]})})}),N&&C&&(null==y?void 0:y.items)&&(0,n.jsx)(l.htM,{plain:!0,children:"or"}),C&&(null==y?void 0:y.items)&&(0,n.jsxs)(l.xuv,{"data-testid":"yaml-editor-section",children:[(0,n.jsx)(v,{mb:4,children:"View your dataset YAML below!"}),(0,n.jsx)(j,{data:y.items.map(e=>e.ctl_dataset),isSubmitting:p,onSubmit:q,disabled:E})]})]})]})}},67762:function(e,i,t){t.d(i,{h:function(){return r}});var n=t(24246),a=t(87949);t(27378);let r=e=>{let{isSubmitting:i=!1,onCancelClick:t}=e;return(0,n.jsxs)(a.hE2,{size:"sm",spacing:"8px",variant:"outline",children:[(0,n.jsx)(a.zxk,{onClick:t,variant:"outline",children:"Cancel"}),(0,n.jsx)(a.zxk,{bg:"primary.800",color:"white",isDisabled:i,isLoading:i,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})}},50881:function(e,i,t){t.d(i,{Z:function(){return y}});var n=t(24246),a=t(17245),r=t(96356),s=t(14207),l=t(87949),o=t(86677),d=t(27378),c=t(16134),u=t(77830),h=t(34090),x=t(55484),m=t(97181),p=t(57072),g=t(5785),f=t(27259),j=t(67762),v=e=>{let{data:i=[],isSubmitting:t=!1,onSaveClick:r}=e,{isLoading:s}=(0,p.MO)(),d=(0,c.C)(g.qb),v=(0,o.useRouter)(),{errorAlert:y}=(0,a.VY)(),b=()=>{v.push(u.JR)};return s?null:(0,n.jsx)(h.J9,{enableReinitialize:!0,initialValues:{fields:i.length>0?i:[{pii_field:"",dsr_package_label:"",data_categories:[]}]},onSubmit:(e,i)=>{if(new Set(e.fields.map(e=>e.pii_field)).size<e.fields.length){y("PII Field must be unique");return}r(e,i)},validateOnBlur:!1,validateOnChange:!1,validationSchema:x.Ry({fields:x.IX().of(x.Ry().shape({pii_field:x.Z_().required("PII Field is required").min(1,"PII Field must have at least one character").max(200,"PII Field has a maximum of 200 characters").label("PII Field"),dsr_package_label:x.Z_().required("DSR Package Label is required").min(1,"DSR Package Label must have at least one character").max(200,"DSR Package Label has a maximum of 200 characters").label("DSR Package Label"),data_categories:x.IX(x.Z_()).label("Data Categories")}))}),children:e=>(0,n.jsx)(h.l0,{style:{marginTop:0},noValidate:!0,children:(0,n.jsx)(l.gCW,{align:"stretch",children:(0,n.jsx)(h.F2,{name:"fields",render:i=>{let{fields:a}=e.values;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.Ugi,{color:"gray.900",flex:"1",fontSize:"14px",fontWeight:"semibold",lineHeight:"20px",mb:"6px",spacing:"24px",children:[(0,n.jsx)(l.xuv,{w:"416px",children:"PII Field"}),(0,n.jsx)(l.xuv,{w:"416px",children:"DSR Package Label"}),(0,n.jsx)(l.xuv,{w:"416px",children:"Data Categories"}),(0,n.jsx)(l.xuv,{visibility:"hidden",children:(0,n.jsx)(l.lr0,{})})]}),(0,n.jsx)(l.xuv,{children:a&&a.length>0?a.map((e,t)=>(0,n.jsxs)(l.Ugi,{mt:t>0?"12px":void 0,spacing:"24px",align:"flex-start",children:[(0,n.jsx)(l.xuv,{minH:"57px",w:"416px",children:(0,n.jsx)(f.Z,{autoFocus:0===t,isRequired:!0,name:"fields.".concat(t,".pii_field")})}),(0,n.jsx)(l.xuv,{minH:"57px",w:"416px",children:(0,n.jsx)(f.Z,{isRequired:!0,name:"fields.".concat(t,".dsr_package_label")})}),(0,n.jsx)(l.xuv,{minH:"57px",w:"416px",children:(0,n.jsx)(m.d,{name:"fields.".concat(t,".data_categories"),options:d.map(e=>({value:e.fides_key,label:e.fides_key})),isRequired:!0,mode:"multiple"})}),(0,n.jsx)(l.xuv,{h:"57px",visibility:t>0?"visible":"hidden",children:(0,n.jsx)(l.lr0,{onClick:()=>i.remove(t),_hover:{cursor:"pointer"}})})]},t)):null}),(0,n.jsx)(l.wpx,{className:"my-6",onClick:()=>{i.push({pii_field:"",dsr_package_label:"",data_categories:[]})},children:"Add new PII field"}),(0,n.jsx)(j.h,{isSubmitting:t,onCancelClick:b})]})}})})})})},y=()=>{let e=(0,d.useRef)(!1),i=(0,o.useRouter)(),{successAlert:t}=(0,a.VY)(),{handleError:h}=(0,a.HK)(),[x,m]=(0,d.useState)(!1),[p,g]=(0,d.useState)([]),{connection:f}=(0,c.C)(r.ZZ),{data:j,isFetching:y,isLoading:b,isSuccess:k}=(0,s.QV)(f.key),[C]=(0,s.jF)(),[_]=(0,s._d)(),S=async(e,n)=>{try{m(!0);let n={connection_key:null==f?void 0:f.key,body:{...e}};p.length>0?await _(n).unwrap():await C(n).unwrap(),t("DSR customization ".concat(p.length>0?"updated":"added","!")),i.push(u.JR)}catch(e){h(e)}finally{m(!1)}};return(0,d.useEffect)(()=>(e.current=!0,k&&j&&g(j.fields),()=>{e.current=!1}),[j,k]),(0,n.jsxs)(l.gCW,{align:"stretch",gap:"16px",children:[(0,n.jsx)(l.xuv,{color:"gray.700",fontSize:"14px",w:"572px",children:"Customize your PII fields to create a friendly label name for your privacy request packages. This “Package Label” is the label your user will see in their downloaded package."}),(y||b)&&(0,n.jsx)(l.M5Y,{children:(0,n.jsx)(l.$jN,{})}),e.current&&!b?(0,n.jsx)(v,{data:p,isSubmitting:x,onSaveClick:S}):null]})}},33335:function(e,i,t){t.d(i,{E:function(){return n}});let n=e=>e.toLowerCase().replace(/[ .]/g,"_").replace(/[^a-zA-Z0-9_<>-]/g,"")},57072:function(e,i,t){t.d(i,{Bd:function(){return n.Bd},L5:function(){return n.L5},MO:function(){return n.MO},qb:function(){return n.qb}});var n=t(5785)}}]);