(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6954],{14441:function(e,t,n){var a,i,l=1/0,s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,r=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o="\ud800-\udfff",d="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",u="A-Z\\xc0-\\xd6\\xd8-\\xde",x="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="['’]",g="["+x+"]",f="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",m="["+c+"]",h="[^"+o+x+"\\d+"+d+c+u+"]",v="(?:\ud83c[\udde6-\uddff]){2}",b="[\ud800-\udbff][\udc00-\udfff]",j="["+u+"]",y="(?:"+m+"|"+h+")",_="(?:"+p+"(?:d|ll|m|re|s|t|ve))?",C="(?:"+p+"(?:D|LL|M|RE|S|T|VE))?",N="(?:"+f+"|\ud83c[\udffb-\udfff])?",k="[\\ufe0e\\ufe0f]?",T="(?:\\u200d(?:"+["[^"+o+"]",v,b].join("|")+")"+k+N+")*",w="(?:"+["["+d+"]",v,b].join("|")+")"+(k+N+T),E=RegExp(p,"g"),O=RegExp(f,"g"),A=RegExp([j+"?"+m+"+"+_+"(?="+[g,j,"$"].join("|")+")","(?:"+j+"|"+h+")+"+C+"(?="+[g,j+y,"$"].join("|")+")",j+"?"+y+"+"+_,j+"+"+C,"\\d+",w].join("|"),"g"),S=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,I="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,z="object"==typeof self&&self&&self.Object===Object&&self,Z=I||z||Function("return this")(),L=(a={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==a?void 0:a[e]}),R=Object.prototype.toString,P=Z.Symbol,F=P?P.prototype:void 0,U=F?F.toString:void 0;function q(e){return null==e?"":function(e){if("string"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==R.call(t))return U?U.call(e):"";var t,n=e+"";return"0"==n&&1/e==-l?"-0":n}(e)}var J=(i=function(e,t,n){return e+(n?"_":"")+t.toLowerCase()},function(e){var t;return function(e,t,n,a){for(var i=-1,l=e?e.length:0;++i<l;)n=t(n,e[i],i,e);return n}(function(e,t,n){if(e=q(e),void 0===t){var a;return(a=e,S.test(a))?e.match(A)||[]:e.match(s)||[]}return e.match(t)||[]}(((t=q(t=e))&&t.replace(r,L).replace(O,"")).replace(E,"")),i,"")});e.exports=J},58754:function(e,t,n){"use strict";var a=n(24246),i=n(87949),l=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:s=!0,children:r,rightContent:o,style:d,...c}=e;return(0,a.jsxs)("div",{...c,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,a.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,a.jsx)(i.lQT,{className:n||r?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,a.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,a.jsx)(l.m,{className:r?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),r]})}},10342:function(e,t,n){"use strict";var a=n(24246),i=n(87949),l=n(46238);t.Z=e=>{let{title:t,tooltip:n,children:s,...r}=e;return(0,a.jsxs)(i.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...r,children:[(0,a.jsxs)(i.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,a.jsx)(i.xvT,{as:"span",mx:1,children:(0,a.jsx)(l.b,{label:n})}):void 0]}),(0,a.jsx)(i.Kqy,{p:6,spacing:6,children:s})]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var a=n(24246),i=n(87949),l=n(79894),s=n.n(l),r=n(27378);let{Text:o}=i.AntTypography,d=e=>{let{items:t,...n}=e,l=(0,r.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let l=n===t.length-1,r={...e},d=r.onClick&&!r.href;return("string"==typeof r.title&&(r.title=(0,a.jsx)(o,{style:{color:"inherit",maxWidth:l?void 0:400},ellipsis:!l,id:l?"breadcrumb-current-page":void 0,children:r.title})),d)?r.title=(0,a.jsx)(i.wpx,{type:"text",size:"small",icon:r.icon,onClick:r.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:r.title}):(r.icon&&(r.title=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"anticon align-text-bottom",children:r.icon}),r.title]})),r.href&&r.title&&(r.title=(0,a.jsx)(s(),{href:r.href,className:"ant-breadcrumb-link",children:r.title}),delete r.href)),r}),[t]);return(0,a.jsx)(i.zrq,{items:l,...n})}},34391:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var a=n(24246),i=n(51472),l=n(87949),s=n(34090),r=n(79894),o=n.n(r),d=n(86677),c=n(27378),u=n(16134),x=n(10342),p=n(40324),g=n(812),f=n(46238),m=n(77830),h=n(8411),v=n(46628),b=n(28079),j=n(7426),y=n(34334),_=n(16277);let C=e=>{let{index:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.j0,{autoFocus:0!==t,name:"translations.".concat(t,".title"),label:"Title of privacy notice as displayed to user",variant:"stacked"}),(0,a.jsx)(p.Ks,{name:"translations.".concat(t,".description"),label:"Privacy notice displayed to the user",variant:"stacked"})]})},N=e=>{let{languageOptions:t,handleCreateLanguage:n}=e,[i,s]=(0,c.useState)(!1);return i?(0,a.jsx)(l.WPr,{autoFocus:!0,defaultOpen:!0,allowClear:!0,placeholder:"Select a language...","aria-label":"Select a language",options:t,onChange:e=>{n(e),s(!1)},"data-testid":"select-language",className:"w-full",optionFilterProp:"label"}):(0,a.jsx)(l.wpx,{block:!0,icon:(0,a.jsx)(l.PJP.mm_,{}),iconPosition:"end",onClick:()=>s(!0),"data-testid":"add-language-btn",className:"mb-1",children:"Add"})},k=e=>{let{index:t,name:n,isOOB:i}=e;return(0,a.jsxs)(l.kCb,{direction:"column",gap:6,children:[(0,a.jsxs)(l.X6q,{size:"sm",children:["Edit ",n," translation"]}),i?(0,a.jsx)(_.f,{languageName:n}):null,(0,a.jsx)(C,{index:t})]})};var T=e=>{var t,n,i,r;let{availableTranslations:o}=e,{values:d,setFieldValue:p}=(0,s.u6)(),[g,f]=(0,c.useState)(!1),[m,h]=(0,c.useState)(null!==(r=null===(n=d.translations)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.language)&&void 0!==r?r:""),{data:v}=(0,j.tB)({api_set:!1}),b=null==v?void 0:null===(i=v.plus_consent_settings)||void 0===i?void 0:i.enable_translations,_=(0,u.C)(y.Zp),T=(0,u.C)(y.G1);(0,y.Ah)({page:_,size:T});let w=(0,u.C)(y.fJ).slice().sort((e,t)=>e.name.localeCompare(t.name)),E=w.filter(e=>{var t;return null===(t=d.translations)||void 0===t?void 0:t.every(t=>t.language!==e.id)}).map(e=>({label:e.name,value:e.id})),O=e=>{h(e),f(!1)},A=e=>{let t=null==o?void 0:o.find(t=>t.language===e);f(!!t);let n=null!=t?t:{language:e,title:"",description:""};h(e),p("translations",[...d.translations,n])},S=e=>{var t,n;let a=d.translations?d.translations.slice().filter(t=>t.language!==e):[],i=m===e?null!==(n=null===(t=a[a.length-1])||void 0===t?void 0:t.language)&&void 0!==n?n:"":m;p("translations",a),h(i)},I=e=>{var t,n;return null!==(n=null===(t=w.find(t=>t.id===e))||void 0===t?void 0:t.name)&&void 0!==n?n:e};return b?(0,a.jsx)(x.Z,{title:"Localizations",children:(0,a.jsx)(s.F2,{name:"translations",render:()=>(0,a.jsx)(l.A5g,{activeKey:m,onChange:O,type:"editable-card",tabBarExtraContent:!!E.length&&(0,a.jsx)(N,{languageOptions:E,handleCreateLanguage:A}),hideAdd:!0,onEdit:(e,t)=>{"remove"===t&&S(e)},items:d.translations.map(e=>({key:e.language,label:I(e.language),children:(0,a.jsx)(k,{index:d.translations.findIndex(t=>t.language===e.language),name:I(e.language),isOOB:g}),closable:d.translations.length>1}))})})}):(0,a.jsx)(x.Z,{title:"Notice text",children:(0,a.jsx)(C,{index:0})})},w=n(97181),E=n(55484),O=n(16394),A=n(65063),S=n(65735);let I=(0,O.Jt)(A.ye),z=(0,O.Jt)(A.B8),Z=[{language:S.eU.EN,title:"",description:""}],L={name:"",consent_mechanism:S.J7.OPT_IN,data_uses:[],enforcement_level:S.QT.FRONTEND,disabled:!0,translations:Z,children:[]},R=e=>{var t,n,a,i;return{name:null!==(t=e.name)&&void 0!==t?t:L.name,consent_mechanism:null!==(n=e.consent_mechanism)&&void 0!==n?n:L.consent_mechanism,data_uses:null!==(a=e.data_uses)&&void 0!==a?a:L.data_uses,enforcement_level:null!==(i=e.enforcement_level)&&void 0!==i?i:L.enforcement_level,notice_key:e.notice_key,disabled:e.disabled,has_gpc_flag:e.has_gpc_flag,id:e.id,internal_description:e.internal_description,translations:e.translations?e.translations.map(e=>{var t;let{privacy_notice_history_id:n,...a}=e;return{...a,title:null!==(t=e.title)&&void 0!==t?t:""}}):Z,children:e.children}},P=E.Ry().shape({name:E.Z_().required().label("Title"),consent_mechanism:E.Z_().required().label("Consent mechanism")});var F=n(14441),U=n.n(F),q=e=>{let{isEditing:t}=e,{values:n,setFieldValue:i}=(0,s.u6)();return(0,c.useEffect)(()=>{t||i("notice_key",U()(n.name))},[n.name,t,i]),(0,a.jsx)(p.j0,{name:"notice_key",label:"Key used in Fides cookie",variant:"stacked"})},J=n(71922);let{Text:B}=l.AntTypography,D=e=>{let{regions:t,label:n,tooltip:i}=e;return(0,a.jsxs)(l.gCW,{align:"start",children:[(0,a.jsxs)(l.kCb,{align:"start",children:[n?(0,a.jsx)(l.lXp,{htmlFor:"regions",fontSize:"xs",my:0,mr:1,children:n}):null,(0,a.jsx)(f.b,{label:i})]}),(0,a.jsx)(l.xuv,{w:"100%","data-testid":"notice-locations",children:(0,a.jsxs)(l.vyj,{size:[0,2],wrap:!0,children:[null==t?void 0:t.map(e=>{let t=(0,l.QCN)(e);return(0,a.jsx)(l.j8w,{children:t?(0,l.c1K)({isoEntry:t,showFlag:!0}):h.Z8[e]},e)}),!(null==t?void 0:t.length)&&(0,a.jsxs)(B,{italic:!0,children:["No locations assigned. Navigate to the"," ",(0,a.jsx)(o(),{href:m.w0,children:"experiences view"})," ","configure."]})]})})]})};var G=e=>{let{privacyNotice:t,availableTranslations:n}=e,r=(0,d.useRouter)(),o=(0,l.pmc)(),f=t?R(t):L;(0,b.fd)();let h=(0,u.C)(b.qv),j=(0,u.C)(J.sX),y=(0,u.C)(J.Zp),_=(0,u.C)(J.G1);(0,J.J6)({page:y,size:_});let C=e=>{var t;let{id:n}=e,a=j.find(e=>e.id===n);return null!==(t=null==a?void 0:a.name)&&void 0!==t?t:n},N=j.some(e=>{var n;return null===(n=e.children)||void 0===n?void 0:n.some(e=>e.id===(null==t?void 0:t.id))}),[k]=(0,J.vL)(),[E]=(0,J.p4)(),O=(0,c.useMemo)(()=>!!t,[t]),A=async e=>{let n;if(O){var a,i;let l={...e,id:t.id,translations:null!==(a=e.translations)&&void 0!==a?a:[],children:null!==(i=e.children)&&void 0!==i?i:[]};n=await k(l)}else n=await E(e);(0,g.D4)(n)?o((0,v.Vo)((0,g.e$)(n.error))):(o((0,v.t5)("Privacy notice ".concat(O?"updated":"created"))),O||r.push(m.IT))};return(0,a.jsx)(s.J9,{initialValues:f,enableReinitialize:!0,onSubmit:A,validationSchema:P,children:e=>{var o,d;let{values:c,setFieldValue:u,dirty:g,isValid:f,isSubmitting:m}=e;return(0,a.jsx)(s.l0,{children:(0,a.jsxs)(l.Kqy,{spacing:10,children:[(0,a.jsxs)(l.Kqy,{spacing:6,children:[(0,a.jsxs)(x.Z,{title:"Privacy notice details",children:[(0,a.jsx)(p.j0,{label:"Notice title",name:"name",isRequired:!0,variant:"stacked"}),(0,a.jsx)(w.d,{name:"consent_mechanism",label:"Consent mechanism",options:I,isRequired:!0,layout:"stacked"}),(0,a.jsx)(q,{isEditing:O}),(0,a.jsx)(p.w8,{name:"has_gpc_flag",label:"Configure whether this notice conforms to the Global Privacy Control",variant:"stacked"}),(0,a.jsx)(D,{regions:null==t?void 0:t.configured_regions,label:"Locations where privacy notice is shown to visitors",tooltip:"To configure locations, change the privacy experiences where this notice is shown"}),(0,a.jsx)(l.izJ,{}),!N&&(0,a.jsx)(i.Z,{label:"Child notices",addButtonLabel:"Add notice children",allItems:j.map(e=>({id:e.id,name:e.name})),values:null!==(d=null===(o=c.children)||void 0===o?void 0:o.map(e=>({id:e.id,name:e.name})))&&void 0!==d?d:[],setValues:e=>u("children",e),idField:"id",getItemLabel:C,draggable:!0,maxHeight:100,baseTestId:"children"}),(0,a.jsx)(w.d,{name:"data_uses",label:"Data use",options:h,mode:"multiple",layout:"stacked"}),(0,a.jsx)(w.d,{name:"enforcement_level",label:"Enforcement level",options:z,isRequired:!0,layout:"stacked"})]}),(0,a.jsx)(T,{availableTranslations:n})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.wpx,{onClick:()=>{r.back()},children:"Cancel"}),(0,a.jsx)(l.wpx,{htmlType:"submit",type:"primary",disabled:m||!g||!f,loading:m,"data-testid":"save-btn",children:"Save"})]})]})})}})}},65063:function(e,t,n){"use strict";n.d(t,{B8:function(){return l},Ep:function(){return s},ye:function(){return i}});var a=n(65735);let i=new Map([[a.J7.OPT_IN,"Opt in"],[a.J7.NOTICE_ONLY,"Notice only"],[a.J7.OPT_OUT,"Opt out"]]),l=new Map([[a.QT.SYSTEM_WIDE,"System wide"],[a.QT.FRONTEND,"Front end"],[a.QT.NOT_APPLICABLE,"Not applicable"]]),s=new Map([["gpp_us_national","GPP US National"],["gpp_us_state","GPP US State"]])}}]);