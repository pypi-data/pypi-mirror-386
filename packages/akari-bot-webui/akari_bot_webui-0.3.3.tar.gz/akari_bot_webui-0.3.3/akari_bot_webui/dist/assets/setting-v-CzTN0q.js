import{R as be,ad as Q,$ as ht,a6 as Te,s as P,X as ee,r as y,o as W,z as F,bo as Le,am as Oe,an as M,C as we,V as X,j as O,aD as ye,c as D,h as $,b,P as n,H as q,n as E,ap as le,aX as se,at as x,ch as ae,c0 as Be,F as mt,y as gt,q as Ce,cc as _t,m as ie,aJ as ze,O as J,G as Ne,l as K,x as N,f as _,a1 as bt,M as He,a5 as Ue,aF as ge,aO as wt,ci as yt,bp as oe,aG as Ct,aQ as kt,aI as Et,cj as $t,aR as St,bf as Pt,aV as pe,ck as Vt,cl as It,w as S,aT as De,A as ne,a0 as Me,bt as Tt,B as Re,ao as Lt,K as Bt,E as Z,e as L,t as T,c5 as Dt,J as Mt,cm as fe,ax as re,_ as ce,u as ke,az as G,g as U,I as qe,L as I,cn as Rt}from"./index-CSBycITZ.js";import{E as At,a as Ft}from"./form-item-B_D7m4_c.js";import{E as je}from"./index-DAz3iitb.js";import{h as Kt,a as Ot,E as zt}from"./select-BvUqoMtR.js";/* empty css               */import{E as Nt}from"./index-fHp5HM9u.js";import"./validator-DQsVHAmh.js";const xe=be({color:{type:Q(Object),required:!0},vertical:Boolean,disabled:Boolean}),Ht=xe;let ve=!1;function _e(e,a){if(!ht)return;const o=function(t){var s;(s=a.drag)==null||s.call(a,t)},l=function(t){var s;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",l),document.onselectstart=null,document.ondragstart=null,ve=!1,(s=a.end)==null||s.call(a,t)},r=function(t){var s;ve||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",l),document.addEventListener("touchmove",o),document.addEventListener("touchend",l),ve=!0,(s=a.start)==null||s.call(a,t))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!1})}const We=e=>{let a,o;return e.type==="touchend"?(o=e.changedTouches[0].clientY,a=e.changedTouches[0].clientX):e.type.startsWith("touch")?(o=e.touches[0].clientY,a=e.touches[0].clientX):(o=e.clientY,a=e.clientX),{clientX:a,clientY:o}},Xe=(e,{key:a,minValue:o,maxValue:l})=>{const r=we(),t=Te(),s=Te(),v=P(()=>e.color.get(a));function d(h){var m;if(e.disabled)return;h.target!==t.value&&c(h),(m=t.value)==null||m.focus()}function c(h){if(!s.value||!t.value||e.disabled)return;const f=r.vnode.el.getBoundingClientRect(),{clientX:g,clientY:k}=We(h);let w;if(e.vertical){let C=k-f.top;C=Math.max(t.value.offsetHeight/2,C),C=Math.min(C,f.height-t.value.offsetHeight/2),w=Math.round((C-t.value.offsetHeight/2)/(f.height-t.value.offsetHeight)*l)}else{let C=g-f.left;C=Math.max(t.value.offsetWidth/2,C),C=Math.min(C,f.width-t.value.offsetWidth/2),w=Math.round((C-t.value.offsetWidth/2)/(f.width-t.value.offsetWidth)*l)}e.color.set(a,w)}function i(h){if(e.disabled)return;const{shiftKey:m}=h,f=Oe(h),g=m?10:1,k=a==="hue"?-1:1;let w=!0;switch(f){case M.left:case M.down:u(-g*k);break;case M.right:case M.up:u(g*k);break;case M.home:e.color.set(a,a==="hue"?l:o);break;case M.end:e.color.set(a,a==="hue"?o:l);break;case M.pageDown:u(-4*k);break;case M.pageUp:u(4*k);break;default:w=!1;break}w&&h.preventDefault()}function u(h){let m=v.value+h;m=m<o?o:m>l?l:m,e.color.set(a,m)}return{thumb:t,bar:s,currentValue:v,handleDrag:c,handleClick:d,handleKeydown:i}},Ye=(e,{namespace:a,maxValue:o,bar:l,thumb:r,currentValue:t,handleDrag:s,getBackground:v})=>{const d=we(),c=ee(a),i=y(0),u=y(0),h=y();function m(){if(!r.value||e.vertical)return 0;const B=d.vnode.el,z=t.value;return B?Math.round(z*(B.offsetWidth-r.value.offsetWidth/2)/o):0}function f(){if(!r.value)return 0;const B=d.vnode.el;if(!e.vertical)return 0;const z=t.value;return B?Math.round(z*(B.offsetHeight-r.value.offsetHeight/2)/o):0}function g(){i.value=m(),u.value=f(),h.value=v?.()}W(()=>{if(!l.value||!r.value)return;const B={drag:z=>{s(z)},end:z=>{s(z)}};_e(l.value,B),_e(r.value,B),g()}),F(t,()=>g()),F(()=>e.color.value,()=>g());const k=P(()=>[c.b(),c.is("vertical",e.vertical),c.is("disabled",e.disabled)]),w=P(()=>c.e("bar")),C=P(()=>c.e("thumb")),R=P(()=>({background:h.value})),H=P(()=>({left:Le(i.value),top:Le(u.value)}));return{rootKls:k,barKls:w,barStyle:R,thumbKls:C,thumbStyle:H,thumbLeft:i,thumbTop:u,update:g}},Ae=0,he=100,Ut=O({name:"ElColorAlphaSlider"}),qt=O({...Ut,props:xe,setup(e,{expose:a}){const o=e,{currentValue:l,bar:r,thumb:t,handleDrag:s,handleClick:v,handleKeydown:d}=Xe(o,{key:"alpha",minValue:Ae,maxValue:he}),{rootKls:c,barKls:i,barStyle:u,thumbKls:h,thumbStyle:m,update:f}=Ye(o,{namespace:"color-alpha-slider",maxValue:he,currentValue:l,bar:r,thumb:t,handleDrag:s,getBackground:C}),{t:g}=ye(),k=P(()=>g("el.colorpicker.alphaLabel")),w=P(()=>g("el.colorpicker.alphaDescription",{alpha:l.value,color:o.color.value}));function C(){if(o.color&&o.color.value){const{r:R,g:H,b:B}=o.color.toRgb();return`linear-gradient(to right, rgba(${R}, ${H}, ${B}, 0) 0%, rgba(${R}, ${H}, ${B}, 1) 100%)`}return""}return a({update:f,bar:r,thumb:t}),(R,H)=>($(),D("div",{class:E(n(c))},[b("div",{ref_key:"bar",ref:r,class:E(n(i)),style:q(n(u)),onClick:n(v)},null,14,["onClick"]),b("div",{ref_key:"thumb",ref:t,class:E(n(h)),style:q(n(m)),"aria-label":n(k),"aria-valuenow":n(l),"aria-valuetext":n(w),"aria-orientation":R.vertical?"vertical":"horizontal","aria-valuemin":Ae,"aria-valuemax":he,role:"slider",tabindex:"0",onKeydown:n(d)},null,46,["aria-label","aria-valuenow","aria-valuetext","aria-orientation","onKeydown"])],2))}});var jt=X(qt,[["__file","alpha-slider.vue"]]);const Fe=0,me=360,xt=O({name:"ElColorHueSlider"}),Wt=O({...xt,props:Ht,setup(e,{expose:a}){const o=e,{currentValue:l,bar:r,thumb:t,handleDrag:s,handleClick:v,handleKeydown:d}=Xe(o,{key:"hue",minValue:Fe,maxValue:me}),{rootKls:c,barKls:i,thumbKls:u,thumbStyle:h,thumbTop:m,update:f}=Ye(o,{namespace:"color-hue-slider",maxValue:me,currentValue:l,bar:r,thumb:t,handleDrag:s}),{t:g}=ye(),k=P(()=>g("el.colorpicker.hueLabel")),w=P(()=>g("el.colorpicker.hueDescription",{hue:l.value,color:o.color.value}));return a({bar:r,thumb:t,thumbTop:m,update:f}),(C,R)=>($(),D("div",{class:E(n(c))},[b("div",{ref_key:"bar",ref:r,class:E(n(i)),onClick:n(v)},null,10,["onClick"]),b("div",{ref_key:"thumb",ref:t,class:E(n(u)),style:q(n(h)),"aria-label":n(k),"aria-valuenow":n(l),"aria-valuetext":n(w),"aria-orientation":C.vertical?"vertical":"horizontal","aria-valuemin":Fe,"aria-valuemax":me,role:"slider",tabindex:"0",onKeydown:n(d)},null,46,["aria-label","aria-valuenow","aria-valuetext","aria-orientation","onKeydown"])],2))}});var Xt=X(Wt,[["__file","hue-slider.vue"]]);const Je=be({modelValue:{type:Q(String),default:void 0},border:{type:Boolean,default:!0},showAlpha:Boolean,colorFormat:String,disabled:Boolean,predefine:{type:Q(Array)}}),Yt={[x]:e=>le(e)||se(e)},Ge=Symbol("colorCommonPickerKey"),Qe=Symbol("colorPickerPanelContextKey");class ue{constructor(a={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new ae,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const o in a)Be(a,o)&&(this[o]=a[o]);a.value?this.fromString(a.value):this.doOnChange()}set(a,o){if(arguments.length===1&&typeof a=="object"){for(const l in a)Be(a,l)&&this.set(l,a[l]);return}this[`_${a}`]=o,this._isValid=!0,this.doOnChange()}get(a){return["hue","saturation","value","alpha"].includes(a)?Math.round(this[`_${a}`]):this[`_${a}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(a){const o=new ae(a);if(this._isValid=o.isValid,o.isValid){const{h:l,s:r,v:t,a:s}=o.toHsv();this._hue=l,this._saturation=r*100,this._value=t*100,this._alpha=s*100}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}clear(){this._isValid=!1,this.value="",this._hue=0,this._saturation=100,this._value=100,this._alpha=100}compare(a){const o=new ae({h:a._hue,s:a._saturation/100,v:a._value/100,a:a._alpha/100});return this._tiny.equals(o)}doOnChange(){const{_hue:a,_saturation:o,_value:l,_alpha:r,format:t,enableAlpha:s}=this;let v=t||(s?"rgb":"hex");t==="hex"&&s&&(v="hex8"),this._tiny=new ae({h:a,s:o/100,v:l/100,a:r/100}),this.value=this._isValid?this._tiny.toString(v):""}}const Jt=O({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0},disabled:Boolean},setup(e){const a=ee("color-predefine"),{currentColor:o}=Ce(Qe),l=y(t(e.colors,e.color));F(()=>o.value,s=>{const v=new ue({value:s});l.value.forEach(d=>{d.selected=v.compare(d)})}),_t(()=>{l.value=t(e.colors,e.color)});function r(s){e.disabled||e.color.fromString(e.colors[s])}function t(s,v){return s.map(d=>{const c=new ue({value:d});return c.selected=c.compare(v),c})}return{rgbaColors:l,handleSelect:r,ns:a}}});function Gt(e,a,o,l,r,t){return $(),D("div",{class:E(e.ns.b())},[b("div",{class:E(e.ns.e("colors"))},[($(!0),D(mt,null,gt(e.rgbaColors,(s,v)=>($(),D("div",{key:e.colors[v],class:E([e.ns.e("color-selector"),e.ns.is("alpha",s.get("alpha")<100),{selected:s.selected}]),onClick:d=>e.handleSelect(v)},[b("div",{style:q({backgroundColor:s.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Qt=X(Jt,[["render",Gt],["__file","predefine.vue"]]);const Zt=O({name:"ElSlPanel",props:{color:{type:Object,required:!0},disabled:Boolean},setup(e){const a=ee("color-svpanel"),o=we(),l=y(0),r=y(0),t=y("hsl(0, 100%, 50%)"),s=P(()=>{const c=e.color.get("hue"),i=e.color.get("value");return{hue:c,value:i}});function v(){const c=e.color.get("saturation"),i=e.color.get("value"),u=o.vnode.el,{clientWidth:h,clientHeight:m}=u;r.value=c*h/100,l.value=(100-i)*m/100,t.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function d(c){if(e.disabled)return;const u=o.vnode.el.getBoundingClientRect(),{clientX:h,clientY:m}=We(c);let f=h-u.left,g=m-u.top;f=Math.max(0,f),f=Math.min(f,u.width),g=Math.max(0,g),g=Math.min(g,u.height),r.value=f,l.value=g,e.color.set({saturation:f/u.width*100,value:100-g/u.height*100})}return F(()=>s.value,()=>{v()}),W(()=>{_e(o.vnode.el,{drag:c=>{d(c)},end:c=>{d(c)}}),v()}),{cursorTop:l,cursorLeft:r,background:t,colorValue:s,handleDrag:d,update:v,ns:a}}});function ea(e,a,o,l,r,t){return $(),D("div",{class:E(e.ns.b()),style:q({backgroundColor:e.background})},[b("div",{class:E(e.ns.e("white"))},null,2),b("div",{class:E(e.ns.e("black"))},null,2),b("div",{class:E(e.ns.e("cursor")),style:q({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[b("div")],6)],6)}var ta=X(Zt,[["render",ea],["__file","sv-panel.vue"]]);const Ze=(e,a)=>{const o=ie(new ue({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue}));return F(()=>[e.colorFormat,e.showAlpha],()=>{o.enableAlpha=e.showAlpha,o.format=e.colorFormat||o.format,o.doOnChange(),a(x,o.value)}),{color:o}},aa=O({name:"ElColorPickerPanel"}),oa=O({...aa,props:Je,emits:Yt,setup(e,{expose:a,emit:o}){const l=e,r=ee("color-picker-panel"),t=ze(),s=y(),v=y(),d=y(),c=y(),i=y(""),{color:u}=Ce(Ge,()=>Ze(l,o),!0);function h(){u.fromString(i.value),u.value!==i.value&&(i.value=u.value)}function m(){var f,g,k;(f=s.value)==null||f.update(),(g=v.value)==null||g.update(),(k=d.value)==null||k.update()}return W(()=>{l.modelValue&&(i.value=u.value),J(m)}),F(()=>l.modelValue,f=>{f!==u.value&&(f?u.fromString(f):u.clear())}),F(()=>u.value,f=>{o(x,f),i.value=f}),Ne(Qe,{currentColor:P(()=>u.value)}),a({color:u,inputRef:c,update:m}),(f,g)=>($(),D("div",{class:E([n(r).b(),n(r).is("disabled",n(t)),n(r).is("border",f.border)])},[b("div",{class:E(n(r).e("wrapper"))},[_(Xt,{ref_key:"hueRef",ref:s,class:"hue-slider",color:n(u),vertical:"",disabled:n(t)},null,8,["color","disabled"]),_(ta,{ref_key:"svRef",ref:v,color:n(u),disabled:n(t)},null,8,["color","disabled"])],2),f.showAlpha?($(),K(jt,{key:0,ref_key:"alphaRef",ref:d,color:n(u),disabled:n(t)},null,8,["color","disabled"])):N("v-if",!0),f.predefine?($(),K(Qt,{key:1,ref:"predefine","enable-alpha":f.showAlpha,color:n(u),colors:f.predefine,disabled:n(t)},null,8,["enable-alpha","color","colors","disabled"])):N("v-if",!0),b("div",{class:E(n(r).e("footer"))},[_(n(He),{ref_key:"inputRef",ref:c,modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,"validate-event":!1,size:"small",disabled:n(t),onChange:h},null,8,["modelValue","onUpdate:modelValue","disabled"]),bt(f.$slots,"footer")],2)],2))}});var la=X(oa,[["__file","color-picker-panel.vue"]]);const sa=Ue(la),na=be({persistent:{type:Boolean,default:!0},modelValue:{type:Q(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Ct,popperClass:oe.popperClass,popperStyle:oe.popperStyle,tabindex:{type:[String,Number],default:0},teleported:oe.teleported,appendTo:oe.appendTo,predefine:{type:Q(Array)},validateEvent:{type:Boolean,default:!0},...yt,...wt(["ariaLabel"])}),ra={[x]:e=>le(e)||se(e),[ge]:e=>le(e)||se(e),activeChange:e=>le(e)||se(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},ia=O({name:"ElColorPicker"}),ua=O({...ia,props:na,emits:ra,setup(e,{expose:a,emit:o}){const l=e,{t:r}=ye(),t=ee("color"),{formItem:s}=kt(),v=Et(),d=ze(),{valueOnClear:c,isEmptyValue:i}=$t(l,null),u=Ze(l,o),{inputId:h,isLabeledByFormItem:m}=St(l,{formItemContext:s}),f=y(),g=y(),k=y(),w=y(!1),C=y(!1);let R=!0;const{isFocused:H,handleFocus:B,handleBlur:z}=Pt(g,{disabled:d,beforeBlur(p){var V;return(V=f.value)==null?void 0:V.isFocusInsideContent(p)},afterBlur(){var p;Y(!1),j(),l.validateEvent&&((p=s?.validate)==null||p.call(s,"blur").catch(V=>pe()))}}),A=Vt(()=>{var p,V;return(V=(p=k.value)==null?void 0:p.color)!=null?V:u.color}),et=P(()=>It(l,Object.keys(Je))),tt=P(()=>!l.modelValue&&!C.value?"transparent":nt(A,l.showAlpha)),at=P(()=>!l.modelValue&&!C.value?"":A.value),ot=P(()=>m.value?void 0:l.ariaLabel||r("el.colorpicker.defaultLabel")),lt=P(()=>m.value?s?.labelId:void 0),st=P(()=>[t.b("picker"),t.is("disabled",d.value),t.bm("picker",v.value),t.is("focused",H.value)]);function nt(p,V){const{r:de,g:Ve,b:Ie,a:vt}=p.toRgb();return V?`rgba(${de}, ${Ve}, ${Ie}, ${vt})`:`rgb(${de}, ${Ve}, ${Ie})`}function Y(p){w.value=p}const te=Kt(Y,100,{leading:!0});function Ee(){d.value||Y(!0)}function $e(){te(!1),j()}function j(){J(()=>{l.modelValue?A.fromString(l.modelValue):(A.value="",J(()=>{C.value=!1}))})}function rt(){d.value||(w.value&&j(),te(!w.value))}function it(){const p=i(A.value)?c.value:A.value;o(x,p),o(ge,p),l.validateEvent&&s?.validate("change").catch(V=>pe()),te(!1),J(()=>{const V=new ue({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue});A.compare(V)||j()})}function ut(){te(!1),o(x,c.value),o(ge,c.value),l.modelValue!==c.value&&l.validateEvent&&s?.validate("change").catch(p=>pe()),j()}function ct(){var p,V;(V=(p=k?.value)==null?void 0:p.inputRef)==null||V.focus()}function dt(){w.value&&($e(),H.value&&Pe())}function Se(p){p.preventDefault(),p.stopPropagation(),Y(!1),j()}function pt(p){switch(Oe(p)){case M.enter:case M.numpadEnter:case M.space:p.preventDefault(),p.stopPropagation(),Ee();break;case M.esc:Se(p);break}}function Pe(){g.value.focus()}function ft(){g.value.blur()}return F(()=>at.value,p=>{R&&o("activeChange",p),R=!0}),F(()=>A.value,()=>{!l.modelValue&&!C.value&&(C.value=!0)}),F(()=>l.modelValue,p=>{p?p&&p!==A.value&&(R=!1,A.fromString(p)):C.value=!1}),F(()=>w.value,()=>{var p;J((p=k.value)==null?void 0:p.update)}),Ne(Ge,u),a({color:A,show:Ee,hide:$e,focus:Pe,blur:ft}),(p,V)=>($(),K(n(Mt),{ref_key:"popper",ref:f,visible:w.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[n(t).be("picker","panel"),p.popperClass],"popper-style":p.popperStyle,"stop-popper-mouse-event":!1,pure:"",loop:"",role:"dialog",effect:"light",trigger:"click",teleported:p.teleported,transition:`${n(t).namespace.value}-zoom-in-top`,persistent:p.persistent,"append-to":p.appendTo,onShow:ct,onHide:de=>Y(!1)},{content:S(()=>[ne(($(),K(n(sa),De({ref_key:"pickerPanelRef",ref:k},n(et),{border:!1,onKeydown:Bt(Se,["esc"])}),{footer:S(()=>[b("div",null,[_(n(Z),{class:E(n(t).be("footer","link-btn")),text:"",size:"small",onClick:ut},{default:S(()=>[L(T(n(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),_(n(Z),{plain:"",size:"small",class:E(n(t).be("footer","btn")),onClick:it},{default:S(()=>[L(T(n(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])])]),_:1},16,["onKeydown"])),[[n(Dt),dt,g.value]])]),default:S(()=>[b("div",De({id:n(h),ref_key:"triggerRef",ref:g},p.$attrs,{class:n(st),role:"button","aria-label":n(ot),"aria-labelledby":n(lt),"aria-description":n(r)("el.colorpicker.description",{color:p.modelValue||""}),"aria-disabled":n(d),tabindex:n(d)?void 0:p.tabindex,onKeydown:pt,onFocus:n(B),onBlur:n(z)}),[b("div",{class:E(n(t).be("picker","trigger")),onClick:rt},[b("span",{class:E([n(t).be("picker","color"),n(t).is("alpha",p.showAlpha)])},[b("span",{class:E(n(t).be("picker","color-inner")),style:q({backgroundColor:n(tt)})},[ne(_(n(Me),{class:E([n(t).be("picker","icon"),n(t).is("icon-arrow-down")])},{default:S(()=>[_(n(Tt))]),_:1},8,["class"]),[[Re,p.modelValue||C.value]]),ne(_(n(Me),{class:E([n(t).be("picker","empty"),n(t).is("icon-close")])},{default:S(()=>[_(n(Lt))]),_:1},8,["class"]),[[Re,!p.modelValue&&!C.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","popper-style","teleported","transition","persistent","append-to","onHide"]))}});var ca=X(ua,[["__file","color-picker.vue"]]);const da=Ue(ca),pa={install(e){fe._context=e._context,re._context=e._context,e.directive("loading",re),e.config.globalProperties.$loading=fe},directive:re,service:fe},fa={class:"password-buttons"},va={__name:"ChangePassword",setup(e){const{t:a}=ke(),o=y(null),l=y(!0),r=y(!1),t=ie({old_password:"",new_password:"",confirm_password:""}),s=ie({old_password:[{required:!0,message:a("setting.change_password.validate.old_password"),trigger:"blur"}],new_password:[{required:!0,message:a("setting.change_password.validate.new_password"),trigger:"blur"}],confirm_password:[{required:!0,message:a("setting.change_password.validate.confirm_password"),trigger:"blur"},{validator:(i,u,h)=>{u!==t.new_password?h(new Error(a("setting.change_password.validate.inconsistent"))):h()},trigger:"blur"}]});W(async()=>{try{const{data:i}=await G.get("/api/password");r.value=!i.have_password}catch(i){U.error(a("message.error.fetch")+i.message)}finally{l.value=!1}});const v=async()=>{try{await o.value.validate();const i={new_password:t.new_password};r.value||(i.password=t.old_password),(await G.put("/api/password",i)).status===205&&location.reload()}catch(i){i.response?.status===401?U.error(a("setting.change_password.message.failed")):i.response?.status===403&&qe||i.message&&U.error(a("message.error.fetch")+i.message)}},d=async()=>{try{(await G.delete("/api/password",{data:{password:t.old_password}})).status===205&&(U.success(a("setting.change_password.message.success.clear")),I.removeItem("noPasswordPromptDisabled"),location.reload())}catch(i){i.response?.status===401?U.error(a("setting.change_password.message.failed")):U.error(a("message.error.fetch")+i.message)}},c=async()=>{try{await o.value.validateField("old_password"),je.confirm(a("setting.change_password.confirm.message"),a("confirm.warning"),{confirmButtonText:a("button.confirm"),cancelButtonText:a("button.cancel"),type:"warning"}).then(async()=>{await d()}).catch(()=>{})}catch{}};return(i,u)=>{const h=He,m=At,f=Z,g=Ft,k=re;return ne(($(),D("div",null,[b("h3",null,[u[4]||(u[4]=b("i",{class:"mdi mdi-lock"},null,-1)),L(" "+T(i.$t("setting.change_password.title")),1)]),_(g,{model:t,rules:s,ref_key:"formRef",ref:o,"label-width":"auto"},{default:S(()=>[r.value?N("",!0):($(),K(m,{key:0,label:i.$t("setting.change_password.input.old_password"),prop:"old_password"},{default:S(()=>[_(h,{modelValue:t.old_password,"onUpdate:modelValue":u[0]||(u[0]=w=>t.old_password=w),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])),r.value?N("",!0):($(),K(m,{key:1,label:i.$t("setting.change_password.input.new_password"),prop:"new_password"},{default:S(()=>[_(h,{modelValue:t.new_password,"onUpdate:modelValue":u[1]||(u[1]=w=>t.new_password=w),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])),r.value?($(),K(m,{key:2,label:i.$t("setting.change_password.input.set_password"),prop:"new_password"},{default:S(()=>[_(h,{modelValue:t.new_password,"onUpdate:modelValue":u[2]||(u[2]=w=>t.new_password=w),type:"password"},null,8,["modelValue"])]),_:1},8,["label"])):N("",!0),_(m,{label:i.$t("setting.change_password.input.confirm_password"),prop:"confirm_password"},{default:S(()=>[_(h,{modelValue:t.confirm_password,"onUpdate:modelValue":u[3]||(u[3]=w=>t.confirm_password=w),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),r.value?($(),K(m,{key:3},{default:S(()=>[_(f,{type:"primary",onClick:v},{default:S(()=>[L(T(i.$t("setting.change_password.button.set_password")),1)]),_:1})]),_:1})):N("",!0),r.value?N("",!0):($(),K(m,{key:4},{default:S(()=>[b("div",fa,[_(f,{type:"primary",onClick:v},{default:S(()=>[L(T(i.$t("setting.change_password.button.update_password")),1)]),_:1}),_(f,{type:"danger",onClick:c},{default:S(()=>[L(T(i.$t("setting.change_password.button.clear_password")),1)]),_:1})])]),_:1}))]),_:1},8,["model","rules"])])),[[k,l.value]])}}},ha=ce(va,[["__scopeId","data-v-15bd4e73"]]),ma={__name:"SelectLanguage",setup(e){const{locale:a}=ke(),o=y(I.getItem("language")||"zh_cn"),l=Ce("elementLocale");function r(t){o.value=t,a.value=t,I.setItem("language",t),l&&(l.lang=Rt[t])}return(t,s)=>{const v=Ot,d=zt;return $(),D("div",null,[b("h3",null,[s[1]||(s[1]=b("i",{class:"mdi mdi-translate"},null,-1)),L(" "+T(t.$t("setting.select_language.title")),1)]),_(d,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=c=>o.value=c),onChange:r,class:"lang-select",style:{width:"100px","margin-right":"10px"}},{default:S(()=>[_(v,{label:"简体中文",value:"zh_cn"}),_(v,{label:"繁體中文",value:"zh_tw"}),_(v,{label:"English",value:"en_us"}),_(v,{label:"日本語",value:"ja_jp"})]),_:1},8,["modelValue"])])}}},ga=ce(ma,[["__scopeId","data-v-4613e3b1"]]),_a={class:"preset-buttons"},ba={class:"custom-theme"},wa={__name:"ThemeSetting",setup(e){const a=ie({akari:"#edaab3",teahouse:"#0091ff"}),o=y(""),l=y(I.getItem("isCustomTheme")==="true");function r(d){const c=a[d];I.setItem("isCustomTheme","false"),I.setItem("themeColor",c),l.value=!1,window.dispatchEvent(new Event("theme-change"))}function t(d){d?(I.setItem("isCustomTheme","true"),I.setItem("themeColor",d)):(I.removeItem("isCustomTheme"),I.setItem("themeColor","#edaab3")),window.dispatchEvent(new Event("theme-change"))}function s(){t(o.value),l.value=!0}W(()=>{I.getItem("isCustomTheme")==="true"&&(o.value=I.getItem("themeColor")||"")});const v=P(()=>o.value?{backgroundColor:o.value,borderColor:o.value,color:"white"}:{});return(d,c)=>{const i=Z,u=da;return $(),D("div",null,[b("h3",null,[c[3]||(c[3]=b("i",{class:"mdi mdi-palette"},null,-1)),L(" "+T(d.$t("setting.theme_setting.title")),1)]),b("div",_a,[_(i,{onClick:c[0]||(c[0]=h=>r("akari")),class:"theme-button akari"},{default:S(()=>[L(T(d.$t("setting.theme_setting.button.pink")),1)]),_:1}),_(i,{onClick:c[1]||(c[1]=h=>r("teahouse")),class:"theme-button teahouse"},{default:S(()=>[L(T(d.$t("setting.theme_setting.button.blue")),1)]),_:1}),b("div",ba,[_(i,{onClick:s,class:"theme-button custom",style:q(v.value)},{default:S(()=>[L(T(d.$t("setting.theme_setting.button.custom")),1)]),_:1},8,["style"]),l.value?($(),K(u,{key:0,modelValue:o.value,"onUpdate:modelValue":c[2]||(c[2]=h=>o.value=h),onChange:t,clearable:!0},null,8,["modelValue"])):N("",!0)])])])}}},ya=ce(wa,[["__scopeId","data-v-34f4fe1c"]]),Ca={key:0},ka={class:"develop-mode-label"},Ea={__name:"SwitchDevelopMode",setup(e){const a=y(!1),o=y(!1),l=y(I.getItem("showDevelopMode")==="true"&&!qe);W(()=>{a.value=!!I.getItem("isDevelopMode")});function r(t){o.value=!0,setTimeout(()=>{t?I.setItem("isDevelopMode","true"):I.removeItem("isDevelopMode"),o.value=!1,location.reload()},300)}return(t,s)=>{const v=Nt;return l.value?($(),D("div",Ca,[b("h3",null,[s[1]||(s[1]=b("i",{class:"mdi mdi-wrench-cog"},null,-1)),L(" "+T(t.$t("setting.develop_mode.title")),1)]),b("span",ka,T(t.$t("setting.develop_mode.label")),1),_(v,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=d=>a.value=d),loading:o.value,onChange:r},null,8,["modelValue","loading"])])):N("",!0)}}},$a=ce(Ea,[["__scopeId","data-v-740ebadd"]]),Sa=6e4,Ke=2e3,Pa={__name:"RestartBot",setup(e){const{t:a}=ke(),o=y(!1),l=async()=>{try{if((await G.post("/api/restart",{})).status===202){const s=pa.service({fullscreen:!0,text:a("setting.restart_bot.loading.text")}),v=Date.now(),d=async()=>{try{if((await G.get("/api")).status===200)s.close(),window.location.href="/";else throw new Error("Not ready")}catch{Date.now()-v>=Sa&&!o.value?(o.value=!0,U({message:a("setting.restart_bot.message.failed"),type:"error",duration:0}),s.close()):setTimeout(d,Ke)}};o.value=!1,setTimeout(d,Ke)}}catch(t){U.error(a("message.error.fetch")+t.message)}},r=async()=>{try{await je.confirm(a("confirm.message"),a("confirm.warning"),{confirmButtonText:a("button.confirm"),cancelButtonText:a("button.cancel"),type:"warning"}),await l()}catch{return}};return(t,s)=>{const v=Z;return $(),D("div",null,[b("h3",null,[s[0]||(s[0]=b("i",{class:"mdi mdi-restart"},null,-1)),L(" "+T(t.$t("setting.restart_bot.title")),1)]),_(v,{type:"danger",onClick:r},{default:S(()=>[L(T(t.$t("setting.restart_bot.button.restart")),1)]),_:1})])}}},Ra={__name:"setting",setup(e){return(a,o)=>($(),D("div",null,[_(ha),_(ga),_(ya),_($a),_(Pa)]))}};export{Ra as default};
