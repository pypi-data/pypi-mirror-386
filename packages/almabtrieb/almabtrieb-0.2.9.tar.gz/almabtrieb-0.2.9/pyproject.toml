[project]
name = "almabtrieb"
description = "A library for the cattle drive protocol"
readme = "README.md"
requires-python = ">=3.11"
dependencies = ["pydantic>=2.10.5"]

dynamic = ["version"]

[project.urls]
Repository = "https://codeberg.org/bovine/almabtrieb"
Documentation = "https://bovine.codeberg.page/almabtrieb/"
"Bug Tracker" = "https://codeberg.org/bovine/almabtrieb/issues"
Changelog = "https://codeberg.org/bovine/almabtrieb/src/branch/main/CHANGES.md"

[project.optional-dependencies]
amqp = ["aio-pika>=9.5.4"]
mqtt = ["aiomqtt>=2.3.0"]

[project.scripts]
almabtrieb = "almabtrieb.__main__:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.version]
path = "almabtrieb/version.py"

[dependency-groups]
dev = [
    "hatch>=1.14.0",

    "pyright[nodejs]>=1.1.394",
    "pytest-asyncio>=0.25.2",
    "pytest-coverage>=0.0",
    "pytest-dependency>=0.6.0",
    "pytest-timeout>=2.3.1",
    "pytest-watcher>=0.4.3",
    "pytest>=8.3.4",
    "ruff>=0.9.2",
]
docs = [
    "mkdocs-click>=0.9.0",
    "mkdocs-material==9.6.20",
    "mkdocstrings-python>=1.12.0",
    "griffe-fieldz>=0.2.1",
]

[tool.pytest.ini_options]
addopts = "--doctest-modules"
asyncio_mode = "auto"
log_cli = true
log_cli_level = "INFO"
doctest_optionflags = "NORMALIZE_WHITESPACE IGNORE_EXCEPTION_DETAIL ELLIPSIS"
asyncio_default_fixture_loop_scope = "function"
