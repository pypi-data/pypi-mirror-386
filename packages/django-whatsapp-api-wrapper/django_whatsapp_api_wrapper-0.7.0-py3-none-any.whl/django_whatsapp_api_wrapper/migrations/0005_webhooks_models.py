# Generated by Django 5.2.5

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ("django_whatsapp_api_wrapper", "0004_whatsappcloudapibusiness_code_and_more"),
    ]

    operations = [
        migrations.CreateModel(
            name="WhatsAppContact",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("wa_id", models.CharField(db_index=True, max_length=32, unique=True)),
                ("profile_name", models.CharField(blank=True, max_length=255, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "WhatsApp Contact",
                "verbose_name_plural": "WhatsApp Contacts",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="ConversationInfo",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("conversation_id", models.CharField(db_index=True, max_length=64, unique=True)),
                ("origin_type", models.CharField(blank=True, max_length=64, null=True)),
                ("expiration_timestamp", models.DateTimeField(blank=True, null=True)),
                ("pricing_model", models.CharField(blank=True, max_length=32, null=True)),
                ("category", models.CharField(blank=True, max_length=64, null=True)),
                ("billable", models.BooleanField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Conversation Info",
                "verbose_name_plural": "Conversation Infos",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="WebhookEvent",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("object", models.CharField(blank=True, max_length=64, null=True)),
                ("entry_id", models.CharField(blank=True, max_length=128, null=True)),
                ("field", models.CharField(blank=True, max_length=64, null=True)),
                ("phone_number_id", models.CharField(blank=True, db_index=True, max_length=64, null=True)),
                ("display_phone_number", models.CharField(blank=True, max_length=32, null=True)),
                ("event_kind", models.CharField(choices=[("message", "Message"), ("status", "Status"), ("unknown", "Unknown")], db_index=True, max_length=16)),
                ("subtype", models.CharField(blank=True, db_index=True, max_length=32, null=True)),
                ("wamid", models.CharField(blank=True, db_index=True, max_length=128, null=True)),
                ("from_wa_id", models.CharField(blank=True, db_index=True, max_length=32, null=True)),
                ("event_timestamp", models.DateTimeField(blank=True, db_index=True, null=True)),
                ("webhook_received_at", models.DateTimeField(auto_now_add=True)),
                ("raw_payload", models.JSONField()),
            ],
            options={
                "verbose_name": "Webhook Event",
                "verbose_name_plural": "Webhook Events",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.AddIndex(
            model_name="webhookevent",
            index=models.Index(fields=["wamid"], name="django_wh_wamid_b6b24a_idx"),
        ),
        migrations.AddIndex(
            model_name="webhookevent",
            index=models.Index(fields=["event_kind", "subtype"], name="django_wh_event_k_e9b4d6_idx"),
        ),
        migrations.AddIndex(
            model_name="webhookevent",
            index=models.Index(fields=["event_timestamp"], name="django_wh_event_t_90d95e_idx"),
        ),
        migrations.AddIndex(
            model_name="webhookevent",
            index=models.Index(fields=["phone_number_id"], name="django_wh_phone_n_2b0aaf_idx"),
        ),
        migrations.AddConstraint(
            model_name="webhookevent",
            constraint=models.UniqueConstraint(deferrable=models.Deferrable["DEFERRED"], fields=["wamid", "event_kind", "subtype"], name="uniq_event_wamid_kind_subtype"),
        ),
        migrations.CreateModel(
            name="MessageContacts",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("contacts", models.JSONField()),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_contacts", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Contacts",
                "verbose_name_plural": "Message Contacts",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageLocation",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("latitude", models.DecimalField(decimal_places=6, max_digits=9)),
                ("longitude", models.DecimalField(decimal_places=6, max_digits=9)),
                ("name", models.CharField(blank=True, max_length=255, null=True)),
                ("address", models.CharField(blank=True, max_length=512, null=True)),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_location", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Location",
                "verbose_name_plural": "Message Locations",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageMedia",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("media_type", models.CharField(choices=[("image", "Image"), ("audio", "Audio"), ("video", "Video"), ("document", "Document"), ("sticker", "Sticker")], max_length=16)),
                ("media_id", models.CharField(max_length=128)),
                ("mime_type", models.CharField(blank=True, max_length=64, null=True)),
                ("sha256", models.CharField(blank=True, max_length=128, null=True)),
                ("caption", models.TextField(blank=True, null=True)),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_media", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Media",
                "verbose_name_plural": "Message Media",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageOrder",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("order", models.JSONField()),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_order", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Order",
                "verbose_name_plural": "Message Orders",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageReaction",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("reacted_message_id", models.CharField(max_length=128)),
                ("emoji", models.CharField(max_length=32)),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_reaction", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Reaction",
                "verbose_name_plural": "Message Reactions",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageSystem",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("system_type", models.CharField(max_length=64)),
                ("body", models.TextField(blank=True, null=True)),
                ("new_wa_id", models.CharField(blank=True, max_length=32, null=True)),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_system", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message System",
                "verbose_name_plural": "Message Systems",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageText",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("body", models.TextField()),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_text", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Text",
                "verbose_name_plural": "Message Texts",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="MessageUnknown",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("errors", models.JSONField(blank=True, null=True)),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="message_unknown", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Message Unknown",
                "verbose_name_plural": "Message Unknown",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
        migrations.CreateModel(
            name="StatusUpdate",
            fields=[
                ("id", models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("status", models.CharField(choices=[("sent", "Sent"), ("delivered", "Delivered"), ("read", "Read"), ("failed", "Failed")], db_index=True, max_length=16)),
                ("recipient_id", models.CharField(blank=True, db_index=True, max_length=32, null=True)),
                ("error_code", models.IntegerField(blank=True, null=True)),
                ("error_title", models.CharField(blank=True, max_length=255, null=True)),
                ("error_message", models.CharField(blank=True, max_length=512, null=True)),
                ("error_details", models.JSONField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("conversation", models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name="status_updates", to="django_whatsapp_api_wrapper.conversationinfo")),
                ("event", models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name="status_update", to="django_whatsapp_api_wrapper.webhookevent")),
            ],
            options={
                "verbose_name": "Status Update",
                "verbose_name_plural": "Status Updates",
                "app_label": "django_whatsapp_api_wrapper",
            },
        ),
    ]


