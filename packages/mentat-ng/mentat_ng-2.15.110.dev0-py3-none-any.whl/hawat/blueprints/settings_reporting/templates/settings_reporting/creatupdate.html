{%- extends "_layout.html" %}

{%- block content %}
    <div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{{ url_for('home.index') }}">
                    {{ _("Home") }}
                </a>
            </li>
            <li class="breadcrumb-item">
                <a href="{{ url_for('groups.list') }}">
                    {{ _("Group management") }}
                </a>
            </li>
            <li class="breadcrumb-item">
                <a href="{{ url_for('groups.show', item_id = item.group.id) }}">
                    {{ _("Group detail") }}
                </a>
            </li>
            <li class="breadcrumb-item">
                <a href="{{ url_for('settings_reporting.show', item_id = item.id) }}">
                    {{ _("Reporting settings") }}
                </a>
            </li>
            <li class="breadcrumb-item active">
                {{ action_name }}
            </li>
        </ol>
        <hr>
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-4">
                <div class="card bg-light">
                    <div class="card-body">
                        <form method="POST" action="{{ form_url }}">
                            <fieldset>
                                <legend class="card-title">
                                    {{ hawat_current_view.get_view_title() }}
                                </legend>
                                <div class="d-grid row-gap-2">
                                    {{ macros_form.render_form_item_static(_('Group:'), item.group.name) }}
                                    {{ macros_form.render_form_item_default(form.emails_info) }}
                                    {{ macros_form.render_form_item_default(form.emails_low) }}
                                    {{ macros_form.render_form_item_default(form.emails_medium) }}
                                    {{ macros_form.render_form_item_default(form.emails_high) }}
                                    {{ macros_form.render_form_item_default(form.emails_critical) }}
                                    {{ macros_form.render_form_item_select(form.locale) }}
                                    {{ macros_form.render_form_item_select(form.timezone) }}

                                    {%- if permission_can('power') %}
                                        {{ macros_form.render_form_item_select(form.mode) }}
                                        {{ macros_form.render_form_item_radiobutton(form.redirect) }}
                                    {%- endif %}
                                    <hr>
                                    {{ macros_form.render_form_errors(form.next.errors) }}
                                    {{ form.next }}
                                    {{ macros_form.render_form_errors(form.csrf_token.errors) }}
                                    {{ form.csrf_token }}
                                </div>

                                <div class="btn-toolbar"
                                     role="toolbar"
                                     aria-label="{{ _('Form submission buttons') }}">
                                    <div class="btn-group" role="group">
                                        {{ form.cancel(class_='btn btn-secondary') }}
                                        {{ form.submit(class_='btn btn-primary') }}
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                    <!-- /.card -->
                </div>
            </div>
        </div>
    </div>

    {%- if permission_can('developer') and item %}
        <hr>
        {{ macros_site.render_raw_item_view(item) }}
    {%- endif %}
{%- endblock content %}
