<odoo>
  <record id="cooperator_view_partner_form" model="ir.ui.view">
    <field name="name">view_company_form.inherit</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="cooperator.view_partner_form" />
    <field name="arch" type="xml">
      <xpath
        expr="//page[@name='share']//field[@name='share_ids']/tree"
        position="attributes"
      >
        <attribute name="delete">[('user_current_role','=','role_platform_admin')]</attribute>
      </xpath>
      <field name="coop_candidate" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      <field name="company_register_number" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      <field name="gender" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      <field name="internal_rules_approved" position="attributes">
        <attribute name="readonly">1</attribute>
      </field>
      <field name="data_policy_approved" position="attributes">
        <attribute name="readonly">1</attribute>
      </field>
      <field name="financial_risk_approved" position="attributes">
        <attribute name="readonly">1</attribute>
      </field>
      <field name="generic_rules_approved" position="attributes">
        <attribute name="readonly">1</attribute>
      </field>
      <field name="vat" position="attributes">
        <attribute name="attrs">{'readonly': [('parent_id','!=',False)], 'required': [('no_member_autorized_in_energy_actions', '=', True)]}</attribute>
      </field>
      <field name="legal_form" position="after">
        <field name="user_current_role" invisible="1" />
        <field name="cooperator" readonly="1" />
        <field name="no_member_autorized_in_energy_actions" />
        
        <field
          name="coop_candidate"
          readonly="1"
          attrs="{'invisible': [('cooperator', '=', False)]}"
        />
        <field
          name="old_member"
          readonly="1"
          attrs="{'invisible': [('cooperator', '=', False)]}"
        />
        <field
          name="representative"
          readonly="1"
          attrs="{'invisible': [('cooperator', '=', False)]}"
        />
        <field
          name="representative_of_member_company"
          attrs="{'invisible': [('cooperator', '=', False)]}"
        />
        <field
          name="cooperative_membership_id"
          attrs="{'invisible': ['|',('cooperator', '=', False),('user_current_role', '!=', 'role_platform_admin')]}"
        />
        <!--<field-->
        <!--  name="cooperator_register_number"-->
        <!--  attrs="{'invisible': [('member', '=', False)], 'readonly': True}"-->
        <!--/>-->
      </field>
    </field>
  </record>
  <record model="ir.ui.menu" id="cooperator.menu_cooperator_cooperator">
    <field name="action" ref="action_cooperative_membership_cooperator" />
  </record>
  <record model="ir.ui.menu" id="cooperator.menu_cooperator_company_representative">
    <field name="action" ref="action_cooperative_membership_representative" />
  </record>
</odoo>
