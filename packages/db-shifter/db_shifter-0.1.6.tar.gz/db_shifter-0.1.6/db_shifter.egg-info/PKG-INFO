Metadata-Version: 2.4
Name: db-shifter
Version: 0.1.6
Summary: A toxic lil' tool to sync missing rows between two Postgres DBs.
Home-page: https://github.com/goodness5/db-shifter
Author: superman
Author-email: goodnesskolapo@gmail.com
Project-URL: Changelog, https://github.com/goodness5/db-shifter/blob/master/CHANGELOG.md
Project-URL: Source, https://github.com/goodness5/db-shifter
Project-URL: Tracker, https://github.com/goodness5/db-shifter/issues
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Requires-Dist: psycopg2-binary
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: project-url
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# ğŸ§  **db-shifter**  

**_Because someone switched your f**king DB URL again._**

---

### ğŸ‘¶ Did your intern point production to the wrong DB?  

### ğŸ¤¡ Did your devops guy swear "nothing changed" before disappearing?  

### ğŸ”¥ Did your CTO say â€œjust restore from backupâ€ like you werenâ€™t already crying?  

Yeah. Weâ€™ve all been there.

Welcome to **`db-shifter`** â€” the little script that digs through your old PostgreSQL database and copies only the missing rows into your new one.

No overwrites. No dumbass `pg_dump`. Just cold, calculated migration for the chaotic neutral in you.

---

## âš¡ Why?

Because your CTO is a clown.  
Because your devops team â€œaccidentallyâ€ pointed production at the wrong motherf**king database.  
Because you need to **copy missing shit table-by-table** and youâ€™re too pretty to do it manually.

---

## ğŸ§° Features

- âœ… Auto-detects all tables in `public` schema  
- âœ… Finds primary keys like a bloodhound  
- âœ… Copies only rows **missing** in the new DB  
- âœ… Skips duplicates (doesnâ€™t ruin your existing data)  
- âœ… FK errors? Nah â€” this ainâ€™t your grandmaâ€™s `pg_dump`

---

## ğŸ’¾ Installation

```bash
pip install db-shifter
```

Or if you're a real one:

```bash
git clone https://github.com/goodness5/db-shifter.git
cd db-shifter
pip install -e .
```

---

## ğŸš€ Usage

```bash
db-shifter --old-db-url postgresql://user:pass@oldhost/db   --new-db-url postgresql://user:pass@newhost/db
```

---

## ğŸ§¨ Command-line options

| Flag              | What it does                          |
|------------------|----------------------------------------|
| `--dry-run`       | Simulate the transfer, no data is hurt |
| `--verbose`       | Prints detailed logs of every row      |
| `--table users`   | Sync just one table |
| `--skip-fk`       | Ignores foreign key errors             |

---

## ğŸ§  How It Works

1. Connects to both DBs  
2. Lists all public tables  
3. Checks the primary key (like a snitch)  
4. Pulls rows missing from the new DB  
5. Inserts them without wrecking existing rows

---

## âš ï¸ Caution

- Assumes **you have primary keys** (donâ€™t be a barbarian)  
- Does **NOT** handle circular FK hell â€” yet  
- If youâ€™re syncing 50GB of trash, donâ€™t cry when it lags  
- Backups are your friend. Donâ€™t be a dumbass.

---

## âœ¨ Coming Soon

- Auto topological sorting to avoid FK explosions  
- Timestamp-based syncing (`created_at` support)  
- GUI with a "FIX EVERYTHING" button (for product managers lol)

---

## ğŸª¦ Contributing

Found a bug? Good.  
Fix it, submit a PR, and don't drop your cashapp in the description.

---

## ğŸ“œ License

MIT. Do whatever the f**k you want. Just donâ€™t call me if you drop prod again.
