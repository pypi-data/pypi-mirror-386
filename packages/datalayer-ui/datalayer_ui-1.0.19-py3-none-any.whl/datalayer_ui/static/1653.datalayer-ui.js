"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1653],{2159:(e,t,s)=>{s.d(t,{_:()=>l});var n=s(18683),r=s(88037),a=s(72490),o=s(84604),i=s(23165);class d{panel;commands;nbgrader;sidebarWidth;factory;_isDisposed=!1;_sidebars=new WeakMap;constructor(e,t,s=!1,n=120,r=o.Z7){this.panel=e,this.commands=t,this.nbgrader=s,this.sidebarWidth=n,this.factory=r,this._onModelChanged(e.content),e.content.modelChanged.connect(this._onModelChanged,this)}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this.panel.content.model?.cells.changed.disconnect(this._onCellsChanged,this),this.panel.content.modelChanged.disconnect(this._onModelChanged,this),a.Signal.clearData(this))}_addSidebar(e){const t=this._getCell(e);if(t){const s=this.factory,a=r._Q.create((0,n.jsx)(i.WV,{children:(0,n.jsx)(s,{commands:this.commands,model:e,nbgrader:this.nbgrader})}));a.node.style.width=`${this.sidebarWidth}px`,a.node.style.position="absolute",a.node.style.right=`-${this.sidebarWidth}px`,a.node.style.top="0",t.layout.insertWidget(0,a),this._sidebars.set(e,a);const o=()=>{this._sidebars.delete(e),a.dispose()};t.disposed.connect(o)}}_getCell(e){return this.panel?.content.widgets.find(t=>t.model===e)}_removeSidebar(e){this._sidebars.get(e)?.dispose(),this._sidebars.delete(e)}_onCellsChanged(e,t){t.oldValues.forEach(e=>this._removeSidebar(e)),t.newValues.forEach(e=>this._addSidebar(e))}_onModelChanged(e){const t=e.model?.cells;t&&this._onCellsChanged(t,{type:"add",newIndex:0,newValues:Array.from(t),oldIndex:-1,oldValues:[]}),t?.changed.connect(this._onCellsChanged,this)}}class l{factory;commands;nbgrader;sidebarWidth;colormode;component;constructor(e={}){this.factory=e.factory??o.Z7,this.commands=e.commands,this.nbgrader=e.nbgrader,this.sidebarWidth=e.sidebarWidth,this.colormode=e.colormode??"light"}createNew(e){return new d(e,this.commands,this.nbgrader,this.sidebarWidth,this.factory)}init(e){this.commands=e.commands}}},45458:(e,t,s)=>{s.d(t,{SS:()=>g});var n=s(42418),r=s(62613),a=s(72490),o=s(97164),i=s(5190),d=s(48319),l=s(16608),c=s(30115);"undefined"!=typeof window&&void 0!==window.define&&(window.define("@jupyter-widgets/base",n),window.define("@jupyter-widgets/controls",c));class h extends r.FI{constructor(e){super(),this._rendermime=e;const t=document.createElement("script"),r=document.createElement("script");r.setAttribute("data-jupyter-widgets-cdn-only","true"),document.body.appendChild(r),t.src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js",document.body.appendChild(t),t.onload=()=>{window.define("@jupyter-widgets/base",n),window.define("@jupyter-widgets/controls",c),this._registry=new d.R,this.register({name:"@jupyter-widgets/base",version:n.JUPYTER_WIDGETS_VERSION,exports:()=>Promise.resolve().then(s.bind(s,42418))}),this.register({name:"@jupyter-widgets/controls",version:c.JUPYTER_CONTROLS_VERSION,exports:()=>Promise.resolve().then(s.bind(s,30115))})}}callbacks(e){return{iopub:{output:e=>{this._onUnhandledIOPubMessage.emit(e)}}}}registerWithKernel(e){this._commRegistration&&this._commRegistration.dispose(),e&&e.registerCommTarget(this.comm_target_name,this._handleCommOpen)}_handleKernelChanged({oldValue:e,newValue:t}){e&&e.removeCommTarget(this.comm_target_name,this._handleCommOpen),t&&t.registerCommTarget(this.comm_target_name,this._handleCommOpen)}disconnect(){super.disconnect(),this._restoredStatus=!1}async _loadFromKernel(){if(!this.kernel)throw new Error("Kernel not set");if(!1!==this.kernel?.handleComms)return super._loadFromKernel()}async _create_comm(e,t,s,r,a){const o=this.kernel;if(!o)throw new Error("No current kernel");const i=o.createComm(e,t);return(s||r)&&i.open(s,r,a),new n.shims.services.Comm(i)}async _get_comm_info(){const e=this.kernel;if(!e)throw new Error("No current kernel");const t=await e.requestCommInfo({target_name:this.comm_target_name});return"ok"===t.content.status?t.content.comms:{}}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._commRegistration&&this._commRegistration.dispose())}async resolveUrl(e){return e}async loadClass(e,t,s){"@jupyter-widgets/base"!==t&&"@jupyter-widgets/controls"!==t||!(0,o.valid)(s)||(s=`^${s}`);let n=this._getRegistry().getAllVersions(t);const r=2===s.split(".").length?s+".0":s;if(!n){const e=await(0,i.l)(t,r),s={name:t,version:r.replaceAll("^",""),exports:{...e}};if(this.register(s),n=this._getRegistry().getAllVersions(t),!n)throw new Error(`No version of module ${t} is registered`)}const a=this._registry.get(t,s);if(!a){const e=Object.keys(n);throw new Error(`Module ${t}, version ${s} is not registered, however,         ${e.join(",")} ${e.length>1?"are":"is"}`)}let d;d="function"==typeof a?await a():await a;const l=d[e];if(!l)throw new Error(`Class ${e} not found in module ${t}`);return l}_getRegistry(){return this._registry}get rendermime(){return this._rendermime}get restored(){return this._restored}get restoredStatus(){return this._restoredStatus}get onUnhandledIOPubMessage(){return this._onUnhandledIOPubMessage}register(e){this._registry.set(e.name,e.version,e.exports)}register_model(e,t){super.register_model(e,t),t.then(t=>{this._modelsSync.set(e,t),t.once("comm:close",()=>{this._modelsSync.delete(e)})})}async clear_state(){await super.clear_state(),this._modelsSync=new Map}get_state_sync(e={}){const t=[];for(const e of this._modelsSync.values())e.comm_live&&t.push(e);return(0,r.JV)(t,e)}_handleCommOpen=async(e,t)=>{const s=new n.shims.services.Comm(e);await this.handle_comm_open(s,t)};_restored=new a.Signal(this);_restoredStatus=!1;_kernelRestoreInProgress=!1;_isDisposed=!1;_registry=new d.R;_rendermime;_commRegistration;_modelsSync=new Map;_onUnhandledIOPubMessage=new a.Signal(this)}class g extends h{constructor(e,t,s){super(t),this._context=e,this._context.sessionContext.kernelChanged.connect((e,t)=>{this._handleKernelChanged(t)}),this._context.sessionContext.statusChanged.connect((e,t)=>{this._handleKernelStatusChange(t)}),this._context.sessionContext.connectionStatusChanged.connect((e,t)=>{this._handleKernelConnectionStatusChange(t)}),this._context.sessionContext.session?.kernel&&this._handleKernelChanged({name:"kernel",oldValue:null,newValue:this._context.sessionContext.session?.kernel}),this.restoreWidgets(this._context.model),this._settings=s,e.saveState.connect((e,t)=>{"started"===t&&s.saveState&&this._saveState()})}_saveState(){const e=this.get_state_sync({drop_defaults:!0});this._context.model.setMetadata("widgets",{"application/vnd.jupyter.widget-state+json":e})}_handleKernelConnectionStatusChange(e){"connected"===e&&(this._kernelRestoreInProgress||this.restoreWidgets(this._context.model,{loadKernel:!0,loadNotebook:!1}))}_handleKernelStatusChange(e){"restarting"===e&&this.disconnect()}async restoreWidgets(e,{loadKernel:t,loadNotebook:s}={loadKernel:!0,loadNotebook:!0}){await this.context.sessionContext.ready;try{if(t)try{this._kernelRestoreInProgress=!0,await this._loadFromKernel()}finally{this._kernelRestoreInProgress=!1}s&&await this._loadFromNotebook(e),this._restoredStatus=!0,this._restored.emit()}catch(e){}}async _loadFromNotebook(e){const t=e.getMetadata("widgets");if(t&&t[l.s]){let e=t[l.s];e=this.filterExistingModelState(e),await this.set_state(e)}}dispose(){this.isDisposed||(this._context=null,super.dispose())}async resolveUrl(e){const t=await this.context.urlResolver.resolveUrl(e);return this.context.urlResolver.getDownloadUrl(t)}get context(){return this._context}get kernel(){return this._context.sessionContext?.session?.kernel??null}register_model(e,t){super.register_model(e,t),this.setDirty()}async clear_state(){await super.clear_state(),this.setDirty()}setDirty(){this._settings.saveState&&(this._context.model.dirty=!0)}_context;_settings}},60531:(e,t,s)=>{s.d(t,{r:()=>g,A:()=>u});var n,r=s(18683),a=s(38621),o=s(34447),i=s(87324),d=s(9387),l=s(17402);!function(e){e[e.NotGraded=0]="NotGraded",e[e.AutogradedAnswer=1]="AutogradedAnswer",e[e.AutogradedTest=2]="AutogradedTest",e[e.ManuallyGradedTask=3]="ManuallyGradedTask",e[e.ManuallyGradedAnswer=4]="ManuallyGradedAnswer",e[e.ReadonlyGraded=5]="ReadonlyGraded"}(n||(n={}));const c=e=>{const t=e.getMetadata("nbgrader");if(!t)return n.NotGraded;const s=t.grade,r=t.solution,a=t.locked,o=t.task;return s||!r||a?!s&&!r&&a&&o?n.ManuallyGradedTask:s&&!r&&a?n.AutogradedTest:s&&r&&!a?n.ManuallyGradedAnswer:s||r||!a||o?n.NotGraded:n.ReadonlyGraded:n.AutogradedAnswer},h=n;function g(e){const{cellModel:t}=e,[s,n]=(0,d.useState)(c(t)),[g,u]=(0,d.useState)(t.getMetadata("nbgrader")??{grade_id:(0,l.fl)(),points:1});(0,d.useEffect)(()=>{u({grade_id:g.grade_id??(0,l.fl)(),points:g.points??1})},[g]);const m=(0,d.useCallback)((e,t)=>{const s=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...s,grade_id:t}),u({...g,grade_id:t})},[]),_=(0,d.useCallback)((e,t)=>{const s=+t;if(!isNaN(s)){const t=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...t,points:s}),u({...g,points:s})}},[]),p=(0,d.useCallback)((e,t)=>{switch(t){case h.NotGraded:e.deleteMetadata("nbgrader"),n(h.NotGraded);break;case h.AutogradedAnswer:{const t=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...t,grade:!1,solution:!0,locked:!1,task:!1,grade_id:(0,l.fl)(),points:1}),n(h.AutogradedAnswer);break}case h.AutogradedTest:{const t=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...t,grade:!0,solution:!1,locked:!1,task:!1,grade_id:(0,l.fl)(),points:1}),n(h.AutogradedTest);break}case h.ManuallyGradedAnswer:{const t=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...t,grade:!0,solution:!0,locked:!1,task:!1,grade_id:(0,l.fl)(),points:1}),n(h.ManuallyGradedAnswer);break}case h.ManuallyGradedTask:{const t=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...t,grade:!1,solution:!1,locked:!0,task:!0,grade_id:(0,l.fl)(),points:1}),n(h.ManuallyGradedTask);break}case h.ReadonlyGraded:{const t=e.getMetadata("nbgrader");e.setMetadata("nbgrader",{...t,grade:!1,solution:!1,locked:!0,task:!1}),n(h.ReadonlyGraded);break}}},[]);return(0,r.jsxs)(o.l,{showDividers:!0,children:[(0,r.jsx)(o.l.Divider,{}),(0,r.jsxs)(o.l.Group,{title:"NbGrader Cell Type",variant:"subtle",children:[(0,r.jsxs)(o.l.Item,{onSelect:e=>p(t,h.NotGraded),children:[s===h.NotGraded&&(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(a.Srz,{})}),"None",(0,r.jsx)(o.l.Description,{variant:"block",children:"Not a grader cell."})]}),(0,r.jsxs)(o.l.Item,{onSelect:e=>p(t,h.AutogradedAnswer),children:[s===h.AutogradedAnswer&&(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(a.Srz,{})}),"Autograded answer",(0,r.jsx)(o.l.Description,{variant:"block",children:"An autograded answer cell."})]}),(0,r.jsxs)(o.l.Item,{role:"listitem",onClick:e=>p(t,h.AutogradedTest),children:[s===h.AutogradedTest&&(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(a.Srz,{})}),"Autograded test",(0,r.jsx)(o.l.Description,{variant:"block",children:"An autograded test cell."})]}),(0,r.jsxs)(o.l.Item,{onSelect:e=>p(t,h.ManuallyGradedTask),children:[s===h.ManuallyGradedTask&&(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(a.Srz,{})}),"Manually graded task",(0,r.jsx)(o.l.Description,{variant:"block",children:"A manually graded task cell."})]}),(0,r.jsxs)(o.l.Item,{onSelect:e=>p(t,h.ManuallyGradedAnswer),children:[s===h.ManuallyGradedAnswer&&(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(a.Srz,{})}),"Manually graded answer",(0,r.jsx)(o.l.Description,{variant:"block",children:"A manually graded answer cell."})]}),(0,r.jsxs)(o.l.Item,{onSelect:e=>p(t,h.ReadonlyGraded),children:[s===h.ReadonlyGraded&&(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(a.Srz,{})}),"Readonly",(0,r.jsx)(o.l.Description,{variant:"block",children:"A readonly grader cell."})]})]}),s!==h.NotGraded&&(0,r.jsxs)(o.l.Group,{title:"NbGrader Metadata",variant:"subtle",children:[(0,r.jsxs)(o.l.Item,{onSelect:e=>e.preventDefault(),children:["Grade ID:"," ",(0,r.jsx)(i.A,{block:!0,value:g.grade_id,onChange:e=>{e.preventDefault(),m(t,e.target.value)}})]}),(0,r.jsxs)(o.l.Item,{children:["Points:"," ",(0,r.jsx)(i.A,{block:!0,value:g.points,onChange:e=>{e.preventDefault(),_(t,e.target.value)}})]})]})]})}const u=g},66698:(e,t,s)=>{s.d(t,{X:()=>a});var n=s(98238),r=s(14809);class a extends r.Zk{constructor(e,t){super(),this.mimeType=e.mimeType,t&&(this.manager=t)}set manager(e){e.restored.connect(this._rerender,this),this._manager.resolve(e)}async renderModel(e){const t=e.data[this.mimeType];this.node.textContent="Loading widget...";const s=await this._manager.promise;if(""===t.model_id)return this.hide(),Promise.resolve();let n,r;try{n=await s.get_model(t.model_id)}catch(t){return s.restoredStatus?(this.node.textContent="Please run the cell to display the IPyWidgets.",this.addClass("jupyter-widgets"),void console.error(t)):void(this._rerenderMimeModel=e)}this._rerenderMimeModel=null;try{r=(await s.create_view(n)).luminoWidget}catch(e){return this.node.textContent="Error displaying widget",this.addClass("jupyter-widgets"),void console.error(e)}this.node.textContent="",this.addWidget(r),r.disposed.connect(()=>{this.hide(),t.model_id=""})}dispose(){this.isDisposed||(this._manager=null,super.dispose())}_rerender(){this._rerenderMimeModel&&(this.node.textContent="",this.removeClass("jupyter-widgets"),this.renderModel(this._rerenderMimeModel))}mimeType;_manager=new n.PromiseDelegate;_rerenderMimeModel=null}},84604:(e,t,s)=>{s.d(t,{VL:()=>c,Z7:()=>h});var n=s(18683),r=s(38621),a=s(98754),o=s(70985),i=s(99180),d=s(71791),l=s(60531);const c="dla-CellSidebar-Container";function h(e){const{commands:t,model:s,nbgrader:h}=e;return(0,n.jsxs)(a.A,{className:c,sx:{"& p":{marginBottom:"0 !important"}},children:[h&&(0,n.jsx)(o.W,{children:(0,n.jsx)(l.A,{cellModel:s})}),(0,n.jsx)(i.Q,{title:"Run cell",leadingVisual:r.vKP,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.run).catch(e=>{console.error("Failed to run cell.",e)})},children:"Run"}),(0,n.jsx)(i.Q,{title:"Insert code cell above",leadingVisual:r.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.insertAbove).catch(e=>{console.error("Failed to insert code cell above.",e)})},children:"Code"}),(0,n.jsx)(i.Q,{title:"Insert markdown cell above",leadingVisual:r.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.insertAbove,{cellType:"markdown"}).catch(e=>{console.error("Failed to insert markdown cell above.",e)})},children:"Markdown"}),"code"===s.type?(0,n.jsx)(i.Q,{title:"Convert to markdow cell",leadingVisual:r.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.changeCellTypeToMarkdown).catch(e=>{console.error("Failed to change cell type to markdown.",e)})},children:"To Markdown"}):(0,n.jsx)(i.Q,{title:"Convert to code cell",leadingVisual:r.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.changeCellTypeToCode).catch(e=>{console.error("Failed to change cell type to code.",e)})},children:"To Code"}),(0,n.jsx)(i.Q,{title:"Insert markdown cell below",leadingVisual:r.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.insertBelow,{cellType:"markdown"}).catch(e=>{console.error("Failed to insert markdown cell below.",e)})},children:"Markdown"}),(0,n.jsx)(i.Q,{title:"Insert code cell below",leadingVisual:r.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.insertBelow).catch(e=>{console.error("Failed to insert code cell below.",e)})},children:"Code"}),(0,n.jsx)(i.Q,{title:"Delete cell",leadingVisual:r.uv5,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(d.nx.deleteCells).catch(e=>{console.error("Failed to delete cells.",e)})},children:"Delete"})]})}},90117:(e,t,s)=>{s.d(t,{a:()=>i});var n=s(18683),r=s(98754),a=s(81461),o=s(34429);function i(e){const{message:t}=e;return(0,n.jsx)(r.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40px",zIndex:10999},children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.A,{mr:3,children:(0,n.jsx)(o.A,{size:"large"})}),(0,n.jsx)(r.A,{children:(0,n.jsx)(a.A,{sx:{fontSize:5,color:"white"},children:t})})]}):(0,n.jsx)(o.A,{size:"large"})})}},94247:(e,t,s)=>{s.d(t,{KQ:()=>l,ZP:()=>i,bd:()=>o,dC:()=>a});var n=s(55881),r=s(14738);const a="text/x-ipython",o="application/sql",i=e=>{const t=e.model?.getMetadata("datalayer");return!!t&&!0===t.sql};class d extends n.Yr{constructor(e){super(e)}}class l extends r.S.ContentFactory{_updateSQLEditor=e=>{i(e)&&(e.editor.model.mimeType=o)};_updateEditor=e=>{e.editor&&(e.editor.model.mimeTypeChanged.connect((t,s)=>{this._updateSQLEditor(e)}),this._updateSQLEditor(e))};createNotebook(e){return super.createNotebook(e)}createCodeCell(e){const t=new d(e);return t.inViewport&&this._updateEditor(t),t.displayChanged.connect(()=>{this._updateEditor(t)}),t.inViewportChanged.connect(()=>{this._updateEditor(t)}),t}}}}]);