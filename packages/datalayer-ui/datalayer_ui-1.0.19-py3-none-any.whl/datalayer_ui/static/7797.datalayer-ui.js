"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7797],{17797:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeLesson:()=>C,default:()=>v});var n=t(9387),a=t(20568),l=t(6856),r=t(98754),o=t(81461),c=t(61574),i=t(72533),d=t(54617),u=t(99180),h=t(12338),m=t(2159),x=t(16476),f=t(60105),g=t(17788),j=t(41273),p=t(99179),y=t(23267),k=t(18683);const C=()=>{const e=(0,n.useMemo)(()=>[new m._],[]),{accountHandle:s,spaceHandle:t,courseId:C,lessonId:v}=(0,a.g)();if(!v)return(0,k.jsx)(k.Fragment,{});const b=(0,p.J)(),A=(0,y.mt)(),I=(0,x.Gx)(),{confirmCourseItemCompletion:S,getLesson:w,getStudent:L,refreshLesson:_,refreshStudent:z}=(0,f.E)(),[F,B]=(0,n.useState)("lesson"),[E,H]=(0,n.useState)(w(v)),[M,O]=(0,n.useState)(!1),[T,$]=(0,n.useState)(!1),P=(0,g.Z)(),{enqueueToast:q}=(0,j.d)(),D=(e,s)=>{s.preventDefault(),A.layout().resetRightPortal(),B(e)};return(0,n.useEffect)(()=>(A.layout().showBackdrop(),_(v).then(e=>{if(A.layout().hideBackdrop(),e.success){const e=w(v);e?(H(e),A.layout().setItem(e)):P("/")}}).finally(()=>{A.layout().hideBackdrop()}),()=>{H(void 0),I.reset(),A.layout().setItem(void 0)}),[v]),(0,n.useEffect)(()=>(z(C,b?.id).then(e=>{if(e.success){const e=L(C,b?.id),s=e?.studentItems?.get(v);s&&O(s.completed)}}),()=>{H(void 0),I.reset(),A.layout().setItem(void 0)}),[v]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.z,{children:(0,k.jsxs)(r.A,{display:"flex",children:[(0,k.jsx)(r.A,{flex:1,children:(0,k.jsx)(o.A,{sx:{fontSize:3},children:"Course lesson"})}),(0,k.jsxs)(r.A,{children:[(0,k.jsx)(i.A,{children:"Completed"}),(0,k.jsx)(c.A,{onClick:()=>{$(!0),S(C,"lesson",v,!M).then(e=>{e.success&&(q(e.message,{variant:"success"}),O(!M))}).finally(()=>{$(!1)})},checked:M,size:"small",loading:T,"aria-labelledby":"switchLabel"})]}),(0,k.jsx)(r.A,{ml:3,children:(0,k.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>P(`/${s}/${t}/course/${C}/progress`),children:"My course progress"})})]})}),E&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(l.O,{sx:{mt:3,mb:3},children:[(0,k.jsx)(l.O.Item,{href:"","aria-label":"","aria-current":"lesson"===F?"page":void 0,onClick:e=>D("lesson",e),children:"Lesson"}),(0,k.jsx)(l.O.Item,{href:"","aria-label":"","aria-current":"comments"===F?"page":void 0,onClick:e=>D("comments",e),children:"Comments"})]}),"lesson"===F&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(r.A,{children:E.nbformat&&(0,k.jsx)(h.g,{id:v,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",readonly:!1,cellMetadataPanel:!1,nbformat:E.nbformat,extensions:e})})}),"comments"===F&&(0,k.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,k.jsx)(r.A,{})})]})]})},v=C}}]);