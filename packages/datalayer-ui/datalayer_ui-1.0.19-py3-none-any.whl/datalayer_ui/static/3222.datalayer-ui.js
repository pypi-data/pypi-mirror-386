"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[3222],{63222:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeAssignment:()=>S,default:()=>I});var n=t(9387),a=t(45222),i=t(20568),l=t(54617),r=t(98754),d=t(81461),o=t(99180),c=t(38621),u=t(2159),h=t(84271),m=t(16476),x=t(12338),g=t(23267),j=t(84729),f=t(99179),p=t(60105),y=t(17788),k=t(18683),A=t(72533),z=t(52982);const b=e=>{const{studentItem:s}=e;return s&&s?.nbgrades?(0,k.jsxs)(z.az,{children:[(0,k.jsx)(z.az,{children:(0,k.jsx)(d.A,{sx:{fontSize:1},children:"Grades"})}),(0,k.jsx)(z.az,{mt:3,children:s?.nbgrades.map(e=>(0,k.jsx)(z.az,{children:(0,k.jsxs)(A.A,{sx:{fontSize:"small"},children:[e.grade_id_s,": ",e.score_f]})}))}),(0,k.jsx)(z.az,{mt:3,children:(0,k.jsx)(d.A,{sx:{fontSize:1},children:"Total"})}),(0,k.jsxs)(z.az,{mt:3,children:[s?.nbgradesTotalScore," / ",s?.nbgradesTotalPoints]})]}):(0,k.jsxs)(z.az,{children:[(0,k.jsx)(z.az,{children:(0,k.jsx)(d.A,{sx:{fontSize:1},children:"Grades"})}),(0,k.jsx)(z.az,{mt:3,children:"Please grade your assignment."})]})},v=e=>{const{notebookId:s}=e,{grade:t}=(0,j.io)(),n=m.Fg.getState().selectNotebook(s);return(0,k.jsxs)(r.A,{display:"flex",children:[(0,k.jsx)(r.A,{children:(0,k.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:c.iKr,onClick:()=>t(new Date),children:"Grade"})}),"busy"!==n?.kernelStatus&&(0,k.jsx)(r.A,{children:(0,k.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:c.udU,onClick:e=>m.Fg.getState().runAll(s),children:"Run all"})}),"busy"===n?.kernelStatus&&(0,k.jsx)(r.A,{children:(0,k.jsx)(o.Q,{variant:"danger",size:"small",leadingVisual:c.wFz,onClick:e=>m.Fg.getState().interrupt(s),children:"Interrupt"})})]})},S=()=>{const e=(0,n.useMemo)(()=>[new u._({factory:h.a})],[]),{accountHandle:s,spaceHandle:t,courseId:A,assignmentId:z}=(0,i.g)();if(!A||!z)return(0,k.jsx)(k.Fragment,{});const S=(0,f.J)(),I=(0,g.mt)(),{gradeRequest:F}=(0,j.io)(),C=(0,m.Gx)(),B=`${z}-student`,{getAssignmentForStudent:w,gradeAssignmentForStudent:_,refreshAssignmentForStudent:Q,resetAssignmentForStudent:R}=(0,p.E)(),T=C.selectNotebookModel(B),[V]=(0,n.useState)("assignment"),P=(0,y.Z)(),[$,E]=(0,n.useState)(w(z)),[G,M]=(0,n.useState)(),D=e=>{M(e);const s=(0,a.createPortal)((0,k.jsx)(b,{studentItem:e}),document.getElementById("right-panel-id"));I.layout().setRightPortal({portal:s,pinned:!1})};return(0,n.useEffect)(()=>(I.layout().showBackdrop(),Q(A,S,z).then(e=>{if(e.success){const e=w(z);e?(E(e),D(e?.studentItem),I.layout().setItem(e)):P("/")}}).finally(()=>{I.layout().hideBackdrop()}),()=>{E(void 0),C.reset(),I.layout().setItem(void 0)}),[z]),(0,n.useEffect)(()=>{F&&T&&(I.layout().showBackdrop("We are grading your assignment. This may take some time..."),_(A,S,z,T?.model).then(e=>{if(e.success){const e=w(z);D(e?.studentItem),e?I.layout().setItem(e):P("/")}}).finally(()=>{I.layout().hideBackdrop()}))},[F]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.z,{children:(0,k.jsxs)(r.A,{display:"flex",children:[(0,k.jsx)(r.A,{flex:1,children:(0,k.jsx)(d.A,{sx:{fontSize:3},children:"Course assignment"})}),(0,k.jsx)(v,{notebookId:B}),(0,k.jsx)(r.A,{children:(0,k.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:c.$B5,onClick:e=>{e.preventDefault(),I.layout().showBackdrop("Resetting your assignment..."),R(A,S,z).then(e=>{if(I.layout().hideBackdrop(),e.success){const e=w(z);e?(E(e),D(e?.studentItem),I.layout().setItem(e)):P("/")}}).finally(()=>{I.layout().hideBackdrop()})},children:"Reset"})}),(0,k.jsx)(r.A,{ml:3,children:(0,k.jsx)(o.Q,{variant:"default",size:"small",onClick:()=>P(`/${s}/${t}/course/${A}/progress`),children:"My course progress"})})]})}),$&&(0,k.jsxs)(k.Fragment,{children:["assignment"===V&&$&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(r.A,{children:(0,k.jsx)(x.g,{id:B,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",cellMetadataPanel:!1,nbformat:$.nbformat,extensions:e})})}),"notes"===V&&(0,k.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,k.jsx)(r.A,{})})]})]})},I=S},84271:(e,s,t)=>{t.d(s,{a:()=>o});var n=t(18683),a=t(38621),i=t(98754),l=t(99180),r=t(71791),d=t(84604);function o(e){const{commands:s}=e;return(0,n.jsx)(i.A,{className:d.VL,sx:{"& p":{marginBottom:"0 !important"}},children:(0,n.jsx)(l.Q,{trailingVisual:a.udU,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),s.execute(r.nx.run).catch(e=>{console.error("Failed to run cell.",e)})},children:"Run"})})}}}]);