"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[4275],{2375:(e,t,n)=>{n.d(t,{GP:()=>E});var a=n(95604),r=n(73879),o=n(74368),s=n(88378);function i(e,t){const n=(0,s.a)(e,t?.in);return(0,o.m)(n,function(e,t){const n=(0,s.a)(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n))+1}var l=n(70634);function c(e,t){const n=(0,r.q)(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=(0,s.a)(e,t?.in),i=o.getDay(),l=(i<a?7:0)+i-a;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function u(e,t){return c(e,{...t,weekStartsOn:1})}var d=n(26714);function m(e,t){const n=(0,s.a)(e,t?.in),a=n.getFullYear(),r=(0,d.w)(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const o=u(r),i=(0,d.w)(n,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const l=u(i);return n.getTime()>=o.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function g(e,t){const n=(0,s.a)(e,t?.in),a=+u(n)-+function(e,t){const n=m(e,t),a=(0,d.w)(t?.in||e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),u(a)}(n);return Math.round(a/l.my)+1}function p(e,t){const n=(0,s.a)(e,t?.in),a=n.getFullYear(),o=(0,r.q)(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=(0,d.w)(t?.in||e,0);l.setFullYear(a+1,0,i),l.setHours(0,0,0,0);const u=c(l,t),m=(0,d.w)(t?.in||e,0);m.setFullYear(a,0,i),m.setHours(0,0,0,0);const g=c(m,t);return+n>=+u?a+1:+n>=+g?a:a-1}function h(e,t){const n=(0,s.a)(e,t?.in),a=+c(n,t)-+function(e,t){const n=(0,r.q)(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=p(e,t),s=(0,d.w)(t?.in||e,0);return s.setFullYear(o,0,a),s.setHours(0,0,0,0),c(s,t)}(n,t);return Math.round(a/l.my)+1}function f(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const b={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return f("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):f(n+1,2)},d:(e,t)=>f(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>f(e.getHours()%12||12,t.length),H:(e,t)=>f(e.getHours(),t.length),m:(e,t)=>f(e.getMinutes(),t.length),s:(e,t)=>f(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return f(Math.trunc(a*Math.pow(10,n-3)),t.length)}},w={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return b.y(e,t)},Y:function(e,t,n,a){const r=p(e,a),o=r>0?r:1-r;return"YY"===t?f(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):f(o,t.length)},R:function(e,t){return f(m(e),t.length)},u:function(e,t){return f(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return f(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return f(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return b.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return f(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=h(e,a);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):f(r,t.length)},I:function(e,t,n){const a=g(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):f(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):b.d(e,t)},D:function(e,t,n){const a=i(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):f(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return f(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return f(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return f(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(r=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(r=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return b.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):b.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):f(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):f(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):b.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):b.s(e,t)},S:function(e,t){return b.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return x(a);case"XXXX":case"XX":return y(a);default:return y(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return x(a);case"xxxx":case"xx":return y(a);default:return y(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+k(a,":");default:return"GMT"+y(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+k(a,":");default:return"GMT"+y(a,":")}},t:function(e,t,n){return f(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return f(+e,t.length)}};function k(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),o=a%60;return 0===o?n+String(r):n+String(r)+t+f(o,2)}function x(e,t){return e%60==0?(e>0?"-":"+")+f(Math.abs(e)/60,2):y(e,t)}function y(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+f(Math.trunc(a/60),2)+t+f(a%60,2)}const _=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},v=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},j={p:v,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return _(e,t);let o;switch(a){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",_(a,t)).replace("{{time}}",v(r,t))}},C=/^D+$/,M=/^Y+$/,A=["D","DD","YY","YYYY"];function S(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+(0,s.a)(e)));var t}const T=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,O=/^'([^]*?)'?$/,N=/''/g,D=/[a-zA-Z]/;function E(e,t,n){const o=(0,r.q)(),i=n?.locale??o.locale??a.c,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,u=(0,s.a)(e,n?.in);if(!S(u))throw new RangeError("Invalid time value");let d=t.match(I).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,j[t])(e,i.formatLong):e}).join("").match(T).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:P(e)};if(w[t])return{isToken:!0,value:e};if(t.match(D))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});i.localize.preprocessor&&(d=i.localize.preprocessor(u,d));const m={firstWeekContainsDate:l,weekStartsOn:c,locale:i};return d.map(a=>{if(!a.isToken)return a.value;const r=a.value;return(!n?.useAdditionalWeekYearTokens&&function(e){return M.test(e)}(r)||!n?.useAdditionalDayOfYearTokens&&function(e){return C.test(e)}(r))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(a),A.includes(e))throw new RangeError(a)}(r,t,String(e)),(0,w[r[0]])(u,r,i.localize,m)}).join("")}function P(e){const t=e.match(O);return t?t[1].replace(N,"'"):e}},9857:(e,t,n)=>{n.d(t,{c:()=>a});const a=3},15069:(e,t,n)=>{n.d(t,{v:()=>u});var a=n(18683),r=n(9387),o=n(83121),s=n(26127),i=n(79435),l=n(41273);const c=e=>{const{message:t}=e,{loginAndNavigate:n}=(0,i.D)(),{logout:c,checkIAMToken:u,externalToken:d}=(0,s.Y)(),{enqueueToast:m}=(0,l.d)();return(0,r.useEffect)(()=>{d&&n(d,c,u).catch(e=>{console.debug("Failed to login with the provided token.",e),m("Failed to login with the provided token.",{variant:"error"})}).finally(()=>{m("Runtimes are available.",{variant:"success"})})},[d]),(0,a.jsx)(o.Y,{size:"small",message:t})},u=e=>(0,a.jsx)(c,{...e})},16878:(e,t,n)=>{n.d(t,{K:()=>c,N:()=>l});var a=n(63711),r=n(85181);const o="Assign a new Runtime",s="Assign an existing Remote Runtime",i="Assign an existing Runtime";function l(e,t,n,l=()=>!0,c){const u=(n=n??r.wK).load("jupyterlab"),d=e.local.kernelspecs.specs,m=e.local.sessions.running(),g={},p=Array.from(m).filter(e=>e.kernel&&e.kernel.id!==t&&d.kernelspecs[e.kernel.name]).map(e=>{const t=d.kernelspecs[e.kernel.name];return{kernelId:e.kernel.id,name:t.name,language:t.language,displayName:e.name||a.PathExt.basename(e.path),location:"local"}}).concat(Array.from(e.browser?.sessions.running()??[]).filter(e=>e.kernel&&e.kernel.id!==t).map(t=>{const n=e.browser.kernelspecs.specs.kernelspecs[t.kernel.name];return{id:"",kernelId:t.kernel.id,name:n.name,language:n.language,displayName:t.name||a.PathExt.basename(t.path),location:"browser"}})).filter(l),h=p.map(e=>e.kernelId),f=Array.from(e.local.kernels.running()).filter(e=>!h.includes(e.id)).map(e=>{const t=d.kernelspecs[e.name];return{kernelId:e.id,name:t.name,language:t.language,displayName:t.display_name,location:"local"}}).concat((e.remote?.runtimesManager.get()??[]).filter(e=>e.id&&!h.includes(e.id)).map(t=>{const n=e.remote.environments.get().find(e=>e.name===t.environment_name);return{kernelId:t.id,name:n.name,language:n.language,displayName:t.given_name??n.title,location:"remote",podName:t.pod_name,gpu:n.resources?.["nvidia.com/gpu"]}})).concat(Array.from(e.browser?.kernels.running()??[]).filter(e=>!h.includes(e.id)).map(t=>{const n=e.browser.kernelspecs.specs.kernelspecs[t.name];return{kernelId:t.id,name:n.name,language:n.language,displayName:n.display_name,location:"browser"}})).filter(l);p.push(...f),p.length&&(g["cell"===c?s:i]=p);const b=Object.values(d.kernelspecs).filter(e=>!!e).map(e=>({name:e.name,language:e.language,displayName:e.display_name,gpu:e.resources?.["nvidia.com/gpu"],location:"local"})).filter(l);return b.push(...e.remote?.environments.get().map(e=>({name:e.name,language:e.language,displayName:e.title,location:"remote",gpu:e.resources?.["nvidia.com/gpu"],burningRate:e.burning_rate})).filter(l)??[]),b.push(...Object.values(e.browser?.kernelspecs.specs?.kernelspecs??{}).filter(e=>!!e).map(e=>({name:e.name,language:e.language,displayName:e.display_name,location:"browser"})).filter(l)),b.length&&(g[u.__(o)]=b),g}function c(e){const{specs:t,preference:n}=e,{name:a,language:r,canStart:o,autoStartDefault:s}=n;if(!t||!1===o)return null;const i=s?t.default:null;if(!a&&!r)return i;for(const e in t.kernelspecs)if(e===a)return a;if(!r)return i;const l=[];for(const e in t.kernelspecs){const n=t.kernelspecs[e]?.language;r===n&&l.push(e)}if(1===l.length){const e=l[0];return console.warn("No exact match found for "+e+", using runtime "+e+" that matches language="+r),e}return i}},18035:(e,t,n)=>{n.d(t,{J:()=>c});var a={};function r(){return"\ndef _list_variables():\n    import json\n    from types import BuiltinFunctionType, BuiltinMethodType, FunctionType, MethodType, MethodWrapperType, ModuleType, TracebackType\n\n    _FORBIDDEN_TYPES = [type, BuiltinFunctionType, BuiltinMethodType, FunctionType, MethodType, MethodWrapperType, ModuleType, TracebackType]\n    try:\n        from IPython.core.autocall import ExitAutocall\n        _FORBIDDEN_TYPES.append(ExitAutocall)\n    except ImportError:\n        pass\n    _exclude = tuple(_FORBIDDEN_TYPES)\n\n    _all = frozenset(globals())\n    _vars = {}\n    for _n in _all:\n        _v = globals()[_n]\n        \n        if not (\n            _n.startswith('_') or\n            isinstance(_v, _exclude) or\n            # Special IPython variables\n            (_n == 'In' and isinstance(_v, list)) or\n            (_n == 'Out' and isinstance(_v, dict))\n        ):\n            _vars[_n] = type(_v).__qualname__\n\n    return json.dumps(_vars)\n\n_list_variables()"}function o(e){return`\ndef _pickle_variables():\n    from base64 import encodebytes\n    import json\n    import pickle\n    _names = {${e.map(e=>`"${e}"`).join(",")}}\n    _data = {}\n    for _n in _names:\n        try:\n            _v = globals()[_n]\n            dump = pickle.dumps(_v)\n            _data[_n] = encodebytes(dump).decode("ascii")\n        except:\n            ...\n\n    return json.dumps(_data)\n\n_pickle_variables()\n`}function s(e){return`\ndef _load_variables():\n    from base64 import decodebytes\n    import json\n    import pickle\n    _data = json.loads(${e})\n    _loaded = []\n    for _n, _v in _data.items():\n        try:\n            dump = decodebytes(_v.encode("ascii"))\n            globals()[_n] = pickle.loads(dump)\n            _loaded.append(_n)\n        except:\n            ...\n    return json.dumps(_loaded)\n\n_load_variables()\n`}function i(e){return`\ndef _change_current_directory():\n    import os\n    from pathlib import Path\n    _local_content_mount_point = Path(Path.home() / ${e.split("/").map(e=>`"${e}"`).join(" / ")})\n    _local_content_mount_point.mkdir(parents=True, exist_ok=True)\n    os.chdir(_local_content_mount_point)\n\n    assert Path.cwd() == _local_content_mount_point\n\n_change_current_directory()\n`}function l(e){return Array.from(e.matchAll(/^((?<output>[A-z][\w]*)\s*=[^=]|\((?<walrus>[A-z][\w]*)\s*:=[^=)]+\))/gm)).map(e=>e.groups?.output??e.groups?.walrus??"").filter(e=>!!e)}n.r(a),n.d(a,{changeCurrentWorkingDirectory:()=>i,getOutputCandidates:()=>l,listVariables:()=>r,loadVariables:()=>s,saveVariables:()=>o});class c{static $language=new Map;static register(e,t){this.$language.set(e,t)}static supports(e){return this.$language.has(e)}_language;constructor(e){if(!c.$language.has(e))throw new Error(`${e} is not supported.`);this._language=e}get language(){return this._language}changeCurrentWorkingDirectory(e){return c.$language.get(this.language).changeCurrentWorkingDirectory(e)}listVariables(){return c.$language.get(this.language).listVariables()}loadVariables(e){return c.$language.get(this.language).loadVariables(e)}saveVariables(e){return c.$language.get(this.language).saveVariables(e)}getOutputCandidates(e){return c.$language.get(this.language).getOutputCandidates(e)}}c.register("python",a)},57484:(e,t,n)=>{n.d(t,{I:()=>j});var a=n(18683),r=n(9387),o=n(85181),s=n(34447),i=n(67390),l=n(94907),c=n(58078),u=n(72533),d=n(70985),m=n(11029),g=n(81396),p=n(58875),h=n(36008),f=n(52982),b=n(38621),w=n(63948),k=n(72870),x=n(98970),y=n(75960),_=n(16878);const v=25;function j(e){const{disabled:t,display:n,filterRuntime:j,multiServiceManager:C,postActions:M,preActions:A,preference:S,runtimeDesc:T,sessionContext:I,setRuntimeDesc:O,translator:N,variant:D}=e,[E,P]=(0,r.useState)((0,_.N)(C,S?.id,N,j,D)),R=(0,r.useMemo)(()=>(N??o.wK).load("jupyterlab"),[N]),[Y,z]=(0,r.useState)(!1),F={maxHeight:"large",width:"cell"===D?"small":"auto"};return(0,r.useEffect)(()=>{if(I&&E){const e=I.session?.kernel?.id;e&&Object.entries(E).forEach(([t,n])=>{n.forEach(t=>{t.kernelId===e&&O(t)})})}z(!0)},[E]),(0,a.jsx)(a.Fragment,{children:"menu"===n?(0,a.jsxs)(d.W,{children:["cell"===D?(0,a.jsx)(d.W.Anchor,{children:(0,a.jsx)(p.K,{disabled:t||null===E,icon:()=>(0,a.jsx)("span",{className:"dla-Cell-runtime-icon",children:(0,a.jsx)(b.GQJ,{})}),"aria-label":R.__("Assign a Runtime to the Cell."),title:R.__("Assign a Runtime to the Cell."),size:"small",variant:"invisible"})}):(0,a.jsxs)(d.W.Button,{variant:"default",disabled:t||null===E,children:[(0,a.jsx)(u.A,{fontWeight:"bold",children:R.__("Runtime:")})," "+(T?.displayName??R.__("No Runtime"))]}),(0,a.jsx)(d.W.Overlay,{...F,width:"medium",sx:{overflowY:"auto"},side:"cell"===D?"outside-left":"outside-right",children:(0,a.jsxs)(s.l,{selectionVariant:"single",children:["cell"===D&&(0,a.jsxs)(s.l.Item,{selected:void 0===T,onSelect:()=>{O(void 0)},children:[S?.location&&(0,a.jsx)(s.l.LeadingVisual,{children:"local"===S.location?(0,a.jsx)(k.A,{}):"browser"===S.location?(0,a.jsx)(w.A,{}):(0,a.jsx)(h.A,{})}),R.__("Assign the Notebook Runtime")]},"null"),!!A&&A,Object.entries(E??{}).map(([e,t])=>(0,a.jsxs)(s.l.Group,{children:[(0,a.jsx)(s.l.GroupHeading,{children:e}),t.map(e=>{const t=e.podName?` - ${e.podName.split("-",2).reverse()[0]}`:e.kernelId?` - ${e.kernelId}`:"",n=(e.displayName??"")+t,r=(e.displayName?.length??0)>v?e.displayName.slice(0,v)+"…":e.displayName??"";return(0,a.jsxs)(s.l.Item,{title:n,selected:(e.location===e?.location||(0,y.R)(e.location)&&(0,y.R)(e?.location??"local"))&&(e.kernelId??e.name)===(e?.kernelId??e?.name),onSelect:()=>{O(e)},children:[(0,a.jsx)(s.l.LeadingVisual,{children:"local"===e.location?(0,a.jsx)(k.A,{}):"browser"===e.location?(0,a.jsx)(w.A,{}):(0,a.jsx)(h.A,{})}),r+t.slice(0,10)]},e.name)})]},e)),!!M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.l.Divider,{}),M]})]})})]}):(0,a.jsxs)(a.Fragment,{children:[Y&&(0,a.jsx)(g.A,{name:"kernel-options","aria-labelledby":"kernel-options",children:Object.entries(E??{}).map(([e,t])=>(0,a.jsxs)(f.az,{children:[(0,a.jsx)(f.az,{as:"h4",style:{marginTop:0},children:e}),t.map(e=>(0,a.jsxs)(f.az,{title:e.name,children:[(0,a.jsxs)(m.A,{children:[(0,a.jsx)(l.A,{value:e.kernelId,onChange:()=>{O(e)},checked:(e.location===e?.location||(0,y.R)(e.location)&&(0,y.R)(e?.location??"local"))&&(e.kernelId??e.name)===(T?.kernelId??T?.name)}),(0,a.jsx)(m.A.Label,{children:(0,a.jsxs)(f.az,{display:"flex",children:[(0,a.jsx)(f.az,{children:e.displayName}),e.kernelId&&"remote"===e.location&&(0,a.jsx)(f.az,{ml:3,mt:1,children:(0,a.jsx)(x.m,{kernelId:e.kernelId,serviceManager:C.remote},"credits-indicator")})]})}),(0,a.jsx)(m.A.Caption,{children:(0,a.jsxs)(c.A,{sx:{marginTop:1},children:[(0,a.jsx)(i.A,{variant:"secondary",children:e.name}),(0,a.jsx)(i.A,{variant:"secondary",sx:{marginLeft:1},children:e.location}),e.burningRate&&(0,a.jsxs)(i.A,{variant:"sponsors",sx:{marginLeft:1},children:[e.burningRate," credits/second"]}),e.gpu&&(0,a.jsx)(i.A,{variant:"success",sx:{marginLeft:1},children:"GPU"})]})})]}),(0,a.jsx)(s.l.Divider,{})]},e.kernelId))]},e))}),!!M&&(0,a.jsx)(a.Fragment,{children:M})]})})}},59176:(e,t,n)=>{n.d(t,{m:()=>h});var a=n(18683),r=n(9387),o=n(87123),s=n(85181),i=n(98238),l=n(36848),c=n(18035),u=n(11029),d=n(13931),m=n(8038),g=n(52982);function p(e){const{getInputOptions:t,getOutputOptions:n,inputs:o,output:l,setInputs:c,setOutput:p,translator:h}=e,f=(0,r.useMemo)(()=>(h??s.wK).load("jupyterlab"),[h]),b=(0,r.useRef)(null),[w,k]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!!t),[_,v]=(0,r.useState)(null),[j,C]=(0,r.useState)(o.map(e=>({id:e,text:e,selected:!0}))),[M,A]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=o.filter(e=>!j.find(t=>t.text===e));e.length&&C([...j,...e.map(e=>({id:e,text:e,selected:!0}))])},[o]),(0,r.useEffect)(()=>{const e=j.filter(e=>e.selected).map(e=>e.text);i.JSONExt.deepEqual(o,e)||c(e)},[j]),(0,r.useEffect)(()=>{x&&(t?t().then(e=>{const t=j.map(e=>e.text);C([...j,...e.sort().filter(e=>!t.includes(e)).map(e=>({id:e,text:e,selected:!1}))]),y(!1)}):y(!1))},[j,t]),(0,r.useEffect)(()=>{n&&Promise.all([n(),t?.()]).then(([e,t])=>{v(e.sort().concat((t??[]).sort()).reduce((e,t)=>(e.includes(t)||e.push(t),e),[]).map(e=>({id:e,text:e,selected:!1})))}).catch(e=>{console.error("Failed to get the cell output candidates",e),v([])})},[n,t]);const S=(0,r.useCallback)(e=>{const t=j.findIndex(t=>t.id===e);t>=0&&(j.splice(t,1),C([...j]))},[j]),T=(0,r.useCallback)(e=>{Array.isArray(e)||(e=[e]);const t=e.map(e=>e.id);C([...j.map(e=>t.includes(e.id)?Object.assign(e,{selected:!0}):Object.assign(e,{selected:!1}))])},[j]),I=(0,r.useCallback)(e=>{const t=j.find(t=>t.id===e.id);t?(t.selected=!0,C([...j])):C([...j,e])},[j]),O=(0,r.useCallback)(e=>{e.currentTarget&&A(e.currentTarget.value)},[]),N=(0,r.useCallback)(e=>{e.currentTarget&&p(e.currentTarget.value)},[]),D=(0,r.useCallback)(e=>{w?b.current&&!e&&(p(b.current.value),k(!1)):e&&k(!0)},[w]);return(0,a.jsxs)(g.az,{as:"form",sx:{p:3},children:[(0,a.jsxs)(u.A,{children:[(0,a.jsx)(u.A.Label,{id:"cell-input-variables",children:f.__("Inputs")}),(0,a.jsxs)(d.A,{children:[(0,a.jsx)(d.A.Input,{as:m.A,tokens:j.filter(e=>e.selected),onTokenRemove:S,onChange:O}),(0,a.jsx)(d.A.Overlay,{children:(0,a.jsx)(d.A.Menu,{addNewItem:M&&!j.find(e=>e.text===M)?{id:M,text:f.__("Add '%1'",M),handleAddItem:e=>{I({...e,text:M,selected:!0}),A("")}}:void 0,items:j,selectedItemIds:j.filter(e=>e.selected).map(e=>e.id),onSelectedChange:T,"aria-labelledby":"cell-input-variables",selectionVariant:"multiple",emptyStateText:f.__("No available variables."),loading:x})})]})]}),(0,a.jsxs)(u.A,{children:[(0,a.jsx)(u.A.Label,{id:"cell-output-variables",children:f.__("Output")}),(0,a.jsxs)(d.A,{children:[(0,a.jsx)(d.A.Input,{ref:b,value:l,onChange:N}),(0,a.jsx)(d.A.Overlay,{children:(0,a.jsx)(d.A.Menu,{items:_??[],selectedItemIds:l?[l]:[],"aria-labelledby":"cell-output-variables",loading:n&&!_,emptyStateText:f.__("Not among the available variables."),onOpenChange:D})})]})]})]})}function h(e){const{onClose:t,model:n,preference:u,sessionContext:d,translator:m}=e,[g,h]=(0,r.useState)([]),[f,b]=(0,r.useState)(),w=(0,r.useMemo)(()=>(m??s.wK).load("jupyterlab"),[m]);(0,r.useEffect)(()=>{const e=e=>{const t=e.getMetadata("datalayer")??{};t.in&&!i.JSONExt.deepEqual(g,t.in)&&h(t.in),t.out&&t.out!==f&&b(t.out)};return e(n),n.metadataChanged.connect(e),()=>{n.metadataChanged.disconnect(e)}},[n,g,f]);const k=(0,r.useCallback)(()=>{const e=n.getMetadata("datalayer")??{};g.length?e.in=g:delete e.in,f?e.out=f:delete e.out,n.setMetadata("datalayer",{...e}),t()},[n,g,f,t]),x=(0,r.useCallback)(async()=>{if(!d)return[];const e=d.session.kernel,t=d.specsManager.specs.kernelspecs[e.model.name],n=new c.J(t.language),a=(await new l.D({connection:e}).execute(n.listVariables())).get(0).data["text/plain"];if(a){const e=JSON.parse(a.slice(1,a.length-1));return Object.keys(e??{})}return[]},[u,d]),y=(0,r.useCallback)(async()=>new c.J("python").getOutputCandidates(n.sharedModel.source),[n]);let _="Define cell variables to transfer";const v=(n.getMetadata("datalayer")??{}).kernel??{},j=(v.displayName||v.name)??"";return j&&(!1!==v.params?.notebook&&v.id?_+=` with running ${j} (${v.id.slice(0,7)})`:_+=` with ${j}`),(0,a.jsx)(o.l,{title:(0,a.jsx)("span",{style:{color:"var(--fgColor-default)"},children:_}),onClose:t,footerButtons:[{buttonType:"default",content:w.__("Cancel"),onClick:t},{buttonType:"primary",content:w.__("Set variables"),onClick:k,autoFocus:!0}],children:(0,a.jsx)(p,{inputs:g,getInputOptions:d?x:void 0,setInputs:h,output:f??void 0,getOutputOptions:y,setOutput:b,translator:m})})}},60372:(e,t,n)=>{n.d(t,{B:()=>v});var a=n(18683),r=n(9387),o=n(85181),s=n(34447),i=n(36008),l=n(26127),c=n(9570),u=n(75960),d=n(18035),m=n(15069),g=n(11029),p=n(81089),h=n(72533),f=n(52982),b=n(87123),w=n(25547);function k(e){const{model:t,onClose:n,language:s,snippets:i,markdownParser:l,sanitizer:c,translator:u}=e,[d,m]=(0,r.useState)(i[0]),k=(0,r.useMemo)(()=>(u??o.wK).load("jupyterlab"),[u]),x=(0,r.useCallback)(e=>{const t=e.target.value;m(i[parseInt(t,10)])},[m,i]),y=(0,r.useCallback)(()=>{const e=t.sharedModel.getSource().length;t.sharedModel.updateSource(e,e,"\n".repeat(e?2:0)+d.code),n()},[t,d,n]);return(0,a.jsx)(b.l,{title:(0,a.jsx)("span",{style:{color:"var(--fgColor-default)"},children:"Pick a snippet to inject"}),onClose:n,footerButtons:[{buttonType:"default",content:k.__("Cancel"),onClick:n},{buttonType:"primary",content:k.__("Inject snippet"),onClick:y,autoFocus:!0}],children:(0,a.jsx)(f.az,{as:"form",children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(g.A.Label,{}),(0,a.jsx)(p.A,{block:!0,onChange:x,children:i.map((e,t)=>(0,a.jsx)(p.A.Option,{value:`${t}`,children:e.title},t))}),(0,a.jsxs)(g.A.Caption,{children:[d.description&&(0,a.jsx)(h.A,{as:"p",children:d.description}),l?(0,a.jsx)(w.o,{markdownParser:l,sanitizer:c,text:`\`\`\`${s}\n${d.code}\`\`\``}):(0,a.jsx)("code",{children:d.code})]})]})})})}var x=n(59017),y=n(57484),_=n(59176);function v(e){const{logIn:t,markdownParser:n,model:g,preference:p,sanitizer:h,multiServiceManager:f,sessionContext:b,translator:w}=e,{token:v}=(0,l.Y)(),{configuration:j}=(0,c._O)(),[C,M]=(0,r.useState)(!1),[A,S]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[O,N]=(0,r.useState)(!1),[D,E]=(0,r.useState)(""),[P,R]=(0,r.useState)([]),[Y,z]=(0,r.useState)(!1),F=(0,r.useMemo)(()=>(w??o.wK).load("jupyterlab"),[w]);(0,r.useEffect)(()=>{const e=e=>{const t=(e.getMetadata("datalayer")??{}).kernel;M(!!t),S(!1===t?.params?.notebook);const n=new Array;if(t){const e=f.remote?.environments.get().find(e=>e.name===t.name);E(e?.language??""),e?.snippets&&n.push(...e.snippets)}R(n)};return e(g),g.metadataChanged.connect(e),()=>{g.metadataChanged.disconnect(e)}},[g]);const $=(0,r.useCallback)(e=>!!e.kernelId&&(0,u.R)(e.location)&&(!p?.language||e.language===p?.language),[p]),L=(0,r.useCallback)(e=>{const t=g.getMetadata("datalayer")??{kernel:void 0};e?g.setMetadata("datalayer",Object.assign(t,{kernel:e})):(delete t.kernel,g.setMetadata("datalayer",t))},[g]),q=(0,r.useCallback)(()=>{N(!1)},[]),W=(0,r.useCallback)(()=>{N(!0)},[]),H=(0,r.useCallback)(()=>{z(!1)},[]),B=(0,r.useCallback)(()=>{z(!0)},[]),G=(0,r.useCallback)(()=>{I(!0)},[]),V=(0,r.useCallback)(e=>{e&&(e.params={...e.params,notebook:!1},L(e)),I(!1)},[L]),Q=g.getMetadata("datalayer")??{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.I,{display:"menu",filterRuntime:$,preference:p,multiServiceManager:f,runtimeDesc:Q.kernel?Q.kernel:void 0,setRuntimeDesc:L,variant:"cell",preActions:(0,a.jsxs)(s.l.Item,{disabled:!f.remote,onSelect:G,selected:A,title:f.remote?"Assign a new temporary Runtime on each Cell execution.":"You are not connected with Datalayer.",children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(i.A,{})}),F.__("Assign a Cell Runtime")]}),postActions:v||!t?(0,a.jsxs)(a.Fragment,{children:[d.J.supports(p?.language??"")&&(0,a.jsx)(s.l.Item,{onSelect:W,disabled:!C,title:F.__("Define variables to transfer between the document kernel and the cell kernel."),children:F.__("Define Cell Variables Transfer")}),!j.whiteLabel&&(0,a.jsx)(s.l.Item,{onSelect:B,disabled:0===P.length,title:F.__("Inject a code snippet at the end of the cell."),children:F.__("Inject Code Snippet")})]}):(0,a.jsx)(s.l.Item,{onSelect:e.logIn,title:"Connect to the Runtime provider.",children:(0,a.jsx)(m.v,{message:"Connect to the Runtime provider"})}),translator:w}),O&&(0,a.jsx)(_.m,{model:g,onClose:q,preference:p,sessionContext:b,translator:w}),Y&&(0,a.jsx)(k,{language:D,model:g,snippets:P,onClose:H,markdownParser:n,sanitizer:h}),T&&(0,a.jsx)(x.D,{manager:f.remote,onSubmit:V,startRuntime:!1,markdownParser:n,sanitizer:h})]})}},69584:(e,t,n)=>{n.d(t,{X:()=>o,n:()=>r});var a=n(98238);const r=new a.Token("@jupyterlab/coreutils:ISettingConnector","A service to connect to the settings endpoint."),o=new a.Token("@jupyterlab/coreutils:ISettingRegistry",'A service for the JupyterLab settings system.\n  Use this if you want to store settings for your application.\n  See "schemaDir" for more information.')},75960:(e,t,n)=>{n.d(t,{R:()=>r});const a=["browser","local"];function r(e){return!a.includes(e)}},89460:(e,t,n)=>{n.d(t,{W_:()=>i,fI:()=>s,p8:()=>r,w9:()=>o});var a=n(98238);const r=new a.Token("@jupyterlab/notebook:INotebookWidgetFactory","A service to create the notebook viewer."),o=new a.Token("@jupyterlab/notebook:INotebookTools",'A service for the "Notebook Tools" panel in the\n  right sidebar. Use this to add your own functionality to the panel.'),s=new a.Token("@jupyterlab/notebook:INotebookTracker","A widget tracker for notebooks.\n  Use this if you want to be able to iterate over and interact with notebooks\n  created by the application."),i=new a.Token("@jupyterlab/notebook:INotebookCellExecutor","The notebook cell executor")},94064:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(9387);const r={small:16,medium:32,large:64};function o({title:e,titleId:t,size:n,...o},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:s,width:n?"string"==typeof n?r[n]:n:"16px","aria-labelledby":t},o),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fill:"#b1cc33",d:"M51.56 17.73c-.509.003-1.018.034-1.524.091l-.673.072-.317-.6c-2.673-5.047-8.5-8.308-14.854-8.308-9.026 0-16.369 6.4-16.369 14.268.002.517.035 1.032.1 1.544l.1.824-.792.251c-4.015 1.272-6.608 4.186-6.608 7.421 0 4.445 4.851 8.061 10.813 8.061 2.305.023 4.575-.559 6.584-1.688l.591-.34.19.15.343.275c2.714 2.167 7.082 3.462 11.683 3.462 7.763 0 14.32-3.69 14.32-8.06a4.411 4.411 0 00-.077-.806l-.139-.75-.021-.118.842-.266c4.021-1.27 6.621-4.185 6.621-7.425.002-4.439-4.85-8.058-10.813-8.058z"}),a.createElement("path",{fill:"#5c9e31",d:"M39.468 27.997s4.917 7.331 15.443 5.488l.891 3.572-4 4.922-9.214 2.032-12.13-2.555-1.846-2.126A17.56 17.56 0 0039.47 27.997z"}),a.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeWidth:2},a.createElement("path",{strokeLinejoin:"round",d:"M35.79 63.943V52.776l-7.631-7.516M35.789 52.776l4.368-4.546"}),a.createElement("path",{strokeMiterlimit:10,d:"M63.374 25.773c0-5-5.289-9.06-11.813-9.06a15.38 15.38 0 00-1.63.1c-2.764-5.217-8.763-8.84-15.739-8.84-9.593 0-17.369 6.836-17.369 15.268.002.558.038 1.114.108 1.667-4.288 1.36-7.306 4.595-7.306 8.374 0 5 5.29 9.061 11.813 9.061 2.48.021 4.922-.607 7.084-1.822 2.791 2.23 7.257 3.681 12.307 3.681 8.461 0 15.32-4.057 15.32-9.06a5.464 5.464 0 00-.094-.987c4.294-1.36 7.32-4.598 7.32-8.382z"})))}const s=a.forwardRef(o)}}]);