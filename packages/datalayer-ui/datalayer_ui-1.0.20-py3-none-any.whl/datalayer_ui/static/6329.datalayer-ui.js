"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[6329],{50059:(e,n,l)=>{l.d(n,{A:()=>o,j:()=>c});var t=l(18683),i=l(9387),s=l(14809);const c=e=>{const n=(0,i.useRef)(null),{children:l,id:c,height:o}=e;return(0,i.useEffect)(()=>{if(console.log("Lumino useEffect - ref.current:",n.current,"children:",l,"children.isAttached:",l?.isAttached),n&&n.current&&l){try{l.isAttached?(console.log("Widget already attached"),console.log("Widget node:",l.node),console.log("Widget node parent:",l.node.parentElement),n.current.contains(l.node)||(console.log("Widget node not in container, re-attaching"),s.x0.attach(l,n.current))):(console.log("Attaching widget to DOM"),s.x0.attach(l,n.current),console.log("Widget attached successfully"),console.log("Widget node:",l.node),console.log("Widget node parent:",l.node.parentElement),console.log("Container children after attach:",n.current.children.length),console.log("Widget is visible:",l.isVisible),l.isVisible||(console.log("Making widget visible"),l.show()),l.update())}catch(e){console.warn("Exception while attaching Lumino widget.",e)}return()=>{console.log("Lumino cleanup - detaching widget");try{l&&(l.isAttached||l.node.isConnected)&&(console.log("Detaching widget from DOM"),s.x0.detach(l))}catch(e){console.warn("Exception while detaching Lumino widget.",e)}}}},[n,l]),(0,t.jsx)("div",{id:c,ref:n,style:{height:o,minHeight:o}})};c.defaultProps={id:"lumino-id",height:"100%"};const o=c},63211:(e,n,l)=>{l.r(n),l.d(n,{CellPublic:()=>C,default:()=>b});var t=l(9387),i=l(20568),s=l(17781),c=l(98754),o=l(38227),r=l(81461),a=l(21538),d=l(72533),h=l(54617),u=l(99180),g=l(38621),x=l(42968),f=l(9663),j=l(60105),m=l(17788),A=l(41273),p=l(23267),y=l(63367),w=l(18683);const C=()=>{const{cellId:e}=(0,i.g)();if(!e)return(0,w.jsx)(w.Fragment,{});const[n,l]=(0,t.useState)(!1),{enqueueToast:C}=(0,A.d)(),{defaultKernel:b}=(0,x.PD)(),{getCell:k,refreshCell:E,cloneCell:v}=(0,j.E)(),W=(0,p.mt)(),z=W.iam().user,$=(W.layout().organization,W.layout().space),D=(0,m.Z)(),L=(0,s.S)(),P=W.cell().cell,_=P?P.outputshotUrl?P.outputshotUrl:P.outputshotData:y.XL;(0,t.useEffect)(()=>{P&&P.id===e&&l(!0),n||E(e).then(n=>{if(n.success){const n=k(e);n?W.cell().update(n):D("/")}}).finally(()=>{l(!0)})},[]);const F=(0,t.useCallback)(async n=>{L({title:"Are you sure?",content:"Please confirm you want to clone this cell in your private library."}).then(n=>{n&&v(e).then(e=>{e.success&&(C(e.message,{variant:"success"}),W.layout().triggerItemsRefresh(),D(`/${z?.handle}/library/cells`))})})},[L,P]);return P&&n?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.z,{children:(0,w.jsxs)(c.A,{display:"flex",children:[(0,w.jsx)(c.A,{flex:1,children:(0,w.jsx)(r.A,{sx:{fontSize:3},children:"Public cell"})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(o.A,{children:[P&&z?.handle===P.owner.handle&&(0,w.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>D(`/${P.organization?.handle??P.owner?.handle}/${P.space?.handle}/cells/${P.id}`),children:"Edit"}),z&&$&&(0,w.jsx)(u.Q,{variant:"default",size:"small",leadingVisual:g.Nc$,onClick:F,children:"Clone"})]})})]})}),(0,w.jsxs)(c.A,{children:[(0,w.jsxs)(c.A,{children:[(0,w.jsx)(c.A,{mb:3}),(0,w.jsxs)(c.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[(0,w.jsxs)(c.A,{children:[(0,w.jsx)(c.A,{children:(0,w.jsx)(d.A,{children:P.name})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(d.A,{children:["By ",P.owner.displayName," ",(0,w.jsxs)(a.A,{href:"",onClick:e=>D(`/${P.owner.handle}`,e),children:["@",P.owner.handle]})]})}),(0,w.jsx)(c.A,{mt:5,children:(0,w.jsx)(d.A,{children:P.description})})]}),(0,w.jsx)(c.A,{ml:3,children:(0,w.jsx)("img",{src:_,style:{maxHeight:400}})})]})]}),(0,w.jsx)(c.A,{children:b&&(0,w.jsx)(f.k,{showEditor:!0,autoRun:!0,kernel:b,code:P.source,id:"cell"})})]})]}):(0,w.jsx)(w.Fragment,{})},b=C}}]);