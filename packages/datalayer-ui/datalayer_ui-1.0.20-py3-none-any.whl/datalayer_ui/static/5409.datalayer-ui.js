"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5409],{44915:(e,t,n)=>{n.r(t),n.d(t,{ExercisePublic:()=>E,default:()=>b});var s=n(9387),i=n(20568),o=n(17781),l=n(98754),c=n(38227),a=n(81461),r=n(72533),d=n(54617),u=n(99180),h=n(38621),g=n(17402),x=n(42968),p=n(9663),f=n(55388),m=n(63437),j=n(60105),y=n(17788),A=n(41273),v=n(23267),w=n(18683);const E=()=>{const{exerciseId:e}=(0,i.g)();if(!e)return(0,w.jsx)(w.Fragment,{});const t=(0,v.mt)(),n=(0,f.LC)(),E=t.iam().user,{kernelManager:b,defaultKernel:k}=(0,x.PD)(),{refreshExercise:C,getExercise:S,cloneExercise:$}=(0,j.E)(),P=(0,y.Z)(),Q=(0,o.S)(),{enqueueToast:V}=(0,A.d)(),[W]=(0,s.useState)("exercise-student"),[D,L]=(0,s.useState)(!1),[M,_]=(0,s.useState)(),[I,R]=(0,s.useState)((0,g.YG)()),[T,z]=(0,s.useState)(!1),F=n.getInput(W),H=(0,s.useMemo)(()=>k,[b]),q=n.getGradeSuccess(W);(0,s.useEffect)(()=>{q&&(z(q),setTimeout(()=>{z(!1)},5e3))},[q]),(0,s.useEffect)(()=>{C(e).then(t=>{if(t.success){const t=S(e);t||P("/"),_(t)}})},[]);const Y=(0,s.useCallback)(async n=>{Q({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then(n=>{n&&$(e).then(e=>{e.success&&(V(e.message,{variant:"success"}),t.layout().triggerItemsRefresh(),P(`/${E.handle}/library/exercises`))})})},[Q,M]);return M?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.z,{children:(0,w.jsxs)(l.A,{display:"flex",children:[(0,w.jsx)(l.A,{flex:1,children:(0,w.jsx)(a.A,{sx:{fontSize:3},children:"Exercise"})}),(0,w.jsx)(l.A,{children:(0,w.jsxs)(c.A,{children:[E&&M&&(0,w.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>P(`/${M.organization?.handle??M.owner?.handle}/${M.space?.handle}/exercises/${M.id}`),children:"Edit"}),E&&M&&(0,w.jsx)(u.Q,{variant:"default",size:"small",leadingVisual:h.Nc$,onClick:Y,children:"Clone"})]})})]})}),(0,w.jsxs)(l.A,{children:[(0,w.jsx)(r.A,{children:M.name}),(0,w.jsx)(r.A,{as:"p",color:"fg.muted",bg:"neutral.muted",p:2,children:M.description})]}),(0,w.jsx)(l.A,{children:(0,w.jsx)(p.k,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:H,id:W,codePre:M.codePre,code:M.codeQuestion,receipt:I})}),(0,w.jsxs)(l.A,{display:"flex",sx:{gap:3},pt:2,pb:2,children:[(0,w.jsx)(l.A,{children:(0,w.jsx)(u.Q,{variant:"danger",leadingVisual:h.uIH,onClick:e=>{e.preventDefault(),L(!D)},children:"Show help"})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(u.Q,{variant:"default",leadingVisual:h.Fjq,onClick:e=>{e.preventDefault(),n.setInput(W,M.codeQuestion)},children:"Reset"})})]}),D&&(0,w.jsx)(r.A,{as:"p",color:"danger.fg",p:2,children:M.help??"No help available."}),(0,w.jsxs)(l.A,{children:[(0,w.jsx)(u.Q,{variant:"default",leadingVisual:h.Qvf,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),n.setExecuteRequest(W,`\nsetup_state(stu_code = """${M.codePre}\n${F}""", sol_code = """${M.codePre}\n${M.codeSolution}""")\n${M.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${I}</div><h1>ðŸŽ‰ Success!</h1>')\n`)},children:"Validate your solution"}),(0,w.jsx)(r.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Validate your solution with this button."})]}),T&&(0,w.jsx)(m.e,{})]}):(0,w.jsx)(w.Fragment,{})},b=E},50059:(e,t,n)=>{n.d(t,{A:()=>c,j:()=>l});var s=n(18683),i=n(9387),o=n(14809);const l=e=>{const t=(0,i.useRef)(null),{children:n,id:l,height:c}=e;return(0,i.useEffect)(()=>{if(console.log("Lumino useEffect - ref.current:",t.current,"children:",n,"children.isAttached:",n?.isAttached),t&&t.current&&n){try{n.isAttached?(console.log("Widget already attached"),console.log("Widget node:",n.node),console.log("Widget node parent:",n.node.parentElement),t.current.contains(n.node)||(console.log("Widget node not in container, re-attaching"),o.x0.attach(n,t.current))):(console.log("Attaching widget to DOM"),o.x0.attach(n,t.current),console.log("Widget attached successfully"),console.log("Widget node:",n.node),console.log("Widget node parent:",n.node.parentElement),console.log("Container children after attach:",t.current.children.length),console.log("Widget is visible:",n.isVisible),n.isVisible||(console.log("Making widget visible"),n.show()),n.update())}catch(e){console.warn("Exception while attaching Lumino widget.",e)}return()=>{console.log("Lumino cleanup - detaching widget");try{n&&(n.isAttached||n.node.isConnected)&&(console.log("Detaching widget from DOM"),o.x0.detach(n))}catch(e){console.warn("Exception while detaching Lumino widget.",e)}}}},[t,n]),(0,s.jsx)("div",{id:l,ref:t,style:{height:c,minHeight:c}})};l.defaultProps={id:"lumino-id",height:"100%"};const c=l}}]);