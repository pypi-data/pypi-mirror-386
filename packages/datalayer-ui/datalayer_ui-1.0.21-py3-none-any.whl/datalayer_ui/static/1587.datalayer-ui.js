"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1587],{61587:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeExercise:()=>y,default:()=>S});var r=t(9387),n=t(20568),i=t(98754),a=t(81461),d=t(72533),c=t(54617),u=t(99180),o=t(38621),l=t(17402),p=t(42968),h=t(9663),x=t(55388),f=t(60105),g=t(17788),j=t(99179),m=t(63437),v=t(18683);const y=()=>{const{accountHandle:e,spaceHandle:s,courseId:t,exerciseId:y}=(0,n.g)();if(!t||!y)return(0,v.jsx)(v.Fragment,{});const S=(0,j.J)(),A=(0,x.LC)(),{kernelManager:k,defaultKernel:E}=(0,p.PD)(),C=(0,g.Z)(),{refreshCourse:I,getCourse:$,refreshExercise:_,getExercise:w,updateExercisePoints:P}=(0,f.E)(),[Q]=(0,r.useState)("exercise-student"),[T,b]=(0,r.useState)(!1),[H,M]=(0,r.useState)(),[D,F]=(0,r.useState)(),[G,R]=(0,r.useState)(),[Y,q]=(0,r.useState)((0,l.YG)()),[z,L]=(0,r.useState)(!1),V=A.getInput(Q),B=(0,r.useMemo)(()=>E,[k]),J=A.getGradeSuccess(Q);return(0,r.useEffect)(()=>{if(D?.id&&H?.id&&V&&J){L(J),setTimeout(()=>{L(!1)},5e3);const e=J?1:0;P(H.id,V,e)}},[J]),(0,r.useEffect)(()=>{_(y).then(e=>{if(e.success){const e=w(y);M(e)}})},[]),(0,r.useEffect)(()=>{H&&I(t).then(e=>{if(e.success){const e=$(t);F(e);const s=e?.students?.get(S?.id);if(s&&s.studentItems){const e=s.studentItems.get(H?.id);if(e)return void R(e)}R({id:"",type:"student_item",itemType:"exercise",student:S,item:H,itemId:H?.id,codeStudent:H?.codeQuestion,pass:!1,points:0})}})},[H]),D&&H?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.z,{children:(0,v.jsxs)(i.A,{display:"flex",children:[(0,v.jsx)(i.A,{flex:1,children:(0,v.jsx)(a.A,{sx:{fontSize:3},children:"Course exercise"})}),(0,v.jsx)(i.A,{children:(0,v.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>C(`/${e}/${s}/course/${D.id}/progress`),children:"My course progress"})})]})}),(0,v.jsx)(i.A,{children:(0,v.jsx)(d.A,{children:H?.description})}),(0,v.jsx)(i.A,{pt:3,children:G&&(0,v.jsx)(h.k,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:B,id:Q,codePre:H.codePre,code:G.codeStudent,receipt:Y})}),(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(i.A,{display:"flex",sx:{gap:3},pt:2,pb:2,children:[(0,v.jsx)(i.A,{children:(0,v.jsx)(u.Q,{variant:"danger",leadingVisual:o.uIH,onClick:e=>{e.preventDefault(),b(!T)},children:"Show help"})}),(0,v.jsx)(i.A,{children:(0,v.jsx)(u.Q,{variant:"default",leadingVisual:o.Fjq,onClick:e=>{e.preventDefault(),A.setInput(Q,H?.codeQuestion)},children:"Reset"})})]}),T&&(0,v.jsx)(d.A,{as:"p",color:"danger.fg",p:2,children:H?.help??"No help available."})]}),(0,v.jsxs)(i.A,{children:[(0,v.jsx)(u.Q,{variant:"default",leadingVisual:o.Qvf,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),(e=>{A.setGradeSuccess(Q,!1),A.setExecuteRequest(Q,`\nsetup_state(stu_code = """${e.codePre}\n${V}""", sol_code = """${e.codePre}\n${e.codeSolution}""")\n${e.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${Y}</div><h1>ðŸŽ‰ Success!</h1>')\n`)})(H)},children:"Grade your answer"}),(0,v.jsx)(d.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"You ask for a grade as much as you want. Everytime you request a grade, your last answer code and point are saved."})]}),z&&(0,v.jsx)(m.e,{})]}):(0,v.jsx)(v.Fragment,{})},S=y}}]);