"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1224],{61224:(e,t,r)=>{r.r(t),r.d(t,{gifEmbed:()=>O,linkReplace:()=>E,oembed:()=>v,textReplace:()=>x,validate:()=>$});var o=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))c.call(t,r)&&s(e,r,t[r]);return e},h=(e,t)=>a(e,l(t)),u="(?:https?://)?((?:stage.loom.com|loom.com|www.loom.com|loomlocal.com:4444)/share/([a-zA-Z0-9-]*-)?[a-f0-9]+)(\\?[a-zA-Z0-9=&-_]+)?",d=new RegExp(`^${u}$`),p=new RegExp(`${u}`,"g"),w=/(www\.loom\.com|loom\.com|stage\.loom\.com|loomlocal\.com:4444)/i,f="lo-link-replaced",b=e=>d.test(e),g=e=>b(e),$={isLoomUrl:b},y=/src=["']+(https?:\/\/[a-zA-z\d:./?&]+)/,v=(e,t={})=>{if(g(e))return fetch(((e,t)=>{const{width:r,height:o,gifThumbnail:a,hideOwner:l}=t,n=r?`&maxwidth=${r}`:"",i=o?`&maxheight=${o}`:"",c=a?`&gif=${a}`:"",s=l?`&hide_owner=${l}`:"",[m]=e.match(w);let h=m;return"loom.com"===m&&(h=`www.${m}`),`https://${h}/v1/oembed?url=${e}${n}${i}${c}${s}`})(e,t)).then(e=>e.json()).then(e=>((e,t)=>{const{width:r,height:o}=t;if(!r&&!o){const[,t]=e.html.match(y),r=(e=>{const{width:t,height:r}=e;return null==t||null==r?.5625:r/t})(e);return h(m({},e),{html:(a=t,l=r,`\n<div class="lo-emb-vid" style="position: relative; padding-bottom: ${100*l+"%"}; height: 0;">\n  <iframe src="${a}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n</div>`.split("\n").map(e=>e.trim()).join(""))})}var a,l;return e})(e,t)).catch(e=>{throw new Error("Unable to fetch oembed data:"+e)});throw new Error("URL is not from a supported video provider")},O=async e=>`<a href="${e}">\n    <img style="max-width:300px;" src="${(await v(e,{gifThumbnail:!0})).thumbnail_url}">\n  </a>`,E=(e="a",t={},r=document)=>{[...Array.from(r.querySelectorAll(e))].filter(e=>{return!(t=e).className.includes(f)&&g(t.href);var t}).forEach(async e=>{const{html:r}=await v(e.href,t);return((e,t)=>{const r=(e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstChild})(t);r&&e.parentNode&&e.parentNode.insertBefore(r,e)})(e,r),e.className=`${e.className} ${f}`,!0})},j=e=>{const[,t]=e.match(d);return{originalUrl:e,requestUrl:`https://${t}`}},x=async(e,t={})=>{const r=e||"",o=r.match(p);if(!o)return r;const a=o.map(j).map(async e=>{const{html:r}=await v(e.requestUrl,t);return h(m({},e),{embedCode:r})});return(await Promise.all(a)).reduce((e,t)=>{const{originalUrl:r,embedCode:o}=t,a=new RegExp(r,"g");return e.replace(a,o)},r)}}}]);