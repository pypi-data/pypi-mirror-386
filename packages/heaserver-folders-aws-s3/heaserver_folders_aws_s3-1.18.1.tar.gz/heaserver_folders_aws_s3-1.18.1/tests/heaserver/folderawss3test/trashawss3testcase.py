"""
Creates a test case class for use with the unittest library that is built into Python.
"""

from heaserver.folderawss3 import trashservice
from heaobject.user import NONE_USER
from heaobject.data import AWSS3FileObject
from heaserver.service.testcase.mockmongo import MockMongoManager
from heaserver.service.testcase.mockaws import MockS3Manager
from heaserver.service.testcase.collection import CollectionKey


db_store = {
    CollectionKey(name='volumes', db_manager_cls=MockMongoManager): [{
        'id': '666f6f2d6261722d71757578',
        'created': None,
        'derived_by': None,
        'derived_from': [],
        'description': None,
        'display_name': 'My Amazon Web Services',
        'invited': [],
        'modified': None,
        'name': 'amazon_web_services',
        'owner': NONE_USER,
        'shares': [],
        'user_shares': [],
        'group_shares': [],
        'source': None,
        'type': 'heaobject.volume.Volume',
        'version': None,
        'file_system_name': 'amazon_web_services',
        'file_system_type': 'heaobject.volume.AWSFileSystem',
        'credential_id': None  # Let boto3 try to find the user's credentials.
    }],
    CollectionKey(name='buckets', db_manager_cls=MockS3Manager): [{
        "arn": None,
        "created": '2022-05-17T00:00:00+00:00',
        "derived_by": None,
        "derived_from": [],
        "description": None,
        "display_name": "arp-scale-2-cloud-bucket-with-tags11",
        "encrypted": True,
        "id": "arp-scale-2-cloud-bucket-with-tags11",
        "invites": [],
        "locked": False,
        "mime_type": "application/x.awsbucket",
        "modified": '2022-05-17T00:00:00+00:00',
        "name": "arp-scale-2-cloud-bucket-with-tags11",
        "object_count": None,
        "owner": "system|none",
        "permission_policy": None,
        "region": "us-west-2",
        "s3_uri": "s3://arp-scale-2-cloud-bucket-with-tags11/",
        "presigned_url": None,
        'shares': [],
        'user_shares': [],
        'group_shares': [],
        "size": None,
        "source": None,
        "tags": [],
        "type": "heaobject.bucket.AWSBucket",
        "version": None,
        "versioned": True
    }],
    CollectionKey(name='awss3files', db_manager_cls=MockS3Manager): [{
        'created': '2022-05-17T00:00:00+00:00',
        'derived_by': None,
        'derived_from': [],
        'description': None,
        'display_name': 'TextFileUTF8.txt',
        'id': 'VGV4dEZpbGVVVEY4LnR4dA==',
        'invites': [],
        'modified': '2022-05-17T00:00:00+00:00',
        'name': 'VGV4dEZpbGVVVEY4LnR4dA==',
        'owner': NONE_USER,
        'shares': [],
        'user_shares': [],
        'group_shares': [],
        'source': 'AWS Simple Cloud Storage (S3)',
        'storage_class': 'STANDARD',
        'type': AWSS3FileObject.get_type_name(),
        's3_uri': 's3://arp-scale-2-cloud-bucket-with-tags11/TextFileUTF8.txt',
        'presigned_url': None,
        'version': None,
        'versions': [],
        'mime_type': 'text/plain',
        'size': 1253915,
        'human_readable_size': '1.3 MB',
        'bucket_id': 'arp-scale-2-cloud-bucket-with-tags11',
        'key': 'TextFileUTF8.txt',
        'retrievable': True,
        'human_readable_archive_detail_state': 'Not Archived',
        'archive_detail_state': 'NOT_ARCHIVED',
        'archive_storage_class': False,
        'available_until': None
    },
        {
            'created': '2022-05-17T00:00:00+00:00',
            'derived_by': None,
            'derived_from': [],
            'description': None,
            'display_name': 'BinaryFile',
            'id': 'YWZvbGRlci9hbm90aGVyZm9sZGVyL0JpbmFyeUZpbGU=',
            'invites': [],
            'modified': '2022-05-17T00:00:00+00:00',
            'name': 'YWZvbGRlci9hbm90aGVyZm9sZGVyL0JpbmFyeUZpbGU=',
            'owner': NONE_USER,
            'shares': [],
            'user_shares': [],
            'group_shares': [],
            'source': 'AWS Simple Cloud Storage (S3)',
            'source_detail': None,
            'storage_class': 'STANDARD',
            'type': AWSS3FileObject.get_type_name(),
            's3_uri': 's3://arp-scale-2-cloud-bucket-with-tags11/afolder/anotherfolder/BinaryFile',
            'presigned_url': None,
            'version': None,
            'versions': [],
            'mime_type': 'application/octet-stream',
            'size': 8673123,
            'human_readable_size': '8.7 MB',
            'bucket_id': 'arp-scale-2-cloud-bucket-with-tags11',
            'key': 'afolder/anotherfolder/BinaryFile',
            'retrievable': True,
            'human_readable_archive_detail_state': 'Not Archived',
            'archive_detail_state': 'NOT_ARCHIVED',
            'archive_storage_class': False,
            'available_until': None
        }
    ],
    CollectionKey(name="properties", db_manager_cls=MockS3Manager): [
        {
            'id': 'YWZvbGRlci9hbm90aGVyZm9sZGVyL0JpbmFyeUZpbGU=,',
            "type": "heaobject.registry.Property",
            "name": "AWS_ROOT_ACCOUNT",
            "display_name": "AWS ROOT ACCOUNT",
            "value": "200000000",
            'created': '2022-05-17T00:00:00+00:00',
            'derived_by': None,
            'derived_from': [],
            'description': None,
            'modified': '2022-05-17T00:00:00+00:00',
            'owner': NONE_USER,
            'shares': [],
            'user_shares': [],
            'group_shares': [],
            'version': None,
            'super_admin_default_permissions': [],
            'dynamic_permission_supported': False
        }],

    CollectionKey(name=trashservice.TRASHAWSS3_COLLECTION, db_manager_cls=MockS3Manager): [{
        'id': 'VGV4dEZpbGVVVEY4LnR4dA==,',
        'created': '2022-05-17T00:00:00+00:00',
        'derived_by': None,
        'derived_from': [],
        'description': None,
        'display_name': 'TextFileUTF8.txt',
        'invited': [],
        'modified': '2022-05-17T00:00:00+00:00',
        'name': 'VGV4dEZpbGVVVEY4LnR4dA==,',
        'owner': NONE_USER,
        'shares': [{'basis': 'USER',
                    'group': NONE_USER,
                    'invite': None,
                    'permissions': ['VIEWER', 'COOWNER'],
                    'type': 'heaobject.root.ShareImpl',
                    'type_display_name': 'Share',
                    'user': NONE_USER}],
        'user_shares': [{'basis': 'USER',
                    'group': NONE_USER,
                    'invite': None,
                    'permissions': ['VIEWER', 'COOWNER'],
                    'type': 'heaobject.root.ShareImpl',
                    'type_display_name': 'Share',
                    'user': NONE_USER}],
        'group_shares': [],
        'source': 'AWS Simple Cloud Storage (S3)',
        'source_detail': None,
        'type': 'heaobject.trash.AWSS3FolderFileTrashItem',
        'version': None,
        'size': 0,
        'human_readable_size': '0 Bytes',
        'storage_class': 'STANDARD',
        'original_location': '/arp-scale-2-cloud-bucket-with-tags11/TextFileUTF8.txt',
        's3_uri': 's3://arp-scale-2-cloud-bucket-with-tags11/TextFileUTF8.txt',
        'archive_storage_class': None,
        'super_admin_default_permissions': [],
        'dynamic_permission_supported': False,
        'resource_type_and_id': 'arp-scale-2-cloud-bucket-with-tags11/TextFileUTF8.txt'
    },
        {
            'id': 'YWZvbGRlci9hbm90aGVyZm9sZGVyL0JpbmFyeUZpbGU=,',
            'created': '2022-05-17T00:00:00+00:00',
            'derived_by': None,
            'derived_from': [],
            'description': None,
            'display_name': 'BinaryFile',
            'invited': [],
            'modified': '2022-05-17T00:00:00+00:00',
            'name': 'YWZvbGRlci9hbm90aGVyZm9sZGVyL0JpbmFyeUZpbGU=,',
            'owner': NONE_USER,
            'shares': [{'basis': 'USER',
                    'group': NONE_USER,
                    'invite': None,
                    'permissions': ['VIEWER', 'COOWNER'],
                    'type': 'heaobject.root.ShareImpl',
                    'type_display_name': 'Share',
                    'user': NONE_USER}],
            'user_shares': [{'basis': 'USER',
                    'group': NONE_USER,
                    'invite': None,
                    'permissions': ['VIEWER', 'COOWNER'],
                    'type': 'heaobject.root.ShareImpl',
                    'type_display_name': 'Share',
                    'user': NONE_USER}],
            'group_shares': [],
            'source': 'AWS Simple Cloud Storage (S3)',
            'source_detail': None,
            'type': 'heaobject.trash.AWSS3FolderFileTrashItem',
            'version': None,
            'size': 0,
            'human_readable_size': '0 Bytes',
            'storage_class': 'STANDARD',
            'original_location': '/arp-scale-2-cloud-bucket-with-tags11/afolder/anotherfolder/BinaryFile',
            's3_uri': 's3://arp-scale-2-cloud-bucket-with-tags11/afolder/anotherfolder/BinaryFile',
            'archive_storage_class': None,
            'super_admin_default_permissions': [],
            'dynamic_permission_supported': False,
            'resource_type_and_id': 'arp-scale-2-cloud-bucket-with-tags11/afolder/anotherfolder/BinaryFile'
        }]
}

