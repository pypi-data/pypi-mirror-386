[tool.poetry]
name = "tellaro-query-language"
version = "0.2.3"
description = "A flexible, human-friendly query language for searching and filtering structured data"
authors = ["Justin Henderson <justin@tellaro.io>"]
license = "MIT"
readme = "README.md"
homepage = "https://github.com/tellaro/tellaro-query-language"
repository = "https://github.com/tellaro/tellaro-query-language"
documentation = "https://github.com/tellaro/tellaro-query-language/tree/main/docs"
keywords = ["query", "language", "opensearch", "elasticsearch", "search", "filter", "tql"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Text Processing :: Linguistic",
]
packages = [
    {include = "tql", from = "src"}
]

[tool.poetry.scripts]
cov = "tql.scripts:run_coverage"
badge = "tql.scripts:run_badge"
lint = "tql.scripts:run_lint"
lint-all = "tql.scripts:run_lint_all"
tests = "tql.scripts:run_tests"

[tool.poetry.dependencies]
python = ">=3.11,<3.14"
pyparsing = "^3.2.1"
setuptools = "^80.0.0"
dnspython = "^2.7.0"
opensearch-py = {version = "^2.4.2", optional = true}
opensearch-dsl = {version = "^2.1.0", optional = true}
maxminddb = "^2.7.0"
urllib3 = "^2.5.0"

[tool.poetry.extras]
opensearch = ["opensearch-py", "opensearch-dsl"]

[tool.poetry.group.dev.dependencies]
flake8 = ">=7.0.0"
flake8-bugbear = ">=24.2.6"
pytest = ">=8.1.1"
mypy = ">=1.11.2"
coverage = ">=7.4.4"
pre-commit = ">=3.7.0"
nox = ">=2024.3.2"
genbadge = {extras = ["all"], version = "^1.1.1"}
types-requests = ">=2.31.0.20240403"
isort = ">=5.13.2"
flynt = ">=1.0.1"
openmock = ">=2.3.6"
types-chevron = ">=0.14.2.20240310"
types-passlib = ">=1.7.7.20240327"
bandit = ">=1.7.9"
pytest-env = ">=1.1.3"
mitreattack-python = ">=3.0.6"
stix2 = ">=3.0.1"
stix = ">=1.2.0.11"
ipykernel = ">=6.29.5"
types-croniter = "^4.0.0.20241030"
types-beautifulsoup4 = "^4.12.0.20241020"
types-boto3 = "^1.0.2"
flake8-isort = "^6.1.1"
black = {extras = ["jupyter"], version = "^24.10.0"}
pylint = "^3.3.3"
vulture = "^2.14"
types-setuptools = "^75.8.2.20250305"
opensearch-dsl = "^2.1.0"
python-dotenv = "^1.1.0"
jupyter = "^1.1.1"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.coverage.run]
omit = [".*", "*/site-packages/*", "*/tests/*"]

[tool.black]
line-length = 120

[tool.isort]
profile = "black"
line_length = 120

[tool.pytest.ini_options]
filterwarnings = [
    "ignore:Unverified HTTPS request:urllib3.exceptions.InsecureRequestWarning",
]
# Only collect tests from these directories
testpaths = [
    "tests",
]
# Don't collect from these directories
norecursedirs = [
    ".*",
    "build",
    "dist",
    "*.egg",
    "venv",
    "env",
    "__pycache__",
    "playground",
]
# Custom markers
markers = [
    "integration: marks tests as integration tests (deselect with '-m \"not integration\"')",
]
