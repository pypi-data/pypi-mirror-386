====================================
Energy Self-consumption Projects
====================================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:46c8832c...
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Production%2FStable-green.png
    :target: https://odoo-community.org/page/development-status
    :alt: Production/Stable
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-coopdevs%2Fcomunitats--energetiques-lightgray.png?logo=github
    :target: https://git.coopdevs.org/coopdevs/comunitats-energetiques/odoo-ce
    :alt: coopdevs/comunitats-energetiques

|badge1| |badge2| |badge3|

This module provides comprehensive functionality for managing energy self-consumption 
projects and communities in Spain, designed specifically for energy cooperatives and 
communities operating under Spanish energy regulations.

**Table of contents**

.. contents::
   :local:

Features
========

Core Functionality
------------------

* **Project Management**: Complete lifecycle management of self-consumption projects
* **Participant Management**: Registration, validation, and state management of participants
* **Distribution Management**: Automated calculation and management of energy distribution coefficients
* **Financial Integration**: Seamless integration with accounting and invoicing systems
* **Data Import/Export**: Bulk operations for participant data and distribution tables
* **Compliance**: Spanish energy regulation compliance and validation

Key Capabilities
----------------

Project Management
~~~~~~~~~~~~~~~~~~
- Create and manage self-consumption projects
- Configure project parameters and settings
- Track project lifecycle and status
- Integration with energy communities framework

Participant Management
~~~~~~~~~~~~~~~~~~~~~~
- Public web forms for participant inscription
- Comprehensive participant data validation
- State management (active, inactive, change, cancelled)
- IBAN and mandate management
- Bulk operations for participant management

Supply Point Management
~~~~~~~~~~~~~~~~~~~~~~~
- CUPS (CÃ³digo Unificado de Punto de Suministro) validation
- Supply point assignment and distribution
- Tariff validation and management
- Power consumption tracking

Distribution Tables
~~~~~~~~~~~~~~~~~~~
- Automated coefficient calculation
- Fixed and hourly distribution types
- Multi-step creation wizards
- Import/export capabilities
- State management and validation

Contract and Invoicing
~~~~~~~~~~~~~~~~~~~~~~
- Automated contract generation
- Integration with Odoo contract management
- Flexible invoicing modes
- Payment mode configuration
- Invoice template customization

Technical Features
------------------

Data Validation
~~~~~~~~~~~~~~~
- Spanish CUPS code validation
- IBAN validation for Spanish banks
- NIF/CIF validation
- Cadastral reference validation
- Real-time validation with descriptive error messages

Import/Export
~~~~~~~~~~~~~
- Advanced CSV processing with encoding detection
- Bulk data import with validation
- Export capabilities for reporting
- Error handling and progress tracking

User Experience
~~~~~~~~~~~~~~~
- Multi-step wizards for complex operations
- Preview capabilities for critical operations
- Comprehensive validation with descriptive error messages
- Detailed logging and audit trails
- Progress indicators for long-running operations

Installation
============

Prerequisites
-------------

This module requires the following Python packages:

* pandas >= 2.0.3
* numpy >= 1.24.4
* openupgradelib >= 3.6.1

Install these dependencies using pip:

.. code-block:: bash

   pip install pandas>=2.0.3 numpy>=1.24.4 openupgradelib>=3.6.1

Module Installation
-------------------

1. Download or clone the module to your Odoo addons directory
2. Update the addons list in Odoo
3. Install the module from the Apps menu

Dependencies
------------

This module depends on the following Odoo modules:

Core Modules:
- base
- web
- mail
- account

Contract Management:
- contract
- contract_queue_job
- contract_mandate
- contract_variable_quantity

Energy Communities Framework:
- energy_communities
- energy_communities_cooperator
- energy_project
- energy_communities_service_invoicing

Additional:
- web_m2x_options
- l10n_es
- report_csv

Configuration
=============

Initial Setup
-------------

1. **Configure Company Settings**:
   - Set up payment modes for contract generation
   - Configure company information for Spanish localization

2. **Create Project Types**:
   - Define project types for different self-consumption models
   - Configure default parameters and templates

3. **Set Up Products**:
   - Configure products for energy services
   - Set up contract templates

4. **Configure Security**:
   - Assign appropriate user roles and permissions
   - Configure access rules for different user types

Project Configuration
---------------------

1. **Create Self-consumption Project**:
   - Define project parameters
   - Set up distribution configuration
   - Configure invoicing settings

2. **Configure Supply Points**:
   - Import or manually create supply points
   - Validate CUPS codes
   - Set up tariff information

3. **Set Up Participants**:
   - Configure inscription forms
   - Set up validation rules
   - Define participation limits

Usage
=====

Creating a Self-consumption Project
-----------------------------------

1. Navigate to Energy > Self-consumption Projects
2. Click "Create" to start a new project
3. Fill in project details and configuration
4. Save the project

Managing Participants
---------------------

**Public Inscription**:
1. Participants can register through the public web form
2. System validates all provided information
3. Administrators review and approve inscriptions

**Bulk Import**:
1. Use the Import Wizard for bulk participant data
2. Upload CSV file with participant information
3. System validates and imports data with error reporting

**State Management**:
1. Use the Change State Wizard to modify participant states
2. Bulk operations for multiple participants
3. Automatic validation and state transitions

Creating Distribution Tables
----------------------------

1. **Prepare Inscriptions**:
   - Ensure all participants are in correct state
   - Validate supply point assignments

2. **Create Distribution Table**:
   - Use the Create Distribution Table Wizard
   - Configure distribution parameters
   - Review and confirm coefficient calculations

3. **Activate Distribution**:
   - Review distribution table
   - Activate for contract generation

Generating Contracts
--------------------

1. **Prepare Project**:
   - Ensure distribution table is ready
   - Configure payment modes

2. **Generate Contracts**:
   - Use the Contract Generation Wizard
   - Review sale orders to be processed
   - Execute contract generation

3. **Activate Project**:
   - System automatically activates project
   - Contracts become active for invoicing

Known Issues / Roadmap
======================

Known Issues
------------

* Large CSV imports may require increased server timeout settings
* Complex distribution calculations may take time for large projects

Roadmap
-------

* Enhanced reporting capabilities
* Integration with external energy management systems
* Mobile application for participant management
* Advanced analytics and forecasting

Bug Tracker
============

Bugs are tracked on `GitLab Issues <https://git.coopdevs.org/coopdevs/comunitats-energetiques/odoo-ce/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://git.coopdevs.org/coopdevs/comunitats-energetiques/odoo-ce/issues/new>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* Coopdevs Treball SCCL
* Som Energia SCCL

Contributors
------------

* Coopdevs Development Team
* Som Energia Technical Team

Maintainers
-----------

This module is maintained by Coopdevs and Som Energia.

.. image:: https://coopdevs.org/logo.png
   :alt: Coopdevs
   :target: https://coopdevs.org

.. image:: https://www.somenergia.coop/logo.png
   :alt: Som Energia
   :target: https://www.somenergia.coop

Coopdevs is a cooperative of developers committed to the social and solidarity economy.
Som Energia is a renewable energy cooperative that promotes citizen participation in the energy transition.

This module is part of the energy communities project, aimed at facilitating the management
of energy cooperatives and self-consumption communities in Spain. 