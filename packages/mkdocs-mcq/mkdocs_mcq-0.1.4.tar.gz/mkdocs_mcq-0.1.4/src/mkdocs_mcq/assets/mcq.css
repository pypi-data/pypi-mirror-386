:root {
    --mcq-icon-unselected: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12Zm11-9.5A9.5 9.5 0 0 0 2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5Z'></path></svg>");
    --mcq-icon-single-selected: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 23C5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11-4.925 11-11 11Zm0-1.5a9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12a9.5 9.5 0 0 0 9.5 9.5Z'></path><path d='M7 8.75C7 7.784 7.784 7 8.75 7h6.5c.966 0 1.75.784 1.75 1.75v6.5A1.75 1.75 0 0 1 15.25 17h-6.5A1.75 1.75 0 0 1 7 15.25v-6.5Z'></path></svg>");
    --mcq-icon-multi-selected: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12.75 7.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z'></path><path d='M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z'></path></svg>");
    --mcq-icon-correct: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12Zm16.28-2.72a.751.751 0 0 0-.018-1.042.751.751 0 0 0-1.042-.018l-5.97 5.97-2.47-2.47a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042l3 3a.75.75 0 0 0 1.06 0Z'></path></svg>");
    --mcq-icon-incorrect: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12Zm8.036-4.024a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042L10.939 12l-2.963 2.963a.749.749 0 0 0 .326 1.275.749.749 0 0 0 .734-.215L12 13.06l2.963 2.964a.75.75 0 0 0 1.061-1.06L13.061 12l2.963-2.964a.749.749 0 0 0-.326-1.275.749.749 0 0 0-.734.215L12 10.939Z'></path></svg>");
    --mcq-icon-missed: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12Zm16.333-4.167a.825.825 0 0 0-1.166-1.166l-9.5 9.5a.825.825 0 0 0 1.166 1.166Z'></path></svg>");
}

.mcq-container {
    border: 1px solid var(--md-default-fg-color--lightest);
    border-radius: 0.2rem;
    padding: 1rem;
    margin-bottom: 1.2rem;
}

.mcq-question {
    font-weight: bold;
    margin-top: 0;
}

.mcq-question>p {
    margin: 0;
    font-weight: bold;
}

.mcq-choices ul.task-list {
    list-style-type: none;
    padding-left: 0;
    margin-bottom: 1rem;
}

.mcq-choices .task-list-item {
    margin-bottom: 0.1rem;
}

.mcq-choices .task-list-item input {
    display: none;
}

.mcq-choices .task-list-item>label {
    cursor: pointer;
    display: flex;
    align-items: center;
    padding: 0.5rem;
    border-radius: 0.2rem;
    transition: background-color 0.2s;
    overflow: hidden;
    min-width: 0;
    width: 100%;
}

.mcq-choices .task-list-item>label> :first-child {
    margin: 0;
}

.mcq-choices .task-list-item>label:hover {
    background-color: var(--md-default-fg-color--lightest);
}

.mcq-choices .task-list-item>label p {
    margin: 0;
    display: inline;
    /* This helps the <p> tag behave like simple text for better alignment */
}

.mcq-choices .task-list-item>label pre {
    margin: 0;
    overflow-x: auto;
    flex: 1;
    min-width: 0;
    box-sizing: border-box;
    background: var(--md-code-bg-color, #f5f5f5) !important;
    padding: 0.5rem !important;
    border-radius: 0.2rem;
    width: 100% !important;
}

.mcq-choices .task-list-item>label pre code {
    white-space: pre;
    overflow-x: auto;
    display: block;
    width: 100% !important;
    background: transparent !important;
    padding: 0 !important;
}

.mcq-choices .task-list-item>label .highlight {
    overflow-x: auto;
    flex: 1;
    min-width: 0;
    width: 100% !important;
}

.mcq-choices .task-list-item>label::before {
    content: "";
    flex-shrink: 0;
    margin-right: 0.75em;
    height: 1.2em;
    width: 1.2em;
    background-color: currentColor;
    -webkit-mask-image: var(--mcq-icon);
    mask-image: var(--mcq-icon);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: contain;
    mask-size: contain;
}

/* --- FIX: Corrected CSS Selectors --- */
.mcq-container:not(.answered) .task-list-item>label {
    --mcq-icon: var(--mcq-icon-unselected);
}

.mcq-container[data-mcq-type="single"]:not(.answered) .task-list-item>label.is-selected {
    --mcq-icon: var(--mcq-icon-single-selected);
}

.mcq-container[data-mcq-type="multiple"]:not(.answered) .task-list-item>label.is-selected {
    --mcq-icon: var(--mcq-icon-multi-selected);
}

/* --- States (After Submission) --- */
.mcq-container.answered .task-list-item label {
    cursor: default;
}

.mcq-container.answered .task-list-item label:hover {
    background-color: transparent;
}

.mcq-container.answered .task-list-item.correct > label {
    /*color: var(--md-primary-fg-color, #00C853);*/
    color: #00C853;
    --mcq-icon: var(--mcq-icon-correct);
}

.mcq-container.answered .task-list-item.incorrect > label {
    /* color: var(--md-accent-fg-color, #D50000); */
    color: #D50000;
    /* text-decoration: line-through; */
    --mcq-icon: var(--mcq-icon-incorrect);
}

.mcq-container.answered .task-list-item.was-correct > label {
    --mcq-icon: var(--mcq-icon-missed);
}

.mcq-container.answered .task-list-item:not(.was-correct):not(.incorrect):not(.correct)>label {
    --mcq-icon: var(--mcq-icon-unselected);
}

/* --- Feedback Styling --- */
.mcq-feedback {
    /* padding: 0.5rem 1rem 0.5rem 2.75rem; */
    font-size: 0.9em;
    color: var(--md-default-fg-color--light);
}

.mcq-feedback> :first-child {
    margin-top: 0;
}

.mcq-feedback> :last-child {
    margin-bottom: 0;
}

/* --- Results Banner Styling --- */
/* .mcq-results-banner {
    padding: 0.8rem 1.2rem;
    margin-bottom: 1.5rem;
    border: 1px solid var(--md-default-fg-color--lightest);
    border-left: 0.25rem solid var(--md-primary-fg-color, #448aff);
    border-radius: 0.2rem;
    background-color: var(--md-default-bg-color--lightest, #f5f5f5);
}

.mcq-results-banner h3 {
    margin-top: 0;
    margin-bottom: 0.5rem;
    font-size: 1.1em;
    font-weight: bold;
}

.mcq-results-banner p {
    margin-bottom: 0;
} */