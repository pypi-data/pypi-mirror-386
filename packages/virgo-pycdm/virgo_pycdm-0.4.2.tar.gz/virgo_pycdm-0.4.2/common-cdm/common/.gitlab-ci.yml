format:
  stage: test
  image: ubuntu:latest
  needs: []
  before_script:
    - apt-get update && apt-get install -y clang-format-14 cppcheck
  script:
    - find . \( -name \*.cpp -o -name \*.hpp \) -print0 | xargs -0 -n 1 clang-format-14 --Werror -n --verbose
    - find . \( -name \*.cpp -o -name \*.hpp \) -print0 | xargs -0 /usr/bin/cppcheck --enable=warning --enable=performance --enable=portability --error-exitcode=1
  only:
    - merge_requests

