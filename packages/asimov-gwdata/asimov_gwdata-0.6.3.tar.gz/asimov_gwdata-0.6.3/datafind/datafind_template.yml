
#; ------------------------------------------
#; {{ production.name }}
#; ------------------------------------------
#; Datafind configuration file created by asimov
#; for {{ production.event.name}}.
#;

{%- if production.event.repository -%}
{%- assign repo_dir = production.event.repository.directory -%}
{%- else -%}
{%- assign repo_dir = "." -%}
{%- endif -%}
{%- assign meta = production.meta -%}
{%- assign sampler = production.meta['sampler'] -%}
{%- assign scheduler = production.meta['scheduler'] -%}
{%- assign likelihood = production.meta['likelihood'] -%}
{%- assign priors = production.meta['priors'] -%}
{%- assign data = production.meta['data'] -%}
{%- assign quality = production.meta['quality'] -%}
{%- assign ifos = production.meta['interferometers'] %}


interferometers: {{ ifos }}
time:
  start: {{ production.meta['event time'] | plus: -1 }} 
  end:  {{ production.meta['event time'] | plus: 1 }} 
  duration: {{ production.meta['file length'] | default: 32 }} 
data: {{ production.meta['download'] | default: "['frames']" }}
{% if production.meta contains 'source' %}
source:
  type: {{ production.meta['source']['type'] }}
  location: {{ production.meta['source']['location'] }}
  analysis: {{ production.meta['source']['analysis'] }}
{% endif %}
{% if production.meta contains 'locations' %}
locations:
  {% if production.meta['locations'] contains 'calibration directory' %}
  calibration directory: {{ production.meta['locations']['calibration directory'] }}
  {% endif %}
  {% if production.meta['locations'] contains 'datafind server' %}
  calibration directory: {{ production.meta['locations']['datafind server'] }}
  {% endif %}
{% endif %}

{% if production.meta contains 'virgo prefix' %}
virgo prefix: {{ production.meta['virgo prefix'] }}
{% endif %}
{% if production.meta contains 'virgo frametype' %}
virgo prefix: {{ production.meta['virgo frametype'] }}
{% endif %}
{% if production.meta contains 'virgo timestamp channel' %}
virgo prefix: {{ production.meta['virgo timestamp channel'] }}
{% endif %}




{%- if production.meta contains 'calibration version' %}
calibration version: {{ production.meta['calibration version'] }}
{%- endif %}
