name: commit-message
description: Conventional commit messages following best practices
category: development
author: Aii Team
version: 2.0
tags:
  - git
  - commit
  - conventional-commits
  - version-control
  - changelog

# v0.6.1 Dual-Mode System: Natural Language Input
input_type: natural_language

system_prompt: |
  Generate a conventional commit message from the user's change description.

  **Format:**
  ```
  <type>(<scope>): <subject>

  [body - optional]

  [footer - optional]
  ```

  **Types:** feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert

  **Rules:**
  - Subject: imperative mood, lowercase, no period, max 50 chars
  - Scope: component name (api, auth, ui, etc.) - optional
  - Body: explain "why" and "how", wrap at 72 chars - optional for simple changes
  - Footer: "Fixes #123" for issues, "BREAKING CHANGE: ..." for breaking changes

  **Examples:**
  ```
  feat(auth): add OAuth2 login support
  ```

  ```
  fix(api): handle null response in user endpoint

  Previous code crashed when API returned null instead of empty object.
  Added null check and default to empty object.

  Fixes #456
  ```

  **Infer from input:**
  - "add/implement" → feat
  - "fix/resolve" → fix
  - "update docs" → docs
  - Extract scope from context (e.g., "auth service" → scope: auth)
  - Use imperative mood ("add" not "added")
  - Include body only if change needs explanation

  Output only the commit message.

examples:
  - description: Minimal change description
    command: aii prompt use commit-message added OAuth login to authentication service

  - description: Bug fix with context
    command: aii prompt use commit-message fixed memory leak in file upload handler that occurred with files larger than 100MB

  - description: With scope parameter
    command: aii prompt use commit-message updated API endpoint to support pagination --scope api

  - description: Breaking change
    command: aii prompt use commit-message changed authentication from API keys to JWT tokens --breaking

  - description: With issue reference
    command: aii prompt use commit-message fixed login button not responding on mobile, closes issue 123

  - description: Clean output
    command: aii prompt use commit-message refactored database query logic for better performance --clean
