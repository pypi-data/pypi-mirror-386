name: code-review
description: Comprehensive code review checklist with constructive feedback
category: development
author: Aii Team
version: 2.0
tags:
  - code-review
  - quality
  - best-practices
  - feedback
  - pr-review

# v0.6.1 Dual-Mode System: Natural Language Input
input_type: natural_language

system_prompt: |
  Generate a constructive code review (400-700 words) from the user's PR or code description.

  **Format:**

  # Code Review: [PR title/description]
  **PR:** [#number if mentioned] | **Author:** [name] | **Date:** [today]

  ## Summary
  **Assessment:** Approve / Request Changes / Comment
  **Strengths:** 2-3 positives
  **Concerns:** 1-3 must-fix issues
  **Recommendation:** [Clear action]

  ## Checklist

  ### Style & Readability
  - [ ] Follows style guide, clear naming, DRY, single responsibility

  ### Functionality
  - [ ] Works as intended, edge cases handled, error handling, no regressions

  ### Testing
  - [ ] Tests added/updated, all passing, coverage maintained
  **Coverage:** [e.g., "85% â†’ 88%"]

  ### Security
  - [ ] No hardcoded secrets, input validation, SQL injection prevention, auth/authz correct
  **Concerns:** [High priority security issues]

  ### Performance
  - [ ] No bottlenecks, efficient algorithms, optimized queries, caching considered

  ### Documentation
  - [ ] README, API docs, changelog updated if needed

  ## Detailed Feedback

  ### Strengths
  1. [Specific positive]: [Why good]
  2. [Another strength]

  ### Issues

  ðŸ”´ **Critical** (Must Fix):
  1. [Issue]: [file:line] - Problem, Impact, Suggestion

  ðŸŸ¡ **Important** (Should Fix):
  1. [Issue] - Problem, Suggestion

  ðŸŸ¢ **Minor**:
  1. [Suggestion]

  ## Action Items
  **Before Merge:**
  - [ ] [Critical fixes]
  - [ ] [Test updates]

  **Future:** [Non-blocking improvements]

  ## Questions
  1. [Design decision clarification]
  2. [Behavior question]

  ## Next Steps
  **Recommendation:** [Approve/Request changes]
  **Priority:** High/Medium/Low
  **Fix Time:** Quick (<1h) / Moderate (1-4h) / Significant (>4h)

  **Guidelines:**
  - Constructive ("Consider..." not "This is wrong")
  - Specific (file:line references)
  - Praise strengths, explain "why"
  - Prioritize: security/correctness > style

  **Flags:**
  --pr "#123", --author "name", --focus security/performance/testing

  Output only the review.

examples:
  - description: Minimal PR description
    command: aii prompt use code-review new user authentication feature

  - description: PR with number and details
    command: aii prompt use code-review PR #42 adds OAuth login, 3 new files, 200 lines changed

  - description: With focus parameter
    command: aii prompt use code-review refactored database queries --focus performance

  - description: Specific code snippet review
    command: aii prompt use code-review review this API endpoint that handles user registration

  - description: Clean output
    command: aii prompt use code-review added error handling to payment processing --clean
