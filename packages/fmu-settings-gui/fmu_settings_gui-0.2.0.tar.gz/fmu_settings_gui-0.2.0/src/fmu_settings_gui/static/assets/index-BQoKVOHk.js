import{t as ue,r as h,u as he,b as pe,j as e,o as me,d as b,c as xe,l as ye,s as je,e as H,f as Se,g as Pe,P as O,a as g,h as Ce,L as se,i as L,I as fe,k as A,m as E,y as Q,E as N,D as l,n as P,T as we,p as K,q as _e,v as z,w as ke,x as Fe,B as ge,z as Te,A as Re,C as $,F as be,G as Ie,H as Ae,J as Ee}from"./index-Cxh88Jww.js";import{L as Ne,G as ve,c as V,r as I,I as W,f as G,a as U,T as J,C as B,S as X,u as ze,b as Be,d as qe}from"./validator-DIfk4gqH.js";const{colors:y,spacings:{comfortable:{small:ne,x_small:oe}},typography:De,shape:Me}=ue,p={background:y.ui.background__light.rgba,typography:{...De.input.text,color:y.text.static_icons__default.rgba},entities:{input:{spacings:{left:ne,right:ne,top:"6px",bottom:"6px"}},icon:{width:"24px"}},boxShadow:"inset 0 -1px 0 0 "+y.text.static_icons__tertiary.rgba,states:{focus:{outline:{type:"outline",width:"2px",color:y.interactive.primary__resting.rgba,style:"solid",offset:"0px"}},disabled:{typography:{color:y.interactive.disabled__text.rgba}}},modes:{compact:{minHeight:Me._modes.compact.straight.minHeight,entities:{input:{spacings:{left:oe,right:oe,top:"0",bottom:"0"}}}}}},He=b.div.withConfig({displayName:"NativeSelect__Container",componentId:"sc-82vb16-0"})(["min-width:100px;width:100%;"]),$e=b.select.withConfig({displayName:"NativeSelect__StyledSelect",componentId:"sc-82vb16-1"})(["border:none;border-radius:0;box-shadow:",";"," "," padding-right:calc("," *2 + ",");display:block;margin:0;appearance:none;background-image:"," linear-gradient( to bottom,"," 0%,"," 100% );background-repeat:no-repeat,repeat;background-position:right "," top 50%;width:100%;&:active,&:focus{box-shadow:none;","}&:disabled{color:",`;background-image:url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23bebebe' d='M7 9.5l5 5 5-5H7z'/%3E%3C/svg%3E"),linear-gradient( to bottom,`," 0%,"," 100% );cursor:not-allowed;box-shadow:none;outline:none;.arrow-icon{fill:red;}&:focus,&:active{outline:none;}}"],p.boxShadow,xe(p.typography),({theme:t})=>ye(["height:",";",""],t.minHeight,je(t.entities.input.spacings)),p.entities.input.spacings.right,p.entities.icon.width,t=>t.multiple?"":`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%236f6f6f' d='M7 9.5l5 5 5-5H7z'/%3E%3C/svg%3E"),`,p.background,p.background,p.entities.input.spacings.right,H(p.states.focus.outline),p.states.disabled.typography.color,p.background,p.background),Oe=h.forwardRef(function({label:n,children:o,className:i,style:c,selectRef:d,id:u,meta:a,disabled:s=!1,multiple:r=!1,...j},f){const{density:C}=he(),w=pe({density:C},p),v={ref:f,className:i,style:c},q={ref:d,id:u,disabled:s,multiple:r,...j},D={htmlFor:u,label:n,meta:a,disabled:s},M=n||a;return e.jsx(me,{theme:w,children:e.jsxs(He,{...v,children:[M&&e.jsx(Ne,{...D}),e.jsx($e,{...q,children:o})]})})}),{colors:{interactive:{primary__resting:{rgba:Le},primary__hover_alt:{rgba:Qe},focus:{rgba:ie},disabled__text:{rgba:Ke}}},typography:{navigation:{menu_title:Ve}},spacings:{comfortable:{medium_small:T,x_small:R,x_large:We,xx_large:Ge}},clickbounds:{default__base:Ue,compact__standard:Je},interactions:{focused:{width:re}}}=ue,S={background:Le,typography:Ve,width:Ge,spacings:{bottom:T,top:T,left:T,right:T},clickbound:{height:Ue},states:{hover:{background:Qe},disabled:{background:Ke},focus:{outline:{type:"outline",style:"dashed",width:re,color:ie,offset:"10px"}}},modes:{compact:{width:We,spacings:{bottom:R,top:R,left:R,right:R},clickbound:{height:Je},states:{focus:{outline:{type:"outline",style:"dashed",width:re,color:ie,offset:"2px"}}}}}},ae=b.input.attrs(({type:t="radio"})=>({type:t})).withConfig({displayName:"Radio__Input",componentId:"sc-we59oz-0"})(["--scale:",";appearance:none;width:100%;height:100%;margin:0;grid-area:input;transform:scale(var(--scale));cursor:",";&:focus{outline:none;}&[data-focus-visible-added]:focus + svg{","}&:focus-visible + svg{","}&:not(:checked) ~ svg path[name='selected']{display:none;}&:not(:checked) ~ svg path[name='unselected']{display:inline;}&:checked ~ svg path[name='unselected']{display:none;}&:checked ~ svg path[name='selected']{display:inline;}"],({theme:t,$iconSize:n})=>parseFloat(t.clickbound.height)/n,({disabled:t})=>t?"not-allowed":"pointer",({theme:t})=>H(t.states.focus.outline),({theme:t})=>H(t.states.focus.outline)),Xe=b.label.withConfig({displayName:"Radio__StyledLabel",componentId:"sc-we59oz-1"})(["display:inline-flex;align-items:center;cursor:",";"],({$disabled:t})=>t?"not-allowed":"pointer"),ce=b.path.attrs(({$icon:t})=>({fillRule:"evenodd",clipRule:"evenodd",d:t.svgPathData})).withConfig({displayName:"Radio__StyledPath",componentId:"sc-we59oz-2"})([""]),Ye=b.svg.attrs(({height:t,width:n,fill:o})=>({name:null,xmlns:"http://www.w3.org/2000/svg",height:t,width:n,fill:o})).withConfig({displayName:"Radio__Svg",componentId:"sc-we59oz-3"})(["grid-area:input;pointer-events:none;"]),Ze=b.span.withConfig({displayName:"Radio__LabelText",componentId:"sc-we59oz-4"})(["",""],xe(S.typography)),le=b.span.withConfig({displayName:"Radio__InputWrapper",componentId:"sc-we59oz-5"})([""," display:inline-grid;grid:[input] 1fr / [input] 1fr;position:relative;isolation:isolate;cursor:",";&::before{content:'';position:absolute;width:",";aspect-ratio:1/1;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:100%;}@media (hover:hover) and (pointer:fine){> svg{z-index:1;}&:hover{&::before{background-color:",";}}}"],({theme:t})=>je(t.spacings),({disabled:t})=>t?"not-allowed":"pointer",({theme:t})=>t.width,({disabled:t})=>t?"transparent":S.states.hover.background),Y=h.forwardRef(function({label:n,disabled:o=!1,className:i,style:c,...d},u){const{density:a}=he(),s=pe({density:a},S),r=24,j=o?S.states.disabled.background:S.background,f=h.useMemo(()=>e.jsxs(Ye,{width:r,height:r,viewBox:`0 0 ${r} ${r}`,fill:j,"aria-hidden":!0,children:[e.jsx(ce,{$icon:Se,name:"selected"}),e.jsx(ce,{$icon:Pe,name:"unselected"})]}),[j]);return e.jsx(me,{theme:s,children:n?e.jsxs(Xe,{$disabled:o,className:i,style:c,children:[e.jsxs(le,{disabled:o,children:[e.jsx(ae,{...d,ref:u,disabled:o,$iconSize:r}),f]}),e.jsx(Ze,{children:n})]}):e.jsxs(le,{disabled:o,className:i,style:c,children:[e.jsx(ae,{...d,ref:u,disabled:o,$iconSize:r}),f]})})});Y.displayName="Radio";const{useAppForm:et}=V({fieldComponents:{TextField:J,Radio:Y},formComponents:{SubmitButton:X,CancelButton:B},fieldContext:G,formContext:U});function tt({accessData:t,isDialogOpen:n,setIsDialogOpen:o}){const i=({formReset:s})=>{s(),o(!1)},c=A(),{mutate:d,isPending:u}=E({..._e(),onSuccess:()=>{c.invalidateQueries({queryKey:z()})}}),a=et({defaultValues:{assetName:(t==null?void 0:t.asset.name)??"",classification:(t==null?void 0:t.classification)??""},onSubmit:({value:s,formApi:r})=>{d({body:{asset:{name:s.assetName.trim()},classification:s.classification}},{onSuccess:()=>{Q.info("Successfully set access information"),i({formReset:r.reset})}})}});return e.jsx(N,{open:n,children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),a.handleSubmit()},children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Access"})}),e.jsxs(l.Content,{children:[e.jsx(a.AppField,{name:"assetName",validators:{onBlur:I()},children:s=>e.jsx(s.TextField,{label:"Sumo target asset"})}),e.jsx(P,{}),e.jsx(a.AppField,{name:"classification",validators:{onChange:I()},children:s=>e.jsx(W,{label:"Default security classification",color:"error",helperProps:{text:s.state.meta.isValid?"":"Required",icon:e.jsx(K,{name:"error_filled",size:16})},children:["internal","restricted"].map(r=>e.jsx(we,{title:r==="internal"?"Requires READ access to the asset":"Requires WRITE access to the asset",children:e.jsx("span",{children:e.jsx(Y,{label:r,checked:s.state.value===r,onChange:()=>{s.handleChange(r)}})})},r))})})]}),e.jsxs(l.Actions,{children:[e.jsx(a.Subscribe,{selector:s=>[s.isDefaultValue,s.canSubmit],children:([s,r])=>e.jsx(a.SubmitButton,{label:"Save",disabled:s||!r,isPending:u})}),e.jsx(a.CancelButton,{onClick:s=>{s.preventDefault(),i({formReset:a.reset})}})]})]})})}function st({accessData:t}){return e.jsx(fe,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Sumo target asset"}),e.jsx("td",{children:t.asset.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Default classification"}),e.jsx("td",{children:t.classification})]})]})})})}function nt({projectData:t}){const[n,o]=h.useState(!1),i=t.config.access;return e.jsxs(e.Fragment,{children:[e.jsx(O,{$variant:"h3",children:"Access control"}),e.jsx(g,{children:"This section is used to configure access permissions for data exported from the project."}),e.jsxs(g,{children:["The ",e.jsx("i",{children:"asset"})," specifies the target asset in Sumo where data will be uploaded. The ",e.jsx("i",{children:"classification"})," sets the default information classification for the data."]}),e.jsxs(Ce,{children:[e.jsxs(se.Item,{children:["internal - requires ",e.jsx("i",{children:"READ"})," access to the asset"]}),e.jsxs(se.Item,{children:["restricted - requires ",e.jsx("i",{children:"WRITE"})," access to the asset"]})]}),e.jsxs(g,{children:["Read more about access control in the"," ",e.jsx("a",{href:"https://doc-sumo-doc-prod.radix.equinor.com/documentation/access_control",target:"_blank",rel:"noopener noreferrer",children:"Sumo documentation"})]}),i?e.jsx(st,{accessData:i}):e.jsx(L,{children:"No access information found in the project"}),e.jsx(ve,{label:i?"Edit":"Add",onClick:()=>{o(!0)}}),e.jsx(tt,{accessData:i,isDialogOpen:n,setIsDialogOpen:o})]})}const{useAppForm:ot}=V({fieldComponents:{TextField:J},formComponents:{SubmitButton:X,CancelButton:B},fieldContext:G,formContext:U});function it({modelData:t,isDialogOpen:n,setIsDialogOpen:o}){const i=({formReset:s})=>{s(),o(!1)},c=A(),{mutate:d,isPending:u}=E({...Fe(),onSuccess:()=>{c.invalidateQueries({queryKey:z()})}}),a=ot({defaultValues:{modelName:(t==null?void 0:t.name)??"",modelRevision:(t==null?void 0:t.revision)??""},onSubmit:({value:s,formApi:r})=>{d({body:{name:s.modelName.trim(),revision:s.modelRevision.trim()}},{onSuccess:()=>{Q.info("Successfully set model information"),i({formReset:r.reset})}})}});return e.jsx(N,{open:n,children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),a.handleSubmit()},children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Model"})}),e.jsxs(l.Content,{children:[e.jsx(a.AppField,{name:"modelName",validators:{onBlur:I()},children:s=>e.jsx(s.TextField,{label:"Name"})}),e.jsx(P,{}),e.jsx(a.AppField,{name:"modelRevision",validators:{onBlur:I()},children:s=>e.jsx(s.TextField,{label:"Revision"})})]}),e.jsxs(l.Actions,{children:[e.jsx(a.Subscribe,{selector:s=>[s.isDefaultValue,s.canSubmit],children:([s,r])=>e.jsx(a.SubmitButton,{label:"Save",disabled:s||!r,isPending:u})}),e.jsx(a.CancelButton,{onClick:s=>{s.preventDefault(),i({formReset:a.reset})}})]})]})})}function rt({modelData:t}){return e.jsx(fe,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("td",{children:t.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Revision"}),e.jsx("td",{children:e.jsx(ke,{children:t.revision})})]})]})})})}function at({projectData:t}){const[n,o]=h.useState(!1),i=t.config.model;return e.jsxs(e.Fragment,{children:[e.jsx(O,{$variant:"h3",children:"Model"}),e.jsx(g,{children:"This section contains information about the model."}),e.jsxs(g,{children:["Each model needs a ",e.jsx("i",{children:"name"})," and ",e.jsx("i",{children:"revision"}),", usually matching your project's directory structure. For example, for the project path /project/field/resmod/ff/25.0.0/ the name would be ",e.jsx("i",{children:"ff"})," and the revision ",e.jsx("i",{children:"25.0.0"}),"."]}),i?e.jsx(rt,{modelData:i}):e.jsx(L,{children:"No model information found in the project."}),e.jsx(ve,{label:i?"Edit":"Add",onClick:()=>{o(!0)}}),e.jsx(it,{modelData:i,isDialogOpen:n,setIsDialogOpen:o})]})}const{useAppForm:ct}=V({fieldComponents:{RecentProjectSelect:dt,TextField:J},formComponents:{ConfirmInitProjectDialog:ut,SubmitButton:X,CancelButton:B},fieldContext:G,formContext:U});function lt({closeDialog:t,isDialogOpen:n}){const[o,i]=h.useState(!1),[c,d]=h.useState(!0),[u,a]=h.useState(""),[s,r]=h.useState(""),[j,f]=h.useState(""),C=[403,404,409],w=({formReset:x})=>{a(""),r(""),f(""),x(),t()},v=A(),{mutate:q,isPending:D}=E({...Ie(),onSuccess:()=>{v.invalidateQueries({queryKey:z()}),v.invalidateQueries({queryKey:$()})},meta:{preventDefaultErrorHandling:C}}),{data:M}=Te(Re()),m=ct({defaultValues:{projectPath:"",recentProjectPath:""},onSubmit:({value:x,formApi:Z})=>{const _=j==="recentProjectPath"?x.recentProjectPath:x.projectPath;q({body:{path:_}},{onSuccess:()=>{Q.info(`Successfully set project ${_}`),w({formReset:Z.reset})},onError:ee=>{var te;const k=((te=ee.response)==null?void 0:te.data).detail,F=ee.status;if(F&&C.includes(F)){if(F===404&&k===`No .fmu directory found at ${_}`){i(!0);return}j==="recentProjectPath"?a(k):j==="projectPath"&&r(k),F===404&&k===`Path ${_} does not exist`&&(v.invalidateQueries({queryKey:$()}),j==="recentProjectPath"&&(Z.resetField("recentProjectPath"),f("projectPath")))}}})}});return h.useEffect(()=>{r("")},[m.state.values.projectPath]),e.jsx(N,{open:n,$minWidth:"40em",children:e.jsxs("form",{onSubmit:x=>{x.preventDefault(),x.stopPropagation(),m.handleSubmit()},children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Select project"})}),e.jsxs(l.CustomContent,{children:[e.jsx(m.AppField,{name:"recentProjectPath",listeners:{onBlur:()=>{a("")},onChange:()=>{f("recentProjectPath"),m.handleSubmit()}},children:x=>e.jsx(x.RecentProjectSelect,{recentProjects:M.recent_project_directories,helperText:u})}),e.jsx(P,{}),e.jsx(m.AppField,{name:"projectPath",listeners:{onBlur:()=>{r("")},onChange:()=>{f("projectPath")}},children:x=>e.jsx(W,{color:"error",helperProps:{text:s,icon:e.jsx(K,{data:be,size:18})},children:e.jsx(x.TextField,{label:"Alternatively, enter a path to the project",setSubmitDisabled:d})})}),e.jsx(m.AppForm,{children:e.jsx(m.ConfirmInitProjectDialog,{isOpen:o,closeDialog:()=>{i(!1)},valueSource:j})})]}),e.jsx(l.Actions,{children:e.jsxs(m.AppForm,{children:[e.jsx(m.SubmitButton,{label:"Select",disabled:c,isPending:D}),e.jsx(m.CancelButton,{onClick:()=>{w({formReset:m.reset})}})]})})]})})}function dt({recentProjects:t,helperText:n}){const o=ze(),i=t.length===0;return e.jsx(W,{color:"error",helperProps:{text:n,icon:e.jsx(K,{data:be,size:18})},children:e.jsx(Oe,{label:"Select from recent projects",id:"recent-projects",size:5,disabled:i,value:i?[]:[o.state.value],onChange:c=>{o.handleChange(c.target.value)},onBlur:()=>{o.handleBlur()},multiple:!0,children:t.map(c=>e.jsx("option",{value:c,children:c},c))})})}function ut({isOpen:t,closeDialog:n,valueSource:o}){const i=A(),{mutate:c}=E({...Ae(),onSuccess:()=>{i.invalidateQueries({queryKey:z()}),i.invalidateQueries({queryKey:$()})}}),d=Be(),u=o==="projectPath"?d.store.state.values.projectPath:d.store.state.values.recentProjectPath,a=s=>{c({body:{path:s}},{onSuccess:()=>{n(),d.handleSubmit()},onError:()=>{n()}})};return e.jsxs(N,{open:t,children:[e.jsx(l.Header,{children:e.jsx(l.Title,{children:"Initialize project"})}),e.jsxs(l.CustomContent,{children:[e.jsxs(g,{bold:!0,children:[" ",u," "]}),e.jsxs(g,{children:["This project needs to be initialized to use FMU settings.",e.jsx("br",{}),"Would you like to initialize?"]})]}),e.jsxs(l.Actions,{children:[e.jsx(ge,{onClick:()=>{a(u)},children:"OK"}),e.jsx(B,{onClick:n})]})]})}function de(){const[t,n]=h.useState(!1),o=()=>{n(!0)},i=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(ge,{onClick:o,children:"Select project"}),e.jsx(lt,{closeDialog:i,isDialogOpen:t})]})}function ht(t){const n=Date.parse(t);return n?new Date(n).toUTCString():"(unknown)"}const pt=b.span`
  font-weight: bold;
`;function mt({projectData:t}){return e.jsxs(g,{children:["Project: ",e.jsx(pt,{children:t.project_dir_name}),e.jsx("br",{}),"Path: ",t.path,e.jsx("br",{}),"Created: ",ht(t.config.created_at)," by"," ",t.config.created_by,e.jsx("br",{}),"Version: ",t.config.version]})}function xt({text:t}){const n=t!=="",o="No project selected"+(n?":":".");return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:o}),n&&e.jsx(L,{children:t})]})}function jt(){const{data:t}=Ee();return e.jsx(e.Fragment,{children:t.status&&t.data?e.jsxs(e.Fragment,{children:[e.jsx(mt,{projectData:t.data}),e.jsx(de,{}),e.jsx(P,{}),e.jsx(at,{projectData:t.data}),e.jsx(P,{}),e.jsx(nt,{projectData:t.data})]}):e.jsxs(e.Fragment,{children:[e.jsx(xt,{text:t.text??""}),e.jsx(de,{})]})})}const bt=function(){return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:"Project"}),e.jsx(h.Suspense,{fallback:e.jsx(qe,{}),children:e.jsx(jt,{})})]})};export{bt as component};
