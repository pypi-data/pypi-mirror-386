# 路线图: v0.2.0 - 奠定基石

## 1. v0.2.0 版本目标

v0.2.0 的核心目标是完成 Canify 架构的重大升级，从一个简单的命令行工具演变为一个强大的、基于后台守护进程 (daemon) 的实时验证引擎。此版本为未来的功能扩展（如远程验证和高级 IDE 集成）奠定了坚实、可靠的基础。

## 2. 已完成的核心架构特性

- **[已完成] 实现 `cli-daemon` 架构**
  - **描述**: 彻底分离了前端交互 (CLI) 与后端逻辑 (Daemon)。CLI 变为一个轻量级的命令发送器，而 Daemon 则作为持续运行的后台服务，处理所有重量级任务。
  - **价值**: 实现了即时文件监听和实时验证，极大地提升了响应速度和用户体验。

- **[已完成] 建立持久化符号表**
  - **描述**: 引入了基于 SQLite 的本地数据库 (`~/.canify/canify.db`) 来存储项目的所有符号信息（实体、引用、规约等）。
  - **价值**: 支持对文件变更进行快速的增量更新，避免了每次运行时都需全量解析项目的性能瓶颈，为大型项目提供了支持。

- **[已完成] 定义稳定的 IPC 通信协议**
  - **描述**: 设计并实现了一套基于 JSON-RPC 的内部通信协议，用于 CLI 和 Daemon 之间的稳定通信。
  - **价值**: 确保了前后端进程的解耦，为未来可能的第三方客户端或插件集成提供了标准接口。

## 3. 已完成的核心功能

- **[已完成] 多阶段验证命令**
  - **描述**: 提供了 `lint`、`verify` 和 `validate` 三个核心命令，分别对应不同深度的验证需求。
  - **价值**: 用户可以根据需要选择合适的验证级别，在效率和深度之间取得平衡。

- **[已完成] 核心符号的解析与建模**
  - **描述**: 实现了对 Markdown 文件中的实体 (Entity) 和引用 (Reference)，以及 Python 文件中的模式 (Schema) 的解析和建模。
  - **价值**: 构建了项目的核心知识图谱。

- **[已完成] 业务规约 (Spec) 执行引擎**
  - **描述**: 能够解析 `spec_*.yaml` 文件，并调用其中定义的 Python `fixture` 和 `test_case` 函数来执行复杂的业务规则验证。
  - **价值**: 这是 Canify 实现“文档即代码”闭环的关键，使得业务逻辑能够被自动化地、持续地验证。

- **[已完成] 基于标签的规约过滤系统**
  - **描述**: `validate` 命令支持 `--tags` 参数，可通过布尔表达式（支持 `and`, `or`, `not`）精确选择要执行的规约。
  - **价值**: 提供了高度的灵活性，允许用户或 CI/CD 流水线根据场景执行特定的规则子集。

## 4. v0.2.0 版本未包含的范围

为了确保 v0.2.0 版本的稳定性和核心目标的达成，以下功能被明确排除在此次发布之外，并计划在未来的版本中实现：

- **远程验证执行器**: 用于执行标记为 `remote` 的规约的独立 `server` 组件。
- **高级 Git 集成**: 例如基于 Git 历史进行知识图谱的回溯和比对。
- **完整的语言服务器协议 (LSP) 支持**: 用于实现高级 IDE 功能（如跨文件自动补全）。