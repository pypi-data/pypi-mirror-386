# JPSI_PDG_MASS = 3096.90 # https://pdg.lbl.gov/2018/listings/rpp2018-list-J-psi-1S.pdf
# BPLS_PDG_MASS = 5279.34 # https://pdg.lbl.gov/2022/tables/rpp2022-tab-mesons-bottom.pdf

# TODO: Remove this when friend trees be ready
temporary_definitions:
  q2_smr                  : q2
  Jpsi_Mass               : Jpsi_M
  Jpsi_Mass_smr           : Jpsi_M
  B_Mass                  : B_M
  B_Mass_smr              : B_M
  mva_cmb                 : '1.0'
  mva_prc                 : '1.0'
  B_M_brem_track_2        : B_M
  hop_mass                : B_M
  hop_alpha               : '1.0'
  swp_cascade_mass_swp    : B_M
  swp_jpsi_misid_mass_swp : B_M

TRUEM:
  Bu : 'ROOT::Math::XYZVector L1_3D(L1_TRUEPX, L1_TRUEPY, L1_TRUEPZ); auto L1_truept=L1_3D.Rho(); auto L1_trueeta=L1_3D.Eta(); auto L1_truephi=L1_3D.Phi();
        ROOT::Math::XYZVector L2_3D(L2_TRUEPX, L2_TRUEPY, L2_TRUEPZ); auto L2_truept=L2_3D.Rho(); auto L2_trueeta=L2_3D.Eta(); auto L2_truephi=L2_3D.Phi();
        ROOT::Math::XYZVector H1_3D(H1_TRUEPX, H1_TRUEPY, H1_TRUEPZ); auto H1_truept=H1_3D.Rho(); auto H1_trueeta=H1_3D.Eta(); auto H1_truephi=H1_3D.Phi();
        ROOT::Math::XYZVector H2_3D(H2_TRUEPX, H2_TRUEPY, H2_TRUEPZ); auto H2_truept=H2_3D.Rho(); auto H2_trueeta=H2_3D.Eta(); auto H2_truephi=H2_3D.Phi();

        ROOT::Math::PtEtaPhiM4D<double> L1_4DP(L1_truept, L1_trueeta, L1_truephi, 0.511);
        ROOT::Math::PtEtaPhiM4D<double> L2_4DP(L2_truept, L2_trueeta, L2_truephi, 0.511);
        ROOT::Math::PtEtaPhiM4D<double> H1_4DP(H1_truept, H1_trueeta, H1_truephi, 493.7);
        ROOT::Math::PtEtaPhiM4D<double> H2_4DP(H2_truept, H2_trueeta, H2_truephi, 139.5);

        ROOT::Math::LorentzVector<ROOT::Math::PtEtaPhiM4D<double>> L1_4D(L1_4DP);
        ROOT::Math::LorentzVector<ROOT::Math::PtEtaPhiM4D<double>> L2_4D(L2_4DP);
        ROOT::Math::LorentzVector<ROOT::Math::PtEtaPhiM4D<double>> H1_4D(H1_4DP);
        ROOT::Math::LorentzVector<ROOT::Math::PtEtaPhiM4D<double>> H2_4D(H2_4DP);

        auto bzer_4d = L1_4D + L2_4D + H1_4D + H2_4D;
        auto val     = bzer_4d.M(); return val!=val ? 5279.65 : val'
  # -------------------
