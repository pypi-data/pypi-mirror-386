# massgen --config massgen/configs/tools/custom_tools/multimodal_tools/playwright_with_img_understanding.yaml "Analyze docs.massgen.ai and tell me how to improve its design."

agents:
- id: agent_a
  backend:
    type: openai
    model: gpt-5-codex
    text:
      verbosity: medium
    reasoning:
      effort: medium
      summary: auto
    cwd: workspace1
    enable_mcp_command_line: true
    command_line_execution_mode: docker
    command_line_docker_network_mode: "bridge"      # Enable network access (default: none)
    enable_web_search: true
    custom_tools:
      - name: ["understand_image"]
        category: "multimodal"
        path: "massgen/tool/_multimodal_tools/understand_image.py"
        function: ["understand_image"]
    mcp_servers:
        playwright:
          type: "stdio"
          command: "npx"
          args: [
            "@playwright/mcp@latest",
            "--browser=chrome",  # Use Chrome browser
            "--caps=vision,pdf", # Enable vision and PDF capabilities
            "--user-data-dir=${cwd}/playwright-profile", # Persistent browser profile within workspace
            "--output-dir=${cwd}", # Save screenshots/PDFs directly to workspace
            # "--save-trace"       # Save Playwright traces for debugging
          ]

- id: agent_b
  backend:
    type: claude_code
    model: claude-sonnet-4-5-20250929
    cwd: workspace2
    enable_mcp_command_line: true
    command_line_execution_mode: docker
    command_line_docker_network_mode: "bridge"      # Enable network access (default: none)
    custom_tools:
      - name: ["understand_image"]
        category: "multimodal"
        path: "massgen/tool/_multimodal_tools/understand_image.py"
        function: ["understand_image"]
    mcp_servers:
        playwright:
          type: "stdio"
          command: "npx"
          args: [
            "@playwright/mcp@latest",
            "--browser=chrome",  # Use Chrome browser
            "--caps=vision,pdf", # Enable vision and PDF capabilities
            "--user-data-dir=${cwd}/playwright-profile", # Persistent browser profile within workspace
            "--output-dir=${cwd}", # Save screenshots/PDFs directly to workspace
            # "--save-trace"       # Save Playwright traces for debugging
          ]

- id: agent_c
  backend:
    type: chatcompletion
    base_url: "https://openrouter.ai/api/v1"
    model: qwen/qwen3-coder
    cwd: workspace3
    enable_mcp_command_line: true
    command_line_execution_mode: docker
    command_line_docker_network_mode: "bridge"      # Enable network access (default: none)
    custom_tools:
      - name: ["understand_image"]
        category: "multimodal"
        path: "massgen/tool/_multimodal_tools/understand_image.py"
        function: ["understand_image"]
    mcp_servers:
        playwright:
          type: "stdio"
          command: "npx"
          args: [
            "@playwright/mcp@latest",
            "--browser=chrome",  # Use Chrome browser
            "--caps=vision,pdf", # Enable vision and PDF capabilities
            "--user-data-dir=${cwd}/playwright-profile", # Persistent browser profile within workspace
            "--output-dir=${cwd}", # Save screenshots/PDFs directly to workspace
            # "--save-trace"       # Save Playwright traces for debugging
          ]

ui:
  display_type: rich_terminal
  logging_enabled: true
orchestrator:
  snapshot_storage: snapshots
  agent_temporary_workspace: temp_workspaces
  session_storage: sessions
  # voting_sensitivity: balanced
  max_new_answers_per_agent: 5
  # answer_novelty_requirement: balanced
