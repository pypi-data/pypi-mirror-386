{%- set context = notification.context -%}
{%- set record = context.record -%}
{%- set record_pid = context.record_pid -%}
{%- set receiver = recipient.data -%}
{%- set account_settings_link = invenio_url_for("invenio_notifications_settings.index") %}

{#- Subject line for emails #}
{%- block subject -%}
    {{ context.subject }}
{%- endblock subject %}

{#- HTML body for emails #}
{%- block html_body -%}
<p>
    Hey, {{ receiver.profile.given_name or receiver.profile.full_name or receiver.username }}!
</p>
<p>
    Your record "{{ record.metadata.title }}" just got published!
    <br />
    It is now available under the following {{ record_pid.type }}: <a href="{{ record_pid.url }}">{{ record_pid.url }}</a>
</p>
<p>
    Metadata edits for this record will <em>not</em> require another review.
</p>
<hr />
<p style="font-size:smaller;">
    {%- trans account_settings_link=account_settings_link -%}
    This is an auto-generated message. To manage notifications, visit your <a href="{{ account_settings_link }}">account settings</a>.
    {%- endtrans -%}
</p>
{%- endblock html_body -%}

{#- Plaintext body for emails #}
{%- block plain_body -%}
Hey, {{ receiver.profile.given_name or receiver.profile.full_name or receiver.username }}!

Your record "{{ record.metadata.title }}" just got published!
It is now available under the following {{ record_pid.type }}: {{ record_pid.url }}

Metadata edits for this record will *not* require another review.

{%- trans account_settings_link=account_settings_link -%}
This is an auto-generated message. To manage notifications, visit your account settings: {{ account_settings_link }}
{%- endtrans -%}
{%- endblock plain_body -%}

{#- Markdown body for chat #}
{%- block md_body -%}
Hey, {{ receiver.profile.given_name or receiver.profile.full_name or receiver.username }}!

Your record "{{ record.metadata.title }}" just got published!
It is now available under the following {{ record_pid.type }}: [{{ record_pid.url }}]({{ record_pid.url }})

Metadata edits for this record will *not* require another review.

{%- trans account_settings_link=account_settings_link -%}
This is an auto-generated message. To manage notifications, visit your [account settings]({{ account_settings_link }}).
{%- endtrans -%}
{%- endblock md_body -%}
