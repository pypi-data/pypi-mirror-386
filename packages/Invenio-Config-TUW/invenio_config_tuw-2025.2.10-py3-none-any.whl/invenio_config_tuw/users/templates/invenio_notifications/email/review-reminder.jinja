{%- set context = notification.context -%}
{%- set publisher = context.publisher -%}
{%- set requests = context.requests -%}
{%- set receiver = recipient.data -%}
{%- set account_settings_link = invenio_url_for("invenio_notifications_settings.index") %}

{#- Subject line for emails #}
{%- block subject -%}
    {{ context.subject }}
{%- endblock subject %}

{#- HTML body for emails #}
{%- block html_body -%}
<p>
    Hey, {{ receiver.profile.given_name or receiver.profile.full_name or receiver.username }}!
</p>
<p>
    <strong>Reminder:</strong>
    Please review the following requests, they've been waiting for a response for a while:
</p>
<p>
    <ul>
        {%- for request in requests -%}
        <li>"<a href="{{ request.request_url }}">{{ request.request.title }}</a>"</li>
        {%- endfor -%}
    </ul>
</p>
<hr />
<p style="font-size:smaller;">
    {%- trans account_settings_link=account_settings_link -%}
    This is an auto-generated message. To manage notifications, visit your <a href="{{ account_settings_link }}">account settings</a>.
    {%- endtrans -%}
</p>
{%- endblock html_body -%}

{#- Plaintext body for emails #}
{%- block plain_body -%}
Hey, {{ receiver.profile.given_name or receiver.profile.full_name or receiver.username }}!

*Reminder* - Please review the following requests, they've been waiting for a response for a while:

{%- for request in requests +%}
* "{{ request.request.title }}": {{ request.request_url }}
{%- endfor +%}

{%+ trans account_settings_link=account_settings_link -%}
This is an auto-generated message. To manage notifications, visit your account settings: {{ account_settings_link }}
{%- endtrans -%}
{%- endblock plain_body -%}

{#- Markdown body for chat #}
{%- block md_body -%}
Hey, {{ receiver.profile.given_name or receiver.profile.full_name or receiver.username }}!

**Reminder:** Please review the following requests, they've been waiting for a response for a while:

{%- for request in requests +%}
* "{{ request.request.title }}": {{ request.request_url }}
{%- endfor +%}

{%+ trans account_settings_link=account_settings_link -%}
This is an auto-generated message. To manage notifications, visit your [account settings]({{ account_settings_link }}).
{%- endtrans -%}
{%- endblock md_body -%}
