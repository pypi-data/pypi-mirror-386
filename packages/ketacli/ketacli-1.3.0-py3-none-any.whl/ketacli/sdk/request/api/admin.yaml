nodes:
  path: admin/internal/_cat/nodes
  desc: 节点
  methods:
    list:
      path: admin/internal/_cat/nodes
      method: get
      default_fields:
      - name: name
        alias: 名称
      - name: ip
        alias: IP
      - name: load_1m
        alias: 1分钟负载
      - name: load_5m
        alias: 5分钟负载
      - name: load_15m
        alias: 15分钟负载
      - name: heap.percent
        alias: 堆内存占用百分比
      - name: ram.percent
        alias: 内存占用百分比
      - name: cpu
        alias: CPU占用百分比
      - name: node.role
        alias: 节点角色
      - name: master
        alias: 主节点
    get:
      path: admin/internal/_nodes/{{ name }}/settings
      method: get
  query_fields:
  - field: h
    required: false
    default: name
  - field: format
    required: true
    default: json
  use_default_query_params: false
  show_describe: false

disk:
  path: admin/disk/explain
  desc: 磁盘
  methods:
    list: 
      path: admin/disk/explain
      method: get
      default_fields:
        - name: settings.diskThresholdLow
          alias: 低水位阈值
        - name: settings.diskThresholdHigh
          alias: 高水位阈值
        - name: settings.diskThresholdFlood
          alias: 洪水阈值
        - name: nodeCount
          alias: 节点数量
        - name: healthyNodeCount
          alias: 健康节点数量
        - name: unhealthyNodeCount
          alias: 不健康节点数量
        - name: subHealthyNodeCount
          alias: 子健康节点数量
      query_fields:
      - field: nodeInfo
        required: true
        default: 'false'
      - field: diskInfo
        required: true
        default: 'true'
  use_default_query_params: false
  show_describe: false

indices:
  path: admin/internal/_cat/indices
  desc: 分片
  methods:
    list:
      path: admin/internal/_cat/indices
      method: get
      default_fields:
        - name: uuid
          alias: 索引UUID
        - name: index
          alias: 索引名称
        - name: index_type
          alias: 索引类型
        - name: pri
          alias: 主分片数量
        - name: rep
          alias: 副本分片数量
        - name: docs.count
          alias: 文档数量
        - name: docs.deleted
          alias: 删除文档数量
        - name: store.size
          alias: 索引大小
        - name: pri.store.size
          alias: 主分片大小
        - name: health
          alias: 健康状态
        - name: status
          alias: 状态
        
    get:
      path: admin/internal/{{ name }}/_settings
      method: get
    close:
      path: admin/internal/{{ name }}/_close
      method: post
    open:
      path: admin/internal/{{ name }}/_open
      method: post
    delete:
      path: admin/internal/{{ name }}
      method: delete
  query_fields:
  - field: h
    required: false
    default: name
  - field: format
    required: true
    default: json
  - field: health
    required: false
    default: green
  - field: pri
    required: false
    default: 'true'
  - field: local
    required: false
    default: 'false'
  - field: master_timeout
    required: false
    default: 30s
  - field: ignore_unavailable
    required: false
    default: 'false'
  - field: allow_no_indices
    required: false
    default: 'true'
  use_default_query_params: false
  show_describe: false
cluster:
  path: admin/internal/_cat/health
  desc: 节点
  methods:
    list: 
      path: admin/internal/_cat/health
      method: get
      default_fields:
        - name: cluster
          alias: 集群名称
        - name: status
          alias: 状态
        - name: node.total
          alias: 节点总数
        - name: node.data
          alias: 数据节点总数
        - name: shards
          alias: 分片总数
        - name: pri
          alias: 主分片总数
        - name: relo
          alias: 正在迁移的分片数
        - name: init
          alias: 正在初始化的分片数
        - name: unassign
          alias: 未分配分片数
        - name: pending_tasks
          alias: 待处理任务数
        - name: max_task_wait_time
          alias: 最大任务等待时间
        - name: active_shards_percent
          alias: 活动分片数占比
        - name: epoch
          alias: 集群状态版本
        - name: timestamp
          alias: 时间戳
  query_fields:
  - field: h
    required: false
    default: name
  - field: format
    required: true
    default: json
  use_default_query_params: false
cluster/settings:
  path: admin/internal/_cluster/settings
  desc: 节点
  methods:
    list: admin/internal/_cat/health
    exclude_by_name:
      path: admin/internal/_cluster/settings
      method: put
      data:
        transient:
          cluster.routing.allocation.exclude._name: '{{ name }}'
      description: 通过节点名称移除节点
    exclude_by_ip:
      path: admin/internal/_cluster/settings
      method: put
      data:
        transient:
          cluster.routing.allocation.exclude._ip: '{{ ip }}'
      description: 通过节点IP移除节点
    restore_exclude:
      path: admin/internal/_cluster/settings
      method: put
      data:
        transient:
          cluster.routing.allocation.exclude._ip: null
      description: 恢复已移除的节点
  query_fields:
  - field: h
    required: false
    default: name
  - field: format
    required: true
    default: json
  - field: include_defaults
    required: true
    default: 'false'
  - field: flat_settings
    required: false
    default: 'true'
  use_default_query_params: false
  show_describe: false
