targets:
  path: metric/targets
  desc: 运维资产对象
  methods:
    list:
      path: metric/targets
      default_fields:
      - name: name
        alias: 名称
      - name: app
        alias: 所属应用
      - name: identity
        alias: 身份
      - name: targetRule
        alias: 目标规则
      - name: targetType
        alias: 目标类型
      - name: metricCount
        alias: 指标数量
      - name: updateTime
        alias: 更新时间
        convert:
          function: format_timestamp
          args:
            - format: '%Y-%m-%d %H:%M:%S'
            - tz: '+08:00'
      - name: relationCount
        alias: 关联数量
    get: metric/targets
    create:
      path: metric/targets
      method: post
      data:
        targetTypeId: _storage_switch
        identities:
          name: target_id
        names:
          name: '{{ name }}'
        properties: {}
        customProperties: {}
bizsystems:
  path: target/bizSystems
  desc: 运维资产业务系统
  methods:
    list:
      path: target/bizSystems
      default_fields:
      - name: name
        alias: 名称
      - name: bizName
        alias: 业务名称
      - name: bizSystem
        alias: 业务系统
      - name: description
        alias: 描述
      - name: identity
        alias: 身份
      - name: metricCount
        alias: 指标数量
      - name: scope
        alias: 范围
      - name: targetCount
        alias: 目标数量
      - name: targetType
        alias: 目标类型
      - name: updateTime
        alias: 更新时间
        convert:
          function: format_timestamp
          args:
            - format: '%Y-%m-%d %H:%M:%S'
            - tz: '+08:00'
    get: target/bizSystems
    create:
      path: metric/targets
      method: post
      data:
        targetTypeId: _biz_system
        identities:
          biz_system: '{{ id }}'
        names:
          biz_name: '{{ name }}'
        properties:
          description: '{{ description| default(''default descriptions'') }}'
        customProperties: {}
targettypes:
  path: target/targetTypes
  desc: 运维资产对象类型
  methods:
    list:
      path: target/targetTypes
      default_fields:
      - name: id
        alias: ID
      - name: name
        alias: 名称
      - name: displayName
        alias: 显示名称
      - name: parentId
        alias: 父ID
      - name: createTime
        alias: 创建时间
        convert:
          function: format_timestamp
          args:
            - format: '%Y-%m-%d %H:%M:%S'
            - tz: '+08:00'
      - name: updateTime
        alias: 更新时间
        convert:
          function: format_timestamp
          args:
            - format: '%Y-%m-%d %H:%M:%S'
            - tz: '+08:00'
    get: target/targetTypes
    delete:
      path: target/targetTypes:batchDelete
      method: post
      data:
        ids:
        - '{{ id }}'
    create:
      path: target/targetTypes
      method: post
      data:
        name: '{{ name }}'
        parentId: ''
        displayName: '{{ name }}'
        identityFields:
        - name: id
          displayName: ''
          type: TEXT
          required: true
        nameFields:
        - name: name
          displayName: ''
          type: TEXT
          required: true
        propertyFields:
        - displayName: ''
          name: attr
          required: false
          type: TEXT
        metricGroupIds: []
        requiredMetrics: {}
        showMetrics: {}
        actions: []
        logFilter:
          filter: '''id''="{{id}}"'
        traceFilter:
          filter: '''id''="{{id}}"'
          repoNames: []
          associativeSwitch: false
        icon: serve_norm
        app: keta-it-asset
        parentMetrics: []
layers:
  path: /apps/api/v1/keta-business-health/layers
  desc: 运维资产业务分层
  methods:
    list: 
      path: /apps/api/v1/keta-business-health/layers
      method: get
      default_fields:
      - name: name
        alias: 名称
      - name: description
        alias: 描述
      - name: layers
        alias: 层级
      - name: createTime
        alias: 创建时间
        convert:
          function: format_timestamp
          args:
            - format: '%Y-%m-%d %H:%M:%S'
            - tz: '+08:00'
      - name: updateTime
        alias: 更新时间
        convert:
          function: format_timestamp
          args:
            - format: '%Y-%m-%d %H:%M:%S'
            - tz: '+08:00'

    get: /apps/api/v1/keta-business-health/layers
    delete:
      path: /apps/api/v1/keta-business-health/layers:batchDelete
      method: post
      data:
        ids:
        - '{{ id }}'
    create:
      path: /apps/api/v1/keta-business-health/layers
      method: post
      data:
        name: '{{ name }}'
        description: '{{ description|default(''default descriptions'') }}'
        layers:
        - name: l1
          icon: layer_default
          description: 层级1
          targetTypes:
          - biz_system
        - name: l2
          icon: layer_default
          description: 层级2
          targetTypes:
          - service