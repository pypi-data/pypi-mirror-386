apps:
  path: apps/local
  desc: 已安装应用管理
  methods:
    list:
      path: apps/local
      method: get
      default_fields:
      - name: name
        alias: 应用名称
      - name: title
        alias: 应用标题
      - name: description
        alias: 应用描述
      - name: version
        alias: 应用版本
      - name: latestVersion
        alias: 最新应用版本
    uninstall:
      path: apps/{{ name }}/uninstall
      method: put
      description: 卸载应用
    download:
      path: apps/{{ name }}/export
      method: get
      query_params:
      - field: objectType
        required: true
        default: all_objects
      description: 下载应用文件
apps/market:
  path: package/list
  desc: 应用安装包
  methods:
    install:
      path: package/install
      data:
        appName: '{{ name }}'
        version: '{{ version }}'
      method: post
      description: 安装应用
    upgrade:
      path: package/install:batch
      data:
        overwriteType: overwriteObjects
        installApps:
        - appName: '{{ name }}'
          version: '{{ version }}'
        upgrade: true
      method: post
      description: 升级应用
    list:
      path: package/list
      default_fields:
      - name: name
        alias: 应用名称
      - name: title
        alias: 应用标题
      - name: description
        alias: 应用描述
      - name: status
        alias: 应用状态
      - name: free
        alias: 免费应用
      - name: appStatus
        alias: 应用安装状态
      - name: currentVersion
        alias: 当前应用版本
      - name: latestVersion
        alias: 最新应用版本
      - name: createTime
        alias: 创建时间
        convert:
          function: format_timestamp
          args:
            - field: createTime
              format: '%Y-%m-%d %H:%M:%S'
      - name: updateTime
        alias: 更新时间
        convert: 
          function: format_timestamp
          args:
            - field: updateTime
            - format: '%Y-%m-%d %H:%M:%S'
