<!DOCTYPE html>
<html>
<head>
    <title>File Tree Rename Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 { color: #333; }
        .test-section {
            background: #f5f5f5;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .success { color: green; font-weight: bold; }
        .failure { color: red; font-weight: bold; }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        pre {
            background: #fff;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>File Tree Rename Verification</h1>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <div id="test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Live Dashboard Preview</h2>
        <p>The dashboard below should display "üìù File Tree" as the rightmost tab:</p>
        <iframe src="http://localhost:8765" id="dashboard-iframe"></iframe>
    </div>
    
    <script>
        async function runTests() {
            const results = document.getElementById('test-results');
            let testsPassed = 0;
            let totalTests = 0;
            
            // Test 1: Check if dashboard is accessible
            totalTests++;
            try {
                const response = await fetch('http://localhost:8765');
                if (response.ok) {
                    results.innerHTML += '<p class="success">‚úì Dashboard is accessible</p>';
                    testsPassed++;
                    
                    // Test 2: Check if HTML contains "File Tree"
                    totalTests++;
                    const html = await response.text();
                    if (html.includes('üìù File Tree')) {
                        results.innerHTML += '<p class="success">‚úì HTML contains "File Tree" button text</p>';
                        testsPassed++;
                    } else {
                        results.innerHTML += '<p class="failure">‚úó HTML does not contain "File Tree" button text</p>';
                    }
                    
                    // Test 3: Check that "Claude Tree" is not in button text
                    totalTests++;
                    if (!html.includes('>üìù Claude Tree<')) {
                        results.innerHTML += '<p class="success">‚úì "Claude Tree" button text has been removed</p>';
                        testsPassed++;
                    } else {
                        results.innerHTML += '<p class="failure">‚úó "Claude Tree" button text still exists</p>';
                    }
                    
                    // Test 4: Check comments were updated
                    totalTests++;
                    if (html.includes('File activity tree will be rendered here') || 
                        html.includes('File Tree tab')) {
                        results.innerHTML += '<p class="success">‚úì Comments have been updated to "File Tree"</p>';
                        testsPassed++;
                    } else {
                        results.innerHTML += '<p class="failure">‚úó Comments still reference "Claude Tree"</p>';
                    }
                    
                } else {
                    results.innerHTML += '<p class="failure">‚úó Dashboard is not accessible (status: ' + response.status + ')</p>';
                }
            } catch (error) {
                results.innerHTML += '<p class="failure">‚úó Failed to connect to dashboard: ' + error.message + '</p>';
            }
            
            // Summary
            results.innerHTML += '<hr>';
            results.innerHTML += '<h3>Summary: ' + testsPassed + '/' + totalTests + ' tests passed</h3>';
            
            if (testsPassed === totalTests) {
                results.innerHTML += '<p class="success">üéâ All tests passed! The rename from "Claude Tree" to "File Tree" was successful.</p>';
            } else {
                results.innerHTML += '<p class="failure">‚ö†Ô∏è Some tests failed. Please review the changes.</p>';
            }
        }
        
        // Run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(runTests, 1000); // Give iframe time to load
        });
    </script>
</body>
</html>