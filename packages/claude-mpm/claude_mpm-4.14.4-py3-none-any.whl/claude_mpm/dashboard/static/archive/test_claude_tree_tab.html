<!DOCTYPE html>
<html>
<head>
    <title>Claude Tree Tab Debug Test</title>
</head>
<body>
    <h1>Claude Tree Tab Debug Test</h1>
    <p>This test will help diagnose why the Claude Tree tab is showing events instead of the D3.js tree.</p>
    
    <h2>Steps to debug:</h2>
    <ol>
        <li>Open the dashboard at http://localhost:8080</li>
        <li>Open browser developer console</li>
        <li>Run these commands in console:</li>
    </ol>
    
    <pre>
// 1. Check if CodeViewer is initialized
console.log('CodeViewer exists?', window.CodeViewer);

// 2. Check the Claude Tree tab content
const claudeTreeTab = document.getElementById('claude-tree-tab');
console.log('Claude Tree Tab HTML:', claudeTreeTab?.innerHTML);

// 3. Check the Claude Tree container
const claudeTreeContainer = document.getElementById('claude-tree-container');
console.log('Claude Tree Container HTML:', claudeTreeContainer?.innerHTML);

// 4. Manually trigger CodeViewer
if (window.CodeViewer) {
    window.CodeViewer.show();
    console.log('CodeViewer.show() called');
    
    // Check container after show()
    setTimeout(() => {
        const container = document.getElementById('claude-tree-container');
        console.log('Container after show():', container?.innerHTML.substring(0, 500));
    }, 1000);
}

// 5. Check for event-item elements in Claude Tree tab
const eventItems = claudeTreeTab?.querySelectorAll('.event-item');
console.log('Event items found in Claude Tree tab:', eventItems?.length || 0);

// 6. Check what's rendering events
const allEventLists = document.querySelectorAll('.events-list');
console.log('All elements with class "events-list":', allEventLists.length);
allEventLists.forEach((el, i) => {
    console.log(`  List ${i}: ID="${el.id}", Parent ID="${el.parentElement?.id}"`);
});
    </pre>
    
    <h2>Expected vs Actual:</h2>
    <ul>
        <li><strong>Expected:</strong> Claude Tree tab should contain a D3.js SVG tree visualization</li>
        <li><strong>Actual:</strong> Claude Tree tab is showing event entries like "[hook] hook.user_prompt"</li>
    </ul>
    
    <h2>Hypothesis:</h2>
    <p>The issue might be one of:</p>
    <ul>
        <li>CodeViewer is not being initialized properly</li>
        <li>The container is being overwritten after CodeViewer renders</li>
        <li>There's a CSS issue causing wrong content to be displayed</li>
        <li>Events are being rendered into the wrong container</li>
    </ul>
</body>
</html>