[project]
name = "carmapy"
description = "A python wrapper of the CARMA cloud aerosol model"
dynamic = ["version"]
authors = [
    {name = "Wolf Cukier", email = "wcukier@uchicago.edu"},
]
dependencies = [
    "requests",
    'importlib-metadata; python_version<"3.10"',
    "matplotlib",
    "numpy",
    "scipy",
    "pyfastchem",
    "f90nml",
]
readme = "README.md"

[tool.setuptools]
license-files = ["LICENSE"]

[tool.setuptools_scm]
local_scheme = "no-local-version"

[build-system]
requires = [
    "setuptools",
    "setuptools-scm>=8",
    "wheel",
    "cibuildwheel",
    "delocate"
]
build-backend = "setuptools.build_meta"

# --- CIBUILDWHEEL CONFIGURATION ---
[tool.cibuildwheel]
build = "cp310-*"

[tool.cibuildwheel.macos]
before-build = "brew install gcc"
environment = { FC = "gfortran", FORTRAN = "gfortran" }
repair-wheel-command = "delocate-wheel -v -w {dest_dir} {wheel}"