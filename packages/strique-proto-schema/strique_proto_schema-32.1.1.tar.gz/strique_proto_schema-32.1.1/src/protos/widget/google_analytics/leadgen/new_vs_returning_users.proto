syntax = "proto3";

package strique.model.widget.google_analytics.leadgen;

import "constants/ui/render_type.proto";
import "db/google_analytics/new_vs_returning_users.proto";
import "options/strique_enum_options.proto";

option java_outer_classname = "LeadGenNewVsReturningUsersProto";
option java_package = "com.strique.model.widget.googleanalytics.leadgen";

// Next Id: 5
// Proto definition for New Vs Returning Users Data.
message LeadGenNewVsReturningUsersData {
  // Title for this widget.
  string widget_title = 1;

  // List of records for this widget.
  repeated LeadGenNewVsReturningUsersRecord records = 2;

  // Total record.
  optional LeadGenNewVsReturningUsersRecord total = 3;

  // Summary data for a subset of records.
  optional LeadGenNewVsReturningUsersRecord subtotal = 4;
}

// Next Id: 3
// Proto definition for a single record of New Vs Returning Users.
message LeadGenNewVsReturningUsersRecord {
  // Type of user
  db.google_analytics.NewVsReturningUser.NewVsReturningUserType user_type = 1 [json_name = "userType"];

  // Percentage of users of a user type
  float user_percentage = 2 [json_name = "userPercentage"];

  // Total session generated by a user type
  uint64 total_sessions = 3 [json_name = "totalSessions"];
}

// Next Id: 2
// Proto definition for New Vs Returning Users Data Configuration.
message LeadGenNewVsReturningUsersConfig {
  // Next Id: 4
  // Enumeration of possible columns in the New Vs Returning Users Data table.
  enum Column {
    COLUMN_UNKNOWN = 0 [
      (options.label) = 'Unknown',
      (options.accessor_key) = '',
      (options.is_sortable) = false,
      (options.is_filterable) = false
    ];
    COLUMN_USER_TYPE = 1 [
      (options.label) = 'User type',
      (options.accessor_key) = 'userType',
      (options.is_sortable) = false,
      (options.is_filterable) = false
    ];
    COLUMN_USER_PERCENTAGE = 2 [
      (options.label) = 'User percentage',
      (options.accessor_key) = 'userPercentage',
      (options.is_sortable) = true,
      (options.is_filterable) = false,
      (options.suffix) = '%'
    ];
    COLUMN_TOTAL_SESSION = 3 [
      (options.label) = 'Total session',
      (options.accessor_key) = 'totalSessions',
      (options.is_sortable) = true,
      (options.is_filterable) = false
    ];
  }

  // Next Id: 3
  // Configuration for the pie chart displayed in the New Vs Returning Users Data.
  message PieChartConfig {
    // Specifies the dimension for the pie chart.
    Column dimension = 1;

    // Specifies the metric for the pie chart.
    Column metric = 2;
  }

  // Specifies the type of rendering for the widget.
  constants.ui.RenderType render_type = 1;

  // Configuration for the pie chart displayed in the widget.
  PieChartConfig pie_chart_config = 2;
}
