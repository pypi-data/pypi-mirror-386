syntax = "proto3";

package strique.model.db.catalog;

import "db/catalog/product.proto";
import "db/catalog/product_sets_request.proto";
import "db/catalog/update_feed_product.proto";
import "db/catalog/xmlfeed/xml_feed.proto";
import "google/protobuf/timestamp.proto";
import "ai/catalog/enhance_product.proto";

option java_outer_classname = "ActivityRequestProto";
option java_package = "com.strique.model.db.catalog";

// Next Id:3
// Message for activity request response.
message ActivityRequestResponse {
  // The list of activity requests.
  repeated ActivityRequest activity_requests = 1;

  uint64 total_count = 2;
}

// Next Id: 12
// Proto definition for activity request Data.
message ActivityRequest {
  // unique id to identify the activity request.
  string id = 1;

  // The request body in proto object format.
  RequestBody request_body = 2;

  // The type of the request.
  RequestType request_type = 3;

  // The timestamp when the request was created.
  optional google.protobuf.Timestamp created_at = 4;

  // The timestamp when the request was last updated.
  optional google.protobuf.Timestamp updated_at = 5;

  // The status of the task associated with the request.
  TaskStatus task_status = 6;

  // The user id who made the request.
  string user_id = 7;

  // The platform id associated with the request.
  string platform_id = 8;

  // Optional. Used in case of error.
  optional string message = 9;

  // count of attempts made to process the request.
  int32 attempt_count = 10;

  // activity description
  optional string activity_description = 11;
}

// Next Id: 5
// Enum for task status
enum TaskStatus {
  TASK_STATUS_UNKNOWN = 0;
  PENDING = 1;
  IN_PROGRESS = 2;
  COMPLETED = 3;
  FAILED = 4;
}

// Next Id: 7
// Enum for request type
enum RequestType {
  REQUEST_TYPE_UNKNOWN = 0;
  BULK_UPDATE = 1;
  ON_DEMAND_XML_FEED_CREATE = 2;
  ON_DEMAND_XML_FEED_UPDATE = 3;
  PRODUCT_SET_UPDATE = 4;
  RESOLVE_ERROR_FOR_ALL_PRODUCTS = 5;
  BULK_ENHANCE_PRODUCT = 6;
}

// Next Id: 6
// Message for requst body
message RequestBody {
  oneof request_body {
    BulkProductUpdateRequest bulk_product_update_request = 1;
    XmlFeed xml_feed = 2;
    ProductSetsUpdateRequest product_sets_update_request = 3;
    BulkUpdateFeedProductRequest bulk_update_feed_product_request = 4;
    ai.catalog.BulkEnhanceProductRequest bulk_enhance_product_request = 5;
  }
}