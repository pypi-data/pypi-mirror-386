const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chat-CUe9HyTR.js","./main-D6qHus43.js","./main-PWR3lu3V.css","./ClearOutlined-sPRC32yu.js","./AudioOutlined-CPyhrC5-.js","./index-D7dvcYwa.js","./index-gg_8jVgT.js","./Dropdown-CMUlroR_.js","./index-qtUDjfXM.js","./Table-Pcm8h2F_.js","./addEventListener-TTc5ki3v.js","./index-CScjzpru.js","./DeploymentUnitOutlined-Bm7mxWYi.js","./RedoOutlined-DIIHLGCK.js","./DeleteOutlined-5gHEV1Sl.js","./relation-DBPHAqjR.js","./data-filter-DpfML3oi.js","./UndoOutlined-CVmeWyj0.js","./association-page-FpNbkeWo.js","./study-page-CTl0wbzh.js","./usePagination-C3C4V5nb.js","./index-BLl0dAbY.js","./index-CSAVJvIu.js","./index-DOQLu3Xz.js"])))=>i.map(i=>d[i]);
import{r as S,L as Y,f as b,a3 as Se,_ as ze,G as Q,bi as be,Q as xe,bm as we,Z as Ce,a0 as ye,ah as $e,cG as Ee,cj as Me,j,S as Oe,dB as W,b as Ie,dt as _e,e as Pe,I as Re}from"./main-D6qHus43.js";import je from"./graph-view-d4nj6dBI.js";import{A as ke}from"./index-CSAVJvIu.js";import{R as Ne}from"./UpOutlined-DC7OgFJP.js";import"./index-D7dvcYwa.js";import"./index-gg_8jVgT.js";import"./Dropdown-CMUlroR_.js";import"./index-CScjzpru.js";import"./TableOutlined-CS-DfnXV.js";import"./index-BLl0dAbY.js";import"./RedoOutlined-DIIHLGCK.js";import"./Table-Pcm8h2F_.js";import"./addEventListener-TTc5ki3v.js";import"./NodeIndexOutlined-GDqggOsJ.js";import"./study-page-CTl0wbzh.js";import"./usePagination-C3C4V5nb.js";import"./index-DOQLu3Xz.js";const Le=S.forwardRef((e,n)=>{const{prefixCls:a,className:o,children:t,size:h,style:i={}}=e,u=Y(`${a}-panel`,{[`${a}-panel-hidden`]:h===0},o),p=h!==void 0;return b.createElement("div",{ref:n,className:u,style:Object.assign(Object.assign({},i),{flexBasis:p?h:"auto",flexGrow:p?0:1})},t)}),Be=()=>null;var Ve=function(e,n){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(a[o[t]]=e[o[t]]);return a};function Ae(e){if(e&&typeof e=="object")return e;const n=!!e;return{start:n,end:n}}function Te(e){return S.useMemo(()=>Se(e).filter(S.isValidElement).map(a=>{const{props:o}=a,{collapsible:t}=o,h=Ve(o,["collapsible"]);return Object.assign(Object.assign({},h),{collapsible:Ae(t)})}),[e])}function De(e,n,a){return S.useMemo(()=>{const o=[];for(let t=0;t<e.length-1;t+=1){const h=e[t],i=e[t+1],u=n[t],p=n[t+1],{resizable:m=!0,min:c,collapsible:$}=h,{resizable:I=!0,min:w,collapsible:s}=i,d=m&&I&&(u!==0||!c)&&(p!==0||!w),x=$.end&&u>0||s.start&&p===0&&u>0,r=s.start&&p>0||$.end&&u===0&&p>0;o[t]={resizable:d,startCollapsible:!!(a?r:x),endCollapsible:!!(a?x:r)}}return o},[n,e])}function ee(e){return Number(e.slice(0,-1))/100}function se(e){return typeof e=="string"&&e.endsWith("%")}function Xe(e,n){const a=e.map(s=>s.size),o=e.length,t=n||0,h=s=>s*t,[i,u]=b.useState(()=>e.map(s=>s.defaultSize)),p=b.useMemo(()=>{var s;const d=[];for(let x=0;x<o;x+=1)d[x]=(s=a[x])!==null&&s!==void 0?s:i[x];return d},[o,i,a]),m=b.useMemo(()=>{let s=[],d=0;for(let r=0;r<o;r+=1){const v=p[r];if(se(v))s[r]=ee(v);else if(v||v===0){const k=Number(v);Number.isNaN(k)||(s[r]=k/t)}else d+=1,s[r]=void 0}const x=s.reduce((r,v)=>r+(v||0),0);if(x>1||!d){const r=1/x;s=s.map(v=>v===void 0?0:v*r)}else{const r=(1-x)/d;s=s.map(v=>v===void 0?r:v)}return s},[p,t]),c=b.useMemo(()=>m.map(h),[m,t]),$=b.useMemo(()=>e.map(s=>se(s.min)?ee(s.min):(s.min||0)/t),[e,t]),I=b.useMemo(()=>e.map(s=>se(s.max)?ee(s.max):(s.max||t)/t),[e,t]);return[b.useMemo(()=>n?c:p,[c,n]),c,m,$,I,u]}function He(e,n,a,o,t,h){const i=e.map(l=>[l.min,l.max]),u=o||0,p=l=>l*u;function m(l,E){return typeof l=="string"?p(ee(l)):l??E}const[c,$]=S.useState([]),I=S.useRef([]),[w,s]=S.useState(null),d=()=>a.map(p);return[l=>{$(d()),s({index:l,confirmed:!1})},(l,E)=>{var y;let M=null;if((!w||!w.confirmed)&&E!==0){if(E>0)M=l,s({index:l,confirmed:!0});else for(let z=l;z>=0;z-=1)if(c[z]>0&&n[z].resizable){M=z,s({index:z,confirmed:!0});break}}const f=(y=M??(w==null?void 0:w.index))!==null&&y!==void 0?y:l,g=ze(c),_=f+1,T=m(i[f][0],0),N=m(i[_][0],0),V=m(i[f][1],u),D=m(i[_][1],u);let O=E;return g[f]+O<T&&(O=T-g[f]),g[_]-O<N&&(O=g[_]-N),g[f]+O>V&&(O=V-g[f]),g[_]-O>D&&(O=g[_]-D),g[f]+=O,g[_]-=O,t(g),g},()=>{s(null)},(l,E)=>{const y=d(),M=h?E==="start"?"end":"start":E,f=M==="start"?l:l+1,g=M==="start"?l+1:l,_=y[f],T=y[g];if(_!==0&&T!==0)y[f]=0,y[g]+=_,I.current[l]=_;else{const N=_+T,V=m(i[f][0],0),D=m(i[f][1],u),O=m(i[g][0],0),z=m(i[g][1],u),P=Math.max(V,N-z),H=(Math.min(D,N-O)-P)/2,R=I.current[l],A=N-R;R&&R<=z&&R>=O&&A<=D&&A>=V?(y[g]=R,y[f]=A):(y[f]-=H,y[g]+=H)}return t(y),y},w==null?void 0:w.index]}function oe(e){return typeof e=="number"&&!Number.isNaN(e)?Math.round(e):0}const Ye=e=>{const{prefixCls:n,vertical:a,index:o,active:t,ariaNow:h,ariaMin:i,ariaMax:u,resizable:p,startCollapsible:m,endCollapsible:c,onOffsetStart:$,onOffsetUpdate:I,onOffsetEnd:w,onCollapse:s,lazy:d,containerSize:x}=e,r=`${n}-bar`,[v,k]=S.useState(null),[l,E]=S.useState(0),y=a?0:l,M=a?l:0,f=z=>{p&&z.currentTarget&&(k([z.pageX,z.pageY]),$(o))},g=z=>{if(p&&z.touches.length===1){const P=z.touches[0];k([P.pageX,P.pageY]),$(o)}},_=z=>{const P=x*h/100,X=P+z,H=Math.max(0,x*i/100),R=Math.min(x,x*u/100);return Math.max(H,Math.min(R,X))-P},T=Q((z,P)=>{const X=_(a?P:z);E(X)}),N=Q(()=>{I(o,y,M,!0),E(0)});b.useEffect(()=>{if(v){const z=R=>{const{pageX:A,pageY:U}=R,F=A-v[0],Z=U-v[1];d?T(F,Z):I(o,F,Z)},P=()=>{d?N():w(),k(null)},X=R=>{if(R.touches.length===1){const A=R.touches[0],U=A.pageX-v[0],F=A.pageY-v[1];d?T(U,F):I(o,U,F)}},H=()=>{d&&N(),k(null),w()};return window.addEventListener("touchmove",X),window.addEventListener("touchend",H),window.addEventListener("mousemove",z),window.addEventListener("mouseup",P),()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",P),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",H)}}},[v,d,a,o,x,h,i,u]);const V={[`--${r}-preview-offset`]:`${l}px`},D=a?Ne:be,O=a?xe:we;return b.createElement("div",{className:r,role:"separator","aria-valuenow":oe(h),"aria-valuemin":oe(i),"aria-valuemax":oe(u)},d&&b.createElement("div",{className:Y(`${r}-preview`,{[`${r}-preview-active`]:!!l}),style:V}),b.createElement("div",{className:Y(`${r}-dragger`,{[`${r}-dragger-disabled`]:!p,[`${r}-dragger-active`]:t}),onMouseDown:f,onTouchStart:g}),m&&b.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-start`),onClick:()=>s(o,"start")},b.createElement(D,{className:Y(`${r}-collapse-icon`,`${r}-collapse-start`)})),c&&b.createElement("div",{className:Y(`${r}-collapse-bar`,`${r}-collapse-bar-end`),onClick:()=>s(o,"end")},b.createElement(O,{className:Y(`${r}-collapse-icon`,`${r}-collapse-end`)})))},Ue=e=>{const{componentCls:n}=e;return{[`&-rtl${n}-horizontal`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:0,insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"unset",insetInlineStart:0}}},[`&-rtl${n}-vertical`]:{[`> ${n}-bar`]:{[`${n}-bar-collapse-previous`]:{insetInlineEnd:"50%",insetInlineStart:"unset"},[`${n}-bar-collapse-next`]:{insetInlineEnd:"50%",insetInlineStart:"unset"}}}}},K={position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)"},Ge=e=>{const{componentCls:n,colorFill:a,splitBarDraggableSize:o,splitBarSize:t,splitTriggerSize:h,controlItemBgHover:i,controlItemBgActive:u,controlItemBgActiveHover:p,prefixCls:m}=e,c=`${n}-bar`,$=`${n}-mask`,I=`${n}-panel`,w=e.calc(h).div(2).equal(),s=`${m}-bar-preview-offset`,d={position:"absolute",background:e.colorPrimary,opacity:.2,pointerEvents:"none",transition:"none",zIndex:1,display:"none"};return{[n]:Object.assign(Object.assign(Object.assign({},ye(e)),{display:"flex",width:"100%",height:"100%",alignItems:"stretch",[`> ${c}`]:{flex:"none",position:"relative",userSelect:"none",[`${c}-dragger`]:Object.assign(Object.assign({},K),{zIndex:1,"&::before":Object.assign({content:'""',background:i},K),"&::after":Object.assign({content:'""',background:a},K),[`&:hover:not(${c}-dragger-active)`]:{"&::before":{background:u}},"&-active":{zIndex:2,"&::before":{background:p}},[`&-disabled${c}-dragger`]:{zIndex:0,"&, &:hover, &-active":{cursor:"default","&::before":{background:i}},"&::after":{display:"none"}}}),[`${c}-collapse-bar`]:Object.assign(Object.assign({},K),{zIndex:e.zIndexPopupBase,background:i,fontSize:e.fontSizeSM,borderRadius:e.borderRadiusXS,color:e.colorText,cursor:"pointer",opacity:0,display:"flex",alignItems:"center",justifyContent:"center","@media(hover:none)":{opacity:1},"&:hover":{background:u},"&:active":{background:p}}),"&:hover, &:active":{[`${c}-collapse-bar`]:{opacity:1}}},[$]:{position:"fixed",zIndex:e.zIndexPopupBase,inset:0,"&-horizontal":{cursor:"col-resize"},"&-vertical":{cursor:"row-resize"}},"&-horizontal":{flexDirection:"row",[`> ${c}`]:{width:0,[`${c}-preview`]:Object.assign(Object.assign({height:"100%",width:t},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateX(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"col-resize",height:"100%",width:h,"&::before":{height:"100%",width:t},"&::after":{height:o,width:t}},[`${c}-collapse-bar`]:{width:e.fontSizeSM,height:e.controlHeightSM,"&-start":{left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:w},transform:"translateY(-50%)"},"&-end":{left:{_skip_check_:!0,value:w},right:{_skip_check_:!0,value:"auto"},transform:"translateY(-50%)"}}}},"&-vertical":{flexDirection:"column",[`> ${c}`]:{height:0,[`${c}-preview`]:Object.assign(Object.assign({height:t,width:"100%"},d),{[`&${c}-preview-active`]:{display:"block",transform:`translateY(var(--${s}))`}}),[`${c}-dragger`]:{cursor:"row-resize",width:"100%",height:h,"&::before":{width:"100%",height:t},"&::after":{width:o,height:t}},[`${c}-collapse-bar`]:{height:e.fontSizeSM,width:e.controlHeightSM,"&-start":{top:"auto",bottom:w,transform:"translateX(-50%)"},"&-end":{top:w,bottom:"auto",transform:"translateX(-50%)"}}}},[I]:{overflow:"auto",padding:"0 1px",scrollbarWidth:"thin",boxSizing:"border-box","&-hidden":{padding:0,overflow:"hidden"},[`&:has(${n}:only-child)`]:{overflow:"hidden"}}}),Ue(e))}},Fe=e=>{var n;const a=e.splitBarSize||2,o=e.splitTriggerSize||6,t=e.resizeSpinnerSize||20,h=(n=e.splitBarDraggableSize)!==null&&n!==void 0?n:t;return{splitBarSize:a,splitTriggerSize:o,splitBarDraggableSize:h,resizeSpinnerSize:t}},Qe=Ce("Splitter",e=>[Ge(e)],Fe),qe=e=>{const{prefixCls:n,className:a,style:o,layout:t="horizontal",children:h,rootClassName:i,onResizeStart:u,onResize:p,onResizeEnd:m,lazy:c}=e,{getPrefixCls:$,direction:I,className:w,style:s}=$e("splitter"),d=$("splitter",n),x=Ee(d),[r,v,k]=Qe(d,x),l=t==="vertical",E=I==="rtl",y=!l&&E,M=Te(h),[f,g]=S.useState(),_=L=>{const{offsetWidth:C,offsetHeight:B}=L,G=l?B:C;G!==0&&g(G)},[T,N,V,D,O,z]=Xe(M,f),P=De(M,N,E),[X,H,R,A,U]=He(M,P,V,f,z,E),F=Q(L=>{X(L),u==null||u(N)}),Z=Q((L,C,B)=>{const G=H(L,C);B?m==null||m(G):p==null||p(G)}),ae=Q(()=>{R(),m==null||m(N)}),ie=Q((L,C)=>{const B=A(L,C);p==null||p(B),m==null||m(B)}),le=Y(d,a,`${d}-${t}`,{[`${d}-rtl`]:E},i,w,k,x,v),re=`${d}-mask`,q=b.useMemo(()=>{const L=[];let C=0;for(let B=0;B<M.length;B+=1)C+=V[B],L.push(C);return L},[V]),ce=Object.assign(Object.assign({},s),o);return r(b.createElement(Me,{onResize:_},b.createElement("div",{style:ce,className:le},M.map((L,C)=>{const B=b.createElement(Le,Object.assign({},L,{prefixCls:d,size:T[C]}));let G=null;const J=P[C];if(J){const de=(q[C-1]||0)+D[C],ue=(q[C+1]||100)-O[C+1],pe=(q[C-1]||0)+O[C],fe=(q[C+1]||100)-D[C+1];G=b.createElement(Ye,{lazy:c,index:C,active:U===C,prefixCls:d,vertical:l,resizable:J.resizable,ariaNow:q[C]*100,ariaMin:Math.max(de,ue)*100,ariaMax:Math.min(pe,fe)*100,startCollapsible:J.startCollapsible,endCollapsible:J.endCollapsible,onOffsetStart:F,onOffsetUpdate:(me,ge,he,ve)=>{let ne=l?he:ge;y&&(ne=-ne),Z(me,ne,ve)},onOffsetEnd:ae,onCollapse:ie,containerSize:f||0})}return b.createElement(b.Fragment,{key:`split-panel-${C}`},B,G)}),typeof U=="number"&&b.createElement("div",{"aria-hidden":!0,className:Y(re,`${re}-${t}`)}))))},te=qe;te.Panel=Be;const We=S.lazy(()=>W(()=>import("./chat-CUe9HyTR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),Ze=S.lazy(()=>W(()=>import("./index-qtUDjfXM.js"),__vite__mapDeps([8,1,2,5,6,7,9,10,11,12,13,14]),import.meta.url)),Je=S.lazy(()=>W(()=>import("./relation-DBPHAqjR.js"),__vite__mapDeps([15,1,2,5,6,7,14,13]),import.meta.url)),Ke=S.lazy(()=>W(()=>import("./data-filter-DpfML3oi.js"),__vite__mapDeps([16,1,2,5,6,7,9,10,11,3,17]),import.meta.url)),et=S.lazy(()=>W(()=>import("./association-page-FpNbkeWo.js"),__vite__mapDeps([18,1,2,19,20,9,10,7,11,21,13,22,6,23]),import.meta.url)),tt=[{key:"chat",label:"ai chat",component:We},{key:"details",label:"details",component:Ze},{key:"relation",label:"relationship",component:Je},{key:"dataFilter",label:"data screening",component:Ke},{key:"associationPage",label:"data screening",component:et}],nt=({graphOpt:e,height:n,data:a,queryParams:o,view:t,close:h,ref:i})=>{if(!t)return j.jsx("div",{onClick:h,children:"未知类型"});const u=tt.find($=>$.key===t);if(!u)return j.jsx("div",{children:"未知类型"});const{component:p,key:m,...c}=u;return j.jsx(S.Suspense,{fallback:j.jsx(Oe,{active:!0}),children:j.jsx(p,{close:h,data:a,queryParams:o,...c,height:n,graphOpt:e,ref:i})})},st=je,{Option:xt}=Pe,{Search:wt}=Re,Ct=()=>{const[e,n]=b.useState(["100%","0%"]),[a,o]=S.useState(null),[t,h]=S.useState(),i=S.useRef(null),u=S.useRef(null),[p,m]=S.useState({}),{modal:c,openModal:$,closeModal:I}=Ie(),w=()=>{var f,g;(f=u.current)!=null&&f.reload&&((g=u.current)==null||g.reload())},s=S.useRef(null),[d,x]=S.useState(null),r=()=>{if(s.current){const f=s.current.getBoundingClientRect().top;x(window.innerHeight-f)}};S.useEffect(()=>(r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);const v=()=>{i.current&&i.current.reload()},k=()=>{i.current&&i.current.cancelSelectLink()},l=()=>{i.current&&i.current.cancelSelectNode()},E=(f,g)=>{i.current&&i.current.updateQueryParam(f,g)},[y,M]=S.useState(e);return S.useEffect(()=>{const f=requestAnimationFrame(()=>M(e));return()=>cancelAnimationFrame(f)},[e]),j.jsx("div",{style:{padding:"1rem 1rem 0 1rem  "},children:j.jsxs("div",{ref:s,children:[j.jsx(_e,{theme:{components:{Splitter:{splitBarSize:5,splitTriggerSize:30}}},children:j.jsxs(te,{onResize:n,children:[j.jsx(te.Panel,{size:y[0],min:"20%",style:{paddingRight:`${a?"0.5rem":"0"}`},children:j.jsx(st,{ref:i,height:d,openGlobalModal:$,updateQueryParams:m,openView:(f,g)=>{o(f),n(["70%","30%"]),g&&h(g)},activeView:a})}),a&&j.jsx(te.Panel,{size:y[1],min:"20%",style:{paddingLeft:`${a?"0.5rem":"0"}`,overflow:"hidden"},children:j.jsx(nt,{ref:u,graphOpt:{loadGraph:v,openModal:$,updateQueryParam:E,cancelSelectLink:k,cancelSelectNode:l},queryParams:p,height:d,data:t,view:a,close:()=>{o(null),h(null),n(["100%","0%"]),k(),l()}})})]})}),j.jsx(ke,{callback:()=>{w(),v()},visible:c.key=="optModal"&&c.visible,params:c.params,onClose:I})]})})};export{Ct as default};
