class V extends Map{constructor(i,t=m){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),i!=null)for(const[n,r]of i)this.set(n,r)}get(i){return super.get(q(this,i))}has(i){return super.has(q(this,i))}set(i,t){return super.set(j(this,i),t)}delete(i){return super.delete(P(this,i))}}function q({_intern:e,_key:i},t){const n=i(t);return e.has(n)?e.get(n):t}function j({_intern:e,_key:i},t){const n=i(t);return e.has(n)?e.get(n):(e.set(n,t),t)}function P({_intern:e,_key:i},t){const n=i(t);return e.has(n)&&(t=e.get(n),e.delete(n)),t}function m(e){return e!==null&&typeof e=="object"?e.valueOf():e}function W(e,i){let t;if(i===void 0)for(const n of e)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);else{let n=-1;for(let r of e)(r=i(r,++n,e))!=null&&(t<r||t===void 0&&r>=r)&&(t=r)}return t}function Z(e,i){let t;if(i===void 0)for(const n of e)n!=null&&(t>n||t===void 0&&n>=n)&&(t=n);else{let n=-1;for(let r of e)(r=i(r,++n,e))!=null&&(t>r||t===void 0&&r>=r)&&(t=r)}return t}function $(e,i){let t=0;if(i===void 0)for(let n of e)(n=+n)&&(t+=n);else{let n=-1;for(let r of e)(r=+i(r,++n,e))&&(t+=r)}return t}function O(e){const i=+this._x.call(null,e),t=+this._y.call(null,e);return M(this.cover(i,t),i,t,e)}function M(e,i,t,n){if(isNaN(i)||isNaN(t))return e;var r,s=e._root,h={data:n},u=e._x0,o=e._y0,f=e._x1,l=e._y1,a,_,c,x,g,y,d,v;if(!s)return e._root=h,e;for(;s.length;)if((g=i>=(a=(u+f)/2))?u=a:f=a,(y=t>=(_=(o+l)/2))?o=_:l=_,r=s,!(s=s[d=y<<1|g]))return r[d]=h,e;if(c=+e._x.call(null,s.data),x=+e._y.call(null,s.data),i===c&&t===x)return h.next=s,r?r[d]=h:e._root=h,e;do r=r?r[d]=new Array(4):e._root=new Array(4),(g=i>=(a=(u+f)/2))?u=a:f=a,(y=t>=(_=(o+l)/2))?o=_:l=_;while((d=y<<1|g)===(v=(x>=_)<<1|c>=a));return r[v]=s,r[d]=h,e}function Q(e){var i,t,n=e.length,r,s,h=new Array(n),u=new Array(n),o=1/0,f=1/0,l=-1/0,a=-1/0;for(t=0;t<n;++t)isNaN(r=+this._x.call(null,i=e[t]))||isNaN(s=+this._y.call(null,i))||(h[t]=r,u[t]=s,r<o&&(o=r),r>l&&(l=r),s<f&&(f=s),s>a&&(a=s));if(o>l||f>a)return this;for(this.cover(o,f).cover(l,a),t=0;t<n;++t)M(this,h[t],u[t],e[t]);return this}function X(e,i){if(isNaN(e=+e)||isNaN(i=+i))return this;var t=this._x0,n=this._y0,r=this._x1,s=this._y1;if(isNaN(t))r=(t=Math.floor(e))+1,s=(n=Math.floor(i))+1;else{for(var h=r-t||1,u=this._root,o,f;t>e||e>=r||n>i||i>=s;)switch(f=(i<n)<<1|e<t,o=new Array(4),o[f]=u,u=o,h*=2,f){case 0:r=t+h,s=n+h;break;case 1:t=r-h,s=n+h;break;case 2:r=t+h,n=s-h;break;case 3:t=r-h,n=s-h;break}this._root&&this._root.length&&(this._root=u)}return this._x0=t,this._y0=n,this._x1=r,this._y1=s,this}function Y(){var e=[];return this.visit(function(i){if(!i.length)do e.push(i.data);while(i=i.next)}),e}function B(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function p(e,i,t,n,r){this.node=e,this.x0=i,this.y0=t,this.x1=n,this.y1=r}function C(e,i,t){var n,r=this._x0,s=this._y0,h,u,o,f,l=this._x1,a=this._y1,_=[],c=this._root,x,g;for(c&&_.push(new p(c,r,s,l,a)),t==null?t=1/0:(r=e-t,s=i-t,l=e+t,a=i+t,t*=t);x=_.pop();)if(!(!(c=x.node)||(h=x.x0)>l||(u=x.y0)>a||(o=x.x1)<r||(f=x.y1)<s))if(c.length){var y=(h+o)/2,d=(u+f)/2;_.push(new p(c[3],y,d,o,f),new p(c[2],h,d,y,f),new p(c[1],y,u,o,d),new p(c[0],h,u,y,d)),(g=(i>=d)<<1|e>=y)&&(x=_[_.length-1],_[_.length-1]=_[_.length-1-g],_[_.length-1-g]=x)}else{var v=e-+this._x.call(null,c.data),A=i-+this._y.call(null,c.data),k=v*v+A*A;if(k<t){var N=Math.sqrt(t=k);r=e-N,s=i-N,l=e+N,a=i+N,n=c.data}}return n}function D(e){if(isNaN(l=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var i,t=this._root,n,r,s,h=this._x0,u=this._y0,o=this._x1,f=this._y1,l,a,_,c,x,g,y,d;if(!t)return this;if(t.length)for(;;){if((x=l>=(_=(h+o)/2))?h=_:o=_,(g=a>=(c=(u+f)/2))?u=c:f=c,i=t,!(t=t[y=g<<1|x]))return this;if(!t.length)break;(i[y+1&3]||i[y+2&3]||i[y+3&3])&&(n=i,d=y)}for(;t.data!==e;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):i?(s?i[y]=s:delete i[y],(t=i[0]||i[1]||i[2]||i[3])&&t===(i[3]||i[2]||i[1]||i[0])&&!t.length&&(n?n[d]=t:this._root=t),this):(this._root=s,this)}function E(e){for(var i=0,t=e.length;i<t;++i)this.remove(e[i]);return this}function F(){return this._root}function G(){var e=0;return this.visit(function(i){if(!i.length)do++e;while(i=i.next)}),e}function H(e){var i=[],t,n=this._root,r,s,h,u,o;for(n&&i.push(new p(n,this._x0,this._y0,this._x1,this._y1));t=i.pop();)if(!e(n=t.node,s=t.x0,h=t.y0,u=t.x1,o=t.y1)&&n.length){var f=(s+u)/2,l=(h+o)/2;(r=n[3])&&i.push(new p(r,f,l,u,o)),(r=n[2])&&i.push(new p(r,s,l,f,o)),(r=n[1])&&i.push(new p(r,f,h,u,l)),(r=n[0])&&i.push(new p(r,s,h,f,l))}return this}function J(e){var i=[],t=[],n;for(this._root&&i.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));n=i.pop();){var r=n.node;if(r.length){var s,h=n.x0,u=n.y0,o=n.x1,f=n.y1,l=(h+o)/2,a=(u+f)/2;(s=r[0])&&i.push(new p(s,h,u,l,a)),(s=r[1])&&i.push(new p(s,l,u,o,a)),(s=r[2])&&i.push(new p(s,h,a,l,f)),(s=r[3])&&i.push(new p(s,l,a,o,f))}t.push(n)}for(;n=t.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function K(e){return e[0]}function L(e){return arguments.length?(this._x=e,this):this._x}function R(e){return e[1]}function S(e){return arguments.length?(this._y=e,this):this._y}function T(e,i,t){var n=new b(i??K,t??R,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function b(e,i,t,n,r,s){this._x=e,this._y=i,this._x0=t,this._y0=n,this._x1=r,this._y1=s,this._root=void 0}function I(e){for(var i={data:e.data},t=i;e=e.next;)t=t.next={data:e.data};return i}var w=T.prototype=b.prototype;w.copy=function(){var e=new b(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root,t,n;if(!i)return e;if(!i.length)return e._root=I(i),e;for(t=[{source:i,target:e._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(n=i.source[r])&&(n.length?t.push({source:n,target:i.target[r]=new Array(4)}):i.target[r]=I(n));return e};w.add=O;w.addAll=Q;w.cover=X;w.data=Y;w.extent=B;w.find=C;w.remove=D;w.removeAll=E;w.root=F;w.size=G;w.visit=H;w.visitAfter=J;w.x=L;w.y=S;function U(e){for(var i=e.length/6|0,t=new Array(i),n=0;n<i;)t[n]="#"+e.slice(n*6,++n*6);return t}const z=U("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");export{V as I,W as a,z as b,U as c,Z as m,T as q,$ as s};
