import{r as d,j as N}from"./main-D6qHus43.js";const H=typeof window<"u"?d.useLayoutEffect:d.useEffect;function P(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function U({box:e,defaultHeight:t,defaultWidth:r,disabled:s,element:o,mode:i,style:n}){const{styleHeight:c,styleWidth:a}=d.useMemo(()=>({styleHeight:P(n==null?void 0:n.height),styleWidth:P(n==null?void 0:n.width)}),[n==null?void 0:n.height,n==null?void 0:n.width]),[l,u]=d.useState({height:t,width:r}),p=s||c!==void 0||i==="only-width"||c!==void 0&&a!==void 0;return H(()=>{if(o===null||p)return;const b=new ResizeObserver(A=>{for(const E of A){const{contentRect:z,target:f}=E;o===f&&u(v=>v.height===z.height&&v.width===z.width?v:{height:z.height,width:z.width})}});return b.observe(o,{box:e}),()=>{b==null||b.unobserve(o)}},[e,p,o,c,a]),d.useMemo(()=>({height:c??l.height,width:a??l.width}),[l,c,a])}function Y(e){const t=d.useRef(()=>{throw new Error("Cannot call during render.")});return H(()=>{t.current=e},[e]),d.useCallback(r=>{var s;return(s=t.current)==null?void 0:s.call(t,r)},[t])}function W({containerElement:e,direction:t,isRtl:r,scrollOffset:s}){return s}function R(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function V(e,t){if(e===t)return!0;if(!!e!=!!t||(R(e!==void 0),R(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const r in e)if(!Object.is(t[r],e[r]))return!1;return!0}function L({cachedBounds:e,itemCount:t,itemSize:r}){if(t===0)return 0;if(typeof r=="number")return t*r;{const s=e.get(e.size===0?0:e.size-1);R(s!==void 0,"Unexpected bounds cache miss");const o=(s.scrollOffset+s.size)/e.size;return t*o}}function q({align:e,cachedBounds:t,index:r,itemCount:s,itemSize:o,containerScrollOffset:i,containerSize:n}){const c=L({cachedBounds:t,itemCount:s,itemSize:o}),a=t.get(r),l=Math.max(0,Math.min(c-n,a.scrollOffset)),u=Math.max(0,a.scrollOffset-n+a.size);switch(e==="smart"&&(i>=u&&i<=l?e="auto":e="center"),e){case"start":return l;case"end":return u;case"center":return a.scrollOffset<=n/2?0:a.scrollOffset+a.size/2>=c-n/2?c-n:a.scrollOffset+a.size/2-n/2;case"auto":default:return i>=u&&i<=l?i:i<u?u:l}}function $({cachedBounds:e,containerScrollOffset:t,containerSize:r,itemCount:s,overscanCount:o}){const i=s-1;let n=0,c=-1,a=0,l=-1,u=0;for(;u<i;){const p=e.get(u);if(p.scrollOffset+p.size>t)break;u++}for(n=u,a=Math.max(0,n-o);u<i;){const p=e.get(u);if(p.scrollOffset+p.size>=t+r)break;u++}return c=Math.min(i,u),l=Math.min(s-1,c+o),n<0&&(n=0,c=-1,a=0,l=-1),{startIndexVisible:n,stopIndexVisible:c,startIndexOverscan:a,stopIndexOverscan:l}}function F({itemCount:e,itemProps:t,itemSize:r}){const s=new Map;return{get(o){for(R(o<e,`Invalid index ${o}`);s.size-1<o;){const n=s.size;let c;switch(typeof r){case"function":{c=r(n,t);break}case"number":{c=r;break}}if(n===0)s.set(n,{size:c,scrollOffset:0});else{const a=s.get(n-1);R(a!==void 0,`Unexpected bounds cache miss for index ${o}`),s.set(n,{scrollOffset:a.scrollOffset+a.size,size:c})}}const i=s.get(o);return R(i!==void 0,`Unexpected bounds cache miss for index ${o}`),i},set(o,i){s.set(o,i)},get size(){return s.size}}}function G({itemCount:e,itemProps:t,itemSize:r}){return d.useMemo(()=>F({itemCount:e,itemProps:t,itemSize:r}),[e,t,r])}function Z({containerSize:e,itemSize:t}){let r;switch(typeof t){case"string":{R(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),R(e!==void 0,"Container size must be defined if a percentage item size is specified"),r=e*parseInt(t)/100;break}default:{r=t;break}}return r}function D({containerElement:e,containerStyle:t,defaultContainerSize:r=0,direction:s,isRtl:o=!1,itemCount:i,itemProps:n,itemSize:c,onResize:a,overscanCount:l}){const[u,p]=d.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:b,startIndexOverscan:A,stopIndexVisible:E,stopIndexOverscan:z}={startIndexVisible:Math.min(i-1,u.startIndexVisible),startIndexOverscan:Math.min(i-1,u.startIndexOverscan),stopIndexVisible:Math.min(i-1,u.stopIndexVisible),stopIndexOverscan:Math.min(i-1,u.stopIndexOverscan)},{height:f=r,width:v=r}=U({defaultHeight:r,defaultWidth:void 0,element:e,mode:"only-height",style:t}),I=d.useRef({height:0,width:0}),S=f,M=Z({containerSize:S,itemSize:c});d.useLayoutEffect(()=>{if(typeof a=="function"){const h=I.current;(h.height!==f||h.width!==v)&&(a({height:f,width:v},{...h}),h.height=f,h.width=v)}},[f,a,v]);const x=G({itemCount:i,itemProps:n,itemSize:M}),B=d.useCallback(h=>x.get(h),[x]),w=d.useCallback(()=>L({cachedBounds:x,itemCount:i,itemSize:M}),[x,i,M]),k=d.useCallback(h=>{const C=W({containerElement:e,direction:s,isRtl:o,scrollOffset:h});return $({cachedBounds:x,containerScrollOffset:C,containerSize:S,itemCount:i,overscanCount:l})},[x,e,S,s,o,i,l]);H(()=>{const h=(e==null?void 0:e.scrollTop)??0;p(k(h))},[e,s,k]),H(()=>{if(!e)return;const h=()=>{p(C=>{const{scrollLeft:T,scrollTop:g}=e,m=W({containerElement:e,direction:s,isRtl:o,scrollOffset:g}),O=$({cachedBounds:x,containerScrollOffset:m,containerSize:S,itemCount:i,overscanCount:l});return V(O,C)?C:O})};return e.addEventListener("scroll",h),()=>{e.removeEventListener("scroll",h)}},[x,e,S,s,i,l]);const y=Y(({align:h="auto",containerScrollOffset:C,index:T})=>{let g=q({align:h,cachedBounds:x,containerScrollOffset:C,containerSize:S,index:T,itemCount:i,itemSize:M});if(e){if(g=W({containerElement:e,direction:s,isRtl:o,scrollOffset:g}),typeof e.scrollTo!="function"){const m=k(g);V(u,m)||p(m)}return g}});return{getCellBounds:B,getEstimatedSize:w,scrollToIndex:y,startIndexOverscan:A,startIndexVisible:b,stopIndexOverscan:z,stopIndexVisible:E}}function J(e){return d.useMemo(()=>e,Object.values(e))}function K(e,t){const{ariaAttributes:r,style:s,...o}=e,{ariaAttributes:i,style:n,...c}=t;return V(r,i)&&V(s,n)&&V(o,c)}function Q(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const X="data-react-window-index";function ee({children:e,className:t,defaultHeight:r=0,listRef:s,onResize:o,onRowsRendered:i,overscanCount:n=3,rowComponent:c,rowCount:a,rowHeight:l,rowProps:u,tagName:p="div",style:b,...A}){const E=J(u),z=d.useMemo(()=>d.memo(c,K),[c]),[f,v]=d.useState(null),I=Q(l),S=d.useMemo(()=>I?g=>l.getRowHeight(g)??l.getAverageRowHeight():l,[I,l]),{getCellBounds:M,getEstimatedSize:x,scrollToIndex:B,startIndexOverscan:w,startIndexVisible:k,stopIndexOverscan:y,stopIndexVisible:h}=D({containerElement:f,containerStyle:b,defaultContainerSize:r,direction:"vertical",itemCount:a,itemProps:E,itemSize:S,onResize:o,overscanCount:n});d.useImperativeHandle(s,()=>({get element(){return f},scrollToRow({align:g="auto",behavior:m="auto",index:O}){const j=B({align:g,containerScrollOffset:(f==null?void 0:f.scrollTop)??0,index:O});typeof(f==null?void 0:f.scrollTo)=="function"&&f.scrollTo({behavior:m,top:j})}}),[f,B]),H(()=>{if(!f)return;const g=Array.from(f.children).filter((m,O)=>{if(m.hasAttribute("aria-hidden"))return!1;const j=`${w+O}`;return m.setAttribute(X,j),!0});if(I)return l.observeRowElements(g)},[f,I,l,w,y]),d.useEffect(()=>{w>=0&&y>=0&&i&&i({startIndex:k,stopIndex:h},{startIndex:w,stopIndex:y})},[i,w,k,y,h]);const C=d.useMemo(()=>{const g=[];if(a>0)for(let m=w;m<=y;m++){const O=M(m);g.push(d.createElement(z,{...E,ariaAttributes:{"aria-posinset":m+1,"aria-setsize":a,role:"listitem"},key:m,index:m,style:{position:"absolute",left:0,transform:`translateY(${O.scrollOffset}px)`,height:I?void 0:O.size,width:"100%"}}))}return g},[z,M,I,a,E,w,y]),T=N.jsx("div",{"aria-hidden":!0,style:{height:x(),width:"100%",zIndex:-1}});return d.createElement(p,{role:"list",...A,className:t,ref:v,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...b}},C,e,T)}export{ee as A};
