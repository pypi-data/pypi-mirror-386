import{r as i,ee as F,c as C,k as T,j as t,F as d,e as b,I as M,t as k,av as A,B}from"./main-D6qHus43.js";import{u as N}from"./usePagination-C3C4V5nb.js";import{F as $}from"./Table-Pcm8h2F_.js";import{P as p}from"./index-CScjzpru.js";import{S as D,R as E}from"./index-BLl0dAbY.js";import{R as H}from"./RedoOutlined-DIIHLGCK.js";const J=i.forwardRef(({rowSelection:s,openModal:n,api:u,params:e,close:a,columns:o,hiddenSwitch:r=!1},g)=>{const[c,h]=i.useState(!r),{locale:y}=F(),[x]=i.useState(30),{data:v,pageNumber:_,totalPage:f,loading:w,reload:j,pageSize:m,setPageSize:z,setPageNumber:S,search:I}=N({url:u,initialPageSize:x,params:{...e,is_research:c,locale:y}});i.useImperativeHandle(g,()=>({reload:j,setPageNumber:S})),C();const{messageApi:P}=T(),R=i.useMemo(()=>o({openModal:n,reload:j,messageApi:P}),[e==null?void 0:e.category]);return t.jsx("div",{children:t.jsx($,{title:()=>t.jsxs(d,{justify:"space-between",children:[t.jsxs(d,{gap:"small",align:"center",children:[!r&&t.jsx(D,{value:c,onChange:h,checkedChildren:"filter",unCheckedChildren:"all",size:"small",defaultChecked:!0}),t.jsx(M.Search,{size:"small",placeholder:"search...",allowClear:!0,enterButton:!0,onSearch:l=>{I(l)},style:{width:300}})]}),t.jsxs(d,{gap:"small",children:[t.jsx(k,{title:"create",children:t.jsx(E,{onClick:()=>{e!=null&&e.category&&(e!=null&&e.registry_join)?n("optModal",{entityType:"mesh",category:e==null?void 0:e.category,registryJoin:e==null?void 0:e.registry_join}):e!=null&&e.category?n("optModal",{entityType:"mesh",category:e==null?void 0:e.category}):n("optModal",{entityType:"mesh"})}})}),t.jsx(k,{title:"refresh",children:t.jsx(H,{onClick:()=>j()})}),a&&t.jsx(A,{onClick:a})]})]}),rowSelection:s,rowKey:l=>l.entity_id,size:"small",bordered:!0,pagination:!1,loading:w,scroll:{x:"max-content"},columns:R,dataSource:v,footer:()=>t.jsx(t.Fragment,{children:f!=0&&t.jsxs(d,{style:{marginTop:"1rem"},align:"center",gap:"small",children:[t.jsxs("p",{children:["A total of ",f," data "]}),t.jsx(p,{size:"small",current:_,pageSize:m,total:f,onChange:l=>S(l),showSizeChanger:!1}),t.jsx(b,{size:"small",value:m,onChange:z,options:[{key:10,value:10},{key:30,value:30},{key:50,value:50}]})]})})})})}),K=()=>[{title:"entity_id",dataIndex:"entity_id",key:"taxonomy_id"},{title:"entity_name",dataIndex:"entity_name",key:"entity_name"},{title:"title",dataIndex:"title",key:"title"}],O=(s,n,u,e)=>[{title:"操作",key:"action",fixed:"right",width:200,render:(a,o)=>t.jsx(t.Fragment,{children:t.jsx(B,{size:"small",color:"cyan",variant:"solid",onClick:()=>{e(`/mining-data/${o.entity_id}`)},children:"mining"})})}],V=i.forwardRef(({rowSelection:s,openModal:n,params:u,close:e,hiddenSwitch:a=!1},o)=>{const r=C();return t.jsx("div",{style:{maxWidth:"1500px",margin:"1rem auto"},children:t.jsx(J,{rowSelection:s,columns:({openModal:g,reload:c,messageApi:h})=>{const y=K(),x=O(g,c,h,r);return[...y,...x]},hiddenSwitch:!0,ref:o,api:"/entity/page/study",openModal:()=>{},close:e})})});export{J as D,V as S};
