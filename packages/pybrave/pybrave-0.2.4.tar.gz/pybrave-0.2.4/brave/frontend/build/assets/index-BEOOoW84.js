import{r as s,u as g,j as n,M as m,F as y,B as d}from"./main-CH82g4dw.js";import{r as S}from"./index-BKAfqOdf.js";import b from"./index-B6FNwvkQ.js";import{C as k}from"./index-DH4f004y.js";import{T}from"./index-B_L60N4-.js";import{S as L}from"./index-C0dVCwMu.js";const D=({visible:i,onClose:f,params:t})=>{const[p,u]=s.useState(),[x,h]=s.useState([]),[a,r]=s.useState(),[j,c]=s.useState(),{baseURL:w}=g(e=>e.user);s.useEffect(()=>{if(i)if(t!=null&&t.fileType&&t.fileType==="collected")l(t.content);else{const e=Object.entries(t.content).map(([o,F])=>({key:F,label:o}));if(h(e),e.length>0){const o=e[0].key;r(o),l(o)}}},[i]);const l=async e=>{c(!0);const o=await S(e);u(o.data),c(!1)},C=e=>{const o=`${w}/brave-api/file-operation/download?path=${e}`;window.open(o,"_blank")};return i?n.jsxs(m,{width:"80vw",open:i,onCancel:f,title:"Open Task File",footer:n.jsx(n.Fragment,{children:a}),children:[n.jsx(T,{tabBarExtraContent:n.jsxs(y,{gap:"small",align:"center",children:[n.jsx(d,{size:"small",color:"cyan",variant:"solid",onClick:()=>{C(a)},children:"Download"}),n.jsx(d,{size:"small",color:"cyan",variant:"solid",onClick:()=>{l(a)},children:"Refresh"})]}),items:x,onChange:e=>{l(e),r(e)}}),n.jsx(L,{spinning:j,children:n.jsx(k,{...p})}),(t==null?void 0:t.description)&&n.jsx(b,{data:t.description})]}):null};export{D as O};
