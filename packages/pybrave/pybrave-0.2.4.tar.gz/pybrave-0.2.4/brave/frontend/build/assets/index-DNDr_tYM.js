import{r as a,j as e,R,C as k,u as j,s as E,a as f,F as S,P as I,B as b,S as w,b as _}from"./main-CH82g4dw.js";import L from"./index-B6FNwvkQ.js";import{c as M,C as F,I as P}from"./index-BDU4gvFg.js";import{u as z}from"./useStickyTop-B1b0XRLa.js";import{C}from"./index-ZaXfouA1.js";import{L as c}from"./index-BkCTNNpG.js";import{R as D}from"./RedoOutlined-DNpCn5kL.js";import{A}from"./index-Cem7jUqj.js";import"./index-Pwpmen_B.js";import"./addEventListener-DrXUXNAy.js";import"./usePagination-CNS7-0k1.js";import"./Table-Rz-gL0vt.js";import"./index-BL_XwOQI.js";import"./Dropdown-B4TP4OlU.js";import"./index-C0dVCwMu.js";import"./index-B_L60N4-.js";import"./callSuper-wDHXj85E.js";const N=`
# Bioinformatics Reactive Analysis and Visualization Engine(BRAVE)

![](/brave-api/img/logo.png)
`,te=()=>{const[o,x]=a.useState(N),{isSticky:d}=z(576);return e.jsx("div",{style:{maxWidth:"1800px",margin:"1rem auto"},children:e.jsxs(R,{gutter:[d?16:0,16],children:[e.jsx(k,{xs:24,sm:12,md:12,lg:12,xl:12,children:e.jsx(C,{children:e.jsx(L,{data:o})})}),e.jsx(k,{xs:24,sm:6,md:6,lg:6,xl:6,children:e.jsx(O,{keys:["traefik","code-server","notebook","rstudio"]})}),e.jsx(k,{xs:24,sm:6,md:6,lg:6,xl:6,children:e.jsx(B,{})})]})})},O=({keys:o})=>{const[x,d]=a.useState(),[m,u]=a.useState(!1),{baseURL:p}=j(s=>s.user),[y,g]=E.useMessage(),i=j(s=>s.global.sseData),[h,v]=a.useState([]);a.useEffect(()=>{try{h.includes(i.analysis_id)&&n()}catch{}},[i]);const n=async()=>{u(!0);const s=await f.post("/container/list-container-key",{container_key:o});v(s.data.map(t=>t.container_id));const r=Object.fromEntries(s.data.map(t=>[t.container_key,t])),l=o.map(t=>r[t]?r[t]:{key:t});d(l),u(!1)};return a.useEffect(()=>{n()},[p]),e.jsxs(C,{title:"Cloud App",size:"small",loading:m,extra:e.jsx(e.Fragment,{children:e.jsx(D,{style:{cursor:"pointer"},onClick:()=>n()})}),children:[g,e.jsx(c,{className:"demo-loadmore-list",loading:m,itemLayout:"vertical",dataSource:x,renderItem:s=>e.jsx(e.Fragment,{children:s!=null&&s.name?e.jsx(e.Fragment,{children:e.jsx(c.Item,{actions:[e.jsx(F,{record:s,reload:n,traefikUI:s.name=="traefik"})],children:e.jsx(w,{avatar:!0,title:!1,loading:s.loading,active:!0,children:e.jsx(c.Item.Meta,{avatar:e.jsx("img",{draggable:!1,width:100,alt:"logo",src:s.img}),title:e.jsx("p",{style:{wordWrap:"break-word"},children:s.image}),description:s.name})})})}):e.jsx(S,{align:"center",style:{padding:"1rem 0"},children:e.jsx(I,{title:"Install?",onConfirm:async()=>{const r=M.find(t=>t.container_key==(s==null?void 0:s.key));r||y.error(`${name} templete not exist!`);const l=JSON.parse(JSON.stringify(r));l.envionment=JSON.stringify(r.envionment),l.labels=JSON.stringify(r.labels),console.log(l),await f.post("/container/add-or-update-container",l),n()},children:e.jsxs(b,{size:"small",color:"cyan",variant:"solid",children:["Install ",s==null?void 0:s.key]})})})})})]})},B=()=>{const[o,x]=a.useState([]),[d,m]=a.useState(!1),{baseURL:u}=j(s=>s.user),[p,y]=a.useState(),g=j(s=>s.global.sseData),{modal:i,openModal:h,closeModal:v}=_();a.useEffect(()=>{try{const s=g;(s.event=="analysis_complete"||s.event=="analysis_failed"||s.event=="analysis_started")&&(n(!1),y(s))}catch{}},[g]);const n=async s=>{m(!0);const r=await f.get(`/container/list-running-container?force=${s}`);x(r.data),m(!1)};return a.useEffect(()=>{n(!1)},[u]),e.jsxs(C,{size:"small",title:e.jsx(e.Fragment,{children:e.jsx(S,{justify:"space-between",align:"center",children:e.jsx("div",{children:"Running Container"})})}),extra:e.jsx(e.Fragment,{children:e.jsx(D,{style:{cursor:"pointer"},onClick:()=>n(!0)})}),style:{marginBottom:"1rem"},children:[p&&e.jsx(A,{message:`${p.run_id}: ${p.event}`,type:"success"}),e.jsx(c,{className:"demo-loadmore-list",loading:d,itemLayout:"vertical",dataSource:o,renderItem:s=>e.jsx(c.Item,{actions:[e.jsxs(S,{gap:"small",children:[e.jsx(I,{title:"Stop?",onConfirm:async()=>{await f.post(`/container/stop-container-by-run-id/${s.name}`)},children:e.jsx(b,{size:"small",color:"cyan",variant:"solid",children:"Stop"})}),e.jsx(b,{size:"small",color:"cyan",variant:"solid",onClick:()=>{h("inspectPanel",{inspect:"inspect",id:s.name})},children:"Inspect"})]})],children:e.jsx(w,{avatar:!0,title:!1,loading:s.loading,active:!0,children:e.jsx(c.Item.Meta,{title:e.jsx("p",{style:{wordWrap:"break-word"},children:s.image}),description:s.name})})})}),e.jsx(P,{visible:i.key=="inspectPanel"&&i.visible,params:i.params,onClose:v})]})};export{te as default};
