import{f as h,bZ as V,r as m,L as T,b_ as Ve,b$ as Ee,ba as Ot,c0 as We,aA as Re,e as se,t as lt,aN as Pt,H as fe,a1 as at,a2 as st,a3 as It,a4 as w,bf as Je,a8 as wt,aP as it,G as Ne,c1 as ct,_ as he,c2 as Y,aZ as Qe,c3 as Be,c4 as Et,am as Xe,bz as dt,c5 as Ft,a0 as Nt,c6 as Bt,$ as Rt,aO as Ht,aY as At,a9 as Dt,ah as zt,c7 as kt,p as _t,c8 as Gt,aH as Mt,u as Tt,j as a,R as Ke,C as ue,F as pe,z as Wt,d as P,I as Ce,T as ut,B as pt,a as qt}from"./main-CH82g4dw.js";import{S as Lt,U as Vt,C as Xt}from"./index-BcI8WOZ3.js";import{S as Kt}from"./index-L_EWe7Ii.js";import{T as gt}from"./index-CweiUdAw.js";import{S as Ut}from"./index-B1-7HnQ_.js";import"./Dropdown-B4TP4OlU.js";import"./Table-Rz-gL0vt.js";import"./addEventListener-DrXUXNAy.js";import"./index-BL_XwOQI.js";import"./index-C0dVCwMu.js";import"./index-B_L60N4-.js";import"./index-DOFo5PXu.js";import"./index-Pwpmen_B.js";import"./createForOfIteratorHelper-BSFJLzX3.js";import"./DeploymentUnitOutlined-WBguncE1.js";import"./UserSwitchOutlined-D2V22kEV.js";import"./AudioOutlined-Cdmej0V0.js";import"./ClearOutlined-CzC8yyS0.js";import"./DeleteOutlined-CIV_DNOf.js";import"./TableOutlined-CZ_BS3k3.js";import"./NodeIndexOutlined-Cav4TyHH.js";import"./index-DTJd4Z3p.js";import"./RedoOutlined-DNpCn5kL.js";import"./UndoOutlined-BfseYVP6.js";import"./UpOutlined-MKfWXv9S.js";import"./react-window-Bmvezp4W.js";const mt=h.createContext({}),ht=h.createContext({}),ft=e=>{let{prefixCls:t,value:n,onChange:o}=e;const r=()=>{if(o&&n&&!n.cleared){const l=n.toHsb();l.a=0;const s=V(l);s.cleared=!0,o(s)}};return h.createElement("div",{className:`${t}-clear`,onClick:r})},Ct="hex",bt="rgb",xt="hsb",le=e=>{let{prefixCls:t,min:n=0,max:o=100,value:r,onChange:l,className:s,formatter:c}=e;const i=`${t}-steppers`,[u,d]=m.useState(r);return m.useEffect(()=>{Number.isNaN(r)||d(r)},[r]),h.createElement(gt,{className:T(i,s),min:n,max:o,value:u,formatter:c,size:"small",onChange:p=>{r||d(p||0),l==null||l(p)}})},Yt=e=>{let{prefixCls:t,value:n,onChange:o}=e;const r=`${t}-alpha-input`,[l,s]=m.useState(V(n||"#000"));m.useEffect(()=>{n&&s(n)},[n]);const c=i=>{const u=l.toHsb();u.a=(i||0)/100;const d=V(u);n||s(d),o==null||o(d)};return h.createElement(le,{value:Ve(l),prefixCls:t,formatter:i=>`${i}%`,className:r,onChange:c})},Jt=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,Qt=e=>Jt.test(`#${e}`),Zt=e=>{let{prefixCls:t,value:n,onChange:o}=e;const r=`${t}-hex-input`,[l,s]=m.useState(()=>n?Ee(n.toHexString()):void 0);m.useEffect(()=>{n&&s(Ee(n.toHexString()))},[n]);const c=i=>{const u=i.target.value;s(Ee(u)),Qt(Ee(u,!0))&&(o==null||o(V(u)))};return h.createElement(Ot,{className:r,value:l,prefix:"#",onChange:c,size:"small"})},eo=e=>{let{prefixCls:t,value:n,onChange:o}=e;const r=`${t}-hsb-input`,[l,s]=m.useState(V(n||"#000"));m.useEffect(()=>{n&&s(n)},[n]);const c=(i,u)=>{const d=l.toHsb();d[u]=u==="h"?i:(i||0)/100;const p=V(d);n||s(p),o==null||o(p)};return h.createElement("div",{className:r},h.createElement(le,{max:360,min:0,value:Number(l.toHsb().h),prefixCls:t,className:r,formatter:i=>We(i||0).toString(),onChange:i=>c(Number(i),"h")}),h.createElement(le,{max:100,min:0,value:Number(l.toHsb().s)*100,prefixCls:t,className:r,formatter:i=>`${We(i||0)}%`,onChange:i=>c(Number(i),"s")}),h.createElement(le,{max:100,min:0,value:Number(l.toHsb().b)*100,prefixCls:t,className:r,formatter:i=>`${We(i||0)}%`,onChange:i=>c(Number(i),"b")}))},to=e=>{let{prefixCls:t,value:n,onChange:o}=e;const r=`${t}-rgb-input`,[l,s]=m.useState(V(n||"#000"));m.useEffect(()=>{n&&s(n)},[n]);const c=(i,u)=>{const d=l.toRgb();d[u]=i||0;const p=V(d);n||s(p),o==null||o(p)};return h.createElement("div",{className:r},h.createElement(le,{max:255,min:0,value:Number(l.toRgb().r),prefixCls:t,className:r,onChange:i=>c(Number(i),"r")}),h.createElement(le,{max:255,min:0,value:Number(l.toRgb().g),prefixCls:t,className:r,onChange:i=>c(Number(i),"g")}),h.createElement(le,{max:255,min:0,value:Number(l.toRgb().b),prefixCls:t,className:r,onChange:i=>c(Number(i),"b")}))},oo=[Ct,xt,bt].map(e=>({value:e,label:e.toUpperCase()})),no=e=>{const{prefixCls:t,format:n,value:o,disabledAlpha:r,onFormatChange:l,onChange:s,disabledFormat:c}=e,[i,u]=Re(Ct,{value:n,onChange:l}),d=`${t}-input`,p=j=>{u(j)},x=m.useMemo(()=>{const j={value:o,prefixCls:t,onChange:s};switch(i){case xt:return h.createElement(eo,Object.assign({},j));case bt:return h.createElement(to,Object.assign({},j));default:return h.createElement(Zt,Object.assign({},j))}},[i,t,o,s]);return h.createElement("div",{className:`${d}-container`},!c&&h.createElement(se,{value:i,variant:"borderless",getPopupContainer:j=>j,popupMatchSelectWidth:68,placement:"bottomRight",onChange:p,className:`${t}-format-select`,size:"small",options:oo}),h.createElement("div",{className:d},x),!r&&h.createElement(Yt,{prefixCls:t,value:o,onChange:s}))},St=m.createContext({}),Ze=m.forwardRef((e,t)=>{const{open:n,draggingDelete:o}=e,r=m.useRef(null),l=n&&!o,s=m.useRef(null);function c(){fe.cancel(s.current),s.current=null}function i(){s.current=fe(()=>{var u;(u=r.current)===null||u===void 0||u.forceAlign(),s.current=null})}return m.useEffect(()=>(l?i():c(),c),[l,e.title]),m.createElement(lt,Object.assign({ref:Pt(r,t)},e,{open:l}))}),ro=e=>{const{componentCls:t,antCls:n,controlSize:o,dotSize:r,marginFull:l,marginPart:s,colorFillContentHover:c,handleColorDisabled:i,calc:u,handleSize:d,handleSizeHover:p,handleActiveColor:x,handleActiveOutlineColor:j,handleLineWidth:S,handleLineWidthHover:g,motionDurationMid:$}=e;return{[t]:Object.assign(Object.assign({},It(e)),{position:"relative",height:o,margin:`${w(s)} ${w(l)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${w(l)} ${w(s)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${$}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${$}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:c},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${w(S)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:d,height:d,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:u(S).mul(-1).equal(),insetBlockStart:u(S).mul(-1).equal(),width:u(d).add(u(S).mul(2)).equal(),height:u(d).add(u(S).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:d,height:d,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${w(S)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${$},
            inset-block-start ${$},
            width ${$},
            height ${$},
            box-shadow ${$},
            outline ${$}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(p).sub(d).div(2).add(g).mul(-1).equal(),insetBlockStart:u(p).sub(d).div(2).add(g).mul(-1).equal(),width:u(p).add(u(g).mul(2)).equal(),height:u(p).add(u(g).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${w(g)} ${x}`,outline:`6px solid ${j}`,width:p,height:p,insetInlineStart:e.calc(d).sub(p).div(2).equal(),insetBlockStart:e.calc(d).sub(p).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:r,height:r,backgroundColor:e.colorBgElevated,border:`${w(S)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:d,height:d,boxShadow:`0 0 0 ${w(S)} ${i}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${n}-tooltip-inner`]:{minWidth:"unset"}})}},vt=(e,t)=>{const{componentCls:n,railSize:o,handleSize:r,dotSize:l,marginFull:s,calc:c}=e,i=t?"paddingBlock":"paddingInline",u=t?"width":"height",d=t?"height":"width",p=t?"insetBlockStart":"insetInlineStart",x=t?"top":"insetInlineStart",j=c(o).mul(3).sub(r).div(2).equal(),S=c(r).sub(o).div(2).equal(),g=t?{borderWidth:`${w(S)} 0`,transform:`translateY(${w(c(S).mul(-1).equal())})`}:{borderWidth:`0 ${w(S)}`,transform:`translateX(${w(e.calc(S).mul(-1).equal())})`};return{[i]:o,[d]:c(o).mul(3).equal(),[`${n}-rail`]:{[u]:"100%",[d]:o},[`${n}-track,${n}-tracks`]:{[d]:o},[`${n}-track-draggable`]:Object.assign({},g),[`${n}-handle`]:{[p]:j},[`${n}-mark`]:{insetInlineStart:0,top:0,[x]:c(o).mul(3).add(t?0:s).equal(),[u]:"100%"},[`${n}-step`]:{insetInlineStart:0,top:0,[x]:o,[u]:"100%",[d]:o},[`${n}-dot`]:{position:"absolute",[p]:c(o).sub(l).div(2).equal()}}},lo=e=>{const{componentCls:t,marginPartWithMark:n}=e;return{[`${t}-horizontal`]:Object.assign(Object.assign({},vt(e,!0)),{[`&${t}-with-marks`]:{marginBottom:n}})}},ao=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:Object.assign(Object.assign({},vt(e,!1)),{height:"100%"})}},so=e=>{const n=e.controlHeightLG/4,o=e.controlHeightSM/2,r=e.lineWidth+1,l=e.lineWidth+1*1.5,s=e.colorPrimary,c=new Je(s).setA(.2).toRgbString();return{controlSize:n,railSize:4,handleSize:n,handleSizeHover:o,dotSize:8,handleLineWidth:r,handleLineWidthHover:l,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:s,handleActiveOutlineColor:c,handleColorDisabled:new Je(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},io=at("Slider",e=>{const t=st(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[ro(t),lo(t),ao(t)]},so);function qe(){const[e,t]=m.useState(!1),n=m.useRef(null),o=()=>{fe.cancel(n.current)},r=l=>{o(),l?t(l):n.current=fe(()=>{t(l)})};return m.useEffect(()=>o,[]),[e,r]}var co=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};function uo(e,t){return e||e===null?e:t||t===null?t:n=>typeof n=="number"?n.toString():""}const po=h.forwardRef((e,t)=>{const{prefixCls:n,range:o,className:r,rootClassName:l,style:s,disabled:c,tooltipPrefixCls:i,tipFormatter:u,tooltipVisible:d,getTooltipPopupContainer:p,tooltipPlacement:x,tooltip:j={},onChangeComplete:S,classNames:g,styles:$}=e,b=co(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:y}=e,{getPrefixCls:f,direction:O,className:C,style:v,classNames:I,styles:E,getPopupContainer:W}=wt("slider"),H=h.useContext(it),J=c??H,{handleRender:q,direction:ie}=h.useContext(St),B=(ie||O)==="rtl",[D,G]=qe(),[Z,z]=qe(),ee=Object.assign({},j),{open:te,placement:X,getPopupContainer:be,prefixCls:Q,formatter:Ae}=ee,k=te??d,M=(D||Z)&&k!==!1,oe=uo(Ae,u),[De,xe]=qe(),ze=A=>{S==null||S(A),xe(!1)},ce=(A,K)=>A||(K?B?"left":"right":"top"),ne=f("slider",n),[Se,ve,ge]=io(ne),$e=T(r,C,I.root,g==null?void 0:g.root,l,{[`${ne}-rtl`]:B,[`${ne}-lock`]:De},ve,ge);B&&!b.vertical&&(b.reverse=!b.reverse),h.useEffect(()=>{const A=()=>{fe(()=>{z(!1)},1)};return document.addEventListener("mouseup",A),()=>{document.removeEventListener("mouseup",A)}},[]);const me=o&&!k,ke=q||((A,K)=>{const{index:de}=K,Oe=A.props;function re(R,L,Te){var we,N,_,U;Te&&((N=(we=b)[R])===null||N===void 0||N.call(we,L)),(U=(_=Oe)[R])===null||U===void 0||U.call(_,L)}const Me=Object.assign(Object.assign({},Oe),{onMouseEnter:R=>{G(!0),re("onMouseEnter",R)},onMouseLeave:R=>{G(!1),re("onMouseLeave",R)},onMouseDown:R=>{z(!0),xe(!0),re("onMouseDown",R)},onFocus:R=>{var L;z(!0),(L=b.onFocus)===null||L===void 0||L.call(b,R),re("onFocus",R,!0)},onBlur:R=>{var L;z(!1),(L=b.onBlur)===null||L===void 0||L.call(b,R),re("onBlur",R,!0)}}),Pe=h.cloneElement(A,Me),Ie=(!!k||M)&&oe!==null;return me?Pe:h.createElement(Ze,Object.assign({},ee,{prefixCls:f("tooltip",Q??i),title:oe?oe(K.value):"",open:Ie,placement:ce(X??x,y),key:de,classNames:{root:`${ne}-tooltip`},getPopupContainer:be||p||W}),Pe)}),_e=me?(A,K)=>{const de=h.cloneElement(A,{style:Object.assign(Object.assign({},A.props.style),{visibility:"hidden"})});return h.createElement(Ze,Object.assign({},ee,{prefixCls:f("tooltip",Q??i),title:oe?oe(K.value):"",open:oe!==null&&M,placement:ce(X??x,y),key:"tooltip",classNames:{root:`${ne}-tooltip`},getPopupContainer:be||p||W,draggingDelete:K.draggingDelete}),de)}:void 0,Ge=Object.assign(Object.assign(Object.assign(Object.assign({},E.root),v),$==null?void 0:$.root),s),ye=Object.assign(Object.assign({},E.tracks),$==null?void 0:$.tracks),je=T(I.tracks,g==null?void 0:g.tracks);return Se(h.createElement(Lt,Object.assign({},b,{classNames:Object.assign({handle:T(I.handle,g==null?void 0:g.handle),rail:T(I.rail,g==null?void 0:g.rail),track:T(I.track,g==null?void 0:g.track)},je?{tracks:je}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},E.handle),$==null?void 0:$.handle),rail:Object.assign(Object.assign({},E.rail),$==null?void 0:$.rail),track:Object.assign(Object.assign({},E.track),$==null?void 0:$.track)},Object.keys(ye).length?{tracks:ye}:{}),step:b.step,range:o,className:$e,style:Ge,disabled:J,ref:t,prefixCls:ne,handleRender:ke,activeHandleRender:_e,onChangeComplete:ze})))});var go=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const $t=e=>{const{prefixCls:t,colors:n,type:o,color:r,range:l=!1,className:s,activeIndex:c,onActive:i,onDragStart:u,onDragChange:d,onKeyDelete:p}=e,x=go(e,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),j=Object.assign(Object.assign({},x),{track:!1}),S=m.useMemo(()=>`linear-gradient(90deg, ${n.map(v=>`${v.color} ${v.percent}%`).join(", ")})`,[n]),g=m.useMemo(()=>!r||!o?null:o==="alpha"?r.toRgbString():`hsl(${r.toHsb().h}, 100%, 50%)`,[r,o]),$=Ne(u),b=Ne(d),y=m.useMemo(()=>({onDragStart:$,onDragChange:b}),[]),f=Ne((C,v)=>{const{onFocus:I,style:E,className:W,onKeyDown:H}=C.props,J=Object.assign({},E);return o==="gradient"&&(J.background=ct(n,v.value)),m.cloneElement(C,{onFocus:q=>{i==null||i(v.index),I==null||I(q)},style:J,className:T(W,{[`${t}-slider-handle-active`]:c===v.index}),onKeyDown:q=>{(q.key==="Delete"||q.key==="Backspace")&&p&&p(v.index),H==null||H(q)}})}),O=m.useMemo(()=>({direction:"ltr",handleRender:f}),[]);return m.createElement(St.Provider,{value:O},m.createElement(Vt.Provider,{value:y},m.createElement(po,Object.assign({},j,{className:T(s,`${t}-slider`),tooltip:{open:!1},range:{editable:l,minCount:2},styles:{rail:{background:S},handle:g?{background:g}:{}},classNames:{rail:`${t}-slider-rail`,handle:`${t}-slider-handle`}}))))},mo=e=>{const{value:t,onChange:n,onChangeComplete:o}=e,r=s=>n(s[0]),l=s=>o(s[0]);return m.createElement($t,Object.assign({},e,{value:[t],onChange:r,onChangeComplete:l}))};function et(e){return he(e).sort((t,n)=>t.percent-n.percent)}const ho=e=>{const{prefixCls:t,mode:n,onChange:o,onChangeComplete:r,onActive:l,activeIndex:s,onGradientDragging:c,colors:i}=e,u=n==="gradient",d=m.useMemo(()=>i.map(b=>({percent:b.percent,color:b.color.toRgbString()})),[i]),p=m.useMemo(()=>d.map(b=>b.percent),[d]),x=m.useRef(d),j=b=>{let{rawValues:y,draggingIndex:f,draggingValue:O}=b;if(y.length>d.length){const C=ct(d,O),v=he(d);v.splice(f,0,{percent:O,color:C}),x.current=v}else x.current=d;c(!0),o(new Y(et(x.current)),!0)},S=b=>{let{deleteIndex:y,draggingIndex:f,draggingValue:O}=b,C=he(x.current);y!==-1?C.splice(y,1):(C[f]=Object.assign(Object.assign({},C[f]),{percent:O}),C=et(C)),o(new Y(C),!0)},g=b=>{const y=he(d);y.splice(b,1);const f=new Y(y);o(f),r(f)},$=b=>{r(new Y(d)),s>=b.length&&l(b.length-1),c(!1)};return u?m.createElement($t,{min:0,max:100,prefixCls:t,className:`${t}-gradient-slider`,colors:d,color:null,value:p,range:!0,onChangeComplete:$,disabled:!1,type:"gradient",activeIndex:s,onActive:l,onDragStart:j,onDragChange:S,onKeyDelete:g}):null},fo=m.memo(ho);var Co=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const bo={slider:mo},tt=()=>{const e=m.useContext(mt),{mode:t,onModeChange:n,modeOptions:o,prefixCls:r,allowClear:l,value:s,disabledAlpha:c,onChange:i,onClear:u,onChangeComplete:d,activeIndex:p,gradientDragging:x}=e,j=Co(e,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),S=h.useMemo(()=>s.cleared?[{percent:0,color:new Y("")},{percent:100,color:new Y("")}]:s.getColors(),[s]),g=!s.isGradient(),[$,b]=h.useState(s);Qe(()=>{var F;g||b((F=S[p])===null||F===void 0?void 0:F.color)},[x,p]);const y=h.useMemo(()=>{var F;return g?s:x?$:(F=S[p])===null||F===void 0?void 0:F.color},[s,p,g,$,x]),[f,O]=h.useState(y),[C,v]=h.useState(0),I=f!=null&&f.equals(y)?y:f;Qe(()=>{O(y)},[C,y==null?void 0:y.toHexString()]);const E=(F,B)=>{let D=V(F);if(s.cleared){const Z=D.toRgb();if(!Z.r&&!Z.g&&!Z.b&&B){const{type:z,value:ee=0}=B;D=new Y({h:z==="hue"?ee:0,s:1,b:1,a:z==="alpha"?ee/100:1})}else D=Be(D)}if(t==="single")return D;const G=he(S);return G[p]=Object.assign(Object.assign({},G[p]),{color:D}),new Y(G)},W=(F,B,D)=>{const G=E(F,D);O(G.isGradient()?G.getColors()[p].color:G),i(G,B)},H=(F,B)=>{d(E(F,B)),v(D=>D+1)},J=F=>{i(E(F))};let q=null;const ie=o.length>1;return(l||ie)&&(q=h.createElement("div",{className:`${r}-operation`},ie&&h.createElement(Kt,{size:"small",options:o,value:t,onChange:n}),h.createElement(ft,Object.assign({prefixCls:r,value:s,onChange:F=>{i(F),u==null||u()}},j)))),h.createElement(h.Fragment,null,q,h.createElement(fo,Object.assign({},e,{colors:S})),h.createElement(Xt,{prefixCls:r,value:I==null?void 0:I.toHsb(),disabledAlpha:c,onChange:(F,B)=>{W(F,!0,B)},onChangeComplete:(F,B)=>{H(F,B)},components:bo}),h.createElement(no,Object.assign({value:y,onChange:J,prefixCls:r,disabledAlpha:c},j)))},ot=()=>{const{prefixCls:e,value:t,presets:n,onChange:o}=m.useContext(ht);return Array.isArray(n)?h.createElement(Et,{value:t,presets:n,prefixCls:e,onChange:o}):null},xo=e=>{const{prefixCls:t,presets:n,panelRender:o,value:r,onChange:l,onClear:s,allowClear:c,disabledAlpha:i,mode:u,onModeChange:d,modeOptions:p,onChangeComplete:x,activeIndex:j,onActive:S,format:g,onFormatChange:$,gradientDragging:b,onGradientDragging:y,disabledFormat:f}=e,O=`${t}-inner`,C=h.useMemo(()=>({prefixCls:t,value:r,onChange:l,onClear:s,allowClear:c,disabledAlpha:i,mode:u,onModeChange:d,modeOptions:p,onChangeComplete:x,activeIndex:j,onActive:S,format:g,onFormatChange:$,gradientDragging:b,onGradientDragging:y,disabledFormat:f}),[t,r,l,s,c,i,u,d,p,x,j,S,g,$,b,y,f]),v=h.useMemo(()=>({prefixCls:t,value:r,presets:n,onChange:l}),[t,r,n,l]),I=h.createElement("div",{className:`${O}-content`},h.createElement(tt,null),Array.isArray(n)&&h.createElement(Xe,null),h.createElement(ot,null));return h.createElement(mt.Provider,{value:C},h.createElement(ht.Provider,{value:v},h.createElement("div",{className:O},typeof o=="function"?o(I,{components:{Picker:tt,Presets:ot}}):I)))};var So=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const vo=m.forwardRef((e,t)=>{const{color:n,prefixCls:o,open:r,disabled:l,format:s,className:c,showText:i,activeIndex:u}=e,d=So(e,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),p=`${o}-trigger`,x=`${p}-text`,j=`${x}-cell`,[S]=dt("ColorPicker"),g=h.useMemo(()=>{if(!i)return"";if(typeof i=="function")return i(n);if(n.cleared)return S.transparent;if(n.isGradient())return n.getColors().map((f,O)=>{const C=u!==-1&&u!==O;return h.createElement("span",{key:O,className:T(j,C&&`${j}-inactive`)},f.color.toRgbString()," ",f.percent,"%")});const b=n.toHexString().toUpperCase(),y=Ve(n);switch(s){case"rgb":return n.toRgbString();case"hsb":return n.toHsbString();default:return y<100?`${b.slice(0,7)},${y}%`:b}},[n,s,i,u]),$=m.useMemo(()=>n.cleared?h.createElement(ft,{prefixCls:o}):h.createElement(Ft,{prefixCls:o,color:n.toCssString()}),[n,o]);return h.createElement("div",Object.assign({ref:t,className:T(p,c,{[`${p}-active`]:r,[`${p}-disabled`]:l})},Nt(d)),$,i&&h.createElement("div",{className:x},g))});function $o(e,t,n){const[o]=dt("ColorPicker"),[r,l]=Re(e,{value:t}),[s,c]=m.useState("single"),[i,u]=m.useMemo(()=>{const g=(Array.isArray(n)?n:[n]).filter(f=>f);g.length||g.push("single");const $=new Set(g),b=[],y=(f,O)=>{$.has(f)&&b.push({label:O,value:f})};return y("single",o.singleColor),y("gradient",o.gradientColor),[b,$]},[n]),[d,p]=m.useState(null),x=Ne(g=>{p(g),l(g)}),j=m.useMemo(()=>{const g=V(r||"");return g.equals(d)?d:g},[r,d]),S=m.useMemo(()=>{var g;return u.has(s)?s:(g=i[0])===null||g===void 0?void 0:g.value},[u,s,i]);return m.useEffect(()=>{c(j.isGradient()?"gradient":"single")},[j]),[j,x,S,c,i]}const yt=(e,t)=>({backgroundImage:`conic-gradient(${t} 25%, transparent 25% 50%, ${t} 50% 75%, transparent 75% 100%)`,backgroundSize:`${e} ${e}`}),nt=(e,t)=>{const{componentCls:n,borderRadiusSM:o,colorPickerInsetShadow:r,lineWidth:l,colorFillSecondary:s}=e;return{[`${n}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:o,width:t,height:t,boxShadow:r,flex:"none"},yt("50%",e.colorFillSecondary)),{[`${n}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${w(l)} ${s}`,borderRadius:"inherit"}})}},yo=e=>{const{componentCls:t,antCls:n,fontSizeSM:o,lineHeightSM:r,colorPickerAlphaInputWidth:l,marginXXS:s,paddingXXS:c,controlHeightSM:i,marginXS:u,fontSizeIcon:d,paddingXS:p,colorTextPlaceholder:x,colorPickerInputNumberHandleWidth:j,lineWidth:S}=e;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${n}-input-number`]:{fontSize:o,lineHeight:r,[`${n}-input-number-input`]:{paddingInlineStart:c,paddingInlineEnd:0},[`${n}-input-number-handler-wrap`]:{width:j}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${w(l)}`,marginInlineStart:s},[`${t}-format-select${n}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${n}-select-selector`]:{padding:0,border:0},[`${n}-select-arrow`]:{insetInlineEnd:0},[`${n}-select-selection-item`]:{paddingInlineEnd:e.calc(d).add(s).equal(),fontSize:o,lineHeight:w(i)},[`${n}-select-item-option-content`]:{fontSize:o,lineHeight:r},[`${n}-select-dropdown`]:{[`${n}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:s,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{display:"flex",gap:s,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${n}-input-affix-wrapper`]:{flex:1,padding:`0 ${w(p)}`,[`${n}-input`]:{fontSize:o,textTransform:"uppercase",lineHeight:w(e.calc(i).sub(e.calc(S).mul(2)).equal())},[`${n}-input-prefix`]:{color:x}}}}}},jo=e=>{const{componentCls:t,controlHeightLG:n,borderRadiusSM:o,colorPickerInsetShadow:r,marginSM:l,colorBgElevated:s,colorFillSecondary:c,lineWidthBold:i,colorPickerHandlerSize:u}=e;return{userSelect:"none",[`${t}-select`]:{[`${t}-palette`]:{minHeight:e.calc(n).mul(4).equal(),overflow:"hidden",borderRadius:o},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:r,inset:0},marginBottom:l},[`${t}-handler`]:{width:u,height:u,border:`${w(i)} solid ${s}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${r}, 0 0 0 1px ${c}`}}},Oo=e=>{const{componentCls:t,antCls:n,colorTextQuaternary:o,paddingXXS:r,colorPickerPresetColorSize:l,fontSizeSM:s,colorText:c,lineHeightSM:i,lineWidth:u,borderRadius:d,colorFill:p,colorWhite:x,marginXXS:j,paddingXS:S,fontHeightSM:g}=e;return{[`${t}-presets`]:{[`${n}-collapse-item > ${n}-collapse-header`]:{padding:0,[`${n}-collapse-expand-icon`]:{height:g,color:o,paddingInlineEnd:r}},[`${n}-collapse`]:{display:"flex",flexDirection:"column",gap:j},[`${n}-collapse-item > ${n}-collapse-content > ${n}-collapse-content-box`]:{padding:`${w(S)} 0`},"&-label":{fontSize:s,color:c,lineHeight:i},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(j).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:l,height:l,"&::before":{content:'""',pointerEvents:"none",width:e.calc(l).add(e.calc(u).mul(4)).equal(),height:e.calc(l).add(e.calc(u).mul(4)).equal(),position:"absolute",top:e.calc(u).mul(-2).equal(),insetInlineStart:e.calc(u).mul(-2).equal(),borderRadius:d,border:`${w(u)} solid transparent`,transition:`border-color ${e.motionDurationMid} ${e.motionEaseInBack}`},"&:hover::before":{borderColor:p},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(l).div(13).mul(5).equal(),height:e.calc(l).div(13).mul(8).equal(),border:`${w(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:x,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:s,color:o}}}},Po=e=>{const{componentCls:t,colorPickerInsetShadow:n,colorBgElevated:o,colorFillSecondary:r,lineWidthBold:l,colorPickerHandlerSizeSM:s,colorPickerSliderHeight:c,marginSM:i,marginXS:u}=e,d=e.calc(s).sub(e.calc(l).mul(2).equal()).equal(),p=e.calc(s).add(e.calc(l).mul(2).equal()).equal(),x={"&:after":{transform:"scale(1)",boxShadow:`${n}, 0 0 0 1px ${e.colorPrimaryActive}`}};return{[`${t}-slider`]:[yt(w(c),e.colorFillSecondary),{margin:0,padding:0,height:c,borderRadius:e.calc(c).div(2).equal(),"&-rail":{height:c,borderRadius:e.calc(c).div(2).equal(),boxShadow:n},[`& ${t}-slider-handle`]:{width:d,height:d,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:p,height:p,borderRadius:"100%"},"&:after":{width:s,height:s,border:`${w(l)} solid ${o}`,boxShadow:`${n}, 0 0 0 1px ${r}`,outline:"none",insetInlineStart:e.calc(l).mul(-1).equal(),top:e.calc(l).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":x}}],[`${t}-slider-container`]:{display:"flex",gap:i,marginBottom:i,[`${t}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${t}-gradient-slider`]:{marginBottom:u,[`& ${t}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":x}}}},Le=(e,t,n)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:`0 0 0 ${w(e.controlOutlineWidth)} ${n}`,outline:0}),Io=e=>{const{componentCls:t}=e;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},rt=(e,t,n)=>{const{componentCls:o,borderRadiusSM:r,lineWidth:l,colorSplit:s,colorBorder:c,red6:i}=e;return{[`${o}-clear`]:Object.assign(Object.assign({width:t,height:t,borderRadius:r,border:`${w(l)} solid ${s}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${e.motionDurationFast}`},n),{"&::after":{content:'""',position:"absolute",insetInlineEnd:e.calc(l).mul(-1).equal(),top:e.calc(l).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:i},"&:hover":{borderColor:c}})}},wo=e=>{const{componentCls:t,colorError:n,colorWarning:o,colorErrorHover:r,colorWarningHover:l,colorErrorOutline:s,colorWarningOutline:c}=e;return{[`&${t}-status-error`]:{borderColor:n,"&:hover":{borderColor:r},[`&${t}-trigger-active`]:Object.assign({},Le(e,n,s))},[`&${t}-status-warning`]:{borderColor:o,"&:hover":{borderColor:l},[`&${t}-trigger-active`]:Object.assign({},Le(e,o,c))}}},Eo=e=>{const{componentCls:t,controlHeightLG:n,controlHeightSM:o,controlHeight:r,controlHeightXS:l,borderRadius:s,borderRadiusSM:c,borderRadiusXS:i,borderRadiusLG:u,fontSizeLG:d}=e;return{[`&${t}-lg`]:{minWidth:n,minHeight:n,borderRadius:u,[`${t}-color-block, ${t}-clear`]:{width:r,height:r,borderRadius:s},[`${t}-trigger-text`]:{fontSize:d}},[`&${t}-sm`]:{minWidth:o,minHeight:o,borderRadius:c,[`${t}-color-block, ${t}-clear`]:{width:l,height:l,borderRadius:i},[`${t}-trigger-text`]:{lineHeight:w(l)}}}},Fo=e=>{const{antCls:t,componentCls:n,colorPickerWidth:o,colorPrimary:r,motionDurationMid:l,colorBgElevated:s,colorTextDisabled:c,colorText:i,colorBgContainerDisabled:u,borderRadius:d,marginXS:p,marginSM:x,controlHeight:j,controlHeightSM:S,colorBgTextActive:g,colorPickerPresetColorSize:$,colorPickerPreviewSize:b,lineWidth:y,colorBorder:f,paddingXXS:O,fontSize:C,colorPrimaryHover:v,controlOutline:I}=e;return[{[n]:Object.assign({[`${n}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:o,[`& > ${t}-divider`]:{margin:`${w(x)} 0 ${w(p)}`}},[`${n}-panel`]:Object.assign({},jo(e))},Po(e)),nt(e,b)),yo(e)),Oo(e)),rt(e,$,{marginInlineStart:"auto"})),{[`${n}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:p}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:j,minHeight:j,borderRadius:d,border:`${w(y)} solid ${f}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${l}`,background:s,padding:e.calc(O).sub(y).equal(),[`${n}-trigger-text`]:{marginInlineStart:p,marginInlineEnd:e.calc(p).sub(e.calc(O).sub(y)).equal(),fontSize:C,color:i,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:c}}},"&:hover":{borderColor:v},[`&${n}-trigger-active`]:Object.assign({},Le(e,r,I)),"&-disabled":{color:c,background:u,cursor:"not-allowed","&:hover":{borderColor:g},[`${n}-trigger-text`]:{color:c}}},rt(e,S)),nt(e,S)),wo(e)),Eo(e))},Io(e))},Bt(e,{focusElCls:`${n}-trigger-active`})]},No=at("ColorPicker",e=>{const{colorTextQuaternary:t,marginSM:n}=e,o=8,r=st(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:o,colorPickerPreviewSize:e.calc(o).mul(2).add(n).equal()});return[Fo(r)]});var Bo=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const He=e=>{const{mode:t,value:n,defaultValue:o,format:r,defaultFormat:l,allowClear:s=!1,presets:c,children:i,trigger:u="click",open:d,disabled:p,placement:x="bottomLeft",arrow:j=!0,panelRender:S,showText:g,style:$,className:b,size:y,rootClassName:f,prefixCls:O,styles:C,disabledAlpha:v=!1,onFormatChange:I,onChange:E,onClear:W,onOpenChange:H,onChangeComplete:J,getPopupContainer:q,autoAdjustOverflow:ie=!0,destroyTooltipOnHide:F,disabledFormat:B}=e,D=Bo(e,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","disabledFormat"]),{getPrefixCls:G,direction:Z,colorPicker:z}=m.useContext(Rt),ee=m.useContext(it),te=p??ee,[X,be]=Re(!1,{value:d,postState:N=>!te&&N,onChange:H}),[Q,Ae]=Re(r,{value:r,defaultValue:l,onChange:I}),k=G("color-picker",O),[M,oe,De,xe,ze]=$o(o,n,t),ce=m.useMemo(()=>Ve(M)<100,[M]),[ne,Se]=h.useState(null),ve=N=>{if(J){let _=V(N);v&&ce&&(_=Be(N)),J(_)}},ge=(N,_)=>{let U=V(N);v&&ce&&(U=Be(U)),oe(U),Se(null),E&&E(U,U.toCssString()),_||ve(U)},[$e,me]=h.useState(0),[ke,_e]=h.useState(!1),Ge=N=>{if(xe(N),N==="single"&&M.isGradient())me(0),ge(new Y(M.getColors()[0].color)),Se(M);else if(N==="gradient"&&!M.isGradient()){const _=ce?Be(M):M;ge(new Y(ne||[{percent:0,color:_},{percent:100,color:_}]))}},{status:ye}=h.useContext(Ht),{compactSize:je,compactItemClassnames:A}=At(k,Z),K=Dt(N=>{var _;return(_=y??je)!==null&&_!==void 0?_:N}),de=zt(k),[Oe,re,Me]=No(k,de),Pe={[`${k}-rtl`]:Z},Ie=T(f,Me,de,Pe),R=T(kt(k,ye),{[`${k}-sm`]:K==="small",[`${k}-lg`]:K==="large"},A,z==null?void 0:z.className,Ie,b,re),L=T(k,Ie),Te={open:X,trigger:u,placement:x,arrow:j,rootClassName:f,getPopupContainer:q,autoAdjustOverflow:ie,destroyTooltipOnHide:F},we=Object.assign(Object.assign({},z==null?void 0:z.style),$);return Oe(h.createElement(_t,Object.assign({style:C==null?void 0:C.popup,styles:{body:C==null?void 0:C.popupOverlayInner},onOpenChange:N=>{(!N||!te)&&be(N)},content:h.createElement(Gt,{form:!0},h.createElement(xo,{mode:De,onModeChange:Ge,modeOptions:ze,prefixCls:k,value:M,allowClear:s,disabled:te,disabledAlpha:v,presets:c,panelRender:S,format:Q,onFormatChange:Ae,onChange:ge,onChangeComplete:ve,onClear:W,activeIndex:$e,onActive:me,gradientDragging:ke,onGradientDragging:_e,disabledFormat:B})),classNames:{root:L}},Te),i||h.createElement(vo,Object.assign({activeIndex:X?$e:-1,open:X,className:R,style:we,prefixCls:k,disabled:te,showText:g,format:Q},D,{color:M}))))},Ro=Mt(He,void 0,e=>Object.assign(Object.assign({},e),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",e=>e);He._InternalPanelDoNotUseOrYouWillBeFired=Ro;const Ho=({type:e,dataMap:t,constDataMap:n,componentMap:o,inputAnalysisMethod:r,dataKey:l,data:s,name:c,component_id:i,inputKey:u,...d})=>{if(!t)return a.jsx("div",{children:"加载中...."});t={...t,...n};const p=o[e];if(!p)return a.jsxs("div",{children:["未知类型 ",e]});const{Component:x,dataKey:j,...S}=p;console.log(S);let g=[];return s?g=s:r?g=t[r]:l?l in t&&(g=t[l]):j?j in t&&(g=t[j]):i in t?g=t[i]:"first_data_key"in t?g=t[t.first_data_key]:i in t&&(g=t[i]),a.jsx(x,{...S,...d,data:g,name:c})},On=m.memo(({formJson:e,dataMap:t,analysisResultId:n})=>{if(!e)return null;const{projectObj:o}=Tt(d=>d.user),[r,l]=m.useState();m.useEffect(()=>{if(o!=null&&o.parameter)try{const d=JSON.parse(o==null?void 0:o.parameter);l(d)}catch{l({})}},[o==null?void 0:o.parameter]);const i={rank:[{label:"SGB",value:"SGB"},{label:"SPECIES",value:"SPECIES"},{label:"GENUS",value:"GENUS"},{label:"FAMILY",value:"FAMILY"},{label:"ORDER",value:"ORDER"},{label:"CLASS",value:"CLASS"},{label:"PHYLUM",value:"PHYLUM"}],group_field:o!=null&&o.metadata_form?o==null?void 0:o.metadata_form.map(d=>({label:d.label,value:d.name})):[]},u={GroupSelect:{Component:Fe,dataKey:"sample_group_list"},Input:{Component:Go},BaseTextAreaNum:{Component:_o},GroupCompareSelect:{Component:ko},BaseSelect:{Component:Fe},BaseInputNumber:{Component:Wo},BaseInput:{Component:Mo},BaseSwitch:{Component:To},RankSelect:{Component:Fe,dataKey:"rank",mode:void 0,initialValue:"SPECIES"},GroupFieldSelect:{Component:Fe,dataKey:"group_field",mode:void 0,initialValue:"group"},FilterFieldSelect:{Component:Do,dataKey:"sample_group_list",mode:void 0},GroupSelectSampleButton:{Component:Xo},SimplpeGroupSelect:{Component:Vo},CollectedGroupSelectSampleButton:{Component:Lo},CollectedGroupSelectSampleButton2:{Component:qo},MetaphlanCladeSelect:{Component:zo},SelectAll:{Component:Yo,dataKey:"sample_group_list"},Divider:{Component:Ao},BaseColorPicker:{Component:Uo},ThreeColorPicker:{Component:Ko}};return a.jsx(a.Fragment,{children:a.jsx(Ke,{gutter:[8,0],children:e.map((d,p)=>a.jsx(a.Fragment,{children:a.jsx(ue,{span:d!=null&&d.col?d==null?void 0:d.col:12,children:a.jsx(Ho,{projParameter:r,analysisResultId:n,...d,dataMap:t,componentMap:u,constDataMap:i},p)})}))})})},(e,t)=>(console.log("prevProps==nextProps: ",JSON.stringify(e)===JSON.stringify(t)),JSON.stringify(e)===JSON.stringify(t))),Ao=({text:e})=>a.jsx(Xe,{orientation:"left",children:e}),Do=({label:e,name:t,data:n,rules:o,field:r,...l})=>{const[s,c]=m.useState(),i=P.useFormInstance();return m.useEffect(()=>{if(n&&r){const u=[...new Set(n.map(r))],d=u.map(p=>({label:p,value:p}));c(d),i.setFieldValue(t,u[0])}},[n]),a.jsx(a.Fragment,{children:a.jsx(P.Item,{label:e,name:t,rules:o,children:a.jsx(jt,{...l,options:s})})})},jt=({options:e,clear:t,value:n,onChange:o,...r})=>{const l=P.useFormInstance(),s=c=>{o(c),t&&l.resetFields(t)};return a.jsx(se,{showSearch:!0,filterOption:(c,i)=>((i==null?void 0:i.label)??"").toLowerCase().includes(c.toLowerCase()),...r,options:e,value:n,onChange:s})},zo=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>{const[s,c]=m.useState(),i=async()=>{let d=(await qt.get("/fast-api/get_metaphlan_clade")).data.map(p=>({label:`${p.taxon.replaceAll(" ","_")}_${p.clade}`,value:p.clade}));c(d)};return m.useEffect(()=>{i()},[]),a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(se,{...l,options:s,showSearch:!0,filterOption:(u,d)=>((d==null?void 0:d.label)??"").toLowerCase().includes(u.toLowerCase())})})})},ko=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>{const s=P.useFormInstance(),c=P.useWatch(["sites1","group"],s),i=P.useWatch(["sites2","group"],s),[u,d]=m.useState();return m.useEffect(()=>{c&&i&&d([{label:"Prevalent in both sites",value:"Prevalent in both sites"},{label:`Prevalent in ${i.join("-")}`,value:`Prevalent in ${i.join("-")}`},{label:`Prevalent in ${c.join("-")}`,value:`Prevalent in ${c.join("-")}`},{label:"Not prevalent in either sites",value:"Not prevalent in either sites"}])},[c,i]),a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(se,{showSearch:!0,filterOption:(p,x)=>((x==null?void 0:x.label)??"").toLowerCase().includes(p.toLowerCase()),...l,options:u})})})},_o=({label:e,name:t,tooltip:n,data:o,initialValue:r,rules:l,...s})=>{const c=P.useFormInstance(),i=P.useWatch(t,c);return a.jsx(a.Fragment,{children:a.jsx(P.Item,{tooltip:n,extra:`A total of ${i?i.split(",").length:0} features are entered`,initialValue:r,label:e,name:t,rules:l,children:a.jsx(ut,{allowClear:!0,...s,rows:3})})})},Go=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(ut,{...l})})}),Mo=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(Ce,{...l})})}),To=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(Ut,{...l})})}),Wo=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(gt,{...l})})}),Fe=({extra:e,tooltip:t,label:n,name:o,data:r,initialValue:l,rules:s,...c})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{extra:e,tooltip:t,initialValue:l||null,label:n,name:o,rules:s,children:a.jsx(jt,{...c,options:r})})}),qo=({label:e,name:t,rules:n,data:o,filter:r,group:l,groupField:s,analysisResultId:c})=>{const[i,u]=m.useState(),[d,p]=m.useState([]),[x,j]=m.useState([]),S=P.useFormInstance();let g=[];r&&(g=r.map(f=>f.name));const $=P.useWatch(f=>{const O=Object.entries(f).filter(([C])=>g.includes(C));return Object.fromEntries(O)},S),b=P.useWatch(l,S),y=(f,O)=>{const C=f.reduce((v,I)=>{const E=I[O];return v[E]||(v[E]=[]),v[E].push(I.value),v},{});u(C)};return m.useEffect(()=>{if(o&&Array.isArray(o)){const f=o.find(O=>O.analysis_result_id==c);j(f)}},[o,c]),m.useEffect(()=>{if(x&&Array.isArray(x.columns)){let f=x.columns.map(O=>({label:O.columns_name,value:O.columns_name,...O}));r&&$&&(f=r.reduce((O,C)=>O.filter(v=>C.method(v)===$[C.name]),f),f=f.map(O=>{const{label:C,id:v,value:I,...E}=O;return{label:`${O.label}(${r[0].method(O)})`,value:O.value,...E}})),f&&s?y(f,s):f&&b&&y(f,b),p(f)}},[o,x,b,$]),a.jsxs(a.Fragment,{children:[a.jsx(P.Item,{label:`${e} Columns`,name:[t,"columns"],rules:n,children:a.jsx(Ue,{sampleGrouped:i,sampleGroup:d,watch:[t,"group"]})}),a.jsxs(pe,{gap:"small",children:[a.jsx(P.Item,{label:e,name:[t,"group"],noStyle:!0,children:a.jsx(Ye,{sampleGrouped:i})}),a.jsx(P.Item,{name:[t,"group_name"],children:a.jsx(Ce,{size:"small",placeholder:"Optional group name"})}),a.jsx(P.Item,{name:[t,"color"],children:a.jsx(ae,{})})]})]})},Lo=({label:e,projParameter:t,name:n,rules:o,data:r,filter:l,group:s,groupField:c,analysisResultId:i})=>{const[u,d]=m.useState(),[p,x]=m.useState([]),[j,S]=m.useState([]),g=P.useFormInstance();let $=[];l&&($=l.map(C=>C.name));const b=P.useWatch(C=>{const v=Object.entries(C).filter(([I])=>$.includes(I));return Object.fromEntries(v)},g),y=P.useWatch(s,g),f=P.useWatch([n,"file"],g),O=(C,v)=>{const I=C.reduce((E,W)=>{const H=W[v];return E[H]||(E[H]=[]),E[H].push(W.value),E},{});d(I)};return m.useEffect(()=>{if(r&&Array.isArray(r)){const C=r.map(v=>({label:`${v.file_name}`,value:v.id}));S(C)}},[r]),m.useEffect(()=>{if(f){let C=r.find(v=>v.id==f);C&&(C=C.columns.map(v=>({label:v.columns_name,value:v.columns_name,...v})),l&&b&&(C=l.reduce((v,I)=>v.filter(E=>I.method(E)===b[I.name]),C),C=C.map(v=>{const{label:I,id:E,value:W,...H}=v;return{label:`${v.label}(${l[0].method(v)})`,value:v.value,...H}})),C&&c?O(C,c):C&&y&&O(C,y),x(C))}},[r,f,y,b]),a.jsxs(a.Fragment,{children:[a.jsx(P.Item,{label:`${e} File`,name:[n,"file"],rules:o,children:a.jsx(se,{options:j})}),a.jsx(P.Item,{label:`${e} Columns`,name:[n,"columns"],rules:o,children:a.jsx(Ue,{sampleGrouped:u,sampleGroup:p,watch:[n,"group"]})}),a.jsxs(pe,{gap:"small",children:[a.jsx(P.Item,{label:e,name:[n,"group"],noStyle:!0,children:a.jsx(Ye,{sampleGrouped:u})}),a.jsx(P.Item,{name:[n,"group_name"],children:a.jsx(Ce,{size:"small",placeholder:"Optional group name"})}),a.jsx(P.Item,{name:[n,"color"],children:a.jsx(ae,{projParameter:t})})]})]})},Vo=({label:e,projParameter:t,name:n,rules:o,data:r,filter:l,group:s,groupField:c,analysisResultId:i})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[e,":"]}),a.jsxs(pe,{gap:"small",children:[a.jsx(P.Item,{name:[n,"group_name"],noStyle:!0,children:a.jsx(Ce,{size:"small",placeholder:"Optional group name"})}),a.jsx(P.Item,{name:[n,"color"],noStyle:!0,children:a.jsx(ae,{projParameter:t})})]})]}),Xo=({label:e,projParameter:t,name:n,rules:o,data:r,filter:l,group:s,groupField:c})=>{const[i,u]=m.useState(),[d,p]=m.useState([]),x=P.useFormInstance();let j=[];l&&(j=l.map(b=>b.name));const S=P.useWatch(b=>{const y=Object.entries(b).filter(([f])=>j.includes(f));return Object.fromEntries(y)},x),g=P.useWatch(s,x),$=(b,y)=>{const f=b.reduce((O,C)=>{const v=C[y];return O[v]||(O[v]=[]),O[v].push(C.value),O},{});u(f)};return m.useEffect(()=>{l&&S&&(r=l.reduce((b,y)=>b.filter(f=>y.method(f)===S[y.name]),r),r=r.map(b=>{const{label:y,id:f,value:O,...C}=b;return{label:`${b.label}(${l[0].method(b)})`,value:b.value,...C}})),r&&c?$(r,c):r&&g&&$(r,g),p(r)},[r,g,S]),a.jsxs(a.Fragment,{children:[a.jsx(P.Item,{label:e,name:[n,"sample"],rules:o,children:a.jsx(Ue,{sampleGrouped:i,sampleGroup:d,watch:[n,"group"]})}),a.jsxs(pe,{gap:"small",children:[a.jsx(P.Item,{label:e,name:[n,"group"],noStyle:!0,children:a.jsx(Ye,{sampleGrouped:i})}),a.jsx(P.Item,{name:[n,"group_name"],children:a.jsx(Ce,{size:"small",placeholder:"Optional group name"})}),a.jsx(P.Item,{name:[n,"color"],children:a.jsx(ae,{projParameter:t})})]})]})},Ko=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>{const[s,c]=m.useState([null,null,null]);return m.useEffect(()=>{o&&Array.isArray(o)&&o.length==3&&c(o)},[o]),a.jsxs(a.Fragment,{children:[a.jsxs(pe,{gap:"small",children:[a.jsx("div",{children:e}),a.jsx(lt,{title:"The first color represents a low value, and the third color represents a high value.",children:a.jsx(Wt,{style:{color:"rgba(0,0,0,0.45)"}})})]}),a.jsxs(Ke,{gutter:[8,0],children:[a.jsx(ue,{span:8,children:a.jsx(P.Item,{noStyle:!0,initialValue:s[0],name:[t,"color1"],rules:r,children:a.jsx(ae,{...l})})}),a.jsx(ue,{span:8,children:a.jsx(P.Item,{initialValue:s[1],noStyle:!0,name:[t,"color2"],rules:r,children:a.jsx(ae,{...l})})}),a.jsx(ue,{span:8,children:a.jsx(P.Item,{initialValue:s[2],noStyle:!0,name:[t,"color3"],rules:r,children:a.jsx(ae,{...l})})})]})]})},Uo=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(He,{...l})})}),ae=({projParameter:e,value:t,onChange:n,...o})=>{const r=(l,{components:{Picker:s,Presets:c}})=>a.jsxs(Ke,{justify:"space-between",wrap:!1,children:[a.jsx(ue,{span:12,children:a.jsx(c,{})}),a.jsx(Xe,{type:"vertical",style:{height:"auto"}}),a.jsx(ue,{flex:"auto",children:a.jsx(s,{})})]});return a.jsx(a.Fragment,{children:a.jsx(He,{styles:{popupOverlayInner:{width:480}},panelRender:r,presets:e!=null&&e.colors?e==null?void 0:e.colors:[],allowClear:!0,...o,value:t,onChange:l=>{const s=l.toHexString();n(s)}})})},Yo=({label:e,name:t,data:n,initialValue:o,rules:r,...l})=>a.jsx(a.Fragment,{children:a.jsx(P.Item,{initialValue:o,label:e,name:t,rules:r,children:a.jsx(Jo,{data:n,...l})})}),Jo=({data:e,value:t,onChange:n,mode:o,...r})=>{const[l,s]=m.useState(t),c=i=>{console.log(i),n(i),s(i)};return a.jsxs(a.Fragment,{children:[a.jsx(se,{...r,mode:o,value:l,onChange:c,allowClear:!0,options:e}),o=="multiple"&&a.jsxs(pt,{onClick:()=>{const i=e.map(u=>u.value);s(i),n(i)},children:["选择全部",l&&a.jsxs(a.Fragment,{children:["(",l.length,")"]})]})]})},Ue=({value:e,onChange:t,sampleGroup:n,watch:o,sampleGrouped:r})=>{const l=P.useFormInstance(),s=P.useWatch(o,l);m.useEffect(()=>{s&&Array.isArray(s)&&s.length>0&&c(s)},[s,r]);const c=i=>{const u=Object.entries(r||{}).filter(([d])=>i.includes(d)).flatMap(([,d])=>d);t(u)};return a.jsxs(a.Fragment,{children:[a.jsx(se,{showSearch:!0,filterOption:(i,u)=>((u==null?void 0:u.label)??"").toLowerCase().includes(i.toLowerCase()),mode:"multiple",value:e,onChange:t,options:n}),e&&a.jsxs(a.Fragment,{children:["A total of ",e.length," samples were selected"]})]})},Ye=({value:e,onChange:t,sampleGrouped:n})=>{const o=r=>{if((e||[]).includes(r)){const l=(e||[]).filter(s=>!s.includes(r));t(l)}else{const l=[...e||[],r];t(l)}};return a.jsx(a.Fragment,{children:a.jsx(pe,{gap:"small",children:Object.entries(n||{}).map(([r,l])=>a.jsx("span",{children:a.jsxs(pt,{size:"small",type:(e||[]).includes(r)?"primary":"dashed",onClick:()=>o(r),children:[r,"(",l.length,")"]})},r))})})};export{Fe as BaseSelect,Lo as CollectedGroupSelectSampleButton,qo as CollectedGroupSelectSampleButton2,ko as GroupCompareSelect,Xo as GroupSelectSampleButton,zo as MetaphlanCladeSelect,Yo as SelectAll,Vo as SimplpeGroupSelect,On as default};
