[build-system]
# What tools are needed to build the package (PEP 517/518)
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "gwdama"
version = "0.6.0"                           # bump for the new release
description = "A GW data manager package and more"
readme = { file = "README.rst", content-type = "text/x-rst" }
requires-python = ">=3.9,<3.13"
license = { text = "MIT" }

authors = [
  { name = "Pisa Detchar Group", email = "francesco.direnzo@df.unipi.it" }
]

classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
]

# This replaces setup.py:install_requires
# ----- Runtime dependencies (pip will install these) -----
dependencies = [
  "gwdatafind",
  
  # GWpy 3.x may require Python >=3.10; keep 2.x on 3.9 to be safe
  "gwpy>=3.0", # Temporarily lift 3.10+ restriction to test python 3.9 usage
  # "gwpy>=3.0; python_version >= '3.10'",
  # "gwpy>=2.1,<3.0; python_version < '3.10'",

  # GWOSC is fine on 3.9+, keep a modern baseline
  "gwosc>=0.6",

  # h5py: >=3.10 has Py3.12 wheels; works on 3.9–3.12
  "h5py>=3.10",
  
  "lalsuite>=6.73",
  # "matplotlib>=3.8,<3.9",
  "matplotlib>=3.8", # Temporarily lift <3.9 restriction to test python 3.9 usage
  "numpy>=1.26",
  "pandas>=2.1",
  "python-dateutil",
  "scikit-learn>=1.4",
  "scipy>=1.12",
  "six>=1.5",

  # Astropy ≥6.0 supports new Pythons; keep a safe floor for 3.9 if needed.
  "astropy>=6.0; python_version >= '3.10'",
  "astropy>=5.3,<6; python_version < '3.10'",
]

[project.optional-dependencies]
# Everything a contributor/CI needs locally
dev = [
  "pytest>=7.0",
  "pytest-cov>=4.0",
  "build>=1.0",
  "twine>=4.0",
  "ruff>=0.4",                  
  "pre-commit>=3.0",
  # Docs toolchain (optional for devs; also expose as a 'docs' extra below)
  "sphinx>=7.2",
  "sphinx-rtd-theme>=2.0",
  "sphinxcontrib-napoleon>=0.7",
  "jupyter>=1.0",
]

docs = [
  "sphinx>=7.2",
  "sphinx-rtd-theme>=2.0",
  "sphinxcontrib-napoleon>=0.7",                   
]

# optional GUI bits for local use
gui = ["pyqt5"]

[project.urls]
Homepage = "https://gwnoisehunt.gitlab.io/gwdama"
Source   = "https://gitlab.com/gwnoisehunt/gwdama"

[tool.setuptools]
# In case of package data (non-.py files) and MANIFEST.in, keep include_package_data
include-package-data = true
license-files = ["LICENSE"]

[tool.setuptools.packages.find]
# Auto-discover packages under the repo root
where = ["."]
include = ["gwdama*"]
exclude = ["tests*"]

[tool.pytest.ini_options] # Default configs for pytest (We won't call for "pytest -q /tests" anymore, just "pytest")
addopts = "-q"
testpaths = ["tests"]