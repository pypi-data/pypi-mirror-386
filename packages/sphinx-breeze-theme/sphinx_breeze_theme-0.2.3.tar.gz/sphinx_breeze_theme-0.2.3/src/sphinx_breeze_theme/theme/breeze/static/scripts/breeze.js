const f=[];function d(t,e){const n={selector:t,init:e,instances:new WeakMap};f.push(n),document.querySelectorAll(t).forEach(o=>y(o,n))}function y(t,e){if(e.instances.has(t))return;const n=e.init(t)||void 0;e.instances.set(t,n)}function v(t,e){if(!e.instances.has(t))return;const n=e.instances.get(t);n&&n(),e.instances.delete(t)}const S=new MutationObserver(t=>{for(const e of t){for(const n of e.addedNodes)if(n instanceof HTMLElement){for(const o of f)n.matches(o.selector)&&y(n,o);for(const o of n.querySelectorAll(f.map(r=>r.selector).join(","))){const r=f.filter(c=>o.matches(c.selector));for(const c of r)y(o,c)}}for(const n of e.removedNodes)if(n instanceof HTMLElement){for(const o of f)n.matches(o.selector)&&v(n,o);for(const o of n.querySelectorAll(f.map(r=>r.selector).join(","))){const r=f.filter(c=>o.matches(c.selector));for(const c of r)v(o,c)}}}});S.observe(document.documentElement,{childList:!0,subtree:!0});document.addEventListener("keydown",t=>{if((t.ctrlKey||t.metaKey)&&t.key.toLowerCase()==="k"){const e=document.querySelector(".bz-search-button a");e&&(t.preventDefault(),e.click())}});var w=(t=>(t.AUTO="auto",t.LIGHT="light",t.DARK="dark",t))(w||{});const E=t=>{const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=t==="auto"?e:t;document.documentElement.dataset.mode=t,document.documentElement.dataset.theme=n,localStorage.setItem("breeze-mode",t)},A=()=>{if((localStorage.getItem("breeze-mode")??"auto")==="auto"){const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";E(e==="light"?"dark":"light")}else E("auto")},q=window.matchMedia("(prefers-color-scheme: dark)");q.addEventListener("change",t=>{if(localStorage.getItem("mode")==="auto"){const n=t.matches?"dark":"light";document.documentElement.dataset.theme=n}});let g=window.scrollY;d(".bz-back-to-top",t=>{const e=()=>{const n=window.scrollY,o=n<g&&n>0;t.classList.toggle("active",o),g=n};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)});d(".bz-dropdown",t=>{const e=t.querySelector("button"),n=t.querySelector("[role=menu]");if(!e||!n)return;e.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true");const o=()=>{e.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false")},r=()=>{e.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true")};t.addEventListener("mouseenter",()=>o()),t.addEventListener("mouseleave",()=>r()),t.addEventListener("keydown",c=>{const s=Array.from(n.querySelectorAll("[role=menuitem]"));if(s.length){if(c.key==="Escape")r(),e.focus();else if(c.key==="ArrowDown"){o();const a=s.indexOf(document.activeElement);s[(a+1)%s.length].focus()}else if(c.key==="ArrowUp"){o();const a=Math.max(s.indexOf(document.activeElement),0);s[(a-1+s.length)%s.length].focus()}}}),t.addEventListener("focusout",c=>{const s=c.relatedTarget;(!s||!t.contains(s))&&r()})});d("label[role=button][for]",t=>{const e=t.getAttribute("for");if(!e)return;const n=document.getElementById(e);n&&(t.hasAttribute("tabindex")||t.setAttribute("tabindex","0"),t.addEventListener("keydown",o=>{(o.key==="Enter"||o.key===" ")&&(n.click?.(),o.preventDefault())}))});d(".bz-header-tabs",t=>{const e=t.querySelector("ul"),n=e?.querySelectorAll("li"),o=t.querySelector(".bz-dropdown"),r=o?.querySelector("ul");if(!e||!n||!o||!r)return;e.style.overflowX="hidden",n.forEach((s,a)=>{s.dataset.tabId||(s.dataset.tabId=String(a))});const c=new IntersectionObserver(s=>{s.forEach(a=>{const l=a.target,m=l.dataset.tabId;if(a.isIntersecting){const i=r.querySelector(`[data-tab-id="${m}"]`);i&&i.remove(),l.style.visibility=""}else{if(r.querySelector(`[data-tab-id="${m}"]`))return;const i=l.cloneNode(!0),u=Array.from(r.children).find(p=>Number(p.dataset.tabId)>Number(m));u?r.insertBefore(i,u):r.appendChild(i),i.dataset.tabId=m;const h=i.querySelector("a");h&&(h.role="menuitem"),l.style.visibility="hidden"}})},{root:e,threshold:1});n.forEach(s=>c.observe(s))});d(".bz-search-button",t=>{const e=t.querySelector("a");e&&e.addEventListener("click",n=>{if(document.getElementsByTagName("readthedocs-search").length>0){n.preventDefault(),n.stopPropagation();const o=new CustomEvent("readthedocs-search-show");document.dispatchEvent(o)}})});d("[data-drawer]",t=>{const e=document.getElementById(t.dataset?.drawer??"");if(!e)return;const n=document.querySelector(`label[role="button"][for="${e.id}"]`);t.querySelectorAll("a[href]").forEach(o=>{o.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),e.checked=!1,o.click())})}),e.addEventListener("change",()=>{if(e.checked){const o=k(t);if(o.length===0)return;setTimeout(()=>o[0].focus(),10)}}),t.addEventListener("keydown",o=>{if(e.checked){if(o.key==="Escape")e.checked=!1,n?.focus();else if(o.key==="Tab"){const r=k(t),c=r[0],s=r[r.length-1];o.shiftKey?document.activeElement===c&&(o.preventDefault(),s.focus()):document.activeElement===s&&(o.preventDefault(),c.focus())}}})});const k=t=>Array.from(t.querySelectorAll(["a[href]","summary","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","))).filter(e=>{if(e.offsetParent===null)return!1;const n=e.closest("details");return!(n&&!n.open&&!e.matches("summary"))});d(".bz-sidebar-toc",t=>{const e=t.querySelectorAll("a[href^='#']:not([href='#'])"),n=Array.from(e).map(r=>document.getElementById(r.hash.slice(1))).filter(r=>r!==null).reverse(),o=()=>{const r=n.find(c=>c.getBoundingClientRect().top<150)??n.at(-1);e.forEach(c=>c.classList.toggle("current",c.hash===`#${r?.id}`))};return o(),window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)});d(".bz-search-form",t=>{const e=t,n=o=>{o.preventDefault();const r=document.getElementById("search-results"),s=new FormData(e).get("q")?.toString()??"";r&&(r.innerHTML=""),Search.performSearch(s)};e.addEventListener("submit",n)});d(".bz-theme-switcher",t=>{const e=t.querySelector("button");if(!e)return;const n=()=>{const o=document.documentElement.dataset.theme===w.LIGHT?w.DARK:w.LIGHT;e.ariaLabel=`Switch to ${o} mode`,e.dataset.tooltip=e.ariaLabel};n(),e.addEventListener("click",()=>{A(),n()})});const L=new URL(document.documentElement.dataset.content_root||"./",window.location.href).pathname,I=window.location.pathname.startsWith(L)?window.location.pathname.slice(L.length):"",b=new Map;d(".bz-version-switcher",t=>{const e=t.querySelector("button"),n=e?.querySelector("span"),o=t.querySelector("ul"),r=e?.dataset.current,c=e?.dataset.url;!e||!n||!o||!r||!c||(b.has(c)||b.set(c,fetch(c).then(s=>{if(!s.ok)throw new Error(`Failed to fetch versions from ${c}`);return s.json()}).catch(s=>{throw b.delete(c),s})),b.get(c).then(s=>{Array.isArray(s)&&(o.innerHTML="",s.forEach(a=>{const l=document.createElement("li");if(o.appendChild(l),a.version===r)l.innerHTML=`<span class="current">${a.name}</span>`,n.textContent=a.name;else{const m=new URL(a.url,window.location.href),i=new URL(I,m).href,u=document.createElement("a");l.appendChild(u),u.href=i,u.role="menuitem",u.textContent=a.name,u.addEventListener("click",h=>{h.preventDefault(),fetch(i,{method:"HEAD"}).then(p=>window.location.href=p.ok?i:a.url).catch(()=>window.location.href=a.url)})}}))}).catch(s=>console.error("Version switcher error:",s)))});
