# This file contains the master copy of requirements, most of them with
# unpinned versions, but having the minimum version provided.
#
# When updating this, ensure that a minimum version is given.
#
# It can be used to regenerate/update the actually used
# requirements*.txt files.
#
# This can be done by calling:
#   `requirements/gen-requirements.sh`

# Constraints
-c constraints-compatibility.txt
-c constraints-direct.txt
-c constraints-security.txt

aiohttp>=3.12.14  # used for temporary HTTP listeners; OIDC handling ## https://github.com/advisories/GHSA-9548-qrrj-x5pj
albumentations>=1.3.1  # used for image transformations
apispec>=6.6.1  # used for generating apispec of task/pod configs
async-timeout~=4.0  # used for async generator timeouts
attrs>=23.1.0  # used for more advanced dataclasses
cryptography>=44.0.1  # used for encryption keys # https://github.com/advisories/GHSA-79v4-65xg-pq4g
decorator>=5.1.1  # Used to log raised exceptions instead of crashing
deprecated~=1.2  # Used to mark objects as deprecated
desert>=2022.9.22  # used for Marshmallow schema generation from dataclasses
diskcache~=5.0  # used for easy persistence/caching
docstring_parser>=0.15  # Used for extracting the docstring from parent classes
envyaml>=1.10.211231  # used for populating yaml with environment variables
filetype>=1.2.0  # used for handling files with no extension
fire>=0.5.0  # used for CLI generation
fhirpy>=2.0.15  # used for FHIR client
fhir.resources>=8.1.0 # used for FHIR return types
GPUtil>=1.4.0  # used for GPU detection
grpcio>=1.62.1  # used for message service communication
httpx>=0.24.1  # used for Asynchronous S3 HTTP requests; # https://github.com/advisories/GHSA-h8pj-cxx2-jfg2
isort>=5.13.2  # used for sorting imports for custom models as well as for the source code of the repo
marshmallow-enum>=1.5.1  # used for schema generation
marshmallow-polyfield>=5.11  # used for schema generation
marshmallow-union>=0.1.15  # used for schema generation
marshmallow>=3.19.0, <4.0.0  # used for schema generation
methodtools>=0.4.7  # used for method caching
msgpack>=1.0.5  # used for serialization
nameparser~=1.0 # used for parsing names into components
natsort>=8.4.0 # used for sorting strings with numbers
numpy>=1.26.4, <2.0  # used for data processing
packaging>=23.1  # used for version comparisons; >22.0 supports 3.11+
pandas>=2.2.3  # used for dataframes
pandasql>=0.7.3  # user for supporting SQL query algorithm
pillow>=11.3.0  # used for image processing; # https://github.com/advisories/GHSA-xg8h-j46f-w952
prefect>=3.1.5  # used for workflow management
psutil>=5.9.5  # used for detecting platform information (CPU, memory, etc)
pyarrow~=14.0  # used for msgpacking of numpy arrays and pandas dataframes
pydantic>=2.7.2  # used for URL typehinting; # https://github.com/advisories/GHSA-mr82-8j83-vxmv
pydash~=8.0  # used for deep string-querying of nested objects in the manner of lodash
pydantic-settings>=2.6.1 # used for loading environment variables and handling configuration
pyjwt>=2.7.0  # used for session token decoding; # https://github.com/advisories/GHSA-ffqj-6fqr-9h24
python-dateutil~=2.9  # used for better date/datetime interaction
PyYAML~=6.0  # used for YAML file parsing; # https://github.com/advisories/GHSA-8q59-q68h-6hv4
requests>=2.32.4  # used for web requests; # https://github.com/advisories/GHSA-9hjg-9r4m-mvj7
scikit-image>=0.21.0  # backend (core); used for image processing
scikit-learn>=1.5.0 # backend (core); # https://github.com/advisories/GHSA-jw8x-6495-233v
semver>=3.0.4 # used for version comparison
sqlalchemy>=2.0.35  # used for database connections
sqlvalidator>=0.0.20  # used for sql string validation
sqlparse>=0.5.0  # used to parse SQL queries; # https://github.com/advisories/ghsa-2m57-hf25-phgg
statsmodels>=0.14.0  # models
torchio>=0.18.91 # used for transformations
types-decorator>=5.1.8.3  # decorator
typing_extensions>=4.12.2  # not needed for runtime but imports used (i.e. TypeAlias, NotRequired, ParamSpec)

## PyTorch
pytorch-lightning>=2.4.0  # https://github.com/advisories/GHSA-4cv3-v7pv-rfhf
tensorboard>=2.13.0  # installed by default in pytorch-lightning 1.6.0 but not in later versions
torch~=2.6.0 # https://github.com/advisories/GHSA-53q9-r3pm-6pq6
torch-optimizer>=0.3.0  # Popular optimizers for PyTorch
torchmetrics>=1.4.2, <1.7  # Pytorch lightning metrics spun out to its own library, dice metric not supported in 1.7
torchvision>=0.21.0  # used for image processing; range matches supported range for torch

## Opacus
opacus>=1.5.2  # used for Differential Privacy in PyTorch
# # TODO: [BIT-4640] Re-enable PrivateSQLQuery
# Temporarily commented out due to this issue https://github.com/opendp/smartnoise-sdk/issues/607 which clashes with prefect v3
# smartnoise-sql>=1.0.3  # used for private SQL algorithms (import snsql)

## HuggingFace

transformers>=4.52.1 # used for Natural Language Understanding (NLU) and Natural Language Generation (NLG)
opencv-python-headless>=4.10.0.84 # used for image processing for segmentation; # https://github.com/advisories/GHSA-jh2j-j4j9-crg3
timm>=1.0.9 # used for DetrConvEncoder in image segmentation

## ONNX
onnx>=1.17.0 # used for ONNX model support
onnxruntime>=1.17.0 # used for ONNX model inference on CPU

## Open Telemetry
opentelemetry-exporter-otlp-proto-grpc>=1.22.0

## Ophthalmology-related requirements
fpdf2~=2.7.9  # this constraint should also be mirrored in the app build-time-requirements.txt
matplotlib~=3.8.4 #  this constraint should also be mirrored in the app build-time-requirements.txt
pydicom~=3.0.1
python-gdcm~=3.0.24
scipy>=1.10.1
text-unidecode~=1.3  # provides a "map to rough ASCII equivalent" capability

# Private Eye requirements
pillow>=11.3.0
pydicom>=2.1
attrs>=21.4.0
h5py>=3.3
jdcal>=1.4
#numpy~=1.23
more-itertools>=7.1.0
tabulate>=0.8.6
tifffile>=2019.7.26
imagecodecs-lite>=2019.12.3
scikit-image>=0.18
construct>=2.10.56
click>=8.1.3
protobuf~=4.0
imagesize>=1.2.0
scipy>=1.6

# SQL Database Connection Requirements
# These are used under the hood by SQLAlchemy and are not used directly
oracledb>=3.0.0
# TODO: [NO_TICKET: Not tracked in Jira (yet)] Replace the below with packages
#       that are not LGPL licensed to meet upcoming changes in compliance
#       requirements.
psycopg[binary]>=3.2.3  # LGPL License
pymssql>=2.3.0  # LGPL License
pymysql>=1.1.1

# AWS
boto3 >=1.35
boto3-stubs[s3] >=1.35  # Type stubs for boto3
