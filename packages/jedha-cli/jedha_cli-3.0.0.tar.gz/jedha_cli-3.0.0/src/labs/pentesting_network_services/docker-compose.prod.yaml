
services:
  pentest-network-ftp:
    container_name: pentest-network-ftp
    image: jedha/lab-pentest-network-ftp
    expose:
      - "21"
    networks:
      lab-network:
        ipv4_address: 10.10.30.2

  pentest-network-proxychains:
    container_name: pentest-network-proxychains
    image: jedha/lab-pentest-network-proxychains
    expose:
      - "22"
      - "80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.3

  pentest-network-ssh:
    container_name: pentest-network-ssh
    image: jedha/lab-pentest-network-ssh
    expose:
      - "22"
    networks:
      lab-network:
        ipv4_address: 10.10.30.5

  pentest-network-telnet:
    container_name: pentest-network-telnet
    image: jedha/lab-pentest-network-telnet
    hostname: JEDHA{Qu1te_0ld_But_St1ll_3xists}
    expose:
      - "23"
    networks:
      lab-network:
        ipv4_address: 10.10.30.113

  pentest-network-nginx:
    container_name: pentest-network-nginx
    image: jedha/lab-pentest-network-nginx
    expose:
      - "80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.207

  pentest-network-nginx-2:
    container_name: pentest-network-nginx-2
    image: jedha/lab-pentest-network-nginx-2
    ports:
      - "81:80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.138

  pentest-network-apache:
    container_name: pentest-network-apache
    image: jedha/lab-pentest-network-apache
    ports:
      - "8000:80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.50

  pentest-network-squid:
    container_name: pentest-network-squid
    image: jedha/lab-pentest-network-squid
    expose:
      - "3128"
    restart: always
    hostname: JEDHA{Why_N0t_ProxY}
    networks:
      lab-network:
        ipv4_address: 10.10.30.55
    ulimits:
      nofile:
        soft: 65535
        hard: 65535

  pentest-network-smb:
    container_name: pentest-network-smb
    image: jedha/lab-pentest-network-smb
    tty: true
    expose:
      - "139"
      - "445"
    networks:
      lab-network:
        ipv4_address: 10.10.30.150

  pentest-network-mysql:
    container_name: pentest-network-mysql
    image: jedha/lab-pentest-network-mysql
    command: --default-authentication-plugin=mysql_native_password
    expose:
      - "3306"
    networks:
      lab-network:
        ipv4_address: 10.10.30.201
    environment:
      MYSQL_ALLOW_EMPTY_PASSWORD: 1

networks:
  lab-network:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 10.10.30.0/24
