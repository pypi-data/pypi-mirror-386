<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="helpdesk_ticket_mail_message_form_view_inherit" model="ir.ui.view">
        <field name="name">helpdesk.ticket.mail.message.form.view.inherit</field>
        <field name="model">helpdesk.ticket</field>
        <field
            name="inherit_id"
            ref="helpdesk_ticket_mail_message.helpdesk_ticket_mail_message_form_view"
        />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_name']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_email']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_category_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_contact_phone']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='create_date']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='last_stage_update']" position="before">
                <field name="create_date" readonly="1" />
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="after">
                <field
                    name="primary_tag_ids"
                    widget="many2many_tags"
                    options="{'color_field': 'color'}"
                    string="Additional Tags 1"
                />
                <field
                    name="secondary_tag_ids"
                    widget="many2many_tags"
                    options="{'color_field': 'color'}"
                    string="Additional Tags 2"
                />
            </xpath>
            <xpath expr="//page[@name='communications']" position="replace">
            </xpath>
            <xpath expr="//page[@name='description']" position="before">
                <page string="Communications" name="communications">
                    <button name="chatter_note_action" string="Create note" type="object" />
                    <field
                        name="message_emails_ids"
                        widget="list_mail_icon_one2many"
                        options="{'no_create': True, 'no_open': True, 'no_quick_create': True, 'no_edit': True, 'no_delete': True}"
                        context="{'active_colors': False ,'limit_fields': ['body']}"
                    >
                        <tree editable="false" create="false" delete="false"
                            default_order='date_subject desc'>
                            <field name="message_type_mail" />
                            <button name="mail_compose_action" help="Reply" type="object"
                                attrs="{'invisible':[('message_type_mail', '=', 'email_sent')]}"
                                icon="fa-reply" title="reply" />
                            <button name="mail_compose_message_action_all" help="Reply All"
                                type="object"
                                attrs="{'invisible':[('message_type_mail', '!=', 'email_received')]}"
                                icon="fa-reply-all" title="reply to all" />
                            <button name="mail_compose_message_action_resend" help="Share"
                                type="object"
                                attrs="{'invisible':[('message_type_mail', '=', 'note')]}"
                                icon="fa-share" title="forward" />
                            <field name="date_subject" invisible="1" />
                            <field name="date" invisible="1" />
                            <field name="subject" invisible="1" />
                            <field name="email_from" invisible="1" />
                            <field name="email_to" invisible="1" />
                            <field name="email_cc" invisible="1" />
                            <field
                                name="body"
                                widget="list_message_group_field"
                                options="{'field_groups': [['date','email_from','subject'],['body']]}"
                            />
                            <field name="scheduled_date" string="Scheduled" />
                            <button name="action_cancel_scheduled_email"
                                type="object"
                                icon="fa-trash"
                                title="Cancel Scheduled Email"
                                attrs="{'invisible': [('scheduled_date', '=', False)]}"
                                class="btn-secondary"
                            />
                            <field name="attachment_ids" invisible="1" />
                            <field name="color_row" invisible="1" />
                            <field name="color_background_row" invisible="1" />
                            <field name="message_type" invisible="1" />
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
    <record id="ticket_view_form_rating_status_inherit" model="ir.ui.view">
        <field name="name">ticket.view.form.rating.status.inherit</field>
        <field name="model">helpdesk.ticket</field>
        <field name="inherit_id" ref="helpdesk_mgmt_rating.ticket_view_form_rating_status" />
        <field name="arch" type="xml">
            <xpath expr="//group[@name='main']/group[3]/field[@name='rating_status']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
    <record id="ticket_view_tree_extra_tags_inherit" model="ir.ui.view">
        <field name="name">ticket.view.tree.extra.tags.inherit</field>
        <field name="model">helpdesk.ticket</field>
        <field name="inherit_id" ref="helpdesk_mgmt.ticket_view_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='tag_ids']" position="after">
                <field
                    name="primary_tag_ids"
                    widget="many2many_tags"
                    options="{'color_field': 'color'}"
                    string="Additional Tags 1"
                />
                <field
                    name="secondary_tag_ids"
                    widget="many2many_tags"
                    options="{'color_field': 'color'}"
                    string="Additional Tags 2"
                />
                <field
                    name="partner_category_id"
                    string="Partner Category"
                    widget="many2many_tags"
                    optional="show"
                />
            </xpath>
        </field>
    </record>
</odoo>
