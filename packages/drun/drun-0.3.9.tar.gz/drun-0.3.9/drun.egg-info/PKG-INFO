Metadata-Version: 2.4
Name: drun
Version: 0.3.9
Summary: Minimal HTTP API test runner (MVP)
Author: Drun Team
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: httpx>=0.27
Requires-Dist: pydantic>=2.6
Requires-Dist: jmespath>=1.0
Requires-Dist: PyYAML>=6.0
Requires-Dist: rich>=13.7
Requires-Dist: typer>=0.12
Dynamic: license-file

# Drun

<div align="center">

**é›¶ä»£ç  HTTP API æµ‹è¯•æ¡†æ¶ Â· åŸºäº YAML DSL Â· 5 åˆ†é’Ÿä¸Šæ‰‹**

[![Python Version](https://img.shields.io/badge/python-3.10%2B-blue)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)
[![Version](https://img.shields.io/badge/version-0.3.9-orange)]()

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹-5-åˆ†é’Ÿ) â€¢ [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§) â€¢ [æ ¸å¿ƒæ¦‚å¿µ](#-æ ¸å¿ƒæ¦‚å¿µ) â€¢ [ç¤ºä¾‹](#-å®æˆ˜ç¤ºä¾‹) â€¢ [æ ¼å¼è½¬æ¢](docs/FORMAT_CONVERSION.md) â€¢ [CLI](docs/CLI.md) â€¢ [Reference](docs/REFERENCE.md) â€¢ [å‘½åè§„èŒƒ](docs/NAMING_CONVENTION.md) â€¢ [CI/CD](docs/CI_CD.md)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Drun æ˜¯ä¸€ä¸ª**æç®€ã€å¼ºå¤§ã€ç”Ÿäº§å°±ç»ª**çš„ HTTP API æµ‹è¯•æ¡†æ¶ã€‚ä½¿ç”¨æ¸…æ™°çš„ YAML è¯­æ³•ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œæ— éœ€ç¼–å†™ä»£ç ï¼Œ5 åˆ†é’Ÿå³å¯å®Œæˆç¬¬ä¸€ä¸ªæµ‹è¯•ã€‚

```yaml
# å°±æ˜¯è¿™ä¹ˆç®€å•ï¼
config:
  name: å¥åº·æ£€æŸ¥
  base_url: ${ENV(BASE_URL)}

steps:
  - name: æ£€æŸ¥ API çŠ¶æ€
    request:
      method: GET
      url: /health
    validate:
      - eq: [status_code, 200]
      - eq: [$.data.status, "healthy"]
```

---

 

### ğŸ’¡ ä¸ºä»€ä¹ˆé€‰æ‹© Drunï¼Ÿ

| ç‰¹æ€§ | Drun | å…¶ä»–å·¥å…· |
|------|-----------|----------|
| **é›¶ä»£ç ** | âœ… çº¯ YAMLï¼Œæ— éœ€ç¼–ç¨‹ | âŒ éœ€è¦ Python/JavaScript ä»£ç  |
| **å­¦ä¹ æ›²çº¿** | âœ… 5 åˆ†é’Ÿä¸Šæ‰‹ | âš ï¸ éœ€è¦å­¦ä¹ æµ‹è¯•æ¡†æ¶ |
| **æ¨¡æ¿ç³»ç»Ÿ** | âœ… ç®€æ´çš„ `${expr}` è¯­æ³• | âš ï¸ å¤æ‚çš„æ¨¡æ¿å¼•æ“ |
| **æ ¼å¼è½¬æ¢** | âœ… ç»Ÿä¸€ `convert` å‘½ä»¤æ™ºèƒ½è¯†åˆ«æ ¼å¼ | âŒ éœ€è¦æ‰‹åŠ¨ç¼–å†™æˆ–ç¬¬ä¸‰æ–¹å·¥å…· |
| **æ•°æ®åº“éªŒè¯** | âœ… å†…ç½® SQL æ–­è¨€ | âŒ éœ€è¦é¢å¤–å¼€å‘ |
| **CI/CD å°±ç»ª** | âœ… å¼€ç®±å³ç”¨ | âš ï¸ éœ€è¦é…ç½® |
| **æŠ¥å‘Šç³»ç»Ÿ** | âœ… HTML + JSON + é€šçŸ¥ | âš ï¸ éœ€è¦é›†æˆç¬¬ä¸‰æ–¹ |

### ğŸ¯ é€‚ç”¨åœºæ™¯

- âœ… **æ¥å£æµ‹è¯•**ï¼šREST APIã€å¾®æœåŠ¡æ¥å£éªŒè¯
- âœ… **E2E æµ‹è¯•**ï¼šå®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
- âœ… **å†’çƒŸæµ‹è¯•**ï¼šå¿«é€ŸéªŒè¯æœåŠ¡å¯ç”¨æ€§
- âœ… **å›å½’æµ‹è¯•**ï¼šCI/CD æµæ°´çº¿é›†æˆ
- âœ… **æ€§èƒ½ç›‘æ§**ï¼šå“åº”æ—¶é—´æ–­è¨€

---

## âš¡ æ ¸å¿ƒç‰¹æ€§

### ğŸ”¥ å¼€ç®±å³ç”¨

- **é›¶é…ç½®å¯åŠ¨**ï¼š`pip install -e . && drun run testcases`
- **YAML DSL**ï¼šå£°æ˜å¼æµ‹è¯•ç”¨ä¾‹ï¼ˆCaseï¼‰ï¼Œäººç±»å¯è¯»
- **æ™ºèƒ½å˜é‡ç®¡ç†**ï¼š6 å±‚ä½œç”¨åŸŸï¼Œè‡ªåŠ¨ token æ³¨å…¥
- **JMESPath æå–**ï¼šå¼ºå¤§çš„ JSON æ•°æ®æå–èƒ½åŠ›
- **æ™ºèƒ½æ ¼å¼è½¬æ¢**ï¼šç»Ÿä¸€çš„ `drun convert` å‘½ä»¤ï¼Œæ ¹æ®æ–‡ä»¶åç¼€è‡ªåŠ¨è¯†åˆ« cURL/Postman/HAR æ ¼å¼ï¼Œæ”¯æŒåŒå‘è½¬æ¢ä¸ `--split-output` å•æ­¥å¯¼å‡º

### ğŸš€ é«˜çº§åŠŸèƒ½

- **Hooks ç³»ç»Ÿ**ï¼šæµ‹è¯•å¥—ä»¶ï¼ˆSuiteï¼‰/ç”¨ä¾‹ï¼ˆCaseï¼‰/æ­¥éª¤ï¼ˆStepï¼‰ä¸‰çº§ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ”¯æŒè¯·æ±‚ç­¾åã€æ•°æ®å‡†å¤‡
- **SQL éªŒè¯**ï¼šå†…ç½® MySQL æ”¯æŒï¼ŒæŸ¥è¯¢ç»“æœæ–­è¨€ä¸æå–åˆ—ç»“æœä¸ºå˜é‡
- **å‚æ•°åŒ–æµ‹è¯•**ï¼šå‹ç¼©æ¨¡å¼ï¼ˆzippedï¼‰ï¼Œä¿è¯å¤šå‚æ•°æŒ‰è¡Œæˆç»„ä¼ é€’
- **é‡è¯•æœºåˆ¶**ï¼šæŒ‡æ•°é€€é¿ï¼Œå®¹é”™ä¸ç¨³å®šæ¥å£

### ğŸ“Š ä¼ä¸šçº§ç‰¹æ€§

- **ä¸“ä¸šæŠ¥å‘Š**ï¼š
  - äº¤äº’å¼ HTML æŠ¥å‘Šï¼ˆä¸€é”®å¤åˆ¶ JSON/cURLï¼ŒES5 å…¼å®¹ï¼Œæ”¯æŒæ—§æµè§ˆå™¨å’Œ file:// åè®®ï¼‰
  - ç»“æ„åŒ– JSON æŠ¥å‘Šï¼ˆCI/CD é›†æˆï¼‰
  - Allure é›†æˆï¼ˆè¶‹åŠ¿åˆ†æã€é™„ä»¶ä¸°å¯Œï¼‰
- **é€šçŸ¥é›†æˆ**ï¼šé£ä¹¦å¡ç‰‡/æ–‡æœ¬ã€é’‰é’‰æ–‡æœ¬/Markdownã€é‚®ä»¶ HTML/é™„ä»¶ï¼Œå¤±è´¥èšåˆé€šçŸ¥
- **å®‰å…¨ä¿æŠ¤**ï¼šæ•æ„Ÿæ•°æ®è‡ªåŠ¨è„±æ•ï¼ˆheaders/body/ç¯å¢ƒå˜é‡ï¼‰ï¼Œæ”¯æŒ `--mask-secrets` é€‰é¡¹
- **è°ƒè¯•å‹å¥½**ï¼š
  - Rich å½©è‰²è¾“å‡º
  - cURL å‘½ä»¤ç”Ÿæˆï¼ˆä½¿ç”¨ `--data-raw`ã€JSON è‡ªåŠ¨æ ¼å¼åŒ–ã€è‡ªåŠ¨ Content-Typeï¼‰
  - è¯¦ç»†æ—¥å¿—ï¼ˆæ”¯æŒ `--log-level debug`ã€`--httpx-logs`ï¼‰
  - æ™ºèƒ½é”™è¯¯è¯Šæ–­ï¼ˆYAML ç¼©è¿›é”™è¯¯æç¤ºã€ç²¾å‡†è¡Œå·å®šä½ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (5 åˆ†é’Ÿ)

### 1. å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Devliang24/drun.git
cd drun

# å®‰è£…ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
pip install -e .

# éªŒè¯å®‰è£…
drun --help
```

### 2. é…ç½®ç¯å¢ƒ

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
BASE_URL=https://api.example.com
USER_USERNAME=test_user
USER_PASSWORD=test_pass
# å¯é€‰ï¼šæŸäº›æµ‹è¯•å¯èƒ½éœ€è¦ä»¥ä¸‹å˜é‡
# SHIPPING_ADDRESS=1 Test Road, Test City
# API_KEY=demo-api-key
# APP_SECRET=demo-app-secret
```

### 3. ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•

åˆ›å»º `testcases/test_hello.yaml`ï¼š

```yaml
config:
  name: æˆ‘çš„ç¬¬ä¸€ä¸ªæµ‹è¯•
  base_url: ${ENV(BASE_URL)}
  tags: [smoke]

steps:
  - name: å¥åº·æ£€æŸ¥
    request:
      method: GET
      url: /health
    validate:
      - eq: [status_code, 200]
      - eq: [$.success, true]
```

### 4. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
drun run testcases/test_hello.yaml --env-file .env

# ç”Ÿæˆ HTML æŠ¥å‘Š
drun run testcases --html reports/report.html --env-file .env

# ä½¿ç”¨æ ‡ç­¾è¿‡æ»¤
drun run testcases -k "smoke" --env-file .env
```

> ğŸ’¡ **ç¯å¢ƒåˆ«å**ï¼šä¼ å…¥ `--env-file dev` ä¼šè‡ªåŠ¨è§£æä¸º `.env.dev`ï¼ˆåŒç† `staging` -> `.env.staging`ï¼‰ã€‚å¦‚æœéœ€è¦æŒ‡å®šå…¶ä»–è·¯å¾„ï¼Œä»å¯ç›´æ¥æä¾›å®Œæ•´æ–‡ä»¶åã€‚

### 5. æŸ¥çœ‹ç»“æœ

```
Filter expression: None
[RUN] Discovered files: 1 | Matched cases: 1 | Failfast=False
[CASE] Start: æˆ‘çš„ç¬¬ä¸€ä¸ªæµ‹è¯• | params={}
[CASE] Result: æˆ‘çš„ç¬¬ä¸€ä¸ªæµ‹è¯• | status=passed | duration=145.3ms
Total: 1 Passed: 1 Failed: 0 Skipped: 0 Duration: 145.3ms
HTML report written to reports/report.html
```

ğŸ‰ **æ­å–œï¼**ä½ å·²ç»å®Œæˆäº†ç¬¬ä¸€ä¸ª API æµ‹è¯•ã€‚æ‰“å¼€ `reports/report.html` æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šã€‚

### 6. å¿«é€Ÿè½¬æ¢ç°æœ‰è¯·æ±‚ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ å·²æœ‰ cURL å‘½ä»¤ã€Postman Collection æˆ–æµè§ˆå™¨ HAR è®°å½•ï¼Œå¯ä»¥å¿«é€Ÿè½¬æ¢ä¸º YAMLï¼š

æ³¨æ„ï¼š`drun convert` è¦æ±‚â€œæ–‡ä»¶åœ¨å‰ï¼Œé€‰é¡¹åœ¨åâ€ï¼Œä¸”ä¸æ”¯æŒæ— é€‰é¡¹è½¬æ¢ï¼ˆéœ€è‡³å°‘æä¾›ä¸€ä¸ªé€‰é¡¹ï¼Œå¦‚ `--outfile`/`--split-output`/`--redact`/`--placeholders`ï¼‰ã€‚

- æ­£ç¡®ï¼š`drun convert requests.curl --outfile testcases/from_curl.yaml`
- é”™è¯¯ï¼š`drun convert --outfile testcases/from_curl.yaml requests.curl`

```bash
# cURL â†’ ç”¨ä¾‹ï¼ˆè„±æ• + å˜é‡å ä½ï¼‰
drun convert requests.curl --outfile testcases/from_curl.yaml --redact Authorization,Cookie --placeholders

# Postman â†’ ç”¨ä¾‹ï¼ˆå¦‚æœ‰ç¯å¢ƒæ–‡ä»¶ï¼Œå¯åŠ  --postman-env postman_env.jsonï¼›å¦åˆ™å¯çœç•¥ï¼‰
drun convert api_collection.json \
  --split-output \
  --suite-out testsuites/testsuite_postman.yaml \
  --redact Authorization \
  --placeholders

# HAR â†’ ç”¨ä¾‹ï¼ˆè¿‡æ»¤é™æ€/ä»…ä¿ç•™ 2xx/æ­£åˆ™æ’é™¤ï¼‰
drun convert recording.har --exclude-static --only-2xx --exclude-pattern '(\.png$|/cdn/)' --outfile testcases/from_har.yaml

# OpenAPI â†’ ç”¨ä¾‹ï¼ˆæŒ‰ tag è¿‡æ»¤ï¼Œå¤šæ–‡ä»¶è¾“å‡ºï¼‰
drun convert-openapi spec/openapi/ecommerce_api.json --tags users,orders --split-output --outfile testcases/from_openapi.yaml --redact Authorization --placeholders
```

**æç¤º**ï¼šæ›´å¤šâ€œè½¬æ¢å®æˆ˜â€ç¤ºä¾‹è§ä¸‹æ–¹ã€Œdrun convert - æ™ºèƒ½æ ¼å¼è½¬æ¢ã€ä¸€èŠ‚ã€‚

---

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µ

### æµ‹è¯•ç”¨ä¾‹ï¼ˆCaseï¼‰ç»“æ„

ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆCaseï¼‰åŒ…å«é…ç½®å’Œæµ‹è¯•æ­¥éª¤ï¼ˆStepï¼‰ï¼š

```yaml
config:                              # é…ç½®å—
  name: æµ‹è¯•ç”¨ä¾‹åç§°                  # å¿…éœ€
  base_url: https://api.example.com  # åŸºç¡€ URL
  variables:                         # ç”¨ä¾‹çº§å˜é‡
    api_key: my-key
  tags: [smoke, p0]                  # æ ‡ç­¾ï¼ˆç”¨äºè¿‡æ»¤ï¼‰

steps:                               # æµ‹è¯•æ­¥éª¤ï¼ˆStepï¼‰åˆ—è¡¨
  - name: æ­¥éª¤ 1                      # æ­¥éª¤åç§°
    request:                         # HTTP è¯·æ±‚å®šä¹‰
      method: GET                    # HTTP æ–¹æ³•
      url: /api/users                # è·¯å¾„ï¼ˆç›¸å¯¹äº base_urlï¼‰
    validate:                        # æ–­è¨€åˆ—è¡¨
      - eq: [status_code, 200]       # çŠ¶æ€ç æ–­è¨€
```

### Dollar æ¨¡æ¿è¯­æ³•

Drun ä½¿ç”¨ç®€æ´çš„ **Dollar è¡¨è¾¾å¼** `${...}` è¿›è¡Œå˜é‡æ’å€¼å’Œå‡½æ•°è°ƒç”¨ï¼š

```yaml
# 1. ç®€å•å˜é‡å¼•ç”¨
url: /users/$user_id                 # ç­‰åŒäº /users/123

# 2. å‡½æ•°è°ƒç”¨ï¼ˆèŠ±æ‹¬å·ï¼‰
headers:
  X-Timestamp: ${ts()}               # è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°ï¼ˆéœ€åœ¨ drun_hooks.py ä¸­å®šä¹‰ï¼‰
  X-Signature: ${md5($api_key)}      # å‡½æ•°åµŒå¥—ã€å‚æ•°å¯ä»¥æ˜¯å˜é‡

# 3. ç¯å¢ƒå˜é‡è¯»å–
base_url: ${ENV(BASE_URL)}           # è¯»å–ç¯å¢ƒå˜é‡ï¼ˆå¿…éœ€ï¼‰
api_key: ${ENV(API_KEY, default)}    # å¸¦é»˜è®¤å€¼ï¼ˆå¯é€‰å‚æ•°ï¼‰

# 4. ç®—æœ¯è¿ç®—
body:
  user_id: ${int($user_id) + 1}      # æ”¯æŒåŸºæœ¬è¿ç®—ï¼ˆç±»å‹è½¬æ¢ + è®¡ç®—ï¼‰
  total: ${float($price) * $quantity}
```

> **æç¤º**ï¼š`$var` æ˜¯ `${var}` çš„ç®€å†™å½¢å¼ï¼Œä¸¤è€…å®Œå…¨ç­‰ä»·ã€‚å¤æ‚è¡¨è¾¾å¼å¿…é¡»ä½¿ç”¨ `${...}` æ ¼å¼ã€‚

### å˜é‡ä½œç”¨åŸŸä¼˜å…ˆçº§

å˜é‡æŸ¥æ‰¾é¡ºåºï¼ˆ**ä»é«˜åˆ°ä½**ï¼‰ï¼š

```
1. CLI è¦†ç›–      --vars key=value (æœ€é«˜ä¼˜å…ˆçº§)
2. æ­¥éª¤å˜é‡      steps[].variables (å½“å‰æ­¥éª¤å†…æœ‰æ•ˆ)
3. é…ç½®å˜é‡      config.variables (ç”¨ä¾‹çº§å…¨å±€)
4. å‚æ•°å˜é‡      config.parameters (å‚æ•°åŒ–æµ‹è¯•æ—¶æ³¨å…¥)
5. æå–å˜é‡      steps[].extract (ä»å½“å‰æ­¥éª¤å“åº”æå–ï¼Œå­˜å…¥ä¼šè¯ä¾›åç»­æ­¥éª¤ä½¿ç”¨)
```

> **æ³¨æ„**ï¼š`${ENV(KEY)}` ç”¨äºè¯»å–æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œä¸å±äºå˜é‡ä½œç”¨åŸŸçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯æ¨¡æ¿å¼•æ“çš„å†…ç½®å‡½æ•°ã€‚

ç¤ºä¾‹ï¼š

```yaml
config:
  variables:
    user_id: 100        # ä¼˜å…ˆçº§ 3ï¼šé…ç½®å˜é‡ï¼ˆç”¨ä¾‹çº§å…¨å±€ï¼‰
  parameters:
    - user_id: [1, 2]       # ä¼˜å…ˆçº§ 4ï¼šå‚æ•°å˜é‡ä¼šè¢«é…ç½®å˜é‡è¦†ç›–

steps:
  - name: ç™»å½•
    request:
      url: /api/login
    extract:
      user_id: $.data.id  # ä¼˜å…ˆçº§ 5ï¼šä»å“åº”æå–ï¼Œå­˜å…¥ä¼šè¯
                          # æå–åå¯¹æœ¬æ­¥éª¤åŠåç»­æ‰€æœ‰æ­¥éª¤å¯è§

  - name: åˆ›å»ºè®¢å•
    request:
      url: /api/orders/$user_id  # ä½¿ç”¨æå–çš„ user_idï¼ˆæ¥è‡ªç™»å½•å“åº”ï¼‰

  - name: æŸ¥çœ‹è®¢å•è¯¦æƒ…
    variables:
      user_id: 999      # ä¼˜å…ˆçº§ 2ï¼šæ­¥éª¤å˜é‡ï¼ˆä»…å½“å‰æ­¥éª¤å†…æœ€é«˜ï¼‰
    request:
      url: /api/users/$user_id  # ä½¿ç”¨ 999ï¼ˆæ­¥éª¤å˜é‡è¦†ç›–æå–å˜é‡ï¼‰
```

---

## ğŸ”§ å¸¸ç”¨åŠŸèƒ½

### æ–­è¨€å’ŒéªŒè¯

æ”¯æŒä¸°å¯Œçš„æ–­è¨€å™¨ï¼š

| æ–­è¨€å™¨ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `eq` | ç­‰äº | `- eq: [status_code, 200]` |
| `ne` | ä¸ç­‰äº | `- ne: [$.error, null]` |
| `lt` / `le` | å°äº / å°äºç­‰äº | `- lt: [$elapsed_ms, 1000]` |
| `gt` / `ge` | å¤§äº / å¤§äºç­‰äº | `- gt: [$.count, 0]` |
| `contains` | åŒ…å«å­ä¸²/å…ƒç´  | `- contains: [$.message, "success"]` |
| `not_contains` | ä¸åŒ…å« | `- not_contains: [$.errors, "fatal"]` |
| `regex` | æ­£åˆ™åŒ¹é… | `- regex: [$.email, ".*@example\\.com"]` |
| `len_eq` | é•¿åº¦ç­‰äº | `- len_eq: [$.items, 10]` |
| `in` | å…ƒç´ åœ¨é›†åˆä¸­ | `- in: ["admin", $.roles]` |

**æ£€æŸ¥ç›®æ ‡**ï¼š

```yaml
validate:
  - eq: [status_code, 200]            # çŠ¶æ€ç 
  - eq: [headers.Content-Type, "application/json"]  # å“åº”å¤´
  - eq: [$.data.user.id, 123]         # å“åº”ä½“ï¼ˆJMESPathï¼‰
  - lt: [$elapsed_ms, 500]            # å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
```

### æ•°æ®æå– (JMESPath)

ä»å“åº”ä¸­æå–æ•°æ®ä¾›åç»­æ­¥éª¤ä½¿ç”¨ï¼š

```yaml
steps:
  - name: ç™»å½•
    request:
      method: POST
      url: /api/auth/login
      body:
        username: admin
        password: pass123
    extract:
      token: $.data.access_token      # æå– token
      user_id: $.data.user.id          # æå–ç”¨æˆ· ID
      role: $.data.user.role           # æå–è§’è‰²
    validate:
      - eq: [status_code, 200]

  - name: è·å–ç”¨æˆ·ä¿¡æ¯
    request:
      method: GET
      url: /api/users/$user_id         # ä½¿ç”¨æå–çš„ user_id
      headers:
        Authorization: Bearer $token    # ä½¿ç”¨æå–çš„ token
    validate:
      - eq: [$.data.role, $role]       # ä½¿ç”¨æå–çš„ role
```

**å¸¸ç”¨ JMESPath æ¨¡å¼**ï¼š

```yaml
extract:
  # åŸºç¡€è·¯å¾„
  user_id: $.data.user.id              # åµŒå¥—å¯¹è±¡
  first_name: $[0].name                # æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ 

  # æ•°ç»„æ“ä½œ
  all_ids: $.data.items[*].id          # æ‰€æœ‰ ID
  first_id: $.data.items[0].id         # ç¬¬ä¸€ä¸ª ID

  # å“åº”å…ƒæ•°æ®
  content_type: $headers.Content-Type   # å“åº”å¤´
  status: $status_code                  # çŠ¶æ€ç 
```

### Token è‡ªåŠ¨æ³¨å…¥

æå–åä¸º `token` çš„å˜é‡åï¼Œåç»­è¯·æ±‚è‡ªåŠ¨æ·»åŠ  `Authorization: Bearer {token}` å¤´ï¼š

```yaml
steps:
  - name: ç™»å½•
    request:
      method: POST
      url: /api/auth/login
      body:
        username: ${ENV(USER_USERNAME)}
        password: ${ENV(USER_PASSWORD)}
    extract:
      token: $.data.access_token        # æå– token

  - name: è®¿é—®å—ä¿æŠ¤èµ„æº
    request:
      method: GET
      url: /api/users/me
      # æ— éœ€æ‰‹åŠ¨è®¾ç½® Authorization å¤´ï¼Œè‡ªåŠ¨æ³¨å…¥ï¼
    validate:
      - eq: [status_code, 200]
```

> **æ³¨æ„**ï¼šå¦‚æœæ­¥éª¤æ˜¾å¼è®¾ç½®äº† `Authorization` å¤´ï¼Œåˆ™ä¸ä¼šè‡ªåŠ¨æ³¨å…¥ã€‚

### æ ‡ç­¾è¿‡æ»¤

ä½¿ç”¨é€»è¾‘è¡¨è¾¾å¼è¿‡æ»¤è¦è¿è¡Œçš„æµ‹è¯•ï¼š

```bash
# è¿è¡Œ smoke æµ‹è¯•
drun run testcases -k "smoke"

# åŒæ—¶åŒ…å«ä¸¤ä¸ªæ ‡ç­¾
drun run testcases -k "smoke and regression"

# ä»»ä¸€æ ‡ç­¾åŒ¹é…
drun run testcases -k "smoke or p0"

# æ’é™¤æ…¢é€Ÿæµ‹è¯•
drun run testcases -k "not slow"

# å¤æ‚è¡¨è¾¾å¼
drun run testcases -k "(smoke or regression) and not slow and not flaky"
```

**æ ‡ç­¾å®šä¹‰**ï¼š

```yaml
config:
  name: ç”¨æˆ·ç™»å½•æµ‹è¯•
  tags: [smoke, auth, p0]    # å®šä¹‰å¤šä¸ªæ ‡ç­¾
```

æƒ³å¿«é€ŸæŸ¥çœ‹é¡¹ç›®ä¸­å·²æœ‰çš„æ ‡ç­¾ï¼Œå¯ä½¿ç”¨ CLIï¼š

```bash
drun tags              # æ‰«æé»˜è®¤çš„ testcases ç›®å½•
drun tags testsuites   # æŒ‡å®šå…¶å®ƒç›®å½•
```

**è¾“å‡ºæ ¼å¼**ï¼š

```
[OK] testcases/test_login.yaml -> 1 cases
[OK] testcases/test_health.yaml -> 1 cases

Tag Summary:
- smoke: 2 cases
    â€¢ å¥åº·æ£€æŸ¥ -> testcases/test_health.yaml
    â€¢ ç”¨æˆ·ç™»å½•æµ‹è¯• -> testcases/test_login.yaml
- auth: 1 cases
    â€¢ ç”¨æˆ·ç™»å½•æµ‹è¯• -> testcases/test_login.yaml
- p0: 1 cases
    â€¢ ç”¨æˆ·ç™»å½•æµ‹è¯• -> testcases/test_login.yaml
```

è¾“å‡ºåŒ…å«ï¼š
- **æ–‡ä»¶æ‰«ææ—¥å¿—**ï¼šæ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„è§£æçŠ¶æ€å’Œç”¨ä¾‹æ•°é‡
- **æ ‡ç­¾æ±‡æ€»**ï¼šæŒ‰å­—æ¯åºåˆ—å‡ºæ‰€æœ‰æ ‡ç­¾ï¼Œæ¯ä¸ªæ ‡ç­¾æ˜¾ç¤ºç”¨ä¾‹æ•°é‡å’Œè¯¦ç»†çš„ç”¨ä¾‹åç§°ä¸æ–‡ä»¶è·¯å¾„

---

## ğŸ”„ æ ¼å¼è½¬æ¢

è¯¦å°½çš„è½¬æ¢/å¯¼å‡ºæ”»ç•¥è¯·æŸ¥çœ‹ [docs/FORMAT_CONVERSION.md](docs/FORMAT_CONVERSION.md)ã€‚è¯¥æ–‡æ¡£æŒ‰èµ„äº§ç±»å‹æ•´ç†äº†é«˜é¢‘å‘½ä»¤ã€è„±æ•ç­–ç•¥ã€å¯¼å‡ºç»„åˆä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥ï¼Œé£æ ¼ä¸ CI/CD æ–‡æ¡£ä¿æŒä¸€è‡´ã€‚å‘½ä»¤çš„å®Œæ•´å‚æ•°è¯´æ˜ä»å¯åœ¨ [docs/CLI.md](docs/CLI.md) ä¸­æŸ¥é˜…ã€‚

---

## ğŸ¨ é«˜çº§åŠŸèƒ½

### Hooks ç³»ç»Ÿ

Hooks å…è®¸åœ¨æµ‹è¯•ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µæ‰§è¡Œè‡ªå®šä¹‰ Python å‡½æ•°ã€‚

> **æç¤º**ï¼šé¡¹ç›®æ ¹ç›®å½•å·²æä¾› `drun_hooks.py` ç¤ºä¾‹æ–‡ä»¶ï¼ŒåŒ…å«å¸¸ç”¨çš„æ¨¡æ¿è¾…åŠ©å‡½æ•°ï¼ˆå¦‚ `ts()`ã€`md5()`ã€`uid()`ï¼‰å’Œç”Ÿå‘½å‘¨æœŸ Hooksï¼ˆå¦‚ `setup_hook_sign_request`ï¼‰ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚
>
> **è¿ç§»æé†’ï¼ˆ0.2.x â†’ 0.3.xï¼‰**ï¼š
> - å¦‚æœä½ çš„é¡¹ç›®ä»ä½¿ç”¨æ—§æ–‡ä»¶å `arun_hooks.py`ï¼Œè¯·æ”¹åä¸º `drun_hooks.py`ã€‚
> - è‹¥ä¹‹å‰é€šè¿‡ `ARUN_HOOKS_FILE=/path/to/arun_hooks.py` æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„ï¼Œè¯·æ”¹æˆ `DRUN_HOOKS_FILE=/path/to/drun_hooks.py`ï¼ˆè·¯å¾„å¯ä¿æŒä¸å˜ï¼‰ã€‚
> - æ›´æ–°å®Œæ¯•åé‡æ–°è¿è¡Œ `drun run ...`ï¼Œç¡®è®¤ `${hook(...)}`
>   è°ƒç”¨æŒ‰é¢„æœŸè§¦å‘ã€‚

**å‡½æ•°åˆ†ç±»**ï¼š
- **æ¨¡æ¿è¾…åŠ©å‡½æ•°**ï¼šåœ¨ `${}` è¡¨è¾¾å¼ä¸­è°ƒç”¨ï¼Œç”¨äºæ•°æ®ç”Ÿæˆã€æ ¼å¼åŒ–ç­‰ï¼ˆå¦‚ `${ts()}`ã€`${md5($key)}`ï¼‰
- **ç”Ÿå‘½å‘¨æœŸ Hooks**ï¼šåœ¨ `setup_hooks/teardown_hooks` ä¸­ä½¿ç”¨ï¼Œç”¨äºè¯·æ±‚å‰å¤„ç†ã€å“åº”åéªŒè¯ï¼ˆå¦‚ `${setup_hook_sign_request($request)}`ï¼‰

#### Hook ç±»å‹

```yaml
# Suite çº§åˆ«ï¼ˆåœ¨ Suite é…ç½®ä¸­ï¼‰
config:
  setup_hooks:              # Suite å¼€å§‹å‰æ‰§è¡Œ
    - ${suite_setup()}
  teardown_hooks:           # Suite ç»“æŸåæ‰§è¡Œ
    - ${suite_teardown()}

# Case çº§åˆ«ï¼ˆåœ¨ Case é…ç½®ä¸­ï¼‰
config:
  setup_hooks:              # Case å¼€å§‹å‰æ‰§è¡Œ
    - ${case_setup()}
  teardown_hooks:           # Case ç»“æŸåæ‰§è¡Œ
    - ${case_cleanup()}

# Step çº§åˆ«ï¼ˆåœ¨æµ‹è¯•æ­¥éª¤ï¼ˆStepï¼‰ä¸­ï¼‰
steps:
  - name: å‘é€è¯·æ±‚
    setup_hooks:            # æ­¥éª¤å¼€å§‹å‰æ‰§è¡Œ
      - ${setup_hook_sign_request($request)}
    teardown_hooks:         # æ­¥éª¤ç»“æŸåæ‰§è¡Œ
      - ${teardown_hook_validate($response)}
```

#### è‡ªå®šä¹‰ Hooks

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `drun_hooks.py`ï¼š

```python
import time
import hmac
import hashlib

def ts() -> int:
    """è¿”å›å½“å‰ Unix æ—¶é—´æˆ³"""
    return int(time.time())

def setup_hook_sign_request(request: dict, variables: dict = None, env: dict = None) -> dict:
    """è¯·æ±‚ç­¾å Hookï¼šæ·»åŠ æ—¶é—´æˆ³å’Œ HMAC ç­¾å"""
    secret = env.get('APP_SECRET', '').encode()
    method = request.get('method', 'GET')
    url = request.get('url', '')
    timestamp = str(ts())

    # è®¡ç®— HMAC ç­¾å
    message = f"{method}|{url}|{timestamp}".encode()
    signature = hmac.new(secret, message, hashlib.sha256).hexdigest()

    # æ·»åŠ ç­¾åå¤´
    headers = request.setdefault('headers', {})
    headers['X-Timestamp'] = timestamp
    headers['X-Signature'] = signature

    # è¿”å›æ–°å˜é‡ï¼ˆå¯é€‰ï¼‰
    return {'last_signature': signature}

def teardown_hook_validate(response: dict, variables: dict = None, env: dict = None):
    """å“åº”éªŒè¯ Hookï¼šç¡®ä¿çŠ¶æ€ç ä¸º 200"""
    if response.get('status_code') != 200:
        raise AssertionError(f"Expected 200, got {response.get('status_code')}")
```

**Hook ä¸Šä¸‹æ–‡å˜é‡**ï¼š

- `$request` - å½“å‰è¯·æ±‚å¯¹è±¡
- `$response` - å½“å‰å“åº”å¯¹è±¡
- `$step_name` - å½“å‰æ­¥éª¤åç§°
- `$session_variables` - æ‰€æœ‰ä¼šè¯å˜é‡
- `$session_env` - ç¯å¢ƒå˜é‡

#### ä½¿ç”¨ Hooks

```yaml
config:
  name: ç­¾å API æµ‹è¯•
  base_url: ${ENV(BASE_URL)}
  setup_hooks:
    - ${setup_hook_sign_request($request)}

steps:
  - name: è·å–ç”¨æˆ·ä¿¡æ¯
    request:
      method: GET
      url: /api/secure/users
    teardown_hooks:
      - ${teardown_hook_validate($response)}
    validate:
      - eq: [status_code, 200]
```

### å‚æ•°åŒ–æµ‹è¯•

Drun æ”¯æŒ**å‹ç¼©ï¼ˆzippedï¼‰å‚æ•°åŒ–**ï¼Œè®©ä½ ä½¿ç”¨ä¸åŒå‚æ•°ç»„åˆå¤šæ¬¡è¿è¡ŒåŒä¸€æµ‹è¯•ã€‚å‚æ•°å®šä¹‰åœ¨ `config.parameters` ä¸­ï¼Œæ”¯æŒå•å˜é‡åˆ—è¡¨å’Œå¤šå˜é‡ç»‘å®šä¸¤ç§ç”¨æ³•ã€‚

#### ç”¨æ³• 1ï¼šå•å˜é‡åˆ—è¡¨

é€‚åˆå•ä¸ªå‚æ•°çš„å¤šä¸ªå–å€¼åœºæ™¯ï¼Œå¦‚æµ‹è¯•ä¸åŒæ•°é‡ã€ä¸åŒç¯å¢ƒç­‰ã€‚

```yaml
config:
  name: è®¢å•æ•°é‡æµ‹è¯•
  base_url: ${ENV(BASE_URL)}
  parameters:
    - quantity: [1, 2, 5, 10]
    # ç”Ÿæˆ 4 ä¸ªæµ‹è¯•å®ä¾‹ï¼Œåˆ†åˆ«æµ‹è¯• quantity=1, 2, 5, 10

steps:
  - name: åˆ›å»ºè®¢å•
    request:
      method: POST
      url: /api/orders
      body:
        product_id: "PROD-001"
        quantity: $quantity
    validate:
      - eq: [status_code, 201]
      - eq: [$.data.quantity, $quantity]
```

**å®é™…ç¤ºä¾‹ï¼š** `testcases/test_e2e_purchase.yaml:11-12`

#### ç”¨æ³• 2ï¼šå¤šå˜é‡ç»‘å®šï¼ˆæ¨èï¼‰

ä½¿ç”¨**è¿å­—ç¬¦ `-`** è¿æ¥å˜é‡åï¼Œå°†å¤šä¸ªç›¸å…³å‚æ•°ç»‘å®šä¸ºä¸€ç»„ã€‚é€‚åˆæµ‹è¯•ç”¨æˆ·å‡­è¯ã€åæ ‡å¯¹ã€é…ç½®ç»„åˆç­‰åœºæ™¯ã€‚

```yaml
config:
  name: ç™»å½•æµ‹è¯•
  base_url: ${ENV(BASE_URL)}
  parameters:
    - username-password-expected_status:
        - ["alice", "pass123", 200]      # æ­£å¸¸ç™»å½•
        - ["bob", "wrong_pwd", 401]      # å¯†ç é”™è¯¯
        - ["unknown", "any_pwd", 401]    # ç”¨æˆ·ä¸å­˜åœ¨
    # ç”Ÿæˆ 3 ä¸ªæµ‹è¯•å®ä¾‹ï¼Œæ¯ç»„å‚æ•°æˆå¯¹ä½¿ç”¨

steps:
  - name: å°è¯•ç™»å½•
    request:
      method: POST
      url: /api/login
      body:
        username: $username
        password: $password
    validate:
      - eq: [status_code, $expected_status]
```

**å®é™…ç¤ºä¾‹ï¼š** `testcases/test_login_zipped.yaml:5-8`

#### ç”¨æ³• 3ï¼šå¤šç»„ç¬›å¡å°”ç§¯ï¼ˆé«˜çº§ï¼‰

å®šä¹‰å¤šä¸ªå‹ç¼©ç»„æ—¶ï¼ŒDrun ä¼šè‡ªåŠ¨ç”Ÿæˆç¬›å¡å°”ç§¯ç»„åˆï¼Œé€‚åˆè·¨ç¯å¢ƒã€è·¨åŒºåŸŸçš„ç»„åˆæµ‹è¯•ã€‚

```yaml
config:
  name: å¤šç¯å¢ƒå¥åº·æ£€æŸ¥
  base_url: ${ENV(BASE_URL)}
  parameters:
    - env: [dev, staging, prod]         # 3 ä¸ªç¯å¢ƒ
    - region: [us, eu, asia]            # 3 ä¸ªåŒºåŸŸ
    # ç”Ÿæˆ 3 Ã— 3 = 9 ä¸ªæµ‹è¯•å®ä¾‹

steps:
  - name: æ£€æŸ¥æœåŠ¡å¥åº·
    variables:
      full_url: https://${env}-${region}.example.com
    request:
      method: GET
      url: ${full_url}/health
    validate:
      - eq: [status_code, 200]
      - contains: [$.data.region, $region]
```

**ç»„åˆè¯´æ˜ï¼š** ä¸¤ä¸ªå‹ç¼©ç»„ä¼šç”Ÿæˆ 9 ä¸ªå®ä¾‹ï¼š
- (dev, us), (dev, eu), (dev, asia)
- (staging, us), (staging, eu), (staging, asia)
- (prod, us), (prod, eu), (prod, asia)

> **æœ€ä½³å®è·µï¼š**
> - å•å˜é‡ç”¨åˆ—è¡¨ï¼š`- quantity: [1, 2, 3]`
> - å¤šå˜é‡ç”¨ç»‘å®šï¼š`- username-password: [[alice, pass123], [bob, secret456]]`
> - éœ€è¦ç¬›å¡å°”ç§¯æ—¶å®šä¹‰å¤šä¸ªå‹ç¼©ç»„ï¼š`- env: [dev, prod]` + `- region: [us, eu]`
> - å˜é‡åç”¨è¿å­—ç¬¦åˆ†éš”ï¼Œä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–ç©ºæ ¼

**æ›´å¤šç¤ºä¾‹ï¼š** å‚è§ `examples/test_params_zipped.yaml` å’Œ `testcases/test_register_zipped.yaml`

#### ç”¨æ³• 4ï¼šCSV æ•°æ®é©±åŠ¨

å½“æµ‹è¯•æ•°æ®è¾ƒå¤šæˆ–å·²ç»ç»´æŠ¤åœ¨è¡¨æ ¼ä¸­æ—¶ï¼Œå¯ä»¥ç›´æ¥å¼•å…¥ CSV æ–‡ä»¶ã€‚`path` æ”¯æŒç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºç”¨ä¾‹æ–‡ä»¶ï¼‰ï¼ŒDrun ä¼šæŠŠæ¯ä¸€è¡Œè½¬æ¢ä¸ºå‚æ•°å­—å…¸ï¼Œå†ä¸å…¶å®ƒå‚æ•°ç»„åšç¬›å¡å°”ç§¯ã€‚

```yaml
config:
  name: ç™»å½•æ ¡éªŒï¼ˆCSVï¼‰
  base_url: ${ENV(BASE_URL)}
  parameters:
    - csv:
        path: data/login_users.csv   # ç›¸å¯¹äºå½“å‰ YAML çš„è·¯å¾„
        strip: true                  # å¯é€‰ï¼šè‡ªåŠ¨ trim æ¯ä¸ªå•å…ƒæ ¼

steps:
  - name: å°è¯•ç™»å½•
    request:
      method: GET
      url: /login?username=$username&password=$password&env=$env
    validate:
      - eq: [status_code, 200]
```

å¯é€‰å­—æ®µï¼š

- `columns`: CSV æ²¡æœ‰è¡¨å¤´æ—¶æŒ‡å®šåˆ—åï¼ˆç¤ºä¾‹ï¼š`[username, password, env]`ï¼‰ã€‚
- `header`: æ˜¯å¦è¯»å–é¦–è¡Œä¸ºè¡¨å¤´ï¼Œé»˜è®¤ `true`ã€‚
- `delimiter`: åˆ†éš”ç¬¦ï¼Œé»˜è®¤é€—å·ã€‚
- `encoding`: æ–‡ä»¶ç¼–ç ï¼Œé»˜è®¤ `utf-8`ã€‚

**å®é™…ç¤ºä¾‹ï¼š** `examples/basic-examples/test_params_csv.yaml`

### SQL éªŒè¯

å¯¹æ•°æ®åº“çŠ¶æ€è¿›è¡Œæ–­è¨€ï¼Œç¡®ä¿ API æ“ä½œæ­£ç¡®å†™å…¥æ•°æ®åº“ã€‚

#### ç¯å¢ƒé…ç½®

```env
# æ–¹å¼ 1ï¼šç‹¬ç«‹é…ç½®
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=test_user
MYSQL_PASSWORD=test_pass
MYSQL_DB=test_database

# æ–¹å¼ 2ï¼šDSN è¿æ¥ä¸²
MYSQL_DSN=mysql://user:pass@localhost:3306/test_db
```

#### ä½¿ç”¨ç¤ºä¾‹

```yaml
steps:
  - name: åˆ›å»ºè®¢å•
    request:
      method: POST
      url: /api/orders
      body:
        product_id: "PROD-001"
        quantity: 2
    extract:
      order_id: $.data.order_id
    validate:
      - eq: [status_code, 201]

    sql_validate:
      # æŸ¥è¯¢ 1ï¼šéªŒè¯è®¢å•çŠ¶æ€
      - query: "SELECT status, total FROM orders WHERE id='$order_id'"
        expect:
          - eq: [status, "pending"]     # æ–­è¨€ status å­—æ®µ
          - gt: [total, 0]              # æ–­è¨€ total å­—æ®µ
        extract:
          db_status: $status            # æå–åˆ—ç»“æœä¸ºå˜é‡
          db_total: $total

      # æŸ¥è¯¢ 2ï¼šéªŒè¯è®¢å•é¡¹æ•°é‡
      - query: "SELECT COUNT(*) AS cnt FROM order_items WHERE order_id='$order_id'"
        expect:
          - ge: [cnt, 1]                # è‡³å°‘ 1 æ¡è®°å½•

      # æŸ¥è¯¢ 3ï¼šä½¿ç”¨ä¸åŒæ•°æ®åº“
      - query: "SELECT log FROM audit.logs WHERE order_id='$order_id'"
        dsn: mysql://user:pass@audit-host:3306/audit_db
        expect:
          - contains: [log, "order_created"]
```

**SQL éªŒè¯é€‰é¡¹**ï¼š

- `query` - SQL æŸ¥è¯¢ï¼ˆå¿…éœ€ï¼Œæ”¯æŒå˜é‡æ’å€¼ï¼‰
- `expect` - æ–­è¨€åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
- `extract` - ä½¿ç”¨ `$` è¡¨è¾¾å¼æå–åˆ—ç»“æœä¸ºå˜é‡ï¼ˆå¯é€‰ï¼Œä¾‹å¦‚ `$status`ï¼‰
- `allow_empty` - å…è®¸ç©ºç»“æœï¼ˆå¯é€‰ï¼Œé»˜è®¤ falseï¼‰
- `dsn` - è¦†ç›–æ•°æ®åº“è¿æ¥ï¼ˆå¯é€‰ï¼‰

### é‡è¯•æœºåˆ¶

ä¸ºä¸ç¨³å®šçš„æ¥å£é…ç½®è‡ªåŠ¨é‡è¯•ï¼š

```yaml
steps:
  - name: è°ƒç”¨ä¸ç¨³å®šæ¥å£
    request:
      method: GET
      url: /api/flaky-endpoint
    retry: 3                  # æœ€å¤šé‡è¯• 3 æ¬¡
    retry_backoff: 0.5        # åˆå§‹é€€é¿ 0.5 ç§’
                              # é‡è¯•é—´éš”ï¼š0.5s â†’ 1.0s â†’ 2.0sï¼ˆæŒ‡æ•°å¢é•¿ï¼Œä¸Šé™ 2.0sï¼‰
    validate:
      - eq: [status_code, 200]
```

---

## ğŸ“Š æŠ¥å‘Šå’Œé€šçŸ¥

### HTML æŠ¥å‘Š

ç”Ÿæˆäº¤äº’å¼ HTML æŠ¥å‘Šï¼š

```bash
drun run testcases --html reports/report.html
```

æˆªå›¾é¢„è§ˆï¼ˆç»Ÿä¸€æµ…è‰²é£æ ¼ï¼‰

```bash
# ç”Ÿæˆå¹¶é¢„è§ˆï¼ˆç¤ºä¾‹ä½¿ç”¨å¼•ç”¨å‹æµ‹è¯•å¥—ä»¶ï¼ˆTestsuiteï¼‰ï¼‰
python -m drun.cli run testsuites/testsuite_smoke.yaml \
  --env-file .env \
  --html reports/report.html

# æ‰“å¼€ï¼šreports/report.html
```

**ç‰¹æ€§**ï¼š
- ğŸ“ˆ **æ‘˜è¦ä»ªè¡¨æ¿**ï¼šæ€»æ•°ã€é€šè¿‡ã€å¤±è´¥ã€è·³è¿‡ã€è€—æ—¶ï¼ˆéšç­›é€‰åŠ¨æ€æ›´æ–°ï¼‰
- ğŸ” **è¯¦ç»†æ–­è¨€**ï¼šæ¯ä¸ªæ–­è¨€çš„æœŸæœ›å€¼ã€å®é™…å€¼ã€ç»“æœï¼ˆæ”¯æŒ"ä»…å¤±è´¥æ–­è¨€"ç­›é€‰ï¼‰
- ğŸ“¦ **å®Œæ•´è°ƒè¯•ä¿¡æ¯**ï¼šè¯·æ±‚/å“åº”/æå–å˜é‡/cURL å‘½ä»¤ï¼ˆæ”¯æŒä¸€é”®å¤åˆ¶ï¼Œå¸¦è§†è§‰åé¦ˆï¼‰
  - âœ… å¤åˆ¶æˆåŠŸï¼šç»¿è‰²é«˜äº®æç¤º"å·²å¤åˆ¶"
  - âš ï¸ å¤åˆ¶å¤±è´¥ï¼ˆHTTPS é™åˆ¶ï¼‰ï¼šæ©™è‰²æç¤º"å·²é€‰ä¸­ï¼ŒæŒ‰ Ctrl/Cmd+C"è‡ªåŠ¨é€‰ä¸­æ–‡æœ¬
  - ğŸ¯ ç²¾å‡†å¤åˆ¶ï¼šåŸºäºåŸå§‹æ•°æ®ï¼Œç¡®ä¿ JSON æ ¼å¼å‡†ç¡®æ— è¯¯
  - ğŸ”§ cURL å‘½ä»¤ï¼šä½¿ç”¨ `--data-raw` ç¡®ä¿è½½è·ä¸è¢«ä¿®æ”¹ï¼ŒJSON è‡ªåŠ¨æ ¼å¼åŒ–
- ğŸ›ï¸ **äº¤äº’å¢å¼º**ï¼š
  - çŠ¶æ€ç­›é€‰ï¼šé€šè¿‡/å¤±è´¥/è·³è¿‡
  - ä»…å¤±è´¥æ–­è¨€ã€ä»…å¤±è´¥æ–­è¨€æ­¥éª¤ã€å±•å¼€/æŠ˜å å…¨éƒ¨ã€ä»…å¤±è´¥ç”¨ä¾‹
- ğŸ§© **JSON è¯­æ³•é«˜äº®**ï¼šè¯·æ±‚/å“åº”/æå–å˜é‡é‡‡ç”¨è½»é‡é«˜äº®ï¼ˆé›¶ä¾èµ–ã€ES5 å…¼å®¹ï¼‰
- ğŸ¨ **GitHub ä¸»é¢˜**ï¼šé»˜è®¤æµ…è‰² GitHub é£æ ¼ï¼Œç®€æ´ä¸“ä¸š
- ğŸŒ **å…¼å®¹æ€§**ï¼šES5 å…¼å®¹ï¼Œæ”¯æŒæ—§æµè§ˆå™¨å’Œ `file://` åè®®è®¿é—®

### JSON æŠ¥å‘Š

ç”Ÿæˆç»“æ„åŒ– JSON æŠ¥å‘Šï¼š

```bash
drun run testcases --report reports/run.json
```

**æ ¼å¼**ï¼š

```json
{
  "summary": {
    "total": 10,
    "passed": 8,
    "failed": 2,
    "skipped": 0,
    "duration_ms": 2456.7
  },
  "cases": [
    {
      "name": "ç”¨æˆ·ç™»å½•",
      "status": "passed",
      "duration_ms": 145.3,
      "parameters": {},
      "steps": [...]
    }
  ]
}
```

### Allure æŠ¥å‘Š

ç”Ÿæˆ Allure åŸå§‹ç»“æœï¼ˆå¯ç”¨ Allure CLI/æ’ä»¶æ¸²æŸ“æˆå¯è§†åŒ–æŠ¥å‘Šï¼‰ï¼š

```bash
# ç”Ÿæˆ Allure ç»“æœ
drun run testcases --allure-results allure-results

# ä½¿ç”¨ Allure CLI ç”Ÿæˆä¸æ‰“å¼€æŠ¥å‘Šï¼ˆæœ¬åœ°éœ€å®‰è£… allure å‘½ä»¤ï¼‰
allure generate allure-results -o allure-report --clean
allure open allure-report
```

#### Allure CLI å®‰è£…

**macOS / Linux:**
```bash
# ä½¿ç”¨ Homebrew (macOS/Linux)
brew install allure

# æˆ–ä½¿ç”¨ Scoop (Windows)
scoop install allure

# æˆ–æ‰‹åŠ¨ä¸‹è½½
# 1. ä» https://github.com/allure-framework/allure2/releases ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
# 2. è§£å‹å¹¶æ·»åŠ  bin ç›®å½•åˆ° PATH
```

**éªŒè¯å®‰è£…ï¼š**
```bash
allure --version
```

#### ç‰¹æ€§è¯´æ˜

- **é™„ä»¶ä¸°å¯Œ**ï¼šä¸ºæ¯ä¸ªæ­¥éª¤ç”Ÿæˆè¯·æ±‚/å“åº”/cURL/æ–­è¨€/æå–å˜é‡ç­‰é™„ä»¶ï¼ˆéµå¾ª `--mask-secrets` è„±æ•ç­–ç•¥ï¼‰
- **æµ‹è¯•å¥—ä»¶åˆ†ç»„**ï¼šé»˜è®¤æŒ‰ç”¨ä¾‹æ¥æºæ–‡ä»¶åå½’ç±»ï¼ˆè‹¥å¯ç”¨ï¼‰ï¼Œå¦åˆ™å½’ä¸º "Drun"
- **è¶‹åŠ¿åˆ†æ**ï¼šå¤šæ¬¡è¿è¡Œåå¯æŸ¥çœ‹å†å²è¶‹åŠ¿ï¼ˆéœ€ä¿ç•™ `allure-report/history` ç›®å½•ï¼‰
- **CI/CD é›†æˆ**ï¼šå¯é…åˆ Jenkins/GitLab CI çš„ Allure æ’ä»¶è‡ªåŠ¨ç”Ÿæˆå¹¶å±•ç¤ºæŠ¥å‘Š

### é€šçŸ¥é›†æˆ

> æç¤ºï¼šæœªæ˜¾å¼ä¼ å…¥ `--notify`/`--notify-only` æ—¶ï¼ŒDrun ä¼šæ ¹æ®ç¯å¢ƒå˜é‡è‡ªåŠ¨å¯ç”¨å¯¹åº”æ¸ é“ï¼š
> é…ç½®äº† `FEISHU_WEBHOOK`ã€`DINGTALK_WEBHOOK` æˆ– `SMTP_HOST`/`MAIL_TO` å°†åˆ†åˆ«è§¦å‘é£ä¹¦ã€é’‰é’‰ã€é‚®ä»¶é€šçŸ¥ï¼›
> ç­–ç•¥é»˜è®¤è¯»å– `DRUN_NOTIFY_ONLY`ï¼ˆfallback ä¸º `failed`ï¼‰ã€‚

#### é£ä¹¦é€šçŸ¥

```bash
# ç¯å¢ƒå˜é‡é…ç½®
export FEISHU_WEBHOOK=https://open.feishu.cn/open-apis/bot/v2/hook/xxx
export FEISHU_SECRET=your-secret      # å¯é€‰ï¼Œç­¾åéªŒè¯
export FEISHU_STYLE=card              # card æˆ– textï¼ˆé»˜è®¤ï¼‰
export SYSTEM_NAME=æˆ‘çš„æµ‹è¯•ç³»ç»Ÿ       # å¯é€‰ï¼Œè‡ªå®šä¹‰å¡ç‰‡æ ‡é¢˜ï¼ˆæ”¯æŒ SYSTEM_NAME æˆ– PROJECT_NAMEï¼‰
export DRUN_NOTIFY_ONLY=failed        # failed æˆ– always

# è¿è¡Œå¹¶é€šçŸ¥ï¼ˆå·²é…ç½® FEISHU_WEBHOOK æ—¶å¯ç›´æ¥è¿è¡Œï¼‰
drun run testcases --env-file .env
# å¦‚éœ€æ˜ç¡®æŒ‡å®šæ¸ é“ï¼Œå¯é¢å¤–åŠ  --notify feishu
drun run testcases --notify feishu --env-file .env
```

**é£ä¹¦å¡ç‰‡ç¤ºä¾‹**ï¼ˆ`FEISHU_STYLE=card`ï¼‰ï¼š
- ğŸ·ï¸ **è‡ªå®šä¹‰æ ‡é¢˜**ï¼šæ˜¾ç¤ºç³»ç»Ÿåç§°ï¼ˆæ¥è‡ª `SYSTEM_NAME`ï¼Œé»˜è®¤ "Drun æµ‹è¯•ç»“æœ"ï¼‰
- ğŸ“Š **ç”¨ä¾‹ç»Ÿè®¡**ï¼šæ€»æ•°ã€é€šè¿‡ã€å¤±è´¥ã€è·³è¿‡ã€è€—æ—¶
- ğŸ”¢ **æ­¥éª¤ç»Ÿè®¡**ï¼šæ€»æ­¥éª¤æ•°ã€é€šè¿‡æ­¥éª¤æ•°ã€å¤±è´¥æ­¥éª¤æ•°
- ğŸš¨ **å¤±è´¥æ­¥éª¤è¯¦æƒ…**ï¼šæ­¥éª¤åç§°ã€é”™è¯¯æ¶ˆæ¯ã€è€—æ—¶ï¼ˆå‰ 5 ä¸ªï¼‰
- ğŸ“ **æ‰§è¡Œæ–‡ä»¶**ï¼šæ˜¾ç¤ºæµ‹è¯•æ–‡ä»¶åˆ—è¡¨ï¼ˆå•æ–‡ä»¶æˆ–å¤šæ–‡ä»¶æ±‡æ€»ï¼‰
- ğŸ”— **æŠ¥å‘Šé“¾æ¥**ï¼šHTML æŠ¥å‘Šå’Œæ—¥å¿—æ–‡ä»¶ï¼ˆéœ€é…ç½® `REPORT_URL`ï¼‰
- ğŸ‘¤ **@æé†’**ï¼šæ”¯æŒ @ æŒ‡å®šäººå‘˜ï¼ˆéœ€é…ç½® `FEISHU_MENTION`ï¼‰

#### é‚®ä»¶é€šçŸ¥

```bash
# ç¯å¢ƒå˜é‡é…ç½®
export SMTP_HOST=smtp.example.com
export SMTP_PORT=465
export SMTP_USER=noreply@example.com
export SMTP_PASS=app-password
export MAIL_FROM=noreply@example.com
export MAIL_TO=qa@example.com,dev@example.com

# è¿è¡Œå¹¶é€šçŸ¥ï¼ˆé™„å¸¦ HTML æŠ¥å‘Šï¼›å·²é…ç½® SMTP/MAIL_TO æ—¶å¯ç›´æ¥è¿è¡Œï¼‰
drun run testcases --notify-attach-html --env-file .env
# å¦‚éœ€æ˜ç¡®æŒ‡å®šæ¸ é“ï¼Œå¯é¢å¤–åŠ  --notify email
drun run testcases --notify email --notify-attach-html --env-file .env
```

**é‚®ä»¶å†…å®¹**ï¼š
- ğŸ“§ **çº¯æ–‡æœ¬/HTML æ­£æ–‡**ï¼šæµ‹è¯•æ‘˜è¦ + å¤±è´¥ç”¨ä¾‹
- ğŸ“ **é™„ä»¶**ï¼šå®Œæ•´ HTML æŠ¥å‘Šï¼ˆå¯é€‰ï¼‰

#### é’‰é’‰é€šçŸ¥

```bash
# ç¯å¢ƒå˜é‡é…ç½®
export DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=xxx
# å¯é€‰ï¼šå®‰å…¨è®¾ç½®ä¸ºâ€œåŠ ç­¾â€æ—¶éœ€é…ç½® SECRETï¼ˆè‡ªåŠ¨è¿½åŠ  timestamp/signï¼‰
export DINGTALK_SECRET=your-secret
# å¯é€‰ï¼š@ æŒ‡å®šæ‰‹æœºå·ï¼ˆé€—å·åˆ†éš”ï¼‰ï¼›æˆ–å…¨å‘˜ @
export DINGTALK_AT_MOBILES=13800138000,13900139000
export DINGTALK_AT_ALL=false
# å¯é€‰ï¼šæ¶ˆæ¯æ ·å¼ text/markdownï¼ˆé»˜è®¤ textï¼‰
export DINGTALK_STYLE=text

# è¿è¡Œå¹¶é€šçŸ¥ï¼ˆå¤±è´¥æ‰å‘ï¼›å·²é…ç½® DINGTALK_WEBHOOK æ—¶å¯ç›´æ¥è¿è¡Œï¼‰
drun run testcases --notify-only failed --env-file .env
# å¦‚éœ€æ˜ç¡®æŒ‡å®šæ¸ é“ï¼Œå¯é¢å¤–åŠ  --notify dingtalk
drun run testcases --notify dingtalk --notify-only failed --env-file .env

# ä¹Ÿå¯å¤šæ¸ é“åŒæ—¶å‘
drun run testcases --notify feishu,dingtalk --notify-only always --env-file .env
```

è¯´æ˜ï¼š
- æ–‡æœ¬å†…å®¹ä¸ºæµ‹è¯•æ‘˜è¦ä¸å¤±è´¥ TOPNï¼ˆé»˜è®¤ 5ï¼‰ï¼›åŒ…å«æŠ¥å‘Šå’Œæ—¥å¿—è·¯å¾„ï¼ˆè‹¥å­˜åœ¨ï¼‰ã€‚
- é…ç½®äº† `DINGTALK_SECRET` æ—¶ï¼Œé€šçŸ¥å°†æŒ‰é’‰é’‰æœºå™¨äººåŠ ç­¾è§„èŒƒä½¿ç”¨ HMAC-SHA256 è¿›è¡Œç­¾åï¼ˆæ¯«ç§’çº§æ—¶é—´æˆ³ï¼‰ã€‚

---

## ğŸ›  å‘½ä»¤è¡Œå·¥å…·

ä¸ºä¿æŒ README ç²¾ç‚¼ï¼ŒCLI è¯¦æƒ…è¯·è§ï¼šdocs/CLI.md

## ğŸ’» å®æˆ˜ç¤ºä¾‹

ä¸ºä¿æŒ README ç²¾ç‚¼ï¼Œå®Œæ•´å®æˆ˜ç¤ºä¾‹è¯·è§ï¼šdocs/EXAMPLES.md

---

## ğŸ”— CI/CD é›†æˆ

ä¸ºä¿æŒ README ç²¾ç‚¼ï¼ŒCI ç¤ºä¾‹å·²è¿ç§»è‡³ docsï¼š

- GitHub Actionsã€GitLab CIã€Jenkins ç¤ºä¾‹ä¸æœ€ä½³å®è·µï¼šdocs/CI_CD.md

---

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. BASE_URL ç¼ºå¤±è­¦å‘Š

```
[ENV] Default .env not found and BASE_URL is missing. Relative URLs may fail.
```

**åŸå› **ï¼šæœªæä¾› `.env` æ–‡ä»¶ä¸”ç¯å¢ƒä¸­æ²¡æœ‰ `BASE_URL` å˜é‡ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹å¼ 1ï¼šåˆ›å»º .env æ–‡ä»¶ï¼ˆæ¨èï¼‰
cat > .env <<EOF
BASE_URL=http://localhost:8000
USER_USERNAME=test_user
USER_PASSWORD=test_pass
EOF

# æ–¹å¼ 2ï¼šé€šè¿‡ CLI ä¼ é€’
drun run testcases --vars base_url=http://localhost:8000

# æ–¹å¼ 3ï¼šå¯¼å‡ºç¯å¢ƒå˜é‡
export BASE_URL=http://localhost:8000
```

#### 2. æ‰¾ä¸åˆ°æµ‹è¯•æ–‡ä»¶

```
No YAML test files found.
```

**åŸå› **ï¼šæ–‡ä»¶ä¸ç¬¦åˆå‘½åè§„èŒƒã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ–‡ä»¶æ”¾åœ¨ `testcases/` æˆ– `testsuites/` ç›®å½•ï¼Œæˆ–
- æ–‡ä»¶å‘½åä¸º `test_*.yaml` æˆ– `suite_*.yaml`

#### 3. æ¨¡å—å¯¼å…¥é”™è¯¯

```
ModuleNotFoundError: No module named 'drun'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
pip install -e .
```

#### 4. å˜é‡æœªå®šä¹‰

```
KeyError: 'user_id'
```

**åŸå› **ï¼šå˜é‡åœ¨å½“å‰ä½œç”¨åŸŸä¸å­˜åœ¨ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥å˜é‡åæ‹¼å†™
- ç¡®è®¤å˜é‡åœ¨ `config.variables`ã€`steps[].variables` æˆ– `extract` ä¸­å®šä¹‰
- æ£€æŸ¥æå–è·¯å¾„æ˜¯å¦æ­£ç¡®

#### 5. SQL éªŒè¯å¤±è´¥

```
MySQL assertion requires MYSQL_USER or dsn.user.
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```env
# æ·»åŠ åˆ° .env
MYSQL_HOST=localhost
MYSQL_USER=test_user
MYSQL_PASSWORD=test_pass
MYSQL_DB=test_db
```

æˆ–å®‰è£…æ•°æ®åº“é©±åŠ¨ï¼š

```bash
pip install pymysql
```

#### 6. Hooks æœªåŠ è½½

**åŸå› **ï¼š`drun_hooks.py` æ–‡ä»¶ä½ç½®ä¸æ­£ç¡®ï¼Œæˆ–æ–‡ä»¶åæ‹¼å†™é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

> **æ³¨æ„**ï¼š0.3.0 èµ·ä»…åŠ è½½ `drun_hooks.py`ï¼ˆå¯é€šè¿‡ `DRUN_HOOKS_FILE` æŒ‡å®šå…¶ä»–è·¯å¾„ï¼‰ï¼Œæ—§çš„ `arun_hooks.py`/`ARUN_HOOKS_FILE` ä¸å†ç”Ÿæ•ˆã€‚

1. æ—§é¡¹ç›®è¯·å°† `arun_hooks.py` é‡å‘½åä¸º `drun_hooks.py`
2. å¦‚æœä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæ”¹ç”¨ `DRUN_HOOKS_FILE=/path/to/drun_hooks.py`
3. ç¡®è®¤æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•æˆ–ç”± `DRUN_HOOKS_FILE` æŒ‡å‘çš„è·¯å¾„
4. é‡æ–°è¿è¡Œå‘½ä»¤ï¼Œç¡®ä¿ `${hook(...)}`
   å·²æ¢å¤

ä¾‹å¦‚ï¼š

```bash
mv arun_hooks.py drun_hooks.py
export DRUN_HOOKS_FILE=/absolute/path/to/drun_hooks.py
drun run testcases
```

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—

```bash
drun run testcases --log-level debug --log-file debug.log
```

#### 2. æ˜¾ç¤º httpx è¯·æ±‚æ—¥å¿—

```bash
drun run testcases --httpx-logs
```

#### 3. æŸ¥çœ‹ cURL å‘½ä»¤

è°ƒè¯•æ—¥å¿—å’Œ HTML æŠ¥å‘Šéƒ½åŒ…å«æ¯ä¸ªè¯·æ±‚çš„ cURL ç­‰æ•ˆå‘½ä»¤ï¼ˆä½¿ç”¨ `--data-raw` ç¡®ä¿è½½è·ä¸è¢«ä¿®æ”¹ï¼ŒJSON è‡ªåŠ¨æ ¼å¼åŒ–æå‡å¯è¯»æ€§ï¼‰ï¼š

```bash
# è°ƒè¯•æ—¥å¿—ç¤ºä¾‹
[DEBUG] cURL: curl -X POST 'https://api.example.com/login' \
  -H 'Content-Type: application/json' \
  --data-raw '{
  "username": "test",
  "password": "***"
}'

# HTML æŠ¥å‘Šä¸­å¯ä¸€é”®å¤åˆ¶ cURL å‘½ä»¤
# JSON è‡ªåŠ¨æ ¼å¼åŒ–ï¼ˆindent=2ï¼‰+ è‡ªåŠ¨æ·»åŠ  Content-Type
```

#### 4. éªŒè¯ YAML è¯­æ³•

```bash
drun check testcases
```

---

## ğŸ“š å®Œæ•´å‚è€ƒ

ä¸ºä¿æŒ README ç²¾ç‚¼ï¼Œå®Œæ•´å‚è€ƒè¯·è§ï¼šdocs/REFERENCE.md

### å¿«é€Ÿè´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

1. **Fork** æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m "feat: add amazing feature"`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. åˆ›å»º **Pull Request**

### è´¡çŒ®æŒ‡å—

- éµå¾ªç°æœ‰ä»£ç é£æ ¼ï¼ˆblackã€ruffï¼‰
- ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¼–å†™æ¸…æ™°çš„æäº¤æ¶ˆæ¯
- ä¿æŒæ›´æ”¹é›†ä¸­å’ŒåŸå­åŒ–

### å¼€å‘ç¯å¢ƒ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Devliang24/drun.git
cd drun

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e .

# è¿è¡Œæµ‹è¯•
drun run testcases --env-file .env

# éªŒè¯ä»£ç é£æ ¼
# black drun/
# ruff check drun/
```

### ç¤¾åŒºèµ„æº

- **ç¤ºä¾‹é›†åˆ**ï¼š[examples/](examples/)
- **é—®é¢˜è¿½è¸ª**ï¼š[GitHub Issues](https://github.com/Devliang24/drun/issues)
- **å˜æ›´æ—¥å¿—**ï¼šæŸ¥çœ‹æäº¤å†å²

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** - è¯¦è§ LICENSE

---

## ğŸ™ è‡´è°¢

Drun åŸºäºä¼˜ç§€çš„å¼€æºé¡¹ç›®æ„å»ºï¼š

- [httpx](https://www.python-httpx.org/) - ç°ä»£ HTTP å®¢æˆ·ç«¯
- [pydantic](https://docs.pydantic.dev/) - æ•°æ®éªŒè¯
- [jmespath](https://jmespath.org/) - JSON æŸ¥è¯¢
- [rich](https://rich.readthedocs.io/) - ç»ˆç«¯ç¾åŒ–
- [typer](https://typer.tiangolo.com/) - CLI æ¡†æ¶

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼

---

<div align="center">

**ç”± Drun å›¢é˜Ÿç”¨ â¤ï¸ æ„å»º**

[â¬† å›åˆ°é¡¶éƒ¨](#drun)

</div>
