#
# PDU devices
#
# we need to define 2 kinds of objects
#
# pdu_host:
#  each entry is described with
#    * a name (used in the devices descriptions below)
#    * an IP address
#    * a username
#    * a password
#    * chain_length - how many items in the daisy chain

pdu_hosts:

  # this one has a daisy-chain with 2 boxes
  - name: r2lab
    type: eaton
    # this is 192.168.4.107
    IP: pdu2
    username: root
    password: onecalvin
    # not sure this is needed
    chain_length: 2

  # these are 2 separate IPs
  # so that it is meaningful redundancy-wise
  # and so their chain_length is 1, no need to specify
  - name: c007-bas
    type: eaton
    IP: sopnode-pdu-bas.inria.fr
    username: root
    password: onecalvin

  - name: c007-haut
    type: eaton
    IP: sopnode-pdu-haut.inria.fr
    username: root
    password: onecalvin


# these 10 raspberry pi are directly addressable
# and run the relay-control API
# https://gitlab.inria.fr/slices-ri/resources/sites/sophianode/relay_control
  - name: relay-01
    type: raspberry
    IP: relay-01
    # location: fit04

  - name: relay-02
    type: raspberry
    IP: relay-02
    # location: fit34

  - name: relay-03 # with switch-relay-09 as switch-relay-03 has issues
    type: raspberry
    IP: relay-03
    # location: fit13

  - name: relay-04
    type: raspberry
    IP: relay-04
    # location: fit09

  - name: relay-05
    type: raspberry
    IP: relay-05
    # location: fit28

  - name: relay-06
    type: raspberry
    IP: relay-06
    # location: fit06

  - name: relay-07
    type: raspberry
    IP: relay-07
    # location: fit30

  - name: relay-08
    type: raspberry
    IP: relay-08
    # location: fit12

  - name: relay-09
    type: raspberry
    IP: relay-09
    # location: fit24

  - name: relay-10
    type: raspberry
    IP: relay-10
    # location: fit14



# devices:
#  each entry is described with
#    * a name (for using in rhubarbe-pdu)
#    * a list of inputs, which is each
#      * the name of the pdu-box
#      * optionnally `in_chain` which is the index in the daisy-chain
#        defaults to 0
#      * the outlet number
#      NOTE: the indexing conventions are (surprisingly)
#        in_chain starts at 0
#        outlet numbers start at 1
#    * optionally a description
#    * and optionally too, a ssh_hostname
#      in that case, when doing some actions
#      there is first an attempt to do the operation in a 'soft'
#      way, i.e. using shutdown through ssh
#    * one can also define grid positions for r2lab.inria.fr's livemap
#      - the x dimension is horizontal - and so y dimension is vertical
#      - there are 2 separate scales
#        - icon_x_rank OR icon_y_rank
#          for the icons, one can set either a x OR a y
#          this will result in an icon
#          put along the top border of the map (if x is given)
#          or along the left border (if y is given)
#        - icon_units: by default, icon_x_rank (or icon_y_rank) is in grid units
#          but one can also set icon_units: 'rank' to use the icon size
#          this means that setting icon_x_rank to 2 will put
#          the icon x value to twice the icon size - plus some constant
#        - location_x_grid and location_y_grid
#          this time the x and y are expressed in grid units, the (0, 0) coordinates
#          corresponds to fit01
#          DEFAULT: if these are not defined, they will be set from the 'location'
#          that the device inherits from its pdu_host (first one if it has several)
#          typically useful for the raspberry boxes
#     * finally an optional label can be used to indicate the type of device
#       typically UE or eNB if/when relevant

devices:

  - name: n300
    description: USRP N300 device
    auto_turn_off: yes
    ssh_hostname: n300
    inputs:
      - pdu_host_name: r2lab
        in_chain: 0
        outlet: 1
    location_x_grid: 0
    location_y_grid: 0
    icon_y_rank: 2
    icon_units: rank

  - name: n320
    description: USRP N320 device
    auto_turn_off: yes
    ssh_hostname: n320
    inputs:
      - pdu_host_name: r2lab
        in_chain: 0
        outlet: 2
    location_x_grid: 0
    location_y_grid: 2
    icon_y_rank: 5
    icon_units: rank

  - name: x310
    description: USRP X310 device
    auto_turn_off: yes
    ssh_hostname: n300
    # this is the default, but it can be overridden like so
    ssh_username: root
    inputs:
      - pdu_host_name: r2lab
        in_chain: 0
        outlet: 3
    icon_y_rank: 1
    icon_units: rank
    location_x_grid: 0.5
    location_y_grid: 0

  - name: jaguar
    description: RRU 2x2 Jaguar
    auto_turn_off: yes
    inputs:
      - pdu_host_name: r2lab
        in_chain: 0
        outlet: 4
    icon_y_rank: 4
    icon_units: rank
    location_x_grid: 1
    location_y_grid: 2

  - name: panther
    description: RRU 4x4 Panther
    auto_turn_off: yes
    inputs:
      - pdu_host_name: r2lab
        in_chain: 0
        outlet: 5
    icon_y_rank: 3
    icon_units: rank
    location_x_grid: 2
    location_y_grid: 0

  - name: liteon
    description: RRU LiteON FR2
    auto_turn_off: yes
    inputs:
      - pdu_host_name: relay-10
        outlet: 3
    icon_y_rank: 8
    icon_units: rank
    location_x_grid: 2
    location_y_grid: 4

  - name: benetel1
    description: RRU Benetel 550
    auto_turn_off: yes
    inputs:
      - pdu_host_name: relay-05
        outlet: 3
    icon_y_rank: 6
    icon_units: rank
    location_x_grid: 6
    location_y_grid: 2.2

  - name: benetel2
    description: RRU Benetel 550
    auto_turn_off: yes
    inputs:
      - pdu_host_name: relay-08
        outlet: 3
    icon_y_rank: 7
    icon_units: rank
    location_x_grid: 2
    location_y_grid: 1

  - name: macphone1
    description: Apple mac mini
    inputs:
      - pdu_host_name: r2lab
        in_chain: 0
        outlet: 8

  - name: switch-data
    inputs:
      - pdu_host_name: r2lab
        in_chain: 1
        outlet: 1

  - name: switch-control
    inputs:
      - pdu_host_name: r2lab
        in_chain: 1
        outlet: 2

  - name: switch-reboot
    inputs:
      - pdu_host_name: r2lab
        in_chain: 1
        outlet: 3

  - name: switch-radio
    description: FS switch
    inputs:
      - pdu_host_name: r2lab
        in_chain: 1
        outlet: 4
      - pdu_host_name: r2lab
        in_chain: 1
        outlet: 5

  - name: dummy8
    description: empty outlet
    inputs:
      - pdu_host_name: r2lab
        outlet: 8
        in_chain: 1

# l'ordre sur les pdu , c est : l1 w1 w2 w3 sw3 sw1 sw2 sw4
  - name: sopnode-l1
    description: kubernetes cluster node l1
    ssh_hostname: sopnode-l1.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 1
      - pdu_host_name: c007-bas
        outlet: 1
  - name: sopnode-w1
    description: kubernetes cluster node w1
    ssh_hostname: sopnode-w1.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 2
      - pdu_host_name: c007-bas
        outlet: 2
  - name: sopnode-w2
    description: kubernetes cluster node w2
    ssh_hostname: sopnode-w2.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 3
      - pdu_host_name: c007-bas
        outlet: 3
  - name: sopnode-w3
    description: kubernetes cluster node w3
    ssh_hostname: sopnode-w3.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 4
      - pdu_host_name: c007-bas
        outlet: 4

  - name: sopnode-sw3
    description: kubernetes cluster switch sw3
    #ssh_hostname: sopnode-sw3.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 5
      - pdu_host_name: c007-bas
        outlet: 5
  - name: sopnode-sw2
    description: kubernetes cluster switch sw2
    #ssh_hostname: sopnode-sw2.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 6
      - pdu_host_name: c007-bas
        outlet: 6
  - name: sopnode-sw1
    description: kubernetes cluster switch sw1
    #ssh_hostname: sopnode-sw1.inria.fr
    inputs:
      - pdu_host_name: c007-haut
        outlet: 7
      - pdu_host_name: c007-bas
        outlet: 7
  - name: switch-mgmt
    description: kubernetes cluster switch management
    #ssh_hostname: ???
    inputs:
      - pdu_host_name: c007-haut
        outlet: 8
      - pdu_host_name: c007-bas
        outlet: 8


  - name: qhat01
    description: Raspberry Pi4 with Quectel 5G RM500Q
    auto_turn_off: yes
    ssh_hostname: qhat01
    inputs:
      - pdu_host_name: relay-01
        outlet: 2
    icon_x_rank: 1
    icon_units: rank
    location_x_grid: 0
    location_y_grid: 3
    label: UE

  - name: qhat02
    description: Raspberry Pi4 with Quectel 5G RM500Q
    auto_turn_off: yes
    ssh_hostname: qhat02
    inputs:
      - pdu_host_name: relay-04
        outlet: 1
    icon_x_rank: 2
    icon_units: rank
    location_x_grid: 1
    location_y_grid: 3
    label: UE

  - name: qhat03
    description: Raspberry Pi4 with Quectel 5G RM500Q
    auto_turn_off: yes
    ssh_hostname: qhat03
    inputs:
      - pdu_host_name: relay-03
        outlet: 2
    icon_x_rank: 6
    icon_units: rank
    location_x_grid: 2
    location_y_grid: 2
    label: UE

  - name: qhat10
    description: Raspberry Pi4 with Quectel 5G RM520N-GL
    auto_turn_off: yes
    ssh_hostname: qhat10
    inputs:
      - pdu_host_name: relay-02
        outlet: 1
    icon_x_rank: 11
    icon_units: rank
    location_x_grid: 7
    location_y_grid: 3
    label: UE

  - name: qhat11
    description: Raspberry Pi4 with Quectel 5G RM520N-GL
    auto_turn_off: yes
    ssh_hostname: qhat11
    inputs:
      - pdu_host_name: relay-05
        outlet: 1
    icon_x_rank: 10
    icon_units: rank
    location_x_grid: 6
    location_y_grid: 2
    label: UE

  - name: qhat20
    description: Raspberry Pi4 with Quectel 5G RG255C-GL
    auto_turn_off: yes
    ssh_hostname: qhat20
    inputs:
      - pdu_host_name: relay-08
        outlet: 1
    icon_x_rank: 5
    icon_units: rank
    location_x_grid: 2
    location_y_grid: 1
    label: UE

  - name: qhat21
    description: Raspberry Pi4 with Quectel 5G RG255C-GL
    auto_turn_off: yes
    ssh_hostname: qhat21
    inputs:
      - pdu_host_name: relay-09
        outlet: 1
    icon_x_rank: 7
    icon_units: rank
    location_x_grid: 5
    location_y_grid: 2
    label: UE

  - name: qhat22
    description: Raspberry Pi4 with Quectel 5G RG255C-GL
    auto_turn_off: yes
    ssh_hostname: qhat22
    inputs:
      - pdu_host_name: relay-06
        outlet: 1
    icon_x_rank: 3
    icon_units: rank
    location_x_grid: 1
    location_y_grid: 0
    label: UE

  - name: qhat23
    description: Raspberry Pi4 with Quectel 5G RG255C-GL
    auto_turn_off: yes
    ssh_hostname: qhat23
    inputs:
      - pdu_host_name: relay-07
        outlet: 1
    icon_x_rank: 8
    icon_units: rank
    location_x_grid: 6
    location_y_grid: 4
    label: UE

  - name: rg530f-01
    description: Quectel RG530F 5G Sub-6GHz & mmWave LGA Module USB-connected to pc03
    auto_turn_off: yes
    ssh_hostname: rg530f-01
    inputs:
      - pdu_host_name: relay-06
        outlet: 3
    icon_x_rank: 4
    icon_units: rank
    location_x_grid: 1
    location_y_grid: 0
    label: UE

  - name: rg530f-02
    description: Quectel RG530F 5G Sub-6GHz & mmWave LGA Module USB-connected to pc04
    auto_turn_off: yes
    ssh_hostname: rg530f-02
    inputs:
      - pdu_host_name: relay-07
        outlet: 3
    icon_x_rank: 9
    icon_units: rank
    location_x_grid: 6
    location_y_grid: 4
    label: UE

  - name: pc01
    description: MiniPC UM690 with USRP B210
    auto_turn_off: yes
    ssh_hostname: pc01
    inputs:
      - pdu_host_name: relay-01
        outlet: 1

  - name: pc02
    description: MiniPC UM690 with USRP B210
    auto_turn_off: yes
    ssh_hostname: pc02
    inputs:
      - pdu_host_name: relay-03
        outlet: 1

  - name: pc03
    description: MiniPC UP4000 with UE Quectel RG530F for LiteOn
    auto_turn_off: yes
    ssh_hostname: pc03
    inputs:
      - pdu_host_name: relay-06
        outlet: 2

  - name: pc04
    description: MiniPC UP4000 with UE Quectel RG530F for LiteOn
    auto_turn_off: yes
    ssh_hostname: pc04
    inputs:
      - pdu_host_name: relay-07
        outlet: 2

  - name: usrp01
    description: USRP B210 attached to MiniPC pc01
    auto_turn_off: yes
    #ssh_hostname:
    inputs:
      - pdu_host_name: relay-01
        outlet: 3

  - name: usrp02
    description: USRP B210 attached to MiniPC pc02
    auto_turn_off: yes
    #ssh_hostname:
    inputs:
      - pdu_host_name: relay-03
        outlet: 3
