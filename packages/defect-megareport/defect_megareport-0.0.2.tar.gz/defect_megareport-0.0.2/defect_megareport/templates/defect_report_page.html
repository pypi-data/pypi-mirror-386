{% load static %}
<!DOCTYPE html>
<html lang="ru" style="height: 100%">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отчет о дефектах</title>
    <link href="{% static 'defect_megareport/css/bootstrap.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'defect_megareport/css/defect_megareport.css' %}" rel="stylesheet"/>
</head>
<body style="height: 100%; display: flex; flex-direction: column;">
<div class="container">

    <h1>Отчет о дефектах</h1>

    <div class="filters-container">
        <div class="form-group">
            <label for="project-select">Проект:</label>
            <select id="project-select" class="form-control">
                <option value="">Выберите проект</option>
                {% for project in projects %}
                    <option value="{{ project.id }}">{{ project.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group" id="attribute-filter-container" style="display: none;">
            <label for="attribute-select">Атрибут:</label>
            <select id="attribute-select" class="form-control">
                <option value="">Выберите атрибут</option>
            </select>
        </div>

        <div class="form-group" id="plan-filter-container" style="display: none;">
            <label for="plan-tree">План:</label>
            <div id="plan-tree" class="tree-container">
                <div class="loading-plans" style="display: none;">Загрузка планов...</div>
                <div class="plans-tree-container"></div>
            </div>
        </div>
        <div class="form-group" id="search-container" style="display: none;">
            <label for="search-input">Поиск по тексту:</label>
            <div class="input-group">
                <input type="text" id="search-input" class="form-control" placeholder="Введите текст для поиска">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="search-button">Поиск</button>
                </div>
            </div>
        </div>
        <div id="result-filter-container" style="display: none;">
            <div class="form-group">
                <label>Фильтр результатов:</label>
                <div class="radio-group">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="result-filter" id="all-results-radio" value="all" checked>
                        <label class="form-check-label" for="all-results-radio">
                            Все результаты
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="result-filter" id="last-defects-radio" value="last-defects">
                        <label class="form-check-label" for="last-defects-radio">
                            Последние результаты с дефектом
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="result-filter" id="last-test-results-radio" value="last-test-results">
                        <label class="form-check-label" for="last-test-results-radio">
                            Актуальные результаты тестов
                        </label>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="content-container" style="display: none;">
        <div id="pagination-settings" class="mb-3 d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <span class="mr-2">Элементов на странице:</span>
                <div class="btn-group btn-group-sm page-size-selector" role="group" aria-label="Элементов на странице">
                    <button type="button" class="btn btn-outline-secondary active" data-page-size="20">20</button>
                    <button type="button" class="btn btn-outline-secondary" data-page-size="50">50</button>
                    <button type="button" class="btn btn-outline-secondary" data-page-size="100">100</button>
                </div>
            </div>
            <div id="pagination-info" class="text-muted" style="display: none;"></div>
        </div>

        <div id="defect-megareport-content"></div>

        <div id="pagination-container" class="mt-3" style="display: none;">
            <nav aria-label="Навигация по страницам">
                <ul class="pagination justify-content-center" id="pagination-list"></ul>
            </nav>
        </div>
    </div>



</div>

<script src="{% static 'defect_megareport/js/jquery-3.5.1.slim.min.js' %}"></script>
<script src="{% static 'defect_megareport/js/bootstrap.min.js' %}"></script>
<script src="{% static 'defect_megareport/js/defect_megareport.js' %}"></script>
<footer style="text-align: center; padding: 20px; margin-top: auto; width: 100%; font-size: 12px; height: 76px;">
    <p style="margin: 0;">TestY TMS {{ TESTY_VERSION }}. Released under the AGPL-v3 License.</p>
    <p style="margin: 0;">&copy; {% now 'Y' %} <a href="https://yadro.com/" target="_blank" rel="noopener noreferrer" class="text-decoration-none">KNS Group LLC (YADRO).</a></p>
</footer>
</body>
</html>