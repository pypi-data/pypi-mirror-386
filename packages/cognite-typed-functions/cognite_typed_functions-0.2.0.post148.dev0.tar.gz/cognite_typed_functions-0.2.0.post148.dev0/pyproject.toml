[project]
name = "cognite-typed-functions"
version = "0.2.0.post148.dev0"
description = "FastAPI-style framework for building type-safe Cognite Functions with automatic OpenAPI schema generation and MCP integration"
readme = "README.md"
requires-python = ">=3.10"
dependencies = [
    "cognite-sdk>=7.87.0",
    "pydantic>=2.11.7",
    "typing-extensions>=4.15.0",
]

[project.optional-dependencies]
tracing = [
    "opentelemetry-api>=1.20.0",
    "opentelemetry-sdk>=1.20.0",
    "opentelemetry-exporter-otlp>=1.20.0",
]

[dependency-groups]
dev = [
    "pytest>=7.0.0",
    "pytest-asyncio>=0.21.0",
    "pytest-cov>=4.0.0",
    "openapi-spec-validator>=0.7.0",
    "dunamai>=1.25.0",
    "pre-commit>=4.3.0",
    "pyright>=1.1.406",
    "ruff>=0.14.1",
    "hypothesis>=6.138.15",
    "uvicorn>=0.37.0",
    "pydantic-settings>=2.0.0",
    "opentelemetry-api>=1.20.0",
    "opentelemetry-sdk>=1.20.0",
    "opentelemetry-exporter-otlp>=1.20.0",
]

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
filterwarnings = [
    # Ignore TracerProvider warning in tests where TracingApp is instantiated
    # after session fixture has already configured the provider
    "ignore:TracerProvider is already configured:UserWarning:cognite_typed_functions.tracer",
]

[tool.pyright]
# Ignore unused function warnings for decorator-registered functions
reportUnusedFunction = "none"
typeCheckingMode = "strict"
pythonVersion = "3.10"

[tool.ruff]
line-length = 120
lint.select = ["D", "E", "W",  "F", "I", "T", "RUF", "TID", "UP"]

[tool.ruff.lint.pydocstyle]
convention = "google"
