[project]
name = "autowordle"
version = "2.3.5"
description = "Automatic Wordle collector"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
    "maturin>=1.8.2",
    "pillow>=11.1.0",
    "platformdirs>=3.10.0",
    "pytesseract>=0.3.13",
    "pytz>=2025.1",
    "pyxdg>=0.28",
    "pyyaml>=6.0.2",
    "toml>=0.10.2",
    "ttkthemes>=3.2.2",
    "wand>=0.6.13",
]

[project.optional-dependencies]
activitywatch = [
    "aw-client>=0.5.15",
]

[project.scripts]
autowordle = "autowordle.prog:top"

[tool.uv]
package = true

[tool.setuptools]
packages = ["autowordle", "autowordle.game", "autowordle.res"]

[[tool.uv.index]]
name = "tymoon"
url = "https://gitea.tymoon.eu/api/packages/isoraqathedh/pypi/simple/"
publish-url = "https://gitea.tymoon.eu/api/packages/isoraqathedh/pypi"

[tool.setuptools.package-data]
"autowordle.res" = [
    '*.png', 'redactle-base.sh', 'game_defs.toml', 'schema.sql',
    'games.yaml'
]

[tool.pytest.ini_options]
markers = [
"involves_images: loads images from the test suite - slow",
"db_to_return: game record(s) to be returned in a fake config"
]

[tool.taskipy.tasks]
tests = 'pytest -m "not involves_images" --cov=autowordle --cov-report=html'
tests_all = 'pytest --cov=autowordle --cov-report=html'
lint = 'pyflakes autowordle test_autowordle'

[tool.coverage.report]
exclude_also = [
    'def __repr__',
    'if self.debug:',
    'if settings.DEBUG',
    'raise AssertionError',
    'raise NotImplementedError',
    'if 0:',
    'if __name__ == .__main__.:',
    'if TYPE_CHECKING:',
    'class .*\bProtocol\):',
    '@(abc\.)?abstractmethod',
    '# {{nocov}}',
]

[dependency-groups]
dev = [
    "pytest>=8.4.2",
    "pytest-cov>=7.0.0",
    "taskipy>=1.14.1",
]
dbus = [
    "dbus-python>=1.4.0",
]
