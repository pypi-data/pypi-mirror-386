flows:
  transfer_money:
    name: transfer money
    description: |
      Handles the following types of money transfers initiated by the user:
      - "Third Party": Transfer money to another person, business or service within domestic banks. Third party transfer can be immediate, scheduled, or set up as a recurring payments.
      - "Self transfer": Transfer funds between user's own accounts at the same bank (immediate only).

    steps:
      - id: choose_transfer_type
        collect: transfer_type
        description: |
          Specifies the type of transfer based on the intended recipient:
          - "Self transfer": Moving money between the user's own accounts at the same bank.
          - "Third party": Sending money to another person, business, or paying a bill domestically (inside the country). Includes friends, family, companies, service providers.

          If the user mentions sending money to a person, a business, paying a bill, or setting up a recurring payment, set "third party" transfer.
          If the user mentions transferring funds between their own accounts (e.g., moving money from savings to checking), set "self transfer".
        next:
          - if: slots.transfer_type == "self transfer"
            then: perform_self_transfer
          - if: slots.transfer_type == "third party"
            then: perform_third_party_transfer
          - else:
              - action: utter_inform_on_wrong_transfer_type
                next: choose_transfer_type

      - id: perform_self_transfer
        call: move_money_between_accounts
        next: END

      - id: perform_third_party_transfer
        call: transfer_money_to_a_third_party
        next: END
