version: '3.1'
slots:
  card_block_type:
    type: categorical
    values:
      - permanent
      - temporary
    mappings:
    - type: from_llm

responses:
  utter_start_block_card:
    - text: "I can help you block your card right away."
      metadata:
        rephrase: True
  utter_ask_card_block_type:
    - text: "Would you like to permanently block your card or just freeze it temporarily?"
      buttons:
        - title: "Block permanently"
          payload: /SetSlots(card_block_type=permanent)
        - title: "Freeze temporarily"
          payload: /SetSlots(card_block_type=temporary)
  utter_block_card_successful:
    - text: "Done! Your card has been permanently blocked."
  utter_block_card_cancelled:
    - text: "No problem! I've cancelled the block request. Your card remains active."
  utter_ask_block_card_confirmation:
    - condition: slots.card_block_type == "permanent"
      text: "Are you sure you want to permanently block the card {bank_card_number}?"
      buttons:
        - title: "Yes"
          payload: "/SetSlots(confirmation=true)"
        - title: "No"
          payload: "/SetSlots(confirmation=false)"
    - condition: slots.card_block_type == "temporary"
      text: "Are you sure you want to temporarily freeze the card {bank_card_number}?"
      buttons:
        - title: "Yes"
          payload: "/SetSlots(confirmation=true)"
        - title: "No"
          payload: "/SetSlots(confirmation=false)"

  utter_freeze_card_successful:
    - text: "Your card has been temporarily frozen."
