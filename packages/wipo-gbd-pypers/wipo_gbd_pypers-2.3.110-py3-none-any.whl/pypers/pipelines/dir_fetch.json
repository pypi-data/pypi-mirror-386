{
    "name" : "dir_fetch",
    "label": "Fetch DKTM collection",

    "dag": {
        "nodes": {
            "extract"  : "fetch.download.Dir",
            "pxml"     : "process.ProcessXML",
            "pimg"     : "process.ProcessIMG",
            "organize" : "fetch.common.Organize",
            "merge"    : "fetch.common.Merge",
            "notify"   : "fetch.common.Notify"
        },

        "edges": [
            {
                "from"     : "extract",
                "to"       : "pxml",
                "bindings" : { "pxml.input_data"  : "extract.output_data",
                               "pxml.input_dir"   : "extract.dest_dir",
                               "pxml.archive_name": "extract.archive_name"}
            },
            {
                "from"     : "extract",
                "to"       : "pimg",
                "bindings" : { "pimg.input_data"  : "extract.output_data",
                               "pimg.input_dir"   : "extract.dest_dir",
                               "pimg.archive_name": "extract.archive_name"}
            },
            {
                "from"     : "extract",
                "to"       : "organize",
                "bindings" : { "organize.archive_name" : "extract.archive_name" }
            },
            {
                "from"     : "pxml",
                "to"       : "organize",
                "bindings" : { "organize.data_files" : "pxml.output_xml" }
            },
            {
                "from"     : "pimg",
                "to"       : "organize",
                "bindings" : { "organize.img_files" : "pimg.output_img" }
            },
            {
                "from"     : "organize",
                "to"       : "merge",
                "bindings" : { "merge.appnums_per_archive" : "organize.appnums_per_archive" }
            },
            {
                "from"     : "clean",
                "to"       : "notify",
                "bindings" : { "notify.processed_list" : "clean.processed_list"}
            }
        ]
    },
    "config": {
    }
}

