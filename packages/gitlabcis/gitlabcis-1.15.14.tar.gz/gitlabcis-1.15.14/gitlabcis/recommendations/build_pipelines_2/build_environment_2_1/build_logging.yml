---
id: 2.1.3
name: build_logging
title: Ensure the build environment is logged
profile: 1
category: build_pipelines
sub_category: build_environment
description: >-
  Keep build logs of the build environment detailing configuration and all activity within it.
  Also, consider to store them in a centralized organizational log store.
rationale: >-
  Logging the environment is important for two primary reasons: one, for debugging and 
  investigating the environment in case of a bug or security incident; and two, for 
  reproducing the environment easily when needed. Storing these logs in a centralized 
  organizational log store allows the organization to generate useful insights and identify 
  anomalies in the build process faster.
impact: >-
audit: |
  Verify that the build environment is logged and stored in a centralized organizational log store.
  When a build environment is created, all information related to the environment is logged as part of the job logs.
  Depending on the stage in the build environment lifecycle, the path to retrieve the logs will differ:

    • When a job is running: #{ROOT_PATH}/gitlab-ci/builds/#{YYYY_mm}/#{project_id}/#{job_id}.log
    • After a job is finished: #{ROOT_PATH}/gitlab-rails/shared/artifacts/#{disk_hash}/#{YYYY_mm_dd}/#{job_id}/#{job_artifact_id}/job.log
    • After a log is archived: #{bucket_name}/#{disk_hash}/#{YYYY_mm_dd}/#{job_id}/#{job_artifact_id}/job.log
remediation: >-
  Keep logs of the build environment. Also, store the logs in a centralized organizational log store. 
  This is automatically done by GitLab and can be retrieved in the paths mentioned in the audit section.
default_value:
references:
  - https://docs.gitlab.com/ee/administration/job_logs.html
cis_controls:
  - id: 3.14
    version: 8
    name: Log Sensitive Data Access
    description: >-
      Log sensitive data access, including modification and disposal.
    implementation_groups:
      - IG3
  - id: 14.9
    version: 7
    name: Enforce Detail Logging for Access or Changes to Sensitive Data
    description: >-
      Enforce detailed audit logging for access to sensitive data or changes to 
      sensitive data (utilizing tools such as File Integrity Monitoring or Security 
      Information and Event Monitoring).
    implementation_groups:
      - IG3
additional_info: >-
