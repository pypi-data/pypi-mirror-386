Metadata-Version: 2.4
Name: ssh-auto-upgrade
Version: 1.0.7
Summary: è‡ªåŠ¨æ£€æµ‹å’Œå‡çº§OpenSSHçš„å·¥å…·
Home-page: https://gitee.com/liumou_site/ssh-automatic-upgrade
Author: SSH Auto Upgrade Team
Author-email: åå…¬äº¤ä¹Ÿç”¨åˆ¸ <liumou.site@qq.com>
License: MIT
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: System Administrators
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: POSIX :: Linux
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: 3.14
Classifier: Topic :: System :: Systems Administration
Requires-Python: >=3.6
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: requests>=2.25.0
Requires-Dist: beautifulsoup4>=4.9.0
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# SSHè‡ªåŠ¨å‡çº§å·¥å…·

> ä¸€ä¸ªä¸“ä¸šçš„OpenSSHè‡ªåŠ¨æ£€æµ‹å’Œå‡çº§å·¥å…·ï¼Œæ”¯æŒå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼å’ŒsystemdæœåŠ¡ç®¡ç†

[![Python Version](https://img.shields.io/badge/python-3.6%2B-blue)](https://www.python.org/)

[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-Linux-lightgrey)](https://www.linux.org/)
- **é¡¹ç›®åœ°å€**: https://gitee.com/liumou_site/ssh-automatic-upgrade
- **PyPIåœ°å€**: https://pypi.org/project/ssh-auto-upgrade
- **æœ€æ–°ç‰ˆæœ¬**: ![PyPI](https://img.shields.io/pypi/v/ssh-auto-upgrade)
- **ä¸‹è½½é‡**: ![PyPI - Downloads](https://img.shields.io/pypi/dm/ssh-auto-upgrade?style=flat-square)


## ğŸ“– é¡¹ç›®ç®€ä»‹

SSHè‡ªåŠ¨å‡çº§å·¥å…·æ˜¯ä¸€ä¸ªä¸“ä¸ºLinuxç³»ç»Ÿç®¡ç†å‘˜è®¾è®¡çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹OpenSSHæœ€æ–°ç‰ˆæœ¬ã€ä¸‹è½½æºç ã€ç¼–è¯‘å®‰è£…ï¼Œå¹¶æ”¯æŒæ³¨å†Œä¸ºsystemdå®ˆæŠ¤è¿›ç¨‹æœåŠ¡ã€‚å·¥å…·é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œç¨³å®šæ€§ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ” **æ™ºèƒ½ç‰ˆæœ¬æ£€æµ‹** - è‡ªåŠ¨ä»OpenSSHå®˜æ–¹æºæ£€æµ‹æœ€æ–°ç‰ˆæœ¬
- ğŸ“¥ **å¯é ä¸‹è½½æœºåˆ¶** - æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€è¿›åº¦æ˜¾ç¤ºå’Œæ–‡ä»¶å®Œæ•´æ€§éªŒè¯
- ğŸ›¡ï¸ **å®‰å…¨å®‰è£…æµç¨‹** - åŒ…å«å®‰è£…å‰éªŒè¯ã€å›æ»šæœºåˆ¶å’Œé”™è¯¯å¤„ç†
- ğŸ”§ **ç³»ç»ŸæœåŠ¡ç®¡ç†** - æ”¯æŒsystemdæœåŠ¡æ³¨å†Œã€å¯åŠ¨ã€åœæ­¢å’Œç®¡ç†
- ğŸ“‹ **ä¾èµ–è‡ªåŠ¨ç®¡ç†** - æ™ºèƒ½æ£€æµ‹å’Œå®‰è£…ç¼–è¯‘æ‰€éœ€çš„ç³»ç»Ÿä¾èµ–
- ğŸ“Š **è¯¦ç»†æ—¥å¿—è®°å½•** - å®Œæ•´çš„å®‰è£…è¿‡ç¨‹æ—¥å¿—å’ŒçŠ¶æ€ç›‘æ§
- ğŸ¯ **æ¨¡å—åŒ–æ¶æ„** - æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
ssh_auto_upgrade/
â”œâ”€â”€ ğŸ“ src/ssh_auto_upgrade/
â”‚   â”œâ”€â”€ ğŸš€ main.py                    # ä¸»ç¨‹åºå…¥å£ï¼Œå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼
â”‚   â”œâ”€â”€ ğŸ” version_detector.py         # ç‰ˆæœ¬æ£€æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“¥ downloader.py              # ä¸‹è½½å™¨æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ› ï¸ installer.py               # å®‰è£…å™¨æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ âš™ï¸ installer_service_manager.py # å®‰è£…å™¨æœåŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ installer_file_manager.py   # å®‰è£…å™¨æ–‡ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ”§ service_manager.py          # systemdæœåŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“‹ dependencies.py            # ä¾èµ–ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“ dependency_constants.py     # ä¾èµ–å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ“Š logger.py                   # æ—¥å¿—è®°å½•æ¨¡å—
â”‚   â””â”€â”€ ğŸ”¨ compile.py                  # ä¼ ç»Ÿç¼–è¯‘è„šæœ¬ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
â”œâ”€â”€ ğŸ“„ pyproject.toml                  # é¡¹ç›®é…ç½®å’Œæ‰“åŒ…ä¿¡æ¯
â”œâ”€â”€ ğŸ“„ requirements.txt               # Pythonä¾èµ–åˆ—è¡¨
â””â”€â”€ ğŸ“„ setup.py                       # ä¼ ç»Ÿæ‰“åŒ…é…ç½®
```

### ğŸ”„ å·¥ä½œæµç¨‹

1. **ç‰ˆæœ¬æ£€æµ‹** â†’ æ£€æŸ¥å½“å‰OpenSSHç‰ˆæœ¬å’Œæœ€æ–°å¯ç”¨ç‰ˆæœ¬
2. **ä¾èµ–æ£€æŸ¥** â†’ éªŒè¯ç³»ç»Ÿæ˜¯å¦å…·å¤‡ç¼–è¯‘ç¯å¢ƒ
3. **æºç ä¸‹è½½** â†’ ä»é•œåƒæºä¸‹è½½OpenSSHæºç åŒ…
4. **ç¼–è¯‘å®‰è£…** â†’ é…ç½®ã€ç¼–è¯‘å¹¶å®‰è£…åˆ°æŒ‡å®šç›®å½•
5. **æœåŠ¡é…ç½®** â†’ æ›´æ–°SSHæœåŠ¡é…ç½®å’Œç³»ç»Ÿé“¾æ¥
6. **éªŒè¯é‡å¯** â†’ éªŒè¯å®‰è£…ç»“æœå¹¶é‡å¯SSHæœåŠ¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šé€šè¿‡PyPIå®‰è£…ï¼ˆæ¨èï¼‰

```bash
pip install ssh-auto-upgrade
```

### æ–¹æ³•äºŒï¼šå¼€å‘æ¨¡å¼å®‰è£…ï¼ˆä»æºç å®‰è£…ï¼‰

```bash
# å¼€å‘æ¨¡å¼å®‰è£…ï¼Œä¾¿äºä¿®æ”¹ä»£ç 
pip install -e .
```

### å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
pip install --upgrade ssh-auto-upgrade
```

### å¸è½½å·¥å…·

```bash
pip uninstall ssh-auto-upgrade
```

## âš™ï¸ ä½¿ç”¨è¯´æ˜

```bash
# æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
ssh-auto-upgrade --help

# è‡ªå®šä¹‰ä¸‹è½½ç›®å½•å’Œæ—¥å¿—ç›®å½•
ssh-auto-upgrade --download-dir /tmp/my-downloads --log-dir /var/log/my-logs

# æ³¨å†Œä¸ºsystemdæœåŠ¡ï¼ˆéœ€è¦rootæƒé™ï¼‰
ssh-auto-upgrade --service

# è®¾ç½®å‡çº§æ—¶é—´æ®µï¼ˆé»˜è®¤00:00:00-08:00:00ï¼‰
ssh-auto-upgrade --upgrade-time 00:00:00-08:00:00

# è®¾ç½®è·¨å¤©æ—¶é—´æ®µï¼ˆ22:00:00-06:00:00ï¼‰
ssh-auto-upgrade --upgrade-time 22:00:00-06:00:00

# å¼ºåˆ¶å‡çº§å¹¶è®¾ç½®æ—¶é—´æ®µ
ssh-auto-upgrade --force --upgrade-time 12:00:00-14:00:00

# å‡çº§åå¯ç”¨rootç™»å½•
ssh-auto-upgrade --enable-root-login

# å‡çº§åç¦ç”¨rootç™»å½•
ssh-auto-upgrade --disable-root-login

# æ³¨å†ŒæœåŠ¡æ—¶è®¾ç½®rootç™»å½•é…ç½®
ssh-auto-upgrade --service --enable-root-login
ssh-auto-upgrade --service --disable-root-login

# ç»“åˆæ‰€æœ‰åŠŸèƒ½
ssh-auto-upgrade --force --upgrade-time 00:00:00-08:00:00 --enable-root-login
```

### systemdæœåŠ¡ç®¡ç†

#### æ³¨å†Œä¸ºsystemdæœåŠ¡
```bash
sudo ssh-auto-upgrade --service
```


### å®‰è£…ä½¿ç”¨æ•ˆæœ

```shell
root@tb4:~# pip install ssh-auto-upgrade
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Collecting ssh-auto-upgrade
  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/5e/19/b65e8262373487dae669d87985b703b847bdbd623f55defbc3f440d02d4a/ssh_auto_upgrade-1.0.5-py3-none-any.whl (31 kB)
Requirement already satisfied: requests>=2.25.0 in /usr/lib/python3/dist-packages (from ssh-auto-upgrade) (2.28.1)
Requirement already satisfied: beautifulsoup4>=4.9.0 in /usr/local/lib/python3.11/dist-packages (from ssh-auto-upgrade) (4.13.4)
Requirement already satisfied: soupsieve>1.2 in /usr/local/lib/python3.11/dist-packages (from beautifulsoup4>=4.9.0->ssh-auto-upgrade) (2.7)
Requirement already satisfied: typing-extensions>=4.0.0 in /usr/local/lib/python3.11/dist-packages (from beautifulsoup4>=4.9.0->ssh-auto-upgrade) (4.14.1)
Installing collected packages: ssh-auto-upgrade
Successfully installed ssh-auto-upgrade-1.0.5
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
root@tb4:~# ssh-a
ssh-add           ssh-agent         ssh-argv0         ssh-auto-upgrade  
root@tb4:~# ssh-a
ssh-add           ssh-agent         ssh-argv0         ssh-auto-upgrade  
root@tb4:~# ssh-auto-upgrade -h
usage: ssh-auto-upgrade [-h] [--mirror MIRROR] [--install-dir INSTALL_DIR] [--download-dir DOWNLOAD_DIR] [--log-dir LOG_DIR] [--force] [--service]

OpenSSHè‡ªåŠ¨å‡çº§å®ˆæŠ¤è¿›ç¨‹å·¥å…·

options:
  -h, --help            show this help message and exit
  --mirror MIRROR, -m MIRROR
                        OpenSSHé•œåƒæºURL
  --install-dir INSTALL_DIR, -i INSTALL_DIR
                        OpenSSHå®‰è£…ç›®å½•
  --download-dir DOWNLOAD_DIR, -d DOWNLOAD_DIR
                        ä¸‹è½½ç›®å½•
  --log-dir LOG_DIR, -l LOG_DIR
                        æ—¥å¿—ç›®å½•
  --force, -f           å¼ºåˆ¶å‡çº§ï¼Œå³ä½¿ç‰ˆæœ¬ç›¸åŒä¹Ÿæ‰§è¡Œå®‰è£…
  --service             æ³¨å†Œä¸ºsystemdæœåŠ¡
root@tb4:~# ssh-auto-upgrade --service
æ£€æŸ¥ç¼–è¯‘ä¾èµ–...
2025-10-21 20:17:06 - ssh_auto_upgrade - INFO - æ£€æŸ¥ç¼–è¯‘ä¾èµ–
æ£€æŸ¥ç¼–è¯‘ä¾èµ–...
æ£€æµ‹åˆ°ç³»ç»Ÿ: debian
æ£€æµ‹åˆ°åŒ…ç®¡ç†å™¨: apt
ç¼ºå¤±çš„ä¾èµ–: build-essential, zlib1g-dev, clang, autoconf, automake, libtool
å¼€å§‹è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„ä¾èµ–...
æ­£åœ¨æ›´æ–°åŒ…ç®¡ç†å™¨ç¼“å­˜...
æ­£åœ¨å®‰è£…ç¼ºå¤±çš„ä¾èµ–: build-essential, zlib1g-dev, clang, autoconf, automake, libtool
âœ“ ä¾èµ–å®‰è£…æˆåŠŸ
âœ“ ç¼–è¯‘ä¾èµ–æ£€æŸ¥é€šè¿‡
2025-10-21 20:17:47 - ssh_auto_upgrade - INFO - ç¼–è¯‘ä¾èµ–æ£€æŸ¥é€šè¿‡
æ­£åœ¨æ³¨å†ŒsystemdæœåŠ¡...
Created symlink /etc/systemd/system/multi-user.target.wants/ssh-auto-upgrade.service â†’ /etc/systemd/system/ssh-auto-upgrade.service.
æˆåŠŸ: systemdæœåŠ¡æ³¨å†ŒæˆåŠŸ

æœåŠ¡å·²æ³¨å†Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç®¡ç†:
  systemctl start ssh-auto-upgrade    # å¯åŠ¨æœåŠ¡
  systemctl stop ssh-auto-upgrade     # åœæ­¢æœåŠ¡
  systemctl status ssh-auto-upgrade   # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
  systemctl enable ssh-auto-upgrade   # å¯ç”¨å¼€æœºè‡ªå¯
  systemctl disable ssh-auto-upgrade  # ç¦ç”¨å¼€æœºè‡ªå¯
root@tb4:~# 
```

### æ—¶é—´æ®µå‡çº§åŠŸèƒ½

å·¥å…·æ”¯æŒè®¾ç½®ç‰¹å®šçš„å‡çº§æ—¶é—´æ®µï¼Œåªæœ‰åœ¨æŒ‡å®šæ—¶é—´æ®µå†…æ‰ä¼šæ‰§è¡Œç‰ˆæœ¬æ£€æµ‹å’Œå‡çº§æ“ä½œï¼Œå…¶ä»–æ—¶é—´è‡ªåŠ¨è·³è¿‡æ£€æµ‹ã€‚

#### æ—¶é—´æ®µæ ¼å¼
- **æ ¼å¼**: `HH:MM:SS-HH:MM:SS`
- **ç¤ºä¾‹**: `00:00:00-08:00:00` (å‡Œæ™¨0ç‚¹åˆ°æ—©ä¸Š8ç‚¹)
- **è·¨å¤©æ”¯æŒ**: `22:00:00-06:00:00` (æ™šä¸Š10ç‚¹åˆ°æ¬¡æ—¥æ—©ä¸Š6ç‚¹)

#### ä½¿ç”¨åœºæ™¯
1. **ä¸šåŠ¡ä½å³°æœŸå‡çº§** - åœ¨å‡Œæ™¨æ—¶æ®µè‡ªåŠ¨å‡çº§ï¼Œé¿å…å½±å“æ­£å¸¸ä¸šåŠ¡
2. **ç½‘ç»œç©ºé—²æ—¶æ®µ** - åœ¨ç½‘ç»œä½¿ç”¨ç‡ä½çš„æ—¶æ®µè¿›è¡Œä¸‹è½½å’Œå®‰è£…
3. **è¿ç»´çª—å£æœŸ** - åœ¨é¢„å®šçš„ç»´æŠ¤çª—å£å†…æ‰§è¡Œå‡çº§æ“ä½œ

#### ç¤ºä¾‹æ—¥å¿—
```
å‡çº§æ—¶é—´æ®µè®¾ç½®ä¸º: 00:00:00 - 08:00:00
å½“å‰æ—¶é—´ 09:33:09 ä¸åœ¨å‡çº§æ—¶é—´æ®µå†…ï¼Œè·³è¿‡æ£€æµ‹...
ç­‰å¾…1å°æ—¶åå†æ¬¡æ£€æŸ¥...
```

### Rootç™»å½•é…ç½®åŠŸèƒ½

å·¥å…·æ”¯æŒåœ¨OpenSSHå‡çº§åè‡ªåŠ¨é…ç½®rootç™»å½•æƒé™ï¼Œå¯ä»¥æ ¹æ®å½“å‰ç³»ç»Ÿé…ç½®æ™ºèƒ½å¤„ç†æˆ–å¼ºåˆ¶è®¾ç½®ã€‚

#### æ™ºèƒ½æ£€æµ‹æœºåˆ¶
- **é…ç½®æ–‡ä»¶ä¸å­˜åœ¨** - é»˜è®¤å¯ç”¨rootç™»å½•
- **é…ç½®æœªè®¾ç½®** - é»˜è®¤å¯ç”¨rootç™»å½•  
- **é…ç½®è¢«æ³¨é‡Š** - é»˜è®¤å¯ç”¨rootç™»å½•
- **é…ç½®å·²è®¾ç½®** - éµå¾ªå½“å‰é…ç½®å€¼

#### å‘½ä»¤è¡Œå‚æ•°
```bash
# å‡çº§åå¯ç”¨rootç™»å½•
ssh-auto-upgrade --enable-root-login

# å‡çº§åç¦ç”¨rootç™»å½•  
ssh-auto-upgrade --disable-root-login

# å¼ºåˆ¶å‡çº§å¹¶å¯ç”¨rootç™»å½•
ssh-auto-upgrade --force --enable-root-login

# æ³¨å†ŒæœåŠ¡æ—¶è®¾ç½®rootç™»å½•é…ç½®
ssh-auto-upgrade --service --enable-root-login
ssh-auto-upgrade --service --disable-root-login

# ç»“åˆæ—¶é—´æ®µå’Œrootç™»å½•é…ç½®
ssh-auto-upgrade --upgrade-time 00:00:00-08:00:00 --enable-root-login
```

#### é…ç½®å¤„ç†æµç¨‹
1. **å‡çº§å‰æ£€æµ‹** - æ£€æŸ¥å½“å‰SSHé…ç½®ä¸­çš„rootç™»å½•è®¾ç½®
2. **å‡çº§æ‰§è¡Œ** - å®ŒæˆOpenSSHç‰ˆæœ¬å‡çº§
3. **é…ç½®åº”ç”¨** - æ ¹æ®å‚æ•°è®¾ç½®rootç™»å½•æƒé™
4. **æœåŠ¡é‡å¯** - é‡å¯SSHæœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ

#### å®‰å…¨ç‰¹æ€§
- **è‡ªåŠ¨å¤‡ä»½** - ä¿®æ”¹é…ç½®å‰è‡ªåŠ¨å¤‡ä»½åŸæ–‡ä»¶
- **æƒé™ä¿æŠ¤** - ç¡®ä¿é…ç½®æ–‡ä»¶æƒé™æ­£ç¡®
- **é”™è¯¯æ¢å¤** - é…ç½®å¤±è´¥æ—¶è‡ªåŠ¨æ¢å¤å¤‡ä»½

#### ç¤ºä¾‹æ—¥å¿—
```
æ£€æŸ¥å½“å‰rootç™»å½•é…ç½®...
å½“å‰rootç™»å½•çŠ¶æ€: å¯ç”¨ (PermitRootLogin yes)
OpenSSHå‡çº§æˆåŠŸ! æ–°ç‰ˆæœ¬: 9.6p1
SSHæœåŠ¡é‡å¯æˆåŠŸ
å·²å¯ç”¨rootç™»å½•: rootç™»å½•å·²å¯ç”¨
SSHæœåŠ¡é‡å¯æˆåŠŸï¼ˆåº”ç”¨rootç™»å½•é…ç½®ï¼‰: SSHæœåŠ¡é‡å¯æˆåŠŸ
```

### ä½œä¸ºPythonæ¨¡å—ä½¿ç”¨

```python
from ssh_auto_upgrade import VersionDetector, Downloader, Installer

# æ£€æµ‹æœ€æ–°ç‰ˆæœ¬
detector = VersionDetector()
version_info = detector.get_latest_version()
print(f"æœ€æ–°ç‰ˆæœ¬: {version_info['version']}")

# ä¸‹è½½å®‰è£…æ–‡ä»¶
downloader = Downloader()
script_path = downloader.download_install_script()

# æ‰§è¡Œå®‰è£…
installer = Installer(script_path, version_info['download_url'])
if installer.install_openssh():
    print("å®‰è£…æˆåŠŸ!")
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### Pythonç¯å¢ƒ
- **Python**: 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
- **pip**: åŒ…ç®¡ç†å·¥å…·

### ç³»ç»ŸåŒ…ï¼ˆè‡ªåŠ¨æ£€æµ‹å’Œå®‰è£…ï¼‰
- **ç¼–è¯‘å·¥å…·**: gcc, make, autoconf, automake
- **å¼€å‘åº“**: zlib-devel, openssl-devel, pam-devel
- **ç³»ç»Ÿå·¥å…·**: wget, tar, systemd

### PythonåŒ…ä¾èµ–
- **requests** >= 2.25.0 - HTTPè¯·æ±‚å¤„ç†
- **beautifulsoup4** >= 4.9.0 - HTMLè§£æ

## ğŸ”§ æ¨¡å—è¯¦è§£

### æ ¸å¿ƒæ¨¡å—

#### 1. ç‰ˆæœ¬æ£€æµ‹æ¨¡å— (`version_detector.py`)
- ä»OpenSSHå®˜æ–¹é•œåƒæºè§£ææœ€æ–°ç‰ˆæœ¬ä¿¡æ¯
- æ£€æµ‹å½“å‰ç³»ç»Ÿå®‰è£…çš„OpenSSHç‰ˆæœ¬
- æ”¯æŒè‡ªå®šä¹‰é•œåƒæºURL

#### 2. ä¸‹è½½å™¨æ¨¡å— (`downloader.py`)
- æ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œè¿›åº¦æ˜¾ç¤º
- æ–‡ä»¶å®Œæ•´æ€§éªŒè¯å’Œé”™è¯¯é‡è¯•
- å¯é…ç½®çš„ä¸‹è½½ç›®å½•å’Œè¶…æ—¶è®¾ç½®

#### 3. å®‰è£…å™¨æ¨¡å— (`installer.py`)
- å®Œæ•´çš„ç¼–è¯‘å®‰è£…æµç¨‹æ§åˆ¶
- é”™è¯¯å¤„ç†å’Œå›æ»šæœºåˆ¶
- ä¸æœåŠ¡ç®¡ç†å’Œæ–‡ä»¶ç®¡ç†æ¨¡å—ååŒå·¥ä½œ

#### 4. æœåŠ¡ç®¡ç†æ¨¡å— (`service_manager.py`)
- systemdæœåŠ¡æ³¨å†Œå’Œç®¡ç†
- æœåŠ¡çŠ¶æ€ç›‘æ§å’Œæ•…éšœæ¢å¤
- æƒé™éªŒè¯å’Œå®‰å…¨æ§åˆ¶

### è¾…åŠ©æ¨¡å—

#### ä¾èµ–ç®¡ç†æ¨¡å— (`dependencies.py`)
- è‡ªåŠ¨æ£€æµ‹ç³»ç»ŸåŒ…ç®¡ç†å™¨ï¼ˆapt/yum/dnfç­‰ï¼‰
- æ™ºèƒ½å®‰è£…ç¼ºå¤±çš„ç¼–è¯‘ä¾èµ–
- æ”¯æŒå¤šç§Linuxå‘è¡Œç‰ˆ

#### æ—¥å¿—è®°å½•æ¨¡å— (`logger.py`)
- ç»“æ„åŒ–æ—¥å¿—è®°å½•
- æ–‡ä»¶å’Œæ§åˆ¶å°åŒé‡è¾“å‡º
- æ—¶é—´æˆ³å’Œæ—¥å¿—è½®è½¬æ”¯æŒ

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æƒé™ä¸è¶³
```bash
# ç¡®ä¿ä»¥rootæƒé™è¿è¡ŒæœåŠ¡æ³¨å†Œ
sudo ssh-auto-upgrade --service
```

#### 2. ç½‘ç»œè¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping mirrors.aliyun.com
```

#### 3. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ‰‹åŠ¨å®‰è£…ç¼–è¯‘ä¾èµ–ï¼ˆUbuntu/Debianï¼‰
sudo apt update
sudo apt install build-essential zlib1g-dev libssl-dev libpam0g-dev

# CentOS/RHEL
sudo yum install gcc make zlib-devel openssl-devel pam-devel
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
sudo journalctl -u ssh-auto-upgrade

# å®æ—¶ç›‘æ§æ—¥å¿—
sudo journalctl -u ssh-auto-upgrade -f

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—
sudo journalctl -u ssh-auto-upgrade --since "2024-01-01" --until "2024-01-02"
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼è¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **Forké¡¹ç›®**
   ```bash
   git clone https://gitee.com/liumou_site/ssh-automatic-upgrade.git
   cd ssh-automatic-upgrade
   ```

2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**
   ```bash
   git checkout -b feature/ä½ çš„ç‰¹æ€§åç§°
   ```

3. **æäº¤æ›´æ”¹**
   ```bash
   git commit -m "æè¿°ä½ çš„ç‰¹æ€§"
   ```

4. **æ¨é€åˆ°åˆ†æ”¯**
   ```bash
   git push origin feature/ä½ çš„ç‰¹æ€§åç§°
   ```

5. **åˆ›å»ºPull Request**

### ä»£ç è§„èŒƒ

- éµå¾ªPEP 8 Pythonä»£ç è§„èŒƒ
- æ·»åŠ é€‚å½“çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰
- åŒ…å«å•å…ƒæµ‹è¯•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MITè®¸å¯è¯](LICENSE)ã€‚æ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- **é¡¹ç›®ä¸»é¡µ**: https://gitee.com/liumou_site/ssh-automatic-upgrade
- **é—®é¢˜åé¦ˆ**: è¯·åœ¨Gitee Issuesä¸­æäº¤
- **ä½œè€…ä¸»é¡µ**: https://liumou.site
- **QQç¾¤**: [ç‚¹å‡»é“¾æ¥åŠ å…¥ç¾¤èŠã€åå…¬äº¤ä¹Ÿç”¨åˆ¸ã€‘ï¼š](https://qm.qq.com/q/rjB2YGP0M)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼ç‰¹åˆ«æ„Ÿè°¢ï¼š

- OpenSSHå¼€å‘å›¢é˜Ÿæä¾›ä¼˜ç§€çš„SSHå®ç°
- å„Linuxå‘è¡Œç‰ˆç»´æŠ¤è€…
- å¼€æºç¤¾åŒºçš„æ”¯æŒå’Œåé¦ˆ

---

**æ³¨æ„**: ä½¿ç”¨æœ¬å·¥å…·å‰è¯·ç¡®ä¿æ‚¨äº†è§£ç›¸å…³é£é™©ï¼Œå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¿›è¡Œå……åˆ†æµ‹è¯•ã€‚å·¥å…·ä½œè€…ä¸å¯¹å› ä½¿ç”¨æœ¬å·¥å…·å¯¼è‡´çš„ä»»ä½•é—®é¢˜è´Ÿè´£ã€‚
