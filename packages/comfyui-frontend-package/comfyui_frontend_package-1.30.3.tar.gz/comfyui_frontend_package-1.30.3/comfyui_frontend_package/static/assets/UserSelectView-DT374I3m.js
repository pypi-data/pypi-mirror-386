var S=Object.defineProperty;var y=(a,t)=>S(a,"name",{value:t,configurable:!0});import{defineComponent as b,ref as m,onMounted as U,nextTick as V,openBlock as h,createElementBlock as C,normalizeClass as $,withDirectives as E,createElementVNode as o,vShow as N,unref as i,renderSlot as B,computed as d,createBlock as _,withCtx as x,toDisplayString as f,createVNode as n,withKeys as T,createTextVNode as M,createCommentVNode as I}from"vue";import R from"primevue/button";import z from"primevue/divider";import D from"primevue/inputtext";import K from"primevue/message";import j from"primevue/select";import{g as A}from"./vendor-vue-CQiO0HWB.js";import{F,aI as J,bx as O,aM as P}from"./index-CQX5zsr-.js";import"./vendor-other-_cjyrTf6.js";import"@primevue/themes";import"@primevue/themes/aura";import"primevue/config";import"primevue/confirmationservice";import"primevue/toastservice";import"primevue/tooltip";import"vue-i18n";import"primevue/checkbox";import"primevue/scrollpanel";import"primevue/usetoast";import"primevue/card";import"primevue/listbox";import"primevue/skeleton";import"primevue/multiselect";import"./vendor-visualization-Cs6-EN8c.js";import"primevue/progressspinner";import"primevue/iconfield";import"primevue/inputicon";import"primevue/badge";import"primevue/chip";import"primevue/contextmenu";import"primevue/tree";import"primevue/toolbar";import"primevue/progressbar";import"primevue/popover";import"primevue";import"primevue/slider";import"primevue/tieredmenu";import"primevue/chart";import"primevue/colorpicker";import"primevue/galleria";import"primevue/imagecompare";import"primevue/inputnumber";import"primevue/textarea";import"primevue/toggleswitch";import"primevue/treeselect";import"primevue/selectbutton";import"primevue/tag";import"primevue/dialog";import"primevue/confirmpopup";import"primevue/useconfirm";import"primevue/confirmdialog";import"primevue/floatlabel";import"@primevue/forms";import"@primevue/forms/resolvers/zod";import"primevue/password";import"primevue/tabpanels";import"primevue/tabs";import"primevue/tabpanel";import"primevue/radiobutton";import"primevue/knob";import"primevue/panel";import"primevue/tabmenu";import"primevue/tab";import"primevue/tablist";import"primevue/autocomplete";import"primevue/dropdown";import"./vendor-tiptap-BrIJ4TxO.js";import"primevue/blockui";const W={class:"flex w-full grow items-center justify-center overflow-auto"},q=b({__name:"BaseViewTemplate",props:{dark:{type:Boolean,default:!1}},setup(a){const t={color:"rgba(0, 0, 0, 0)",symbolColor:"#d4d4d4"},p={color:"rgba(0, 0, 0, 0)",symbolColor:"#171717"},l=m(null);return U(async()=>{F()&&(await V(),J().changeTheme({...a.dark?t:p,height:l.value?.getBoundingClientRect().height??0}))}),(r,u)=>(h(),C("div",{class:$(["flex h-screen w-screen flex-col font-sans",[r.dark?"dark-theme bg-neutral-900 text-neutral-300":"bg-neutral-300 text-neutral-900"]])},[E(o("div",{ref_key:"topMenuRef",ref:l,class:"app-drag h-(--comfy-topbar-height) w-full"},null,512),[[N,i(O)()]]),o("div",W,[B(r.$slots,"default")])],2))}}),G={id:"comfy-user-selection",class:"relative min-w-84 rounded-lg bg-(--comfy-menu-bg) p-5 px-10 shadow-lg"},H={class:"flex w-full flex-col items-center"},L={class:"flex w-full flex-col gap-2"},Q={for:"new-user-input"},X={class:"flex w-full flex-col gap-2"},Y={for:"existing-user-select"},Z={class:"mt-5"},ht=b({__name:"UserSelectView",setup(a){const t=P(),p=A(),l=m(null),r=m(""),u=m(""),w=d(()=>r.value.trim()!==""),k=d(()=>t.users.find(e=>e.username===r.value)?`User "${r.value}" already exists`:""),g=d(()=>k.value||u.value),v=y(async()=>{try{const e=w.value?await t.createUser(r.value):l.value;if(!e)throw new Error("No user selected");await t.login(e),await p.push("/")}catch(e){u.value=e instanceof Error?e.message:JSON.stringify(e)}},"login");return U(async()=>{t.initialized||await t.initialize()}),(e,s)=>(h(),_(q,{dark:""},{default:x(()=>[o("main",G,[s[2]||(s[2]=o("h1",{class:"my-2.5 mb-7 font-normal"},"ComfyUI",-1)),o("div",H,[o("div",L,[o("label",Q,f(e.$t("userSelect.newUser"))+":",1),n(i(D),{id:"new-user-input",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),placeholder:e.$t("userSelect.enterUsername"),onKeyup:T(v,["enter"])},null,8,["modelValue","placeholder"])]),n(i(z)),o("div",X,[o("label",Y,f(e.$t("userSelect.existingUser"))+":",1),n(i(j),{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=c=>l.value=c),class:"w-full","input-id":"existing-user-select",options:i(t).users,"option-label":"username",placeholder:e.$t("userSelect.selectUser"),disabled:w.value},null,8,["modelValue","options","placeholder","disabled"]),g.value?(h(),_(i(K),{key:0,severity:"error"},{default:x(()=>[M(f(g.value),1)]),_:1})):I("",!0)]),o("footer",Z,[n(i(R),{label:e.$t("userSelect.next"),onClick:v},null,8,["label"])])])])]),_:1}))}});export{ht as default};
//# sourceMappingURL=UserSelectView-DT374I3m.js.map
