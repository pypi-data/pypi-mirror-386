var S=Object.defineProperty;var y=(a,t)=>S(a,"name",{value:t,configurable:!0});import{defineComponent as x,ref as m,onMounted as U,nextTick as V,openBlock as h,createElementBlock as C,normalizeClass as $,withDirectives as E,createElementVNode as o,vShow as N,unref as i,renderSlot as B,computed as d,createBlock as _,withCtx as b,toDisplayString as f,createVNode as n,withKeys as T,createTextVNode as D,createCommentVNode as M}from"vue";import R from"primevue/button";import z from"primevue/divider";import I from"primevue/inputtext";import J from"primevue/message";import K from"primevue/select";import{g as j}from"./vendor-vue-feL898J7.js";import{aD as A,aG as G,bv as O,aJ as P}from"./index-Bn6ScYrA.js";import"./vendor-other-CSnDbCIp.js";import"@primevue/themes";import"@primevue/themes/aura";import"primevue/config";import"primevue/confirmationservice";import"primevue/toastservice";import"primevue/tooltip";import"primevue/blockui";import"primevue/progressspinner";import"primevue/dialog";import"vue-i18n";import"primevue/checkbox";import"primevue/scrollpanel";import"primevue/usetoast";import"primevue/card";import"primevue/listbox";import"primevue/skeleton";import"primevue/progressbar";import"primevue/floatlabel";import"@primevue/forms";import"@primevue/forms/resolvers/zod";import"primevue/password";import"primevue/tag";import"primevue/inputnumber";import"primevue/tabpanels";import"primevue/tabs";import"primevue/iconfield";import"primevue/inputicon";import"primevue/badge";import"primevue/chip";import"primevue/tabpanel";import"primevue/toggleswitch";import"primevue/colorpicker";import"primevue/radiobutton";import"primevue/knob";import"primevue/slider";import"primevue/panel";import"primevue/tabmenu";import"primevue/popover";import"primevue/tab";import"primevue/tablist";import"primevue";import"primevue/multiselect";import"./vendor-tiptap-BPz0N8rD.js";import"./vendor-visualization-Cs6-EN8c.js";import"primevue/contextmenu";import"primevue/tree";import"primevue/toolbar";import"primevue/tieredmenu";import"primevue/chart";import"primevue/galleria";import"primevue/imagecompare";import"primevue/textarea";import"primevue/treeselect";import"primevue/selectbutton";import"primevue/confirmpopup";import"primevue/useconfirm";import"primevue/confirmdialog";import"primevue/autocomplete";import"primevue/dropdown";const W={class:"flex w-full grow items-center justify-center overflow-auto"},q=x({__name:"BaseViewTemplate",props:{dark:{type:Boolean,default:!1}},setup(a){const t={color:"rgba(0, 0, 0, 0)",symbolColor:"#d4d4d4"},p={color:"rgba(0, 0, 0, 0)",symbolColor:"#171717"},l=m(null);return U(async()=>{A()&&(await V(),G().changeTheme({...a.dark?t:p,height:l.value?.getBoundingClientRect().height??0}))}),(r,u)=>(h(),C("div",{class:$(["flex h-screen w-screen flex-col font-sans",[r.dark?"dark-theme bg-neutral-900 text-neutral-300":"bg-neutral-300 text-neutral-900"]])},[E(o("div",{ref_key:"topMenuRef",ref:l,class:"app-drag h-(--comfy-topbar-height) w-full"},null,512),[[N,i(O)()]]),o("div",W,[B(r.$slots,"default")])],2))}}),F={id:"comfy-user-selection",class:"relative min-w-84 rounded-lg bg-(--comfy-menu-bg) p-5 px-10 shadow-lg"},H={class:"flex w-full flex-col items-center"},L={class:"flex w-full flex-col gap-2"},Q={for:"new-user-input"},X={class:"flex w-full flex-col gap-2"},Y={for:"existing-user-select"},Z={class:"mt-5"},ht=x({__name:"UserSelectView",setup(a){const t=P(),p=j(),l=m(null),r=m(""),u=m(""),v=d(()=>r.value.trim()!==""),k=d(()=>t.users.find(e=>e.username===r.value)?`User "${r.value}" already exists`:""),w=d(()=>k.value||u.value),g=y(async()=>{try{const e=v.value?await t.createUser(r.value):l.value;if(!e)throw new Error("No user selected");await t.login(e),await p.push("/")}catch(e){u.value=e instanceof Error?e.message:JSON.stringify(e)}},"login");return U(async()=>{t.initialized||await t.initialize()}),(e,s)=>(h(),_(q,{dark:""},{default:b(()=>[o("main",F,[s[2]||(s[2]=o("h1",{class:"my-2.5 mb-7 font-normal"},"ComfyUI",-1)),o("div",H,[o("div",L,[o("label",Q,f(e.$t("userSelect.newUser"))+":",1),n(i(I),{id:"new-user-input",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),placeholder:e.$t("userSelect.enterUsername"),onKeyup:T(g,["enter"])},null,8,["modelValue","placeholder"])]),n(i(z)),o("div",X,[o("label",Y,f(e.$t("userSelect.existingUser"))+":",1),n(i(K),{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=c=>l.value=c),class:"w-full","input-id":"existing-user-select",options:i(t).users,"option-label":"username",placeholder:e.$t("userSelect.selectUser"),disabled:v.value},null,8,["modelValue","options","placeholder","disabled"]),w.value?(h(),_(i(J),{key:0,severity:"error"},{default:b(()=>[D(f(w.value),1)]),_:1})):M("",!0)]),o("footer",Z,[n(i(R),{label:e.$t("userSelect.next"),onClick:g},null,8,["label"])])])])]),_:1}))}});export{ht as default};
//# sourceMappingURL=UserSelectView-DDaKCEpu.js.map
