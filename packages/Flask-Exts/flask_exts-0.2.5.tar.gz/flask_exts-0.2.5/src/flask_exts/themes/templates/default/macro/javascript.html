{% macro runWhenDOMLoaded(f=None) -%}
const runWhenDOMLoaded = cb => {
  if (document.readyState != 'loading') {
    cb()
  } else {
    document.addEventListener('DOMContentLoaded', cb);
  }
}
{% if f -%} runWhenDOMLoaded({{ f }}); {% endif %}
{% endmacro %}
