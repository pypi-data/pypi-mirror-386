import"../chunks/DsnmJJEf.js";import{i as Ae}from"../chunks/zIOTZo3H.js";import{Z as Re,n as Se,at as Nt,a0 as ft,U as Bt,T as Mt,a as t,b as gt,W as Lt,X as Pt,Y as it,_ as Ve,a7 as Be,au as At,av as jt,a1 as Xe,a4 as Wt,a2 as Ie,aw as mt,ax as Ht,w as W,ay as ct,az as Ft,a5 as pt,a6 as Ut,aA as zt,aB as Ke,aC as ht,aD as Jt,aE as Rt,aF as Vt,aG as Kt,aH as Yt,aI as Gt,e as Qt,aJ as Xt,ap as Zt,u as se,a9 as ea,aK as ta,B as aa,y as _t,E as je,F as We,as as bt,aL as Me,s as g,aM as yt,G as D,K as n,M as i,O as r,Q as ee,aN as P,I as b,J as He,aO as wt,R as j,ai as Oe,ah as $e,aP as xt,aQ as Ze,ar as De}from"../chunks/BgecJuU2.js";import{s as Fe,r as et}from"../chunks/O5WMlnvM.js";import{s as Ne,a as Ue}from"../chunks/Cfvzo7Pw.js";import{c as kt,a as sa,b as ra,d as na,s as la}from"../chunks/LQFTnusg.js";import{i as A,b as Tt}from"../chunks/Bis6HByT.js";import{p as oa}from"../chunks/BBdFJ1lt.js";import{T as ia}from"../chunks/9XbFd846.js";function ca(a,o,e){for(var s=a.items,f=[],v=o.length,d=0;d<v;d++)Kt(o[d].e,f,!0);var m=v>0&&f.length===0&&e!==null;if(m){var x=e.parentNode;Yt(x),x.append(e),s.clear(),Te(a,o[0].prev,o[v-1].next)}Gt(f,()=>{for(var u=0;u<v;u++){var I=o[u];m||(s.delete(I.k),Te(a,I.prev,I.next)),ht(I.e,!m)}})}function at(a,o,e,s,f,v=null){var d=a,m={flags:o,items:new Map,first:null};{var x=a;d=Se?Re(Nt(x)):x.appendChild(ft())}Se&&Bt();var u=null,I=!1,y=new Map,w=gt(()=>{var _=e();return Ht(_)?_:_==null?[]:mt(_)}),C,k;function O(){va(k,C,m,y,d,f,o,s,e),v!==null&&(C.length===0?u?pt(u):u=Xe(()=>v(d)):u!==null&&Ut(u,()=>{u=null}))}Mt(()=>{k??=Qt,C=t(w);var _=C.length;if(I&&_===0)return;I=_===0;let H=!1;if(Se){var R=Lt(d)===Pt;R!==(_===0)&&(d=it(),Re(d),Ve(!1),H=!0)}if(Se){for(var q=null,L,M=0;M<_;M++){if(Be.nodeType===At&&Be.data===jt){d=Be,H=!0,Ve(!1);break}var Y=C[M],F=s(Y,M);L=tt(Be,m,q,null,Y,F,M,f,o,e),m.items.set(F,L),q=L}_>0&&Re(it())}if(Se)_===0&&v&&(u=Xe(()=>v(d)));else if(Wt()){var te=new Set,G=Ie;for(M=0;M<_;M+=1){Y=C[M],F=s(Y,M);var V=m.items.get(F)??y.get(F);V?St(V,Y,M):(L=tt(null,m,null,null,Y,F,M,f,o,e,!0),y.set(F,L)),te.add(F)}for(const[ae,Q]of m.items)te.has(ae)||G.skipped_effects.add(Q.e);G.add_callback(O)}else O();H&&Ve(!0),t(w)}),Se&&(d=Be)}function va(a,o,e,s,f,v,d,m,x){var u=o.length,I=e.items,y=e.first,w=y,C,k=null,O=[],_=[],H,R,q,L;for(L=0;L<u;L+=1){if(H=o[L],R=m(H,L),q=I.get(R),q===void 0){var M=s.get(R);if(M!==void 0){s.delete(R),I.set(R,M);var Y=k?k.next:w;Te(e,k,M),Te(e,M,Y),Ye(M,Y,f),k=M}else{var F=w?w.e.nodes_start:f;k=tt(F,e,k,k===null?e.first:k.next,H,R,L,v,d,x)}I.set(R,k),O=[],_=[],w=k.next;continue}if(St(q,H,L),(q.e.f&Ke)!==0&&pt(q.e),q!==w){if(C!==void 0&&C.has(q)){if(O.length<_.length){var te=_[0],G;k=te.prev;var V=O[0],ae=O[O.length-1];for(G=0;G<O.length;G+=1)Ye(O[G],te,f);for(G=0;G<_.length;G+=1)C.delete(_[G]);Te(e,V.prev,ae.next),Te(e,k,V),Te(e,ae,te),w=te,k=ae,L-=1,O=[],_=[]}else C.delete(q),Ye(q,w,f),Te(e,q.prev,q.next),Te(e,q,k===null?e.first:k.next),Te(e,k,q),k=q;continue}for(O=[],_=[];w!==null&&w.k!==R;)(w.e.f&Ke)===0&&(C??=new Set).add(w),_.push(w),w=w.next;if(w===null)continue;q=w}O.push(q),k=q,w=q.next}if(w!==null||C!==void 0){for(var Q=C===void 0?[]:mt(C);w!==null;)(w.e.f&Ke)===0&&Q.push(w),w=w.next;var re=Q.length;if(re>0){var ce=u===0?f:null;ca(e,Q,ce)}}a.first=e.first&&e.first.e,a.last=k&&k.e;for(var le of s.values())ht(le.e);s.clear()}function St(a,o,e,s){Ft(a.v,o),a.i=e}function tt(a,o,e,s,f,v,d,m,x,u,I){var y=(x&Jt)!==0,w=(x&Rt)===0,C=y?w?W(f,!1,!1):ct(f):f,k=(x&zt)===0?d:ct(d),O={i:k,v:C,k:v,a:null,e:null,prev:e,next:s};try{if(a===null){var _=document.createDocumentFragment();_.append(a=ft())}return O.e=Xe(()=>m(a,C,k,u),Se),O.e.prev=e&&e.e,O.e.next=s&&s.e,e===null?I||(o.first=O):(e.next=O,e.e.next=O.e),s!==null&&(s.prev=O,s.e.prev=O.e),O}finally{}}function Ye(a,o,e){for(var s=a.next?a.next.e.nodes_start:e,f=o?o.e.nodes_start:e,v=a.e.nodes_start;v!==null&&v!==s;){var d=Vt(v);f.before(v),v=d}}function Te(a,o,e){o===null?a.first=e:(o.next=e,o.e.next=e&&e.e),e!==null&&(e.prev=o,e.e.prev=o&&o.e)}const vt=[...` 	
\r\fÂ \v\uFEFF`];function da(a,o,e){var s=a==null?"":""+a;if(o&&(s=s?s+" "+o:o),e){for(var f in e)if(e[f])s=s?s+" "+f:f;else if(s.length)for(var v=f.length,d=0;(d=s.indexOf(f,d))>=0;){var m=d+v;(d===0||vt.includes(s[d-1]))&&(m===s.length||vt.includes(s[m]))?s=(d===0?"":s.substring(0,d))+s.substring(m+1):d=m}}return s===""?null:s}function z(a,o,e,s,f,v){var d=a.__className;if(Se||d!==e||d===void 0){var m=da(e,s,v);(!Se||m!==a.getAttribute("class"))&&(m==null?a.removeAttribute("class"):a.className=m),a.__className=e}else if(v&&f!==v)for(var x in v){var u=!!v[x];(f==null||u!==!!f[x])&&a.classList.toggle(x,u)}return v}function Pe(a,o,e=o){var s=new WeakSet;Xt(a,"input",async f=>{var v=f?a.defaultValue:a.value;if(v=Ge(a)?Qe(v):v,e(v),Ie!==null&&s.add(Ie),await Zt(),v!==(v=o())){var d=a.selectionStart,m=a.selectionEnd,x=a.value.length;if(a.value=v??"",m!==null){var u=a.value.length;d===m&&m===x&&u>x?(a.selectionStart=u,a.selectionEnd=u):(a.selectionStart=d,a.selectionEnd=Math.min(m,u))}}}),(Se&&a.defaultValue!==a.value||se(o)==null&&a.value)&&(e(Ge(a)?Qe(a.value):a.value),Ie!==null&&s.add(Ie)),ea(()=>{var f=o();if(a===document.activeElement){var v=ta??Ie;if(s.has(v))return}Ge(a)&&f===Qe(a.value)||a.type==="date"&&!f&&!a.value||f!==a.value&&(a.value=f??"")})}function Ge(a){var o=a.type;return o==="number"||o==="range"}function Qe(a){return a===""?null:+a}const Ct={connected:!1,bot_token:null,bot_username:null,chat_id:null,messages:[],unread_count:0},be=aa(Ct);let ye=null;async function ua(a,o){try{return(await(await fetch("/api/telegram/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bot_token:a,chat_id:o||null})})).json()).status==="ok"?(await Le(),!0):!1}catch(e){return console.error("Error connecting to Telegram:",e),!1}}async function dt(a){try{const e=await(await fetch("/api/telegram/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bot_token:a})})).json();return e.status==="ok"&&e.bot_info?e.bot_info:e.error?{error:e.error}:null}catch(o){return console.error("Error testing Telegram connection:",o),{error:"Network error - please check your connection"}}}function fa(){ye&&(ye.close(),ye=null),be.set(Ct)}async function ga(a,o){const s=_t(be).chat_id;if(!s)return console.error("No chat ID available for sending message"),!1;try{if(ye&&ye.readyState===WebSocket.OPEN){ye.send(JSON.stringify({type:"telegram_send",chat_id:s,message:a}));const d={chat_id:s,user_id:0,username:"bot",message:a,timestamp:Date.now()/1e3,direction:"outgoing"};return be.update(m=>({...m,messages:[...m.messages,d]})),!0}return(await(await fetch("/api/telegram/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s,message:a})})).json()).status==="ok"}catch(f){return console.error("Error sending Telegram message:",f),!1}}function st(){const a=_t(be);a.bot_username?window.open(`https://t.me/${a.bot_username}`,"_blank"):console.warn("Bot username not available")}async function ma(){const o=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/telegram`;ye=new WebSocket(o),ye.addEventListener("open",()=>{console.log("Telegram WebSocket connected")}),ye.addEventListener("message",e=>{try{const s=JSON.parse(e.data);pa(s)}catch(s){console.error("Error parsing WebSocket message:",s)}}),ye.addEventListener("close",()=>{console.log("Telegram WebSocket closed"),be.update(e=>({...e,connected:!1}))}),ye.addEventListener("error",e=>{console.error("Telegram WebSocket error:",e)})}function pa(a){switch(a.type){case"telegram_message":{const o={chat_id:a.chat_id,user_id:a.user_id,username:a.username,message:a.message,timestamp:a.timestamp,direction:"incoming"};be.update(e=>({...e,messages:[...e.messages,o],unread_count:e.unread_count+1}));break}case"telegram_status":{const e=a.status==="connected";be.update(s=>({...s,connected:e}));break}default:console.log("Unknown Telegram WebSocket message type:",a.type)}}function ut(){be.update(a=>({...a,unread_count:0}))}async function Le(){try{const o=await(await fetch("/api/telegram/status")).json();if(console.log("[Telegram] Status check:",o),o.credentials_saved)if(o.connected&&o.bot_info){console.log("[Telegram] Connected! Bot:",o.bot_info.username,o.from_keyring?"(from keyring)":"");try{localStorage.setItem("telegram_bot_info",JSON.stringify(o.bot_info))}catch(e){console.warn("[Telegram] Failed to cache bot info:",e)}be.update(e=>({...e,connected:!0,bot_username:o.bot_info.username,chat_id:o.chat_id||e.chat_id,bot_token:"***"})),(!ye||ye.readyState!==WebSocket.OPEN)&&await ma()}else{let e=null;try{const s=localStorage.getItem("telegram_bot_info");s&&(e=JSON.parse(s),console.log("[Telegram] Using cached bot info:",e.username))}catch(s){console.warn("[Telegram] Failed to read cached bot info:",s)}be.update(s=>({...s,connected:!0,bot_username:e?.username||null,chat_id:o.chat_id||null,bot_token:"***"})),e||console.warn("[Telegram] Credentials saved but bot connection test failed and no cached info available")}else console.log("[Telegram] Not connected. Error:",o.error),be.update(e=>({...e,connected:!1,bot_username:null,chat_id:o.chat_id||null}))}catch(a){console.error("Error fetching Telegram status:",a)}}var ha=D('<span class="unread-badge svelte-1qwqu3f"> </span>'),_a=D('<button class="btn-icon svelte-1qwqu3f" title="Open in Telegram" aria-label="Open in Telegram"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></button>'),ba=D('<div class="empty-state svelte-1qwqu3f"><p class="empty-text svelte-1qwqu3f">Not connected to Telegram</p> <p class="empty-hint svelte-1qwqu3f">Configure your bot in Settings to get started</p></div>'),ya=D('<div class="empty-state svelte-1qwqu3f"><p class="empty-text svelte-1qwqu3f">No messages yet</p> <p class="empty-hint svelte-1qwqu3f">Send a message to start the conversation</p></div>'),wa=D('<div><div class="message-header svelte-1qwqu3f"><span class="message-username svelte-1qwqu3f"> </span> <span class="message-timestamp svelte-1qwqu3f"> </span></div> <div class="message-content svelte-1qwqu3f"> </div></div>'),xa=D('<div class="messages-list svelte-1qwqu3f"></div>'),ka=D('<div class="input-container svelte-1qwqu3f"><textarea placeholder="Type a message..." rows="1" class="message-input svelte-1qwqu3f"></textarea> <button class="send-button svelte-1qwqu3f" title="Send message" aria-label="Send message"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div>'),Ta=D('<div><div class="chat-header svelte-1qwqu3f"><div class="header-title svelte-1qwqu3f"><svg class="telegram-icon svelte-1qwqu3f" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.654-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"></path></svg> <span>Telegram</span> <!></div> <div class="header-actions svelte-1qwqu3f"><!></div></div> <div class="messages-container svelte-1qwqu3f"><!></div> <!></div>');function Sa(a,o){je(o,!1);const e=()=>Ne(be,"$telegramStore",s),[s,f]=Ue(),v=W(),d=W();let m=oa(o,"collapsed",8,!1),x=W(""),u=W(),I=W(!0);We(()=>{m()||ut()}),bt(()=>{});function y(){t(u)&&requestAnimationFrame(()=>{wt(u,t(u).scrollTop=t(u).scrollHeight)})}function w(){if(!t(u))return;const{scrollTop:S,scrollHeight:N,clientHeight:U}=t(u);g(I,N-S-U<50),t(I)&&!m()&&ut()}async function C(){const S=t(x).trim();if(!S)return;await ga(S)?(g(x,""),y()):console.error("Failed to send Telegram message")}function k(S){S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),C())}function O(S){const N=new Date(S*1e3),U=new Date;return N.toDateString()===U.toDateString()?N.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):N.toLocaleDateString([],{month:"short",day:"numeric"})+" "+N.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function _(){!e().connected||!e().bot_username||st()}Me(()=>e(),()=>{g(v,e().messages.length>0)}),Me(()=>e(),()=>{g(d,e().unread_count>0)}),Me(()=>(e(),t(u),t(I)),()=>{e().messages&&t(u)&&t(I)&&y()}),yt(),Ae();var H=Ta();let R;var q=n(H),L=n(q),M=i(n(L),4);{var Y=S=>{var N=ha(),U=n(N,!0);r(N),ee(()=>j(U,(e(),se(()=>e().unread_count)))),b(S,N)};A(M,S=>{t(d)&&S(Y)})}r(L);var F=i(L,2),te=n(F);{var G=S=>{var N=_a();P("click",N,_),b(S,N)};A(te,S=>{e(),se(()=>e().connected&&e().bot_username)&&S(G)})}r(F),r(q);var V=i(q,2),ae=n(V);{var Q=S=>{var N=ba();b(S,N)},re=S=>{var N=Oe(),U=$e(N);{var ve=oe=>{var ge=ya();b(oe,ge)},ne=oe=>{var ge=xa();at(ge,5,()=>(e(),se(()=>e().messages)),de=>de.timestamp+de.direction,(de,X)=>{var ue=wa();let me;var h=n(ue),E=n(h),B=n(E,!0);r(E);var K=i(E,2),c=n(K,!0);r(K),r(h);var p=i(h,2),$=n(p,!0);r(p),r(ue),ee((l,T)=>{me=z(ue,1,"message svelte-1qwqu3f",null,me,l),j(B,(t(X),se(()=>t(X).username))),j(c,T),j($,(t(X),se(()=>t(X).message)))},[()=>({incoming:t(X).direction==="incoming",outgoing:t(X).direction==="outgoing"}),()=>(t(X),se(()=>O(t(X).timestamp)))]),b(de,ue)}),r(ge),b(oe,ge)};A(U,oe=>{t(v)?oe(ne,!1):oe(ve)},!0)}b(S,N)};A(ae,S=>{e(),se(()=>!e().connected)?S(Q):S(re,!1)})}r(V),Tt(V,S=>g(u,S),()=>t(u));var ce=i(V,2);{var le=S=>{var N=ka(),U=n(N);xt(U);var ve=i(U,2);r(N),ee(ne=>{U.disabled=(e(),se(()=>!e().connected)),ve.disabled=ne},[()=>(t(x),e(),se(()=>!t(x).trim()||!e().connected))]),Pe(U,()=>t(x),ne=>g(x,ne)),P("keypress",U,k),P("click",ve,C),b(S,N)};A(ce,S=>{e(),se(()=>e().connected)&&S(le)})}r(H),ee(S=>R=z(H,1,"telegram-chat svelte-1qwqu3f",null,R,S),[()=>({collapsed:m()})]),P("scroll",V,w),b(a,H),He(),f()}var Ca=D('<span class="badge svelte-191yngm"> </span>'),Ea=D('<button aria-label="Toggle Telegram panel"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-191yngm"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.654-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z" class="svelte-191yngm"></path></svg> <!></button> <button class="btn-secondary svelte-191yngm" data-testid="telegram-launch-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-191yngm"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" class="svelte-191yngm"></path><polyline points="15 3 21 3 21 9" class="svelte-191yngm"></polyline><line x1="10" y1="14" x2="21" y2="3" class="svelte-191yngm"></line></svg> Launch in Telegram</button>',1),qa=D('<div class="empty-state svelte-191yngm"><svg class="empty-icon svelte-191yngm" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-191yngm"></path></svg> <p class="empty-text svelte-191yngm">Start a conversation with Claude Code</p> <p class="empty-hint svelte-191yngm">Type a message below to begin</p></div>'),$a=D('<div><div class="message-header svelte-191yngm"><span class="message-role svelte-191yngm"> </span> <span class="message-timestamp svelte-191yngm"> </span></div> <div class="message-content svelte-191yngm"> </div></div>'),Da=D('<div class="messages-list svelte-191yngm"></div>'),Ia=D('<div class="loading-indicator svelte-191yngm"><div class="loading-dot svelte-191yngm"></div> <div class="loading-dot svelte-191yngm"></div> <div class="loading-dot svelte-191yngm"></div></div>'),Oa=D('<div class="telegram-panel svelte-191yngm"><!></div>'),Na=D('<div class="config-popup svelte-191yngm" data-testid="telegram-config-popup">Enter a bot token in Settings to enable Telegram</div>'),Ba=D('<div class="chat-layout svelte-191yngm"><div><div class="chat-header svelte-191yngm"><div class="header-left svelte-191yngm"><h2 class="svelte-191yngm">Chat with Claude Code</h2></div> <div class="header-right svelte-191yngm"><!> <button class="btn-secondary svelte-191yngm" title="Clear chat history">Clear</button></div></div> <div class="messages-container svelte-191yngm"><!> <!></div> <div class="input-container svelte-191yngm"><textarea placeholder="Type your message to Claude Code..." rows="1" class="message-input svelte-191yngm"></textarea> <button class="send-button svelte-191yngm" title="Send message" aria-label="Send message"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-191yngm"><line x1="22" y1="2" x2="11" y2="13" class="svelte-191yngm"></line><polygon points="22 2 15 22 11 13 2 9 22 2" class="svelte-191yngm"></polygon></svg></button></div></div> <!> <!></div>');function Ma(a,o){je(o,!1);const e=()=>Ne(kt,"$currentProject",f),s=()=>Ne(be,"$telegramStore",f),[f,v]=Ue(),d=W(),m=W();let x=W([]),u=W(""),I=W(!1),y=W(!1),w=W(!1),C=W(),k=null;We(async()=>{await Le(),O(),Y()}),bt(()=>{k&&k.close()});function O(){const p=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;k=new WebSocket(p),k.addEventListener("open",()=>{console.log("Chat WebSocket connected")}),k.addEventListener("message",$=>{try{const l=JSON.parse($.data);_(l)}catch(l){console.error("Error parsing WebSocket message:",l)}}),k.addEventListener("close",()=>{console.log("Chat WebSocket closed"),setTimeout(()=>{(!k||k.readyState===WebSocket.CLOSED)&&O()},3e3)}),k.addEventListener("error",$=>{console.error("Chat WebSocket error:",$)})}function _(c){if(c.type==="message"||c.content){const p={id:crypto.randomUUID(),role:c.role||"assistant",content:c.content||"",timestamp:Date.now()};g(x,[...t(x),p]),F(),q()}}async function H(){if(!t(m))return;const c=t(u).trim();g(u,"");const p={id:crypto.randomUUID(),role:"user",content:c,timestamp:Date.now()};g(x,[...t(x),p]),F(),q(),g(I,!0);try{if(k&&k.readyState===WebSocket.OPEN)k.send(JSON.stringify({type:"chat",message:c,project_path:e()||process.cwd()}));else{const $=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:c,project_path:e()||process.cwd()})});if(!$.ok)throw new Error("Failed to send message");const l=await $.json();if(l.response){const T={id:crypto.randomUUID(),role:"assistant",content:l.response,timestamp:Date.now()};g(x,[...t(x),T]),F(),q()}}}catch($){console.error("Error sending message:",$);const l={id:crypto.randomUUID(),role:"system",content:"Error: Failed to send message. Please try again.",timestamp:Date.now()};g(x,[...t(x),l]),F()}finally{g(I,!1)}}function R(c){c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),H())}function q(){t(C)&&requestAnimationFrame(()=>{wt(C,t(C).scrollTop=t(C).scrollHeight)})}function L(){g(y,!t(y))}function M(){if(!s().connected||!s().bot_username){g(w,!0),setTimeout(()=>{g(w,!1)},3e3);return}st()}function Y(){try{const c=localStorage.getItem("chat_history");c&&g(x,JSON.parse(c))}catch(c){console.error("Error loading chat history:",c)}}function F(){try{localStorage.setItem("chat_history",JSON.stringify(t(x)))}catch(c){console.error("Error saving chat history:",c)}}function te(){g(x,[]),F()}function G(c){return new Date(c).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}Me(()=>t(x),()=>{g(d,t(x).length>0)}),Me(()=>(t(u),t(I)),()=>{g(m,t(u).trim().length>0&&!t(I))}),yt(),Ae();var V=Ba(),ae=n(V);let Q;var re=n(ae),ce=i(n(re),2),le=n(ce);{var S=c=>{var p=Ea(),$=$e(p);let l;var T=i(n($),2);{var J=ie=>{var pe=Ca(),he=n(pe,!0);r(pe),ee(()=>j(he,(s(),se(()=>s().unread_count)))),b(ie,pe)};A(T,ie=>{s(),se(()=>s().unread_count>0)&&ie(J)})}r($);var Z=i($,2);ee(ie=>{l=z($,1,"btn-icon svelte-191yngm",null,l,ie),Fe($,"title",t(y)?"Hide Telegram":"Show Telegram"),Z.disabled=(s(),se(()=>!s().connected||!s().bot_username)),Fe(Z,"title",(s(),se(()=>s().bot_username?`Launch @${s().bot_username} in Telegram`:"Configure Telegram in Settings")))},[()=>({active:t(y)})]),P("click",$,L),P("click",Z,M),b(c,p)};A(le,c=>{s(),se(()=>s().connected)&&c(S)})}var N=i(le,2);r(ce),r(re);var U=i(re,2),ve=n(U);{var ne=c=>{var p=qa();b(c,p)},oe=c=>{var p=Da();at(p,5,()=>t(x),$=>$.id,($,l)=>{var T=$a();let J;var Z=n(T),ie=n(Z),pe=n(ie,!0);r(ie);var he=i(ie,2),we=n(he,!0);r(he),r(Z);var fe=i(Z,2),Ce=n(fe,!0);r(fe),r(T),ee((Ee,_e)=>{J=z(T,1,"message svelte-191yngm",null,J,Ee),j(pe,(t(l),se(()=>t(l).role==="user"?"You":t(l).role==="assistant"?"Claude":"System"))),j(we,_e),j(Ce,(t(l),se(()=>t(l).content)))},[()=>({user:t(l).role==="user",assistant:t(l).role==="assistant",system:t(l).role==="system"}),()=>(t(l),se(()=>G(t(l).timestamp)))]),b($,T)}),r(p),b(c,p)};A(ve,c=>{t(d)?c(oe,!1):c(ne)})}var ge=i(ve,2);{var de=c=>{var p=Ia();b(c,p)};A(ge,c=>{t(I)&&c(de)})}r(U),Tt(U,c=>g(C,c),()=>t(C));var X=i(U,2),ue=n(X);xt(ue);var me=i(ue,2);r(X),r(ae);var h=i(ae,2);{var E=c=>{var p=Oa(),$=n(p);{let l=gt(()=>!t(y));Sa($,{get collapsed(){return t(l)}})}r(p),b(c,p)};A(h,c=>{t(y)&&c(E)})}var B=i(h,2);{var K=c=>{var p=Na();b(c,p)};A(B,c=>{t(w)&&c(K)})}r(V),ee(c=>{Q=z(ae,1,"main-chat-panel svelte-191yngm",null,Q,c),N.disabled=!t(d),ue.disabled=t(I),me.disabled=!t(m)},[()=>({"with-telegram":t(y)})]),P("click",N,te),Pe(ue,()=>t(u),c=>g(u,c)),P("keypress",ue,R),P("click",me,H),b(a,V),He(),v()}var La=D('<div class="diff-container svelte-n31mvn"><div class="diff-header svelte-n31mvn"><h2 class="svelte-n31mvn">Diff Viewer</h2></div> <div class="diff-content svelte-n31mvn"><p class="placeholder-text svelte-n31mvn">Diff viewer coming soon...</p></div></div>');function Pa(a){var o=La();b(a,o)}var Aa=D('<div class="history-container svelte-1t4jzn8"><div class="history-header svelte-1t4jzn8"><h2 class="svelte-1t4jzn8">Conversation History</h2></div> <div class="history-content svelte-1t4jzn8"><p class="placeholder-text svelte-1t4jzn8">History viewer coming soon...</p></div></div>');function ja(a){var o=Aa();b(a,o)}var Wa=D(`<div class="bot-info svelte-x4gxra"><span class="bot-username svelte-x4gxra"> </span> <button class="open-telegram-btn svelte-x4gxra" title="Open in Telegram"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-x4gxra"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97
							9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002
							0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.654-.64.135-.954l11.566-4.458c.538-.196
							1.006.128.832.941z"></path></svg> Open in Telegram</button></div>`),Ha=D('<div class="bot-info svelte-x4gxra"><span class="status-note svelte-x4gxra">Bot not verified - click Test Connection to verify</span></div>'),Fa=D('<div data-testid="telegram-status"> </div>'),Ua=D('<div class="test-result svelte-x4gxra"><h4 class="svelte-x4gxra">Bot Information:</h4> <ul class="svelte-x4gxra"><li class="svelte-x4gxra"><strong>Username:</strong> </li> <li class="svelte-x4gxra"><strong>Name:</strong> </li> <li class="svelte-x4gxra"><strong>ID:</strong> </li> <li class="svelte-x4gxra"><strong>Link:</strong> <a target="_blank" class="svelte-x4gxra"> </a></li></ul></div>'),za=D('<button class="btn btn-primary svelte-x4gxra" data-testid="telegram-test-button"> </button> <button class="btn btn-success svelte-x4gxra" data-testid="telegram-save-button"> </button>',1),Ja=D('<button class="btn btn-primary svelte-x4gxra" data-testid="telegram-test-button"> </button> <button class="btn btn-danger svelte-x4gxra" data-testid="telegram-disconnect-button">Disconnect</button>',1),Ra=D('<button class="btn btn-danger svelte-x4gxra" data-testid="telegram-disconnect-button">Disconnect</button>'),Va=D('<div class="config-popup svelte-x4gxra" data-testid="telegram-config-popup">Enter a bot token in the configuration</div>'),Ka=D(`<div class="telegram-settings svelte-x4gxra"><div class="settings-header svelte-x4gxra"><h2 class="svelte-x4gxra">Telegram Integration</h2> <p class="description svelte-x4gxra">Connect your Telegram bot to receive real-time notifications and interact with Claude Code
			from Telegram.</p></div> <div class="status-section svelte-x4gxra"><div><span class="status-dot svelte-x4gxra"></span> <span class="status-text svelte-x4gxra"><!></span></div> <!></div> <div class="config-section svelte-x4gxra"><h3 class="svelte-x4gxra">Configuration</h3> <div class="instructions svelte-x4gxra"><p class="svelte-x4gxra"><strong>Setup Instructions:</strong></p> <ol class="svelte-x4gxra"><li class="svelte-x4gxra">Open Telegram and search for <a href="https://t.me/BotFather" target="_blank" class="svelte-x4gxra">@BotFather</a></li> <li class="svelte-x4gxra">Send <code class="svelte-x4gxra">/newbot</code> command and follow the prompts</li> <li class="svelte-x4gxra">Copy your bot token (looks like: <code class="svelte-x4gxra">123456:ABC-DEF1234...</code>)</li> <li class="svelte-x4gxra">Paste the token below and click "Save Credentials"</li> <li class="svelte-x4gxra">Open your bot in Telegram and send a message to activate it</li></ol></div> <div class="form-group svelte-x4gxra"><label for="bot-token" class="svelte-x4gxra">Bot Token</label> <input id="bot-token" type="password" placeholder="123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11" class="token-input svelte-x4gxra"/> <span class="help-text svelte-x4gxra">Your Telegram bot token from @BotFather</span></div> <div class="form-group svelte-x4gxra"><label for="chat-id" class="svelte-x4gxra">Chat ID (Optional)</label> <input id="chat-id" type="text" placeholder="Auto-detected when you message the bot" class="chat-id-input svelte-x4gxra"/> <span class="help-text svelte-x4gxra">Leave empty for auto-detection</span></div> <!> <!> <div class="button-group svelte-x4gxra"><!></div></div> <!></div>`);function Ya(a,o){je(o,!1);const e=()=>Ne(be,"$telegramStore",s),[s,f]=Ue();let v=W(""),d=W(""),m=W(""),x=W("info"),u=W(!1),I=W(!1),y=W(null);We(async()=>{await Le()});async function w(){if(!t(v).trim()){_("Please enter a bot token","error");return}if(g(u,!0),_("Saving credentials...","info"),await ua(t(v),t(d).trim()||void 0)){_("Credentials saved. Testing connection...","success");const E=t(v);if(g(v,""),g(y,await dt(E)),t(y)&&!("error"in t(y)))_(`Connection successful! Bot: @${t(y).username} (${t(y).first_name})`,"success"),await Le();else{const B=t(y)&&"error"in t(y)?t(y).error:"Connection test failed";_(`Credentials saved, but ${B}`,"error"),g(y,null)}}else _("Failed to save credentials","error");g(u,!1)}async function C(){if(!t(v).trim()){_("Please enter a bot token","error");return}g(u,!0),_("Testing connection...","info"),g(y,await dt(t(v))),t(y)?"error"in t(y)?(_(t(y).error,"error"),g(y,null)):(_(`Connection successful! Bot: @${t(y).username} (${t(y).first_name})`,"success"),await Le()):(_("Connection failed. Please check your bot token.","error"),g(y,null)),g(u,!1)}function k(){fa(),g(v,""),g(d,""),g(y,null),_("Disconnected from Telegram","info")}function O(){if(!e().connected||!e().bot_username){g(I,!0),window.setTimeout(()=>{g(I,!1)},3e3);return}st()}function _(h,E){g(m,h),g(x,E)}Ae();var H=Ka(),R=i(n(H),2),q=n(R);let L;var M=i(n(q),2),Y=n(M);{var F=h=>{var E=De("Connected");b(h,E)},te=h=>{var E=Oe(),B=$e(E);{var K=p=>{var $=De("Credentials Configured");b(p,$)},c=p=>{var $=De("Disconnected");b(p,$)};A(B,p=>{e().connected?p(K):p(c,!1)},!0)}b(h,E)};A(Y,h=>{e().connected&&e().bot_username?h(F):h(te,!1)})}r(M),r(q);var G=i(q,2);{var V=h=>{var E=Wa(),B=n(E),K=n(B);r(B);var c=i(B,2);r(E),ee(()=>j(K,`@${e().bot_username??""}`)),P("click",c,O),b(h,E)},ae=h=>{var E=Oe(),B=$e(E);{var K=c=>{var p=Ha();b(c,p)};A(B,c=>{e().connected&&c(K)},!0)}b(h,E)};A(G,h=>{e().connected&&e().bot_username?h(V):h(ae,!1)})}r(R);var Q=i(R,2),re=i(n(Q),4),ce=i(n(re),2);et(ce),Ze(2),r(re);var le=i(re,2),S=i(n(le),2);et(S),Ze(2),r(le);var N=i(le,2);{var U=h=>{var E=Fa(),B=n(E,!0);r(E),ee(()=>{z(E,1,`status-message ${t(x)??""}`,"svelte-x4gxra"),j(B,t(m))}),b(h,E)};A(N,h=>{t(m)&&h(U)})}var ve=i(N,2);{var ne=h=>{var E=Ua(),B=i(n(E),2),K=n(B),c=i(n(K));r(K);var p=i(K,2),$=i(n(p));r(p);var l=i(p,2),T=i(n(l));r(l);var J=i(l,2),Z=i(n(J),2),ie=n(Z,!0);r(Z),r(J),r(B),r(E),ee(()=>{j(c,` @${t(y).username??""}`),j($,` ${t(y).first_name??""}`),j(T,` ${t(y).id??""}`),Fe(Z,"href",t(y).deep_link),j(ie,t(y).deep_link)}),b(h,E)};A(ve,h=>{t(y)&&h(ne)})}var oe=i(ve,2),ge=n(oe);{var de=h=>{var E=za(),B=$e(E),K=n(B,!0);r(B);var c=i(B,2),p=n(c,!0);r(c),ee(($,l)=>{B.disabled=$,j(K,t(u)?"Testing...":"Test Connection"),c.disabled=l,j(p,t(u)?"Saving...":"Save Credentials")},[()=>t(u)||!t(v).trim(),()=>t(u)||!t(v).trim()]),P("click",B,C),P("click",c,w),b(h,E)},X=h=>{var E=Oe(),B=$e(E);{var K=p=>{var $=Ja(),l=$e($),T=n(l,!0);r(l);var J=i(l,2);ee(Z=>{l.disabled=Z,j(T,t(u)?"Testing...":"Test Connection")},[()=>t(u)||!t(v).trim()]),P("click",l,C),P("click",J,k),b(p,$)},c=p=>{var $=Ra();P("click",$,k),b(p,$)};A(B,p=>{e().bot_username?p(c,!1):p(K)},!0)}b(h,E)};A(ge,h=>{e().connected?h(X,!1):h(de)})}r(oe),r(Q);var ue=i(Q,2);{var me=h=>{var E=Va();b(h,E)};A(ue,h=>{t(I)&&h(me)})}r(H),ee(h=>{L=z(q,1,"status-indicator svelte-x4gxra",null,L,h),ce.disabled=t(u)||e().connected,S.disabled=t(u)||e().connected},[()=>({connected:e().connected})]),Pe(ce,()=>t(v),h=>g(v,h)),Pe(S,()=>t(d),h=>g(d,h)),b(a,H),He(),f()}var Ga=D('<div class="general-settings svelte-anx9w7"><h2 class="svelte-anx9w7">General Settings</h2> <p class="placeholder-text svelte-anx9w7">General settings coming soon...</p></div>'),Qa=D('<div class="settings-container svelte-anx9w7"><div class="settings-sidebar svelte-anx9w7"><button>General</button> <button>Telegram</button></div> <div class="settings-content svelte-anx9w7"><!></div></div>');function Xa(a){let o=W("telegram");var e=Qa(),s=n(e),f=n(s);let v;var d=i(f,2);let m;r(s);var x=i(s,2),u=n(x);{var I=w=>{var C=Ga();b(w,C)},y=w=>{var C=Oe(),k=$e(C);{var O=_=>{Ya(_,{})};A(k,_=>{t(o)==="telegram"&&_(O)},!0)}b(w,C)};A(u,w=>{t(o)==="general"?w(I):w(y,!1)})}r(x),r(e),ee((w,C)=>{v=z(f,1,"settings-tab svelte-anx9w7",null,v,w),m=z(d,1,"settings-tab svelte-anx9w7",null,m,C)},[()=>({active:t(o)==="general"}),()=>({active:t(o)==="telegram"})]),P("click",f,()=>g(o,"general")),P("click",d,()=>g(o,"telegram")),b(a,e)}var Za=D('<div class="error-message svelte-18c3yff"><span> </span> <button class="close-error svelte-18c3yff">Ã—</button></div>'),es=D('<div class="loading-state svelte-18c3yff"><div class="spinner svelte-18c3yff"></div> <p>Loading backlog tasks...</p></div>'),ts=D('<div class="empty-state svelte-18c3yff"><p class="svelte-18c3yff">No tasks found</p> <small class="svelte-18c3yff"><!></small></div>'),as=D("<span> </span>"),ss=D('<p class="task-description svelte-18c3yff"> </p>'),rs=D('<div class="task-card svelte-18c3yff"><div class="task-header svelte-18c3yff"><div class="task-title-section svelte-18c3yff"><span> </span> <h3 class="task-title svelte-18c3yff"> </h3></div> <div class="task-meta svelte-18c3yff"><!> <span class="task-id svelte-18c3yff"> </span></div></div> <!></div>'),ns=D('<div class="tasks-list svelte-18c3yff"></div>'),ls=D('<div class="backlog-container svelte-18c3yff"><div class="backlog-header svelte-18c3yff"><h2 class="svelte-18c3yff">Project Backlog</h2> <div class="header-stats svelte-18c3yff"><div class="stat svelte-18c3yff"><span class="stat-label svelte-18c3yff">To Do:</span> <span class="stat-value svelte-18c3yff"> </span></div> <div class="stat svelte-18c3yff"><span class="stat-label svelte-18c3yff">In Progress:</span> <span class="stat-value svelte-18c3yff"> </span></div> <div class="stat svelte-18c3yff"><span class="stat-label svelte-18c3yff">Done:</span> <span class="stat-value svelte-18c3yff"> </span></div></div></div> <div class="backlog-controls svelte-18c3yff"><div class="search-box svelte-18c3yff"><input type="text" placeholder="Search tasks..." class="search-input svelte-18c3yff"/></div> <div class="filter-buttons svelte-18c3yff"><button>All</button> <button>To Do</button> <button>In Progress</button> <button>Done</button></div> <button class="refresh-button svelte-18c3yff" title="Refresh backlog"><!></button></div> <!> <div class="tasks-container svelte-18c3yff"><!></div> <div class="backlog-info svelte-18c3yff"><p class="svelte-18c3yff">ðŸ’¡ <strong>Tip:</strong> Backlog.md is integrated with AI agents. Use <code class="svelte-18c3yff">clud</code> to manage tasks from the terminal.</p></div></div>');function os(a,o){je(o,!1);let e=W([]),s=W(!1),f=W(null),v=W("all"),d=W("");We(async()=>{await m()});async function m(){g(s,!0),g(f,null);try{const l=await fetch("/api/backlog");if(!l.ok)throw new Error(`Failed to load backlog: ${l.statusText}`);const T=await l.json();g(e,Array.isArray(T)?T:T.tasks||[])}catch(l){g(f,l instanceof Error?l.message:"Failed to load backlog tasks"),g(e,[])}g(s,!1)}function x(){return t(e).filter(l=>{const T=t(v)==="all"||l.status===t(v),J=t(d)===""||l.title.toLowerCase().includes(t(d).toLowerCase())||(l.description?.toLowerCase().includes(t(d).toLowerCase())??!1);return T&&J})}function u(l){switch(l){case"todo":return"status-todo";case"in_progress":return"status-in-progress";case"done":return"status-done";default:return"status-todo"}}function I(l){switch(l){case"todo":return"To Do";case"in_progress":return"In Progress";case"done":return"Done";default:return l}}function y(l){return l?l.charAt(0).toUpperCase()+l.slice(1):""}const w=x(),C=t(e).filter(l=>l.status==="todo").length,k=t(e).filter(l=>l.status==="in_progress").length,O=t(e).filter(l=>l.status==="done").length;Ae();var _=ls(),H=n(_),R=i(n(H),2),q=n(R),L=i(n(q),2),M=n(L,!0);r(L),r(q);var Y=i(q,2),F=i(n(Y),2),te=n(F,!0);r(F),r(Y);var G=i(Y,2),V=i(n(G),2),ae=n(V,!0);r(V),r(G),r(R),r(H);var Q=i(H,2),re=n(Q),ce=n(re);et(ce),r(re);var le=i(re,2),S=n(le);let N;var U=i(S,2);let ve;var ne=i(U,2);let oe;var ge=i(ne,2);let de;r(le);var X=i(le,2),ue=n(X);{var me=l=>{var T=De("âŸ³");b(l,T)},h=l=>{var T=De("â†»");b(l,T)};A(ue,l=>{t(s)?l(me):l(h,!1)})}r(X),r(Q);var E=i(Q,2);{var B=l=>{var T=Za(),J=n(T),Z=n(J);r(J);var ie=i(J,2);r(T),ee(()=>j(Z,`âš ï¸ ${t(f)??""}`)),P("click",ie,()=>g(f,null)),b(l,T)};A(E,l=>{t(f)&&l(B)})}var K=i(E,2),c=n(K);{var p=l=>{var T=es();b(l,T)},$=l=>{var T=Oe(),J=$e(T);{var Z=pe=>{var he=ts(),we=i(n(he),2),fe=n(we);{var Ce=_e=>{var xe=De("Your backlog is empty. Check that Backlog.md is initialized in your project.");b(_e,xe)},Ee=_e=>{var xe=De("No tasks match the current filter.");b(_e,xe)};A(fe,_e=>{t(e).length===0?_e(Ce):_e(Ee,!1)})}r(we),r(he),b(pe,he)},ie=pe=>{var he=ns();at(he,5,()=>w,we=>we.id,(we,fe)=>{var Ce=rs(),Ee=n(Ce),_e=n(Ee),xe=n(_e),ze=n(xe,!0);r(xe);var rt=i(xe,2),Et=n(rt,!0);r(rt),r(_e);var nt=i(_e,2),lt=n(nt);{var qt=qe=>{var ke=as(),Je=n(ke,!0);r(ke),ee(Ot=>{z(ke,1,`priority-badge priority-${t(fe).priority}`,"svelte-18c3yff"),j(Je,Ot)},[()=>y(t(fe).priority)]),b(qe,ke)};A(lt,qe=>{t(fe).priority&&qe(qt)})}var ot=i(lt,2),$t=n(ot);r(ot),r(nt),r(Ee);var Dt=i(Ee,2);{var It=qe=>{var ke=ss(),Je=n(ke,!0);r(ke),ee(()=>j(Je,t(fe).description)),b(qe,ke)};A(Dt,qe=>{t(fe).description&&qe(It)})}r(Ce),ee((qe,ke)=>{z(xe,1,qe,"svelte-18c3yff"),j(ze,ke),j(Et,t(fe).title),j($t,`#${t(fe).id??""}`)},[()=>`status-badge ${u(t(fe).status)}`,()=>I(t(fe).status)]),b(we,Ce)}),r(he),b(pe,he)};A(J,pe=>{w.length===0?pe(Z):pe(ie,!1)},!0)}b(l,T)};A(c,l=>{t(s)?l(p):l($,!1)})}r(K),Ze(2),r(_),ee((l,T,J,Z)=>{j(M,C),j(te,k),j(ae,O),N=z(S,1,"filter-button svelte-18c3yff",null,N,l),ve=z(U,1,"filter-button svelte-18c3yff",null,ve,T),oe=z(ne,1,"filter-button svelte-18c3yff",null,oe,J),de=z(ge,1,"filter-button svelte-18c3yff",null,de,Z),X.disabled=t(s)},[()=>({active:t(v)==="all"}),()=>({active:t(v)==="todo"}),()=>({active:t(v)==="in_progress"}),()=>({active:t(v)==="done"})]),Pe(ce,()=>t(d),l=>g(d,l)),P("click",S,()=>g(v,"all")),P("click",U,()=>g(v,"todo")),P("click",ne,()=>g(v,"in_progress")),P("click",ge,()=>g(v,"done")),P("click",X,m),b(a,_),He()}var is=D('<div class="app-container svelte-1uha8ag"><header class="app-header svelte-1uha8ag"><div class="header-left svelte-1uha8ag"><h1 class="app-title svelte-1uha8ag">Claude Code</h1> <div class="project-selector svelte-1uha8ag"><span class="project-label svelte-1uha8ag">Project:</span> <span class="project-name svelte-1uha8ag"> </span></div></div> <div class="header-right svelte-1uha8ag"><button class="theme-toggle svelte-1uha8ag" title="Toggle Theme"><span class="theme-icon svelte-1uha8ag"> </span></button></div></header> <nav class="tab-nav svelte-1uha8ag"><button>Chat</button> <button>Terminal</button> <button>Backlog</button> <button>Diff</button> <button>History</button> <button>Settings</button></nav> <main class="tab-content svelte-1uha8ag"><div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div></main></div>');function _s(a,o){je(o,!1);const e=()=>Ne(ra,"$themeIcon",f),s=()=>Ne(sa,"$activeTab",f),[f,v]=Ue();let d=W("");We(async()=>{try{const J=await(await fetch("/api/cwd")).json();g(d,J.cwd),kt.set(t(d))}catch(T){console.error("Error fetching current directory:",T),g(d,"Current Directory")}});function m(T){la(T)}function x(T){if(!T)return"Loading...";const J=T.split(/[\\/]/).filter(Boolean);return J[J.length-1]||T}Ae();var u=is(),I=n(u),y=n(I),w=i(n(y),2),C=i(n(w),2),k=n(C,!0);r(C),r(w),r(y);var O=i(y,2),_=n(O),H=n(_),R=n(H,!0);r(H),r(_),r(O),r(I);var q=i(I,2),L=n(q);let M;var Y=i(L,2);let F;var te=i(Y,2);let G;var V=i(te,2);let ae;var Q=i(V,2);let re;var ce=i(Q,2);let le;r(q);var S=i(q,2),N=n(S);let U;var ve=n(N);Ma(ve,{}),r(N);var ne=i(N,2);let oe;var ge=n(ne);ia(ge,{}),r(ne);var de=i(ne,2);let X;var ue=n(de);os(ue,{}),r(de);var me=i(de,2);let h;var E=n(me);Pa(E),r(me);var B=i(me,2);let K;var c=n(B);ja(c),r(B);var p=i(B,2);let $;var l=n(p);Xa(l),r(p),r(S),r(u),ee((T,J,Z,ie,pe,he,we,fe,Ce,Ee,_e,xe,ze)=>{Fe(C,"title",t(d)),j(k,T),j(R,e()),M=z(L,1,"tab-button svelte-1uha8ag",null,M,J),F=z(Y,1,"tab-button svelte-1uha8ag",null,F,Z),G=z(te,1,"tab-button svelte-1uha8ag",null,G,ie),ae=z(V,1,"tab-button svelte-1uha8ag",null,ae,pe),re=z(Q,1,"tab-button svelte-1uha8ag",null,re,he),le=z(ce,1,"tab-button svelte-1uha8ag",null,le,we),U=z(N,1,"tab-panel svelte-1uha8ag",null,U,fe),oe=z(ne,1,"tab-panel svelte-1uha8ag",null,oe,Ce),X=z(de,1,"tab-panel svelte-1uha8ag",null,X,Ee),h=z(me,1,"tab-panel svelte-1uha8ag",null,h,_e),K=z(B,1,"tab-panel svelte-1uha8ag",null,K,xe),$=z(p,1,"tab-panel svelte-1uha8ag",null,$,ze)},[()=>x(t(d)),()=>({active:s()==="chat"}),()=>({active:s()==="terminal"}),()=>({active:s()==="backlog"}),()=>({active:s()==="diff"}),()=>({active:s()==="history"}),()=>({active:s()==="settings"}),()=>({active:s()==="chat"}),()=>({active:s()==="terminal"}),()=>({active:s()==="backlog"}),()=>({active:s()==="diff"}),()=>({active:s()==="history"}),()=>({active:s()==="settings"})]),P("click",_,function(...T){na?.apply(this,T)}),P("click",L,()=>m("chat")),P("click",Y,()=>m("terminal")),P("click",te,()=>m("backlog")),P("click",V,()=>m("diff")),P("click",Q,()=>m("history")),P("click",ce,()=>m("settings")),b(a,u),He(),v()}export{_s as component};
