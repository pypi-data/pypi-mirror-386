import{L as f,r as n,o as v,W as h,O as p,Q as o,P as s,X as i,Y as g,Z as b,_ as w,$ as d,a0 as y,V as k}from"./index-DJkg6F8r.js";import{Q as x}from"./QTable-BQpogAfr.js";import{factory as Q}from"./crud-D1vEw0Qb.js";import"./QSelect-CLWMwuoD.js";import"./format-BFUIF-qg.js";import"./axios-NU4QR4fF.js";const C={class:"q-pa-md window-height"},V={class:"text-h6"},S={class:"text-subtitle2 text-grey-6"},O={__name:"AdminPage",setup(T){const u=f(),r=n(""),a=n(null),m=async t=>{var l;if(console.log("Row clicked:",t),console.log("Available crud_services:",(l=a.value)==null?void 0:l.crud_services),a.value){const e=await a.value.get_crud_service(t.name);e&&e.frontend_links&&e.frontend_links.list&&await u.push(e.frontend_links.list)}},_=[{name:"name",label:"Table",field:t=>t.name,sortable:!0},{name:"total_entries",label:"Total count",field:t=>t.total_entries,sortable:!0}],c=n([]);return v(async()=>{a.value=Q,c.value=Object.values(a.value.schemas).map(t=>({name:t.name,total_entries:t.total_entries}))}),(t,l)=>(p(),h("div",C,[o(x,{grid:"","grid-header":"",flat:"",bordered:"",title:"Models",rows:c.value,columns:_,"row-key":"name",filter:r.value,"hide-header":"",class:"full-height"},{"top-right":s(()=>[o(y,{borderless:"",dense:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),placeholder:"Search"},{append:s(()=>[o(k,{name:"search"})]),_:1},8,["modelValue"])]),item:s(e=>[i("div",{class:"q-pa-md col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:g(e.selected?"transform: scale(0.95);":"")},[o(b,{class:"cursor-pointer hover:bg-grey-2 transition-colors",onClick:B=>m(e.row),flat:"",bordered:""},{default:s(()=>[o(w,null,{default:s(()=>[i("div",V,d(e.row.name),1),i("div",S," Total entries: "+d(e.row.total_entries),1)]),_:2},1024)]),_:2},1032,["onClick"])],4)]),_:1},8,["rows","filter"])]))}};export{O as default};
