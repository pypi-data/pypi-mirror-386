---
- name: Generate Plivo Chatbot logs
  hosts: target_servers
  become: no
  tasks:
  - name: Get container ID
    shell: "sudo docker ps -a --filter ancestor=ringg-chatbot -q"
    register: container_id
    changed_when: false # This task doesn't modify system state

  - name: Dump container logs
    shell: "sudo docker logs {{ container_id.stdout }} > /tmp/ringg-chatbot-logs.txt 2>&1"
    when: container_id.stdout != ""
