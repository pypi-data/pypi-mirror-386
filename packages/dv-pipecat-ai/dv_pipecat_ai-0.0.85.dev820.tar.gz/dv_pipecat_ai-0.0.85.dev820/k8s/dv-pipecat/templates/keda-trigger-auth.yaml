{{- if .Values.keda.enabled }}
apiVersion: keda.sh/v1alpha1
kind: TriggerAuthentication
metadata:
  name: {{ include "dv-pipecat.fullname" . }}-http-auth
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "dv-pipecat.labels" . | nindent 4 }}
spec:
  secretTargetRef:
    - parameter: apiKey                  # For metrics-api scaler
      name: {{ include "dv-pipecat.fullname" . }}-api-key  # The Secret resource name
      key: ADMIN_API_KEY                 # The key within the Secret
{{- end }}
