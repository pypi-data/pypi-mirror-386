"""Main entry point for {{ project_name }}"""
import sys
from pathlib import Path

# Ensure the project root is in sys.path so imports work correctly
project_root = Path(__file__).parent
if str(project_root) not in sys.path:
    sys.path.insert(0, str(project_root))

import click
import config  # noqa: F401 - Import to initialize DI container

# Auto-discover event subscribers so @subscribe handlers are ready
try:
    from events import register_all_handlers
except ImportError:
    pass
else:
    register_all_handlers()

# Import your use cases here
# from domain.interactors.create_user import CreateUser


@click.group()
def cli():
    """Vega Framework Application"""
    pass

# Auto-register custom commands from presentation/cli/commands/
try:
    from presentation.cli.commands import get_commands
    for cmd in get_commands():
        cli.add_command(cmd)
except ImportError:
    # cli/commands/ not created yet
    pass


if __name__ == "__main__":
    cli()
