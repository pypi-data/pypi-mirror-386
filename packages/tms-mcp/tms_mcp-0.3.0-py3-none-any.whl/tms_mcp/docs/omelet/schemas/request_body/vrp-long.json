{
  "schema": {
    "additionalProperties": false,
    "properties": {
      "depot": {
        "additionalProperties": false,
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Name of the depot.",
            "title": "Depot Name"
          },
          "coordinate": {
            "anyOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "lng": {
                    "description": "Longitude in decimal degrees.",
                    "title": "Longitude",
                    "type": "number"
                  },
                  "lat": {
                    "description": "Latitude in decimal degrees.",
                    "title": "Latitude",
                    "type": "number"
                  }
                },
                "required": [
                  "lng",
                  "lat"
                ],
                "title": "Coordinate",
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "default": {
              "lng": 0.0,
              "lat": 0.0
            },
            "description": "Location of the depot. If not provided, defaults to (0.0, 0.0).",
            "title": "Depot Location"
          }
        },
        "title": "Depot",
        "type": "object"
      },
      "visits": {
        "description": "List of customer visits for large-scale problems. Up to 10,000 visits allowed.",
        "items": {
          "additionalProperties": false,
          "properties": {
            "name": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Name of the visit location.",
              "title": "Visit Name"
            },
            "service_time": {
              "default": 0,
              "description": "Time (in minutes) to serve this visit.",
              "title": "Service Duration",
              "type": "integer"
            },
            "coordinate": {
              "anyOf": [
                {
                  "additionalProperties": false,
                  "properties": {
                    "lng": {
                      "description": "Longitude in decimal degrees.",
                      "title": "Longitude",
                      "type": "number"
                    },
                    "lat": {
                      "description": "Latitude in decimal degrees.",
                      "title": "Latitude",
                      "type": "number"
                    }
                  },
                  "required": [
                    "lng",
                    "lat"
                  ],
                  "title": "Coordinate",
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": {
                "lng": 0.0,
                "lat": 0.0
              },
              "description": "Location of the visit. If not provided, defaults to (0.0, 0.0).",
              "title": "Visit Location"
            },
            "volume": {
              "default": 0.0,
              "description": "Volume of goods at the visit location (in cubic meters). Rounded to 3 decimal places.",
              "title": "Visit Volume",
              "type": "number"
            },
            "weight": {
              "default": 0.0,
              "description": "Weight of goods at the visit location (in kg). Rounded to 3 decimal places.",
              "title": "Visit Weight",
              "type": "number"
            },
            "extra_demands": {
              "default": [],
              "description": "A list of additional capacity demands for this visit. Each value corresponds positionally to a vehicle's extra_capacities field. There are no explicit names for these capacity types â€” only the order matters. The list must be the same length as the vehicle's extra_capacities list. For example, if a vehicle has extra_capacities = [100, 200], and this visit has extra_demands = [5, 10], it means the visit uses 5 units of the first capacity and 10 units of the second. Decimal places will be ignored.",
              "items": {
                "type": "number"
              },
              "title": "Extra Demands",
              "type": "array"
            },
            "unassigned_penalty": {
              "anyOf": [
                {
                  "minimum": 0.0,
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Penalty incurred if this visit cannot be assigned to any vehicle. This value is used to prioritize visits when the solver is unable to assign all visits.",
              "title": "Unassigned Penalty"
            },
            "time_window": {
              "anyOf": [
                {
                  "maxItems": 2,
                  "minItems": 2,
                  "prefixItems": [
                    {
                      "format": "date-time",
                      "type": "string"
                    },
                    {
                      "format": "date-time",
                      "type": "string"
                    }
                  ],
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Permissible time range for service at this location, in ISO 8601 format with timezone, e.g., '2025-03-16T17:40:00+09:00'",
              "title": "Visit Time Window"
            },
            "prohibited_time_window": {
              "anyOf": [
                {
                  "maxItems": 2,
                  "minItems": 2,
                  "prefixItems": [
                    {
                      "format": "date-time",
                      "type": "string"
                    },
                    {
                      "format": "date-time",
                      "type": "string"
                    }
                  ],
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Time range during which service at this location is not allowed, in ISO 8601 format with timezone, e.g., '2025-03-16T17:40:00+09:00'",
              "title": "Prohibited Time Window"
            },
            "early_delivery_required": {
              "default": false,
              "description": "If true, this visit requires early delivery. The solver will attempt to schedule this visit so that its delivery completion time is earlier.",
              "title": "Requires Early Delivery",
              "type": "boolean"
            },
            "early_delivery_priority": {
              "default": 1,
              "description": "Priority level for early delivery. This field is applied only if early_delivery_required is True. Acceptable values range from 1 to 10, where higher values indicate higher priority.",
              "maximum": 10,
              "minimum": 1,
              "title": "Early Delivery Priority",
              "type": "integer"
            }
          },
          "title": "Visit",
          "type": "object"
        },
        "maxItems": 10000,
        "minItems": 1,
        "title": "Extended Visit List",
        "type": "array"
      },
      "vehicles": {
        "description": "Information about available vehicles for routing.",
        "items": {
          "additionalProperties": false,
          "properties": {
            "name": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Vehicle identifier.",
              "title": "Vehicle Name"
            },
            "volume_capacity": {
              "default": 0.0,
              "description": "Maximum volume this vehicle can carry (in cubic meters). Rounded to 3 decimal places.",
              "minimum": 0.0,
              "title": "Volume Capacity",
              "type": "number"
            },
            "weight_capacity": {
              "default": 0.0,
              "description": "Maximum weight this vehicle can carry (in kg). Rounded to 3 decimal places.",
              "minimum": 0.0,
              "title": "Weight Capacity",
              "type": "number"
            },
            "extra_capacities": {
              "default": [],
              "description": "List of additional capacity types for this vehicle. Each value represents the maximum capacity for that type (e.g., temperature-controlled, hazardous materials). The order of these capacities must match the order of extra_demands in Visit.\nFor example, if a visit has extra_demands = [5, 10], and this vehicle has extra_capacities = [100, 200], it means the visit uses 5 units of the first capacity and 10 units of the second.\nDecimal places will be ignored.",
              "items": {
                "type": "number"
              },
              "title": "Extra Capacities",
              "type": "array"
            },
            "fixed_cost": {
              "default": 0.0,
              "description": "Fixed cost incurred by using this vehicle.",
              "minimum": 0.0,
              "title": "Fixed Cost",
              "type": "number"
            },
            "unit_distance_cost": {
              "default": 1.0,
              "description": "Cost per unit of distance traveled.",
              "minimum": 0.0,
              "title": "Unit Distance Cost",
              "type": "number"
            },
            "unit_duration_cost": {
              "default": 0.0,
              "description": "Cost per unit of travel time.",
              "minimum": 0.0,
              "title": "Unit Duration Cost",
              "type": "number"
            },
            "work_start_time": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Earliest datetime when the driver is available to begin their shift. This marks the lower bound of the driver's working hours. Use ISO 8601 format with timezone, e.g., '2025-03-16T17:40:00+09:00'.",
              "title": "Driver Shift Start Time"
            },
            "work_end_time": {
              "anyOf": [
                {
                  "format": "date-time",
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Latest datetime by which the driver must finish their shift. This marks the upper bound of the driver's working hours. Use ISO 8601 format with timezone, e.g., '2025-03-16T17:40:00+09:00'.",
              "title": "Driver Shift End Time"
            },
            "visit_preference": {
              "anyOf": [
                {
                  "items": {
                    "type": "integer"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Preference scores for each visit. Negative to avoid, higher values indicate stronger preference. Must match number of visits.",
              "title": "Visit Preferences"
            },
            "vehicle_type": {
              "enum": [
                "bike",
                "car",
                "walk"
              ],
              "title": "VehicleType",
              "type": "string"
            },
            "max_service_radius": {
              "anyOf": [
                {
                  "minimum": 0.0,
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Maximum radius (in meters) of the circumscribed circle containing all visits assigned to this vehicle. If specified, the solver will ensure that all visits assigned to this vehicle fit within a circle of this radius.",
              "title": "Maximum Service Radius"
            },
            "pre_assigned_visits": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "List of visit names that are pre-assigned to this vehicle. If specified, the solver will ensure that these visits are assigned to this vehicle.Warning: Do not use this together with `pre_fixed_visits`, as their functionalities may conflict. This is a temporary warning and may be removed or changed in future updates.",
              "title": "Pre-assigned Visits"
            },
            "pre_fixed_visits": {
              "anyOf": [
                {
                  "items": {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Specifies a predefined sequence of visits for each vehicle round. Any inner lists beyond the maximum number of rounds (max_round) will be ignored. For example, [['Visit A', 'Visit B'], ['Visit C']] means: - In the first round, the vehicle must visit Visit A followed by Visit B in order. - In the second round, the vehicle must go to Visit C. - No other visits can be assigned before Visit C. All rounds must be defined consecutively without gaps, meaning intermediate rounds cannot be left empty or skipped. For example, [['Visit A', 'Visit B'], [], ['Visit C']] is not allowed because the second round is empty while the third round is defined.Warning: Do not use this together with `pre_assigned_visits`, as their functionalities may conflict. This is a temporary warning and may be removed or changed in future updates.",
              "title": "Pre-fixed Visits for Rounds"
            },
            "allow_trip_extension": {
              "default": true,
              "description": "Determines whether additional visits can be assigned after completing the last visit specified in pre_fixed_visits within the same round, or if the vehicle must immediately return to the depot. By default (True), the vehicle can continue visiting other visits after the last pre-fixed visit in the same round. If set to False, the vehicle must return directly to the depot once the last pre-fixed visit is completed. If more rounds are available, a new round can then be started.\n\nExample:\n- pre_fixed_visits = [['A', 'B']]\n- allow_trip_extension = True\n  => After visiting B in the first round, the vehicle can visit other stops before returning to the depot. (['Depot', 'A', 'B', 'C', ...])\n- allow_trip_extension = False\n  => After visiting B, the vehicle must immediately return to the depot. (['Depot', 'A', 'B', 'Depot', ...])",
              "title": "Allow Trip Extension",
              "type": "boolean"
            },
            "max_round": {
              "default": 1,
              "description": "Maximum number of rounds this vehicle can make in a schedule. A round is defined as a complete cycle starting and ending at the depot. ",
              "minimum": 1,
              "title": "Maximum Rounds",
              "type": "integer"
            }
          },
          "title": "Vehicle",
          "type": "object"
        },
        "minItems": 1,
        "title": "Vehicle List",
        "type": "array"
      },
      "distance_matrix": {
        "anyOf": [
          {
            "items": {
              "items": {
                "type": "integer"
              },
              "type": "array"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Matrix of distances between all locations. Optional if distances are auto-calculated.",
        "title": "Distance Matrix"
      },
      "duration_matrix": {
        "anyOf": [
          {
            "items": {
              "items": {
                "type": "integer"
              },
              "type": "array"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Matrix of travel times between all locations. Optional if durations are auto-calculated.",
        "title": "Duration Matrix"
      },
      "delivery_start_time": {
        "anyOf": [
          {
            "format": "date-time",
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Datetime for delivery start. Required if visits have time windows. Use ISO 8601 format with timezone, e.g., '2025-03-16T17:40:00+09:00'",
        "title": "Start Time"
      },
      "option": {
        "additionalProperties": false,
        "properties": {
          "timelimit": {
            "default": 10,
            "description": "Extended range for solver time limit (1 to 1200 seconds).",
            "maximum": 1200,
            "minimum": 1,
            "title": "Extended Time Limit",
            "type": "integer"
          },
          "objective_type": {
            "enum": [
              "minsum",
              "minmax"
            ],
            "title": "ObjectiveType",
            "type": "string"
          },
          "distance_type": {
            "enum": [
              "manhattan",
              "euclidean",
              "osrm"
            ],
            "title": "DistanceType",
            "type": "string"
          },
          "allow_unassigned_visits": {
            "default": false,
            "description": "If true, the solver may leave some visits unassigned if it cannot find a feasible solution. In this case, the status is feasible_with_unassigned_visits when unassigned visits exist.\n\nIf false, the solver will attempt to assign all visits, even if it means exceeding time limits.In this case, the status is infeasible when unassigned visits exist.\n\n",
            "title": "Allow Unassigned Visits",
            "type": "boolean"
          },
          "use_large_size_optimization_algorithm": {
            "default": false,
            "description": "Enable advanced algorithm for better performance on large-scale problems.",
            "title": "Use Large Problem Solver",
            "type": "boolean"
          },
          "include_departure_cost_from_depot": {
            "default": true,
            "description": "Whether to include the cost of departing from the depot when calculating the route cost.",
            "title": "Include Departure Cost",
            "type": "boolean"
          },
          "include_return_cost_to_depot": {
            "default": true,
            "description": "Whether to include the cost of returning to the depot at the end of a route.",
            "title": "Include Return Cost",
            "type": "boolean"
          },
          "is_max_service_radius_hard_constraint": {
            "default": true,
            "description": "Whether to treat max service radius as a hard constraint.",
            "title": "Is Max Service Radius Hard Constraint",
            "type": "boolean"
          }
        },
        "title": "ExtendedApiOption",
        "type": "object"
      }
    },
    "required": [
      "depot",
      "visits",
      "vehicles"
    ],
    "title": "ExtendedVrpEngineInput",
    "type": "object"
  }
}
