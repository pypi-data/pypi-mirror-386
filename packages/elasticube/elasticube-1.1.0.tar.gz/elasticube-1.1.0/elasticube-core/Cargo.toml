[package]
name = "elasticube-core"
version = "1.1.0"
edition = "2021"
authors = ["Cache McClure <cache.mcclure@gmail.com>"]
license = "MIT OR Apache-2.0"
repository = "https://github.com/cachemcclure/elasticube"
homepage = "https://github.com/cachemcclure/elasticube"
documentation = "https://docs.rs/elasticube-core"
readme = "README.md"
description = "High-performance embeddable OLAP cube library built on Apache Arrow and DataFusion, with support for dynamic aggregations, calculated fields, and incremental updates"
keywords = ["olap", "analytics", "cube", "arrow", "datafusion"]
categories = ["database", "data-structures"]

[dependencies]
arrow = { version = "56", features = ["ipc"] }
arrow-array = "56"
arrow-schema = { version = "56", features = ["serde"] }
arrow-csv = "56"
arrow-json = "56"
datafusion = "50"
parquet = "56"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
thiserror = "1.0"
anyhow = "1.0"
tokio = { version = "1", features = ["full"] }
indexmap = { version = "2.0", features = ["serde"] }
num_cpus = "1.16"
lru = "0.12"
regex = "1.10"

# Optional dependencies for multi-source support
arrow-odbc = { version = "20", optional = true }
reqwest = { version = "0.12", features = ["json", "blocking"], optional = true }
url = { version = "2.5", optional = true }
object_store = { version = "0.11", features = ["aws", "gcp", "azure"], optional = true }
bytes = { version = "1.0", optional = true }
futures = { version = "0.3", optional = true }

[features]
default = []
database = ["arrow-odbc"]  # PostgreSQL, MySQL, etc. via ODBC
rest-api = ["reqwest", "url"]  # REST API data sources
object-storage = ["object_store", "bytes", "futures"]  # S3, GCS, Azure Blob Storage
all-sources = ["database", "rest-api", "object-storage"]

[dev-dependencies]
tokio-test = "0.4"
quickcheck = "1.0"
quickcheck_macros = "1.0"
criterion = { version = "0.5", features = ["html_reports"] }
tempfile = "3.0"  # For creating temporary test files

[[example]]
name = "calculated_fields_demo"
path = "../examples/calculated_fields_demo.rs"

[[example]]
name = "query_materialization_demo"
path = "../examples/query_materialization_demo.rs"

[[example]]
name = "data_updates_demo"
path = "../examples/data_updates_demo.rs"

[[example]]
name = "multi_source_demo"
path = "../examples/multi_source_demo.rs"

[[example]]
name = "object_storage_demo"
path = "../examples/object_storage_demo.rs"
required-features = ["object-storage"]

# Benchmark configuration
[[bench]]
name = "query_benchmarks"
harness = false

[[bench]]
name = "data_loading_benchmarks"
harness = false
