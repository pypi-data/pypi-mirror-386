model: asocv3
features:
  adc2mv: true
  dac_sweep: true
  ext_dac: true
  pedestals: true
  threshold_scan: true
  tia_dac: false
  timing_calibration: true
  naludaq_rs: true
params:
  chanmask: 1536
  channels: 4
  chanshift: 9
  chips:
    0:
      !include_chip
      from: asocv3::params
  clock_file: Si5341_ASoCv3_GCC420M_1xSysClk_v32andup_6250ksed.txt
  connections:
    - serial
    - d2xx
    - udp
  si5341_address: 0xE8
  default_baud:
    115200: 868
  default_baudrate: 115200
  default_clock: 96000000.0
  default_divider: 868
  threshold_scan:
    min_vref: 0
    max_vref: 2500
    start: 500
    stop: 3500
    stepsize: 5
    units: counts
  ext_dac:
    chip: ad5671
    max_mv: 2500
    max_counts: 4095
    channels:
      0..3: 2048
    address_mapping:
      0..3: 0xC
    channel_mapping:
      0: 1
      1: 0
      2: 5
      3: 4
  headers: 3
  numregs: 64
  pedestals_blocks: 32
  peripherals:
    current:
      chan: 0
      addr: 0xD0
      bits: 16
      gain: 8
    vadjn:
      chan: 0
      addr: 0xD8
      bits: 16
      gain: 1
    vadjp:
      chan: 1
      addr: 0xD8
      bits: 16
      gain: 1
    eeprom:
      addr: 0x50 # 7-bit
      capacity: 0x20000 # bytes
      page_size: 256 # bytes
      segments:
        analog_registers:
          begin: 0
          length: 300
        digital_registers:
          begin: 300
          length: 330
        control_registers:
          begin: 630
          length: 70
  pedestals:
    filter_outliers: false
    outlier_threshold: 30
  possible_bauds:
    115200: 868
    2000000: 50
  roi_enabled: true
  resolution: 12
  samples: 64
  samplingrate: 3.2
  stop_word: !!binary |
    +s4=
  wait: AE000001
  trigger:
    wbias: 
      0..3: 848
    default_trigger_value: 2000
    ext_trig_cycles: 3
  windmask: 510
  windows: 254
  yaml_version: 35.0
registers:
  analog_registers:
    !include_registers
      from: asocv3::registers::analog_registers
  digital_registers:
    !include_registers
      from: asocv3::registers::digital_registers
  control_registers:
    2v5_en:
      address: 0x16
      bitposition: 0
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    2v5_pll_en:
      address: 0x16
      bitposition: 1
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    addr:
      address: 0x15
      bitposition: 0
      bitwidth: 9
      description: ''
      readwrite: rw
      value: 0
    addr_user:
      address: 0x15
      bitposition: 15
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    brightness_blue:
      address: 0x0A
      bitposition: 0
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 0
    brightness_red:
      address: 0x0B
      bitposition: 0
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 0
    brightness_white:
      address: 0x0A
      bitposition: 8
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 0
    chansel:
      address: 0x06
      bitposition: 12
      bitwidth: 4
      description: ''
      readwrite: rw
      value: 15
    clk_1v8_nshutdown:
      address: 0x16
      bitposition: 2
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    clk_2v5_en:
      address: 0x16
      bitposition: 6
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    clk_i2c_sel:
      address: 0x16
      bitposition: 5
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    clk_noe:
      address: 0x16
      bitposition: 4
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    clk_nrst:
      address: 0x16
      bitposition: 3
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    clk_nsync:
      address: 0x16
      bitposition: 7
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    dac_nrst:
      address: 0x16
      bitposition: 10
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 1
    data:
      address: 0x14
      bitposition: 0
      bitwidth: 12
      description: ''
      readwrite: rw
      value: 0
    data_user:
      address: 0x14
      bitposition: 15
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    digrst:
      address: 0x16
      bitposition: 9
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    digser_8b10b_en:
      address: 0x1D
      bitposition: 12
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    digser_numwords:
      address: 0x1D
      bitposition: 2
      bitwidth: 6
      description: ''
      readwrite: rw
      value: 0
    digser_oneshot:
      address: 0x1D
      bitposition: 1
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    digser_reset:
      address: 0x1D
      bitposition: 13
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    digser_rx_en:
      address: 0x1D
      bitposition: 0
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    digser_slow_sysclk:
      address: 0x1D
      bitposition: 10
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    digser_speed:
      address: 0x1D
      bitposition: 8
      bitwidth: 2
      description: ''
      readwrite: rw
      value: 0
    digser_tx_en:
      address: 0x1D
      bitposition: 11
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    fpga_trig_ext_en:
      address: 0x0B
      bitposition: 9
      bitwidth: 1
      description: '1 = enable external trigger input from FPGA header, 0 = Set pin to High-Z for SMA input trigger'
      readwrite: rw
      value: false
    exttrig:
      address: 0x04
      bitposition: 10
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    fake:
      address: 0x06
      bitposition: 0
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    gccclr:
      address: 0x04
      bitposition: 3
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    i2c_sel:
      address: 0x16
      bitposition: 11
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    i2c_switch:
      address: 0x16
      bitposition: 8
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    identifier:
      address: 0x00
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 42435
    version:
      address: 0x01
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 0
    in_sel:
      address: 0x0B
      bitposition: 12
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    iomode0:
      address: 0x04
      bitposition: 7
      bitwidth: 1
      description: 'Enable/Disable 10b8b encoding for serial communication for the ASIC'
      readwrite: rw
      value: 1
    iomode1:
      address: 0x04
      bitposition: 8
      bitwidth: 1
      description: 'Enable/Disable serial communication mode for the ASIC'
      readwrite: rw
      value: 0
    loadwait:
      address: 0x07
      bitposition: 8
      bitwidth: 4
      description: ''
      readwrite: rw
      value: 15
    nasa_trig_sel_ext:
      address: 0x1D
      bitposition: 15
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    nramp:
      address: 0x04
      bitposition: 4
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    nrw:
      address: 0x04
      bitposition: 11
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    numwinds:
      address: 0x08
      bitposition: 0
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 1
    out_sel:
      address: 0x0B
      bitposition: 11
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    pclk:
      address: 0x04
      bitposition: 1
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    pclkwidth:
      address: 0x07
      bitposition: 12
      bitwidth: 4
      description: ''
      readwrite: rw
      value: 15
    rden:
      address: 0x04
      bitposition: 6
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    regclr:
      address: 0x04
      bitposition: 0
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    runevs:
      address: 0x05
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 1
    ser2par_en:
      address: 0x1E
      bitposition: 0
      bitwidth: 1
      description: 'Enables 12->16-bit expansion of serial data. 0 = disabled, 1 = enabled'
      readwrite: rw
      value: 1
    rx_en:
      address: 0x19
      bitposition: 0
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    rx_num_words:
      address: 0x19
      bitposition: 2
      bitwidth: 6
      description: ''
      readwrite: rw
      value: 0
    rx_oneshot:
      address: 0x19
      bitposition: 1
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    rx_speed:
      address: 0x19
      bitposition: 8
      bitwidth: 2
      description: ''
      readwrite: rw
      value: 0
    sel:
      address: 0x04
      bitposition: 12
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    selany:
      address: 0x04
      bitposition: 2
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    sst_speed:
      address: 0x1D
      bitposition: 14
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    stopacq:
      address: 0x04
      bitposition: 13
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    switch_nen:
      address: 0x0B
      bitposition: 13
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    syncloc:
      address: 0x0E
      bitposition: 0
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 0
    sysrst:
      address: 0x04
      bitposition: 14
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    trig_sel:
      address: 0x0B
      bitposition: 10
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    trigger_mux:
      address: 0x22
      bitposition: 5
      bitwidth: 4
      description: 'Change which trigger type is used to trigger the chip, there are 9 different modes. 0: swell_pulse, 1: switch_i, 2: misc_0, 3: misc_1, 4: misc_2, 5: misc_3, 6: ext_trig, 7: ext_trig_b, 8: fpga_trig'
      readwrite: rw
      value: 8
    windsel:
      address: 0x07
      bitposition: 0
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 0
    wren:
      address: 0x04
      bitposition: 5
      bitwidth: 1
      description: ''
      readwrite: rw
      value: false
    eth_dest_addr_sel:
      address: 0x28
      bitposition: 0
      bitwidth: 1
      description: 'enables manually set destination IP addresses'
      readwrite: rw
      value: 0
    eth_src_addr_sel:
      address: 0x28
      bitposition: 1
      bitwidth: 1
      description: 'enables manually set source IP addresses'
      readwrite: rw
      value: 0
    eth_dest_port_sel:
      address: 0x28
      bitposition: 2
      bitwidth: 1
      description: 'enables manually set destination UDP ports'
      readwrite: rw
      value: 0
    eth_src_port_sel:
      address: 0x28
      bitposition: 3
      bitwidth: 1
      description: 'enables manually set source UDP ports'
      readwrite: rw
      value: 0
    tx_mode:
      address: 0x28
      bitposition: 4
      bitwidth: 1
      description: 'selects ethernet (value = 1) or UART (value = 0) transmission'
      readwrite: rw
      value: 0
    eth_ar_en:
      address: 0x28
      bitposition: 5
      bitwidth: 1
      description: 'enables auto-response destination IP address; currently unused'
      readwrite: rw
      value: 0
    eth_dhcp_en:
      address: 0x28
      bitposition: 6
      bitwidth: 1
      description: 'enables DHCP resolution of source IP address; currently unused'
      readwrite: rw
      value: 0
    eth_dest_addr15_0:
      address: 0x29
      bitposition: 0
      bitwidth: 16
      description: 'lower 16 bits of ethernet destination IP address'
      readwrite: rw
      value: 0
    eth_dest_addr31_16:
      address: 0x2A
      bitposition: 0
      bitwidth: 16
      description: 'upper 16 bits of ethernet destination IP address'
      readwrite: rw
      value: 0
    eth_src_addr15_0:
      address: 0x2B
      bitposition: 0
      bitwidth: 16
      description: 'lower 16 bits of ethernet source IP address'
      readwrite: rw
      value: 0
    eth_src_addr31_16:
      address: 0x2C
      bitposition: 0
      bitwidth: 16
      description: 'upper 16 bits of ethernet source IP address'
      readwrite: rw
      value: 0
    eth_dest_port:
      address: 0x2D
      bitposition: 0
      bitwidth: 16
      description: 'UDP destination port'
      readwrite: rw
      value: 0
    eth_src_port:
      address: 0x2E
      bitposition: 0
      bitwidth: 16
      description: 'UDP source port'
      readwrite: rw
      value: 0
  i2c_registers:
    i2c_en:
      address: 0x09
      bitposition: 14
      bitwidth: 1
      description: ''
      readwrite: rw
      value: true
    i2c_send:
      address: 0x0F
      bitposition: 15
      bitwidth: 1
      description: ''
      readwrite: rw
      value: 0
    i2c_words:
      address: 0x0F
      bitposition: 8
      bitwidth: 3
      description: ''
      readwrite: rw
      value: 0
    i2c_addr:
      address: 0x0F
      bitposition: 0
      bitwidth: 8
      description: ''
      readwrite: rw
      value: 0
    i2c_data0:
      address: 0x10
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 0
    i2c_data1:
      address: 0x11
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 0
    i2c_data2:
      address: 0x12
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 0
    i2c_data3:
      address: 0x13
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: rw
      value: 0
    response0:
      address: 0x48
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: r
      value: 0
    response1:
      address: 0x49
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: r
      value: 0
    response2:
      address: 0x4A
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: r
      value: 0
    response3:
      address: 0x4B
      bitposition: 0
      bitwidth: 16
      description: ''
      readwrite: r
      value: 0
