"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{12284:(e,n,t)=>{t.d(n,{T:()=>m});var s=t(9329),i=t(6029),r=t(67221),o=t(36660),l=t(97036),a=t.n(l),d=t(55729),c=t(38584),u=t(98784),p=t(94251),h=t(46984);function x(){let e=(0,s._)(["\n  query StepSummaryForRunQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        stepStats {\n          endTime\n          stepKey\n          status\n        }\n      }\n    }\n  }\n"]);return x=function(){return e},e}let m=e=>{let{runId:n}=e,{data:t}=(0,u.IT)(f,{variables:{runId:n}}),s=null==t?void 0:t.pipelineRunOrError,l=(null==s?void 0:s.__typename)==="Run"?s.status:null,x=(0,d.useMemo)(()=>{if((null==s?void 0:s.__typename)!=="Run")return[];let{status:e}=s;return h.ev.has(e)?s.stepStats.filter(e=>e.status===p.fWo.FAILURE):h.Tk.has(e)?s.stepStats.filter(e=>e.status===p.fWo.IN_PROGRESS):[]},[s]),m=x.length;if(!m||!l)return null;if(h.ev.has(l)){if(1===m){let e=x[0],t=e.endTime?a().stringify({focusedTime:Math.floor(1e3*e.endTime)},{addQueryPrefix:!0}):"";return(0,i.jsxs)(r.HL,{color:o.XN(),children:["Failed at ",(0,i.jsx)(c.N_,{to:"/runs/".concat(n).concat(t),children:e.stepKey})]})}return(0,i.jsxs)(r.HL,{color:o.XN(),children:["Failed at ",(0,i.jsxs)(c.N_,{to:"/runs/".concat(n),children:[m," steps"]})]})}if(h.Tk.has(l)){if(1===m){let e=x[0],t=e.endTime?a().stringify({focusedTime:Math.floor(1e3*e.endTime)},{addQueryPrefix:!0}):"";return(0,i.jsxs)(r.HL,{color:o.XN(),children:["In progress at ",(0,i.jsx)(c.N_,{to:"/runs/".concat(n).concat(t),children:e.stepKey})]})}return(0,i.jsxs)(r.HL,{color:o.XN(),children:["In progress at ",(0,i.jsxs)(c.N_,{to:"/runs/".concat(n),children:[m," steps"]})]})}return null},f=(0,u.J1)(x())},18269:(e,n,t)=>{t.d(n,{$c:()=>j,_O:()=>y});var s=t(6029),i=t(69807),r=t(36660),o=t(82343),l=t(67221),a=t(42572),d=t(38584),c=t(41735),u=t(82036),p=t(14064),h=t(46984),x=t(85521),m=t(12284),f=t(60321);let j=e=>{let{fade:n,jobName:t,runs:l,forceCount:a}=e,d=l.length,c=.8/Math.max(3,d),u=[...l];return a&&(a>u.length?u.unshift(...Array(a-u.length).fill(null)):u=u.slice(0,a)),(0,s.jsx)(i.a,{flex:{direction:"row",alignItems:"center",gap:2},children:u.map((e,i)=>{let l=n?1-(d-i-1)*c:1;return e?(0,s.jsx)(o.AM,{position:"top",interactionKind:"hover",content:(0,s.jsx)("div",{children:(0,s.jsx)(y,{run:e,name:t})}),hoverOpenDelay:100,children:(0,s.jsx)(f.x,{color:p.Qc[e.status],opacity:l},e.id)},e.id):(0,s.jsx)(f.x,{color:r.HU(),opacity:l},"empty-".concat(i))})})},y=e=>{let{name:n,run:t}=e;return(0,s.jsxs)(g,{children:[(0,s.jsx)(v,{children:n}),(0,s.jsxs)(b,{children:[(0,s.jsxs)(i.a,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,s.jsx)(u.lQ,{status:t.status}),(0,s.jsx)(d.N_,{to:"/runs/".concat(t.id),children:(0,s.jsx)(l.MC,{children:(0,x.fb)(t)})})]}),(0,s.jsxs)(i.a,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(x.X4,{run:t}),(0,s.jsx)(x.D1,{run:t})]})]}),h.ev.has(t.status)||h.Tk.has(t.status)?(0,s.jsx)(w,{children:(0,s.jsx)(m.T,{runId:t.id})}):null]})},g=c.Ay.div.withConfig({componentId:"sc-3058104e-0"})(["padding:4px;font-size:12px;width:240px;"]),v=c.Ay.div.withConfig({componentId:"sc-3058104e-1"})(["padding:8px;box-shadow:inset 0 -1px ",";font-family:",";font-size:14px;font-weight:500;color:",";max-width:100%;text-overflow:ellipsis;overflow:hidden;min-width:0px;"],r.KH(),a.a.default,r.eg()),b=c.Ay.div.withConfig({componentId:"sc-3058104e-2"})(["padding:8px;display:flex;align-items:flex-start;justify-content:space-between;"]),w=c.Ay.div.withConfig({componentId:"sc-3058104e-3"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px 8px 8px;:empty{display:none;}"]);c.Ay.div.withConfig({componentId:"sc-3058104e-4"})(["background-color:",";border-radius:2px;height:16px;opacity:",";width:8px;"],e=>{let{$color:n}=e;return n},e=>{let{$opacity:n}=e;return n})},61011:(e,n,t)=>{t.d(n,{A:()=>m});var s=t(6029),i=t(30424),r=t(69807),o=t(82343),l=t(55729),a=t(12284),d=t(94251),c=t(82036),u=t(18269),p=t(46984),h=t(85521),x=t(44228);let m=(0,l.memo)(e=>{let{name:n,run:t,showHover:m=!1,showButton:f=!0,showSummary:j=!0}=e,{status:y}=t,g=(0,l.useMemo)(()=>{switch(y){case d.i2_.SUCCESS:return"success";case d.i2_.CANCELED:case d.i2_.CANCELING:case d.i2_.FAILURE:return"danger";default:return"none"}},[y]);return(0,s.jsxs)(r.a,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start",gap:16},children:[(0,s.jsxs)(r.a,{flex:{direction:"column",alignItems:"flex-start",gap:4},children:[(0,s.jsxs)(r.a,{flex:{direction:"row",alignItems:"center",gap:8},children:[(()=>{let e=(0,s.jsx)(i.v,{intent:g,children:(0,s.jsxs)(r.a,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,s.jsx)(c.lQ,{status:t.status,size:10}),(0,s.jsx)(h.X4,{run:t})]})});return m?(0,s.jsx)(o.AM,{position:"top",interactionKind:"hover",content:(0,s.jsx)("div",{children:(0,s.jsx)(u._O,{run:t,name:n})}),hoverOpenDelay:100,children:e}):e})(),j?(0,s.jsx)(h.D1,{run:t}):null]}),j&&(p.ev.has(t.status)||p.Tk.has(t.status))?(0,s.jsx)(a.T,{runId:t.id}):void 0]}),f?(0,s.jsx)(x.A,{to:"/runs/".concat(t.id),children:"View run"}):null]})})},70751:(e,n,t)=>{t.d(n,{Jo:()=>S,gX:()=>C,yG:()=>I});var s=t(99649),i=t(93096),r=t(6029),o=t(9448),l=t(38954),a=t(2161),d=t(69807),c=t(55729),u=t(80306),p=t(46984),h=t(95510),x=t(85521),m=t(62380),f=t(55090),j=t(49208),y=t(90713),g=t(88742),v=t(58342),b=t(94251),w=t(36040),_=t(6579),R=t(55645);let A=e=>{let{run:n}=e,{id:t,canTerminate:s}=n,[i,a]=(0,c.useState)(!1),d=(0,c.useCallback)(()=>a(!1),[]),u=(0,c.useCallback)(async e=>{let{errors:n}=e,s=t&&n[t];s&&"message"in s&&await (0,y.l)({message:s.message,icon:"error",intent:"danger"})},[t]);return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.$n,{icon:(0,r.jsx)(l.In,{name:"cancel"}),intent:"danger",disabled:i,onClick:()=>a(!0),children:"Terminate"}),(0,r.jsx)(m.B,{isOpen:i,onClose:d,onComplete:u,selectedRuns:{[t]:s}})]}):null};function k(e,n){let t=e.keys.map(e=>{var t;return e&&(null==(t=n.steps[e])?void 0:t.state)||u.VB.PREPARING});return(0,i._)((0,s._)({},e),{present:e.keys.length>0,failed:e.keys.length&&t.includes(u.VB.FAILED),finished:t.every(e=>[u.VB.FAILED,u.VB.SUCCEEDED].includes(e))})}let I=e=>p.RD.has(e.status),C=e=>e.executionPlan&&p.ev.has(e.status),S=e=>{var n,t,s;let{metadata:i,graph:o,run:l}=e,c=(0,R.A)(l),u=(0,f.o)(l),m=null==l||null==(n=l.executionPlan)?void 0:n.artifactsPersisted,y=k(e.selection,i),S=function(e,n,t){let s=e.tags.find(e=>e.key===h.d.StepSelection);return s?k({keys:(0,g.Q)(n,s.value).all.map(e=>e.name),query:s.value},t):null}(l,o,i),N=null==(t=l.tags)?void 0:t.some(e=>e.key===h.d.IsResumeRetry&&"true"===e.value),L=(0,j.Q)(),T=async e=>{if(!l||!c||!l.pipelineSnapshotId)return;let n=(0,x.Pl)({run:l,selection:e,repositoryLocationName:c.match.repositoryLocation.name,repositoryName:c.match.repository.name});await L.onClick(l,n,!1)},F={icon:"cached",scope:"*",title:"All steps in root run",tooltip:"Re-execute the pipeline run from scratch. Shift-click to adjust tags.",disabled:!I(l),onClick:e=>L.onClick(l,b.Fnt.ALL_STEPS,e.shiftKey)},O={icon:"linear_scale",scope:(null==S?void 0:S.query)||"*",title:"Same steps",disabled:!S||!(S.finished||S.failed),tooltip:(0,r.jsxs)("div",{children:[S&&S.present?S.finished?"Re-execute the same step subset used for this run:":"Wait for all of the steps to finish to re-execute the same subset.":"Re-executes the same step subset used for this run if one was present.",(0,r.jsx)(E,{selection:S})]}),onClick:()=>T(S)},P={icon:"op",scope:y.query,title:y.keys.length>1?"Selected steps":"Selected step",disabled:!y.present||!(y.finished||y.failed),tooltip:(0,r.jsxs)("div",{children:[y.present?y.finished?"Re-execute the selected steps with existing configuration:":"Wait for the steps to finish to re-execute them.":"Select a step or type a step subset to re-execute.",(0,r.jsx)(E,{selection:y})]}),onClick:()=>T(y)},J={icon:"arrow_forward",title:"From selected",disabled:!I(l)||1!==y.keys.length,tooltip:"Re-execute the pipeline downstream from the selected steps.",onClick:async()=>{if(!l.executionPlan)return console.warn("Run execution plan must be present to launch from-selected execution"),Promise.resolve();let e=y.keys.map(e=>"".concat(e,"*")).join(","),n=y.keys.map(e=>'name:"'.concat(e,'"+')).join(" or "),t=(0,_.d)(o,n).all.map(e=>e.name);await T({keys:t,query:e})}},M=C(l),$={icon:"arrow_forward",title:"From failure",disabled:!M,tooltip:M?"Retry the pipeline run, skipping steps that completed successfully. Shift-click to adjust tags.":"Retry is only enabled when the pipeline has failed.",onClick:e=>L.onClick(l,b.Fnt.FROM_FAILURE,e.shiftKey)};m||[P,O,$,J].forEach(e=>{e.disabled=!0,e.title="Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration."});let D=[F,O,P,J,$,(null==(s=l.executionPlan)?void 0:s.assetKeys.length)?{icon:"arrow_forward",title:"From asset failure",disabled:!M,tooltip:M?"Retry the pipeline run, selecting only assets that did not complete successfully. Shift-click to adjust tags.":"Retry is only enabled when the pipeline has failed.",onClick:e=>L.onClick(l,b.Fnt.FROM_ASSET_FAILURE,e.shiftKey)}:null].filter(Boolean),K=y.present?P:M&&N?$:(null==S?void 0:S.present)?O:null,H=m&&K?K:F;return(0,r.jsxs)(a.Y,{direction:"row",spacing:8,children:[(0,r.jsx)(d.a,{flex:{direction:"row"},children:(0,r.jsx)(w.x,{runCount:1,primary:H,options:D,title:"*"===H.scope?"Re-execute all (*)":H.scope?"Re-execute (".concat(H.scope,")"):"Re-execute ".concat(H.title),tooltip:(null==u?void 0:u.tooltip)?null==u?void 0:u.tooltip:l.hasReExecutePermission?void 0:v.gZ,icon:null==u?void 0:u.icon,disabled:(null==u?void 0:u.disabled)||!l.hasReExecutePermission})}),p.RD.has(l.status)?null:(0,r.jsx)(A,{run:l}),L.launchpadElement]})},E=e=>{let{selection:n}=e;return(0,r.jsx)("div",{style:{paddingLeft:"10px"},children:((null==n?void 0:n.keys)||[]).map(e=>(0,r.jsx)("span",{style:{display:"block"},children:"* ".concat(e)},e))})}},72572:(e,n,t)=>{t.d(n,{p:()=>r});var s=t(98590),i=t(94543);let r=e=>new Set(e.map(e=>(0,i.FC)((0,s.t8)(e.repository.name,e.repositoryLocation.name))))},88028:(e,n,t)=>{t.r(n),t.d(n,{JobsRoot:()=>eN,default:()=>eL});var s=t(6029),i=t(69807),r=t(71802),o=t(67221),l=t(99649),a=t(93096),d=t(71599),c=t(36660),u=t(12547),p=t(62978),h=t(55729),x=t(54423),m=t(80300),f=t(69452),j=t(16653),y=t(21440),g=t(25243),v=t(58552),b=t(23298),w=t(32411),_=t(10690),R=t(9329),A=t(79240),k=t(24372),I=t(38584),C=t(41735),S=t(31210),E=t(59447),N=t(1536),L=t(98784),T=t(49575),F=t(98689),O=t(82343),P=t(27589),J=t(9448),M=t(38954),$=t(58342),D=t(67476),K=t(29492),H=t(94251),z=t(70751),U=t(49208),q=t(64622);function G(){let e=(0,R._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        tags {\n          key\n          value\n        }\n        executionPlan {\n          artifactsPersisted\n          assetKeys {\n            path\n          }\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}let Q=e=>{let{job:n,isAssetJob:t,repoAddress:i}=e,r=n.runs.length?n.runs[0]:null,o={pipelineName:n.name,repositoryName:i.name,repositoryLocationName:i.location},l=(0,D.Vw)(n.name),a=(0,U.Q)(),{permissions:{canLaunchPipelineReexecution:c,canLaunchPipelineExecution:u},disabledReasons:p}=(0,$.S2)(i.location),[x,m]=(0,L._l)(V),{data:f}=m,j=(0,h.useCallback)(()=>{(null==r?void 0:r.id)&&x({variables:{runId:r.id}})},[r,x]),y=(null==f?void 0:f.pipelineRunOrError.__typename)==="Run"?null==f?void 0:f.pipelineRunOrError:null,g="loading"===t?(0,s.jsx)(F.Dr,{icon:"execute",text:"Loading...",disabled:!0}):!0===t?(0,s.jsx)(F.Dr,{icon:l.loading?(0,s.jsx)(d.y,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!u,onClick:e=>l.onClick(o,e)}):(0,s.jsx)(q.w,{icon:"execute",text:"Launch new run",disabled:!u,to:(0,N.HU)({repoName:i.name,repoLocation:i.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),v=(0,s.jsx)(F.Dr,{icon:"replay",text:"Re-execute latest run",disabled:!c||!y||!(0,z.yG)(y),onClick:e=>y?a.onClick(y,H.Fnt.ALL_STEPS,e.shiftKey):void 0}),b=(0,s.jsx)(F.Dr,{icon:"sync_problem",text:"Re-execute latest run from failure",disabled:!c||!y||!(0,z.gX)(y),onClick:e=>y?a.onClick(y,H.Fnt.FROM_FAILURE,e.shiftKey):void 0});return(0,s.jsxs)(s.Fragment,{children:[l.launchpadElement,a.launchpadElement,(0,s.jsx)(O.AM,{onOpened:()=>j(),content:(0,s.jsxs)(F.W1,{children:[(0,s.jsx)(q.w,{to:(0,N.HU)({repoName:i.name,repoLocation:i.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,s.jsx)(q.w,{to:(0,N.HU)({repoName:i.name,repoLocation:i.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),u?g:(0,s.jsx)(P.m,{content:p.canLaunchPipelineExecution,display:"block",children:g}),c?v:(0,s.jsx)(P.m,{content:p.canLaunchPipelineReexecution,display:"block",children:v}),c?b:(0,s.jsx)(P.m,{content:p.canLaunchPipelineReexecution,display:"block",children:b})]}),position:"bottom-left",children:(0,s.jsx)(J.$n,{icon:(0,s.jsx)(M.In,{name:"more_horiz"}),intent:"none"})})]})},V=(0,L.J1)(G(),K.v);var X=t(61011),B=t(44074),W=t(18269),Y=t(85521),Z=t(22812),ee=t(79188);function en(){let e=(0,R._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return en=function(){return e},e}let et="1.5fr 1fr 180px 96px 80px",es=(0,h.forwardRef)((e,n)=>{let{name:t,isJob:r,repoAddress:o,index:l}=e,a=(0,A.V)(100),d=(0,L.IT)(el,{variables:{selector:(0,E.ee)(o,t)},skip:!a});(0,T.Bj)(d,T.eO);let{data:c}=d,u=(null==c?void 0:c.pipelineOrError.__typename)==="Pipeline"?null==c?void 0:c.pipelineOrError:void 0,{schedules:p,sensors:x}=(0,h.useMemo)(()=>{if(u){let{schedules:e,sensors:n}=u;return{schedules:e,sensors:n}}return{schedules:[],sensors:[]}},[u]),m=(0,h.useMemo)(()=>{if(u){let{runs:e}=u;if(e.length)return[...e]}return[]},[u]);return(0,s.jsx)("div",{"data-index":l,ref:n,children:(0,s.jsxs)(er,{border:"bottom",children:[(0,s.jsxs)(b.$4,{children:[(0,s.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,s.jsx)(I.N_,{to:(0,N.HG)(o,"/jobs/".concat(t)),children:(0,s.jsx)(k.A,{text:t})})}),(0,s.jsx)(S.OZ,{children:(null==u?void 0:u.description)||""})]}),(0,s.jsx)(b.$4,{children:p.length||x.length?(0,s.jsx)(i.a,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,s.jsx)(eo,{children:(0,s.jsx)(B.L,{schedules:p,sensors:x,repoAddress:o})})}):(0,s.jsx)(S.ov,{queryResult:d})}),(0,s.jsx)(b.$4,{children:m[0]?(0,s.jsx)(X.A,{run:m[0],showButton:!1,showHover:!0,showSummary:!1,name:t}):(0,s.jsx)(S.ov,{queryResult:d})}),(0,s.jsx)(b.$4,{children:m.length?(0,s.jsx)(i.a,{padding:{top:4},children:(0,s.jsx)(W.$c,{jobName:t,runs:[...m].reverse(),fade:!0})}):(0,s.jsx)(S.ov,{queryResult:d})}),(0,s.jsx)(b.$4,{children:(0,s.jsx)(i.a,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,s.jsx)(Q,{job:{name:t,isJob:r,runs:m},isAssetJob:u?u.isAssetJob:"loading",repoAddress:o})})})]})})}),ei=()=>(0,s.jsxs)(b.Sy,{templateColumns:et,sticky:!0,children:[(0,s.jsx)(b.A3,{children:"Name"}),(0,s.jsx)(b.A3,{children:"Schedules/sensors"}),(0,s.jsx)(b.A3,{children:"Latest run"}),(0,s.jsx)(b.A3,{children:"Run history"}),(0,s.jsx)(b.A3,{})]}),er=(0,C.Ay)(i.a).withConfig({componentId:"sc-406796da-0"})(["display:grid;grid-template-columns:",";height:100%;"],et),eo=C.Ay.div.withConfig({componentId:"sc-406796da-1"})(["width:100%;> .bp5-popover-target{width:100%;}"]),el=(0,L.J1)(en(),Y.vw,Z.M,ee.T);var ea=t(92424),ed=t(81133),ec=t(2830),eu=t(22558),ep=t(61119);function eh(){let e=(0,R._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return eh=function(){return e},e}let ex=(0,L.J1)(eh(),Y.vw,Z.M,ee.T);var em=t(15992),ef=t(56588),ej=t(74053),ey=t(56091);let eg=(0,h.forwardRef)((e,n)=>{let{index:t,name:r,isJob:o,repoAddress:a}=e,d=(0,A.V)(100),u=(0,L.IT)(ex,{variables:{selector:(0,E.ee)(a,r)},skip:!d});(0,T.Bj)(u,T.eO);let{data:p}=u,x=(null==p?void 0:p.pipelineOrError.__typename)==="Pipeline"?null==p?void 0:p.pipelineOrError:void 0,{schedules:m,sensors:f}=(0,h.useMemo)(()=>{if(x){let{schedules:e,sensors:n}=x;return{schedules:e,sensors:n}}return{schedules:[],sensors:[]}},[x]),j=(0,h.useMemo)(()=>{if(x){let{runs:e}=x;if(e.length)return[...e]}return[]},[x]);return(0,s.jsx)(ep.c,{ref:n,index:t,href:(0,N.HG)(a,"/jobs/".concat(r)),renderLink:e=>{var{href:n}=e,t=(0,ea._)(e,["href"]);return(0,s.jsx)(I.N_,(0,l._)({to:n||"#"},t))},left:(0,s.jsxs)(i.a,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,s.jsxs)(i.a,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)(M.In,{name:"job"}),r]}),(null==x?void 0:x.description)?(0,s.jsx)(P.m,{content:(0,s.jsx)("div",{style:{width:320},children:x.description}),placement:"top",children:(0,s.jsx)(M.In,{name:"info",color:c.XN()})}):null]}),right:(()=>{var e;return u.loading&&!u.data?(0,s.jsx)(ed.E,{$width:200,$height:24}):(0,s.jsx)(ec.p,{controls:[{key:"latest-run",control:(null==(e=j[0])?void 0:e.startTime)?(0,s.jsx)(O.AM,{position:"top",interactionKind:"hover",content:(0,s.jsx)("div",{children:(0,s.jsx)(W._O,{run:j[0],name:r})}),hoverOpenDelay:100,children:(0,s.jsx)(eu.r,{children:(0,s.jsx)(em.w,{unixTimestamp:j[0].startTime,showTooltip:!1})})},j[0].id):null},{key:"runs",control:(0,s.jsx)(i.a,{padding:{horizontal:8},children:(0,s.jsx)(W.$c,{jobName:r,runs:[...j].reverse(),fade:!0,forceCount:5})})},{key:"schedules",control:m.length>0?(0,s.jsx)(ev,{type:"schedule",enabled:m.some(e=>"RUNNING"===e.scheduleState.status),automations:m,repoAddress:a}):null},{key:"sensors",control:f.length>0?(0,s.jsx)(ev,{type:"sensor",enabled:f.some(e=>"RUNNING"===e.sensorState.status),automations:f,repoAddress:a}):null},{key:"automations",control:0===f.length&&0===m.length?(0,s.jsx)(P.m,{content:"No automations",placement:"top",children:(0,s.jsx)(ev,{type:"none"})}):null},{key:"menu",control:(0,s.jsx)(Q,{job:{name:r,isJob:o,runs:j},isAssetJob:x?x.isAssetJob:"loading",repoAddress:a})}]})})()})}),ev=e=>{let{type:n,automations:t,enabled:r,repoAddress:o}=e,l=(0,s.jsx)(eu.r,{children:(0,s.jsx)(i.a,{padding:{vertical:2},children:"none"===n?(0,s.jsx)(M.In,{name:"status",color:c.fR()}):(0,s.jsx)(M.In,{name:n,color:r?c.P$():c.fR()})})});if("none"===n)return l;let a=(null==t?void 0:t.length)||0;return(0,s.jsx)(O.AM,{position:"top",interactionKind:"hover",content:(0,s.jsxs)(i.a,{flex:{direction:"column"},style:{width:320,overflowX:"hidden"},background:c.HU(),children:[(0,s.jsx)(i.a,{flex:{direction:"row",gap:8,alignItems:"center"},padding:{vertical:12,horizontal:12},border:"bottom",children:(0,s.jsx)("strong",{style:{fontSize:14},children:"sensor"===n?1===a?"1 sensor":"".concat(a," sensors"):1===a?"1 schedule":"".concat(a," schedules")})}),(0,s.jsx)("div",{style:{overflowY:"auto",maxHeight:240},children:(null==t?void 0:t.length)&&o?t.map((e,n)=>{let t="Sensor"===e.__typename?e.name:(0,ej.d)(e.cronSchedule,{longTimezoneName:e.executionTimezone||"UTC"});return(0,s.jsxs)(i.a,{flex:{direction:"row",gap:12,alignItems:"center",justifyContent:"space-between"},padding:12,border:0===n?null:"top",children:[(0,s.jsxs)(i.a,{flex:{direction:"row",alignItems:"center",gap:8},style:{width:"100%",overflow:"hidden"},children:[(0,s.jsx)(M.In,{name:"Schedule"===e.__typename?"schedule":"sensor"}),(0,s.jsx)(I.N_,{to:(0,N.HG)(o,"Schedule"===e.__typename?"/schedules/".concat(e.name):"/sensors/".concat(e.name)),style:{flex:1,overflow:"hidden",width:"100%"},children:(0,s.jsx)(k.A,{text:t})})]}),(0,s.jsx)(i.a,{flex:{direction:"row",alignItems:"center",gap:8},children:"Schedule"===e.__typename?(0,s.jsx)(ef.G,{schedule:e,repoAddress:o}):(0,s.jsx)(ey.z,{sensor:e,repoAddress:o})})]},e.id+"-"+n)}):(0,s.jsx)("div",{children:"No automations"})})]}),hoverOpenDelay:100,children:l})};var eb=t(94543);let ew=e=>{var n,t;let{repos:i}=e,{flagUseNewObserveUIs:r}=(0,v.h)(),o=(0,h.useRef)(null),l=(0,h.useMemo)(()=>i.map(e=>{let{repoAddress:n}=e;return(0,eb.FC)(n)}),[i]),{expandedKeys:a,onToggle:d,onToggleAll:c}=(0,_.A)(g.i,l),u=(0,h.useMemo)(()=>{let e=[];return i.forEach(n=>{let{repoAddress:t,jobs:s}=n;e.push({type:"header",repoAddress:t,jobCount:s.length});let i=(0,eb.FC)(t);a.includes(i)&&s.forEach(n=>{let{isJob:s,name:i}=n;e.push({type:"job",repoAddress:t,isJob:s,name:i})})}),e},[i,a]),p=(0,w.F)(i.map(e=>{let{repoAddress:n}=e;return n.name})),x=(0,y.Te)({count:u.length,getScrollElement:()=>o.current,estimateSize:e=>{let n=u[e];return(null==n?void 0:n.type)==="header"?b.tc:64},overscan:10}),m=x.getTotalSize(),f=x.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(b.mc,{ref:o,children:[r?null:(0,s.jsx)(ei,{}),(0,s.jsx)(b.Rp,{$totalHeight:m,children:(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(null!=(t=null==(n=f[0])?void 0:n.start)?t:0,"px)")},children:f.map(e=>{let{index:n,key:t}=e,i=u[n];return"header"===i.type?(0,s.jsx)(S.ur,{repoAddress:i.repoAddress,ref:x.measureElement,index:n,onToggle:d,onToggleAll:c,expanded:a.includes((0,eb.FC)(i.repoAddress)),showLocation:p.has(i.repoAddress.name),rightElement:(0,s.jsx)(s.Fragment,{})},t):r?(0,s.jsx)(eg,{index:n,ref:x.measureElement,name:i.name,isJob:i.isJob,repoAddress:i.repoAddress},t):(0,s.jsx)(es,{index:n,ref:x.measureElement,name:i.name,isJob:i.isJob,repoAddress:i.repoAddress},t)})})})]})})};var e_=t(60895),eR=t(72572),eA=t(98896),ek=t(98590);let eI=()=>{let{allRepos:e,visibleRepos:n,loadingNonAssets:t,data:r}=(0,h.useContext)(eA.zp),o=e.length,x=(0,h.useMemo)(()=>{let e=Object.values(r).filter(e=>"WorkspaceLocationEntry"===e.__typename),t=(0,eR.p)(n);return eC(e).filter(e=>{let{repoAddress:n}=e;return t.has((0,eb.FC)(n))})},[r,n]),[y,g]=(0,m.m)({queryKey:"selection",defaults:{selection:""},behavior:"push"}),v=(0,h.useMemo)(()=>x.flatMap(e=>e.jobs),[x]),b=(0,h.useMemo)(()=>(0,f.X)(v,y).all,[v,y]),w=(0,h.useMemo)(()=>x.filter(e=>Array.from(b).some(n=>n.repo.name===e.repoAddress.name&&n.repo.location===e.repoAddress.location)).map(e=>(0,a._)((0,l._)({},e),{jobs:e.jobs.filter(e=>b.has(e))})).filter(e=>!!e.jobs.length),[x,b]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.a,{padding:{horizontal:24,vertical:12},border:"bottom",children:(0,s.jsx)(j.e,{items:v,value:y,onChange:g})}),t&&!o?(0,s.jsx)(i.a,{padding:64,flex:{direction:"row",justifyContent:"center"},children:(0,s.jsx)(p.V,{label:"Loading jobs…"})}):t?(0,s.jsx)(i.a,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(i.a,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(d.y,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:c.XN()},children:"Loading jobs…"})]})}):w.length?(0,s.jsx)(ew,{repos:w}):(0,s.jsx)(i.a,{padding:{top:20},children:(0,s.jsx)(u.I,{icon:"search",title:"No jobs",description:x.length?"No jobs were found that match your filters":"No jobs were found in your definitions"})})]})},eC=e=>{let n=e.map(e=>e.locationOrLoadError),t=[];for(let e of n)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let n of e.repositories){let{name:s,pipelines:i}=n,r=(0,ek.t8)(s,e.name),o=i.filter(e=>{let{name:n}=e;return!(0,x.$D)(n)}).map(e=>(0,a._)((0,l._)({},e),{repo:{name:r.name,location:r.location}}));o.length>0&&t.push({repoAddress:r,jobs:o})}return(0,e_.K)(t)};var eS=t(10570),eE=t(20881);let eN=()=>((0,eS.b7)(),(0,eE.r)("Jobs"),(0,s.jsxs)(i.a,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(r.z,{title:(0,s.jsx)(o.M7,{children:"Jobs"})}),(0,s.jsx)(eI,{})]})),eL=eN}}]);
//# sourceMappingURL=8028.4169d9eb43201f1d.js.map