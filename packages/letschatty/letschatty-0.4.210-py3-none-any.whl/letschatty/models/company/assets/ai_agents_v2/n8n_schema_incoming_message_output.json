{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "description": "MANDATORY output structure for AI agent responses to incoming messages. You must always provide your reasoning and response decision.",
  "properties": {
    "action": {
      "type": "string",
      "description": "The response action to take based on user message analysis",
      "enum": ["send", "skip", "suggest"]
    },
    "messages": {
      "type": "array",
      "description": "Array of message strings to send to the customer. Required for send/suggest actions, empty array for skip action.",
      "items": {
        "type": "string",
        "description": "Message content to send to the customer"
      }
    },
    "chain_of_thought": {
      "type": "object",
      "description": "REQUIRED: Your reasoning process and response decision explanation",
      "properties": {
        "trigger": {
          "type": "string",
          "description": "Type of event triggering this response decision",
          "enum": ["user_message"]
        },
        "trigger_id": {
          "type": "string",
          "description": "ID of the user message that triggered this response evaluation"
        },
        "chatty_ai_agent_id": {
          "type": "string",
          "description": "Your AI agent identifier"
        },
        "chain_of_thought": {
          "type": "string",
          "description": "Your detailed reasoning explaining why you chose this response action, considering user intent, conversation context, and business objectives"
        },
        "title": {
          "type": "string",
          "description": "Short preview title summarizing your response decision (e.g., 'Answering pricing question', 'Suggesting human handoff', 'Skipping - not our domain')"
        }
      },
      "required": [
        "trigger",
        "trigger_id",
        "chatty_ai_agent_id",
        "chain_of_thought",
        "title"
      ],
      "additionalProperties": false
    }
  },
  "required": ["action", "messages", "chain_of_thought"],
  "additionalProperties": false
}
